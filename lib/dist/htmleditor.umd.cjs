(function(B,h){typeof exports=="object"&&typeof module<"u"?h(exports,require("react"),require("uuid"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","uuid","react-dom"],h):(B=typeof globalThis<"u"?globalThis:B||self,h(B.HTMLEditor={},B.React,B.uuid,B.ReactDOM))})(this,(function(B,h,Ye,Cn){"use strict";function wn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ne={exports:{}},xe={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vt;function On(){if(vt)return xe;vt=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:e,type:n,key:o,ref:i!==void 0?i:null,props:a}}return xe.Fragment=t,xe.jsx=r,xe.jsxs=r,xe}var Ae={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xt;function Nn(){return xt||(xt=1,process.env.NODE_ENV!=="production"&&(function(){function e(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===oe?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case I:return"Fragment";case S:return"Profiler";case T:return"StrictMode";case m:return"Suspense";case w:return"SuspenseList";case ne:return"Activity"}if(typeof u=="object")switch(typeof u.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),u.$$typeof){case _:return"Portal";case E:return u.displayName||"Context";case C:return(u._context.displayName||"Context")+".Consumer";case c:var k=u.render;return u=u.displayName,u||(u=k.displayName||k.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case j:return k=u.displayName||null,k!==null?k:e(u.type)||"Memo";case W:k=u._payload,u=u._init;try{return e(u(k))}catch{}}return null}function t(u){return""+u}function r(u){try{t(u);var k=!1}catch{k=!0}if(k){k=console;var R=k.error,M=typeof Symbol=="function"&&Symbol.toStringTag&&u[Symbol.toStringTag]||u.constructor.name||"Object";return R.call(k,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",M),t(u)}}function n(u){if(u===I)return"<>";if(typeof u=="object"&&u!==null&&u.$$typeof===W)return"<...>";try{var k=e(u);return k?"<"+k+">":"<...>"}catch{return"<...>"}}function i(){var u=Q.A;return u===null?null:u.getOwner()}function a(){return Error("react-stack-top-frame")}function o(u){if(L.call(u,"key")){var k=Object.getOwnPropertyDescriptor(u,"key").get;if(k&&k.isReactWarning)return!1}return u.key!==void 0}function s(u,k){function R(){X||(X=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",k))}R.isReactWarning=!0,Object.defineProperty(u,"key",{get:R,configurable:!0})}function p(){var u=e(this.type);return J[u]||(J[u]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),u=this.props.ref,u!==void 0?u:null}function l(u,k,R,M,F,z){var D=R.ref;return u={$$typeof:A,type:u,key:k,props:R,_owner:M},(D!==void 0?D:null)!==null?Object.defineProperty(u,"ref",{enumerable:!1,get:p}):Object.defineProperty(u,"ref",{enumerable:!1,value:null}),u._store={},Object.defineProperty(u._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(u,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(u,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:F}),Object.defineProperty(u,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:z}),Object.freeze&&(Object.freeze(u.props),Object.freeze(u)),u}function d(u,k,R,M,F,z){var D=k.children;if(D!==void 0)if(M)if(U(D)){for(M=0;M<D.length;M++)f(D[M]);Object.freeze&&Object.freeze(D)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(D);if(L.call(k,"key")){D=e(u);var $=Object.keys(k).filter(function(G){return G!=="key"});M=0<$.length?"{key: someKey, "+$.join(": ..., ")+": ...}":"{key: someKey}",b[D+M]||($=0<$.length?"{"+$.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,M,D,$,D),b[D+M]=!0)}if(D=null,R!==void 0&&(r(R),D=""+R),o(k)&&(r(k.key),D=""+k.key),"key"in k){R={};for(var q in k)q!=="key"&&(R[q]=k[q])}else R=k;return D&&s(R,typeof u=="function"?u.displayName||u.name||"Unknown":u),l(u,D,R,i(),F,z)}function f(u){g(u)?u._store&&(u._store.validated=1):typeof u=="object"&&u!==null&&u.$$typeof===W&&(u._payload.status==="fulfilled"?g(u._payload.value)&&u._payload.value._store&&(u._payload.value._store.validated=1):u._store&&(u._store.validated=1))}function g(u){return typeof u=="object"&&u!==null&&u.$$typeof===A}var x=h,A=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),E=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),oe=Symbol.for("react.client.reference"),Q=x.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=Object.prototype.hasOwnProperty,U=Array.isArray,ee=console.createTask?console.createTask:function(){return null};x={react_stack_bottom_frame:function(u){return u()}};var X,J={},re=x.react_stack_bottom_frame.bind(x,a)(),se=ee(n(a)),b={};Ae.Fragment=I,Ae.jsx=function(u,k,R){var M=1e4>Q.recentlyCreatedOwnerStacks++;return d(u,k,R,!1,M?Error("react-stack-top-frame"):re,M?ee(n(u)):se)},Ae.jsxs=function(u,k,R){var M=1e4>Q.recentlyCreatedOwnerStacks++;return d(u,k,R,!0,M?Error("react-stack-top-frame"):re,M?ee(n(u)):se)}})()),Ae}var At;function Mn(){return At||(At=1,process.env.NODE_ENV==="production"?Ne.exports=On():Ne.exports=Nn()),Ne.exports}var y=Mn();const Ve=100,Ke=50,Xe=200,_t=5,Je=e=>e<Xe,Qe=e=>e>Ke,Rn=96,Me=e=>Math.round(e*Rn),Re={NORMAL:{name:"Normal",label:'Normal (1")',top:1,bottom:1,left:1,right:1},NARROW:{name:"Narrow",label:'Narrow (0.5")',top:.5,bottom:.5,left:.5,right:.5},MODERATE:{name:"Moderate",label:'Moderate (1" / 0.75")',top:1,bottom:1,left:.75,right:.75},WIDE:{name:"Wide",label:'Wide (1" / 2")',top:1,bottom:1,left:2,right:2},OFFICE_2003:{name:"Office 2003",label:'Office 2003 (1" / 1.25")',top:1,bottom:1,left:1.25,right:1.25}},ge="NORMAL",Pt=(e=ge)=>{const t=Re[e]||Re[ge];return{top:Me(t.top),bottom:Me(t.bottom),left:Me(t.left),right:Me(t.right)}},In=(e=ge)=>{const t=Pt(e);return t.top+t.bottom},Ln=()=>Object.keys(Re),Dn=e=>{const t=Re[e];return t?t.label:"Unknown"},ie={A4:{name:"A4",width:794,height:1123,widthMm:210,heightMm:297,widthIn:8.27,heightIn:11.69},Letter:{name:"Letter",width:816,height:1056,widthMm:216,heightMm:279,widthIn:8.5,heightIn:11},Legal:{name:"Legal",width:816,height:1344,widthMm:216,heightMm:356,widthIn:8.5,heightIn:14}},et="A4",Ie=e=>{const t=ie[e]||ie[et];return{width:t.width,height:t.height}},jn=e=>Object.keys(ie).includes(e),Bn=()=>Object.keys(ie),_e=et,me="<p><br></p>",Hn="continuous",Pe=(e,t=_e)=>({id:Ye.v4(),index:e,size:t,content:me,images:[],isBreakPoint:!1}),Le=e=>typeof e!="string"||e.trim()===""?me:e,kt=(e,t=_e)=>(e.length>0?e:[Pe(0,t)]).map((n,i)=>({id:n.id||Ye.v4(),index:i,size:n.size||t,content:Le(n.content),images:n.images||[],isBreakPoint:!!n.isBreakPoint})),$n=(e=_e)=>[{id:"page-0",pageNumber:1,top:0,height:Ie(e).height}],tt=(e={})=>{const t=new Date().toISOString(),r=e.pageSize||_e,n=kt(e.pages||[Pe(0,r)],r);return{id:Ye.v4(),title:e.title||"Untitled Document",createdAt:t,updatedAt:t,pageSize:r,pages:n,activePage:e.activePage&&e.activePage<n.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:n.length,editorMode:e.editorMode||Hn,continuousContent:e.continuousContent||me,pageBoundaries:e.pageBoundaries||$n(r),zoomLevel:e.zoomLevel||Ve,pageMargins:e.pageMargins||ge,undoStack:[],redoStack:[],canUndo:!1,canRedo:!1}},H={INITIALIZE_DOCUMENT:"INITIALIZE_DOCUMENT",UPDATE_TITLE:"UPDATE_TITLE",UPDATE_PAGE_CONTENT:"UPDATE_PAGE_CONTENT",UPDATE_PAGES:"UPDATE_PAGES",ADD_PAGE:"ADD_PAGE",DELETE_PAGE:"DELETE_PAGE",SET_ACTIVE_PAGE:"SET_ACTIVE_PAGE",UPDATE_PAGE_SIZE:"UPDATE_PAGE_SIZE",RESET_DOCUMENT:"RESET_DOCUMENT",UPDATE_CONTINUOUS_CONTENT:"UPDATE_CONTINUOUS_CONTENT",UPDATE_PAGE_BOUNDARIES:"UPDATE_PAGE_BOUNDARIES",ADD_PAGE_BREAK:"ADD_PAGE_BREAK",REMOVE_PAGE_BREAK:"REMOVE_PAGE_BREAK",SET_EDITOR_MODE:"SET_EDITOR_MODE",INSERT_PAGE_AT:"INSERT_PAGE_AT",MOVE_PAGE_TO:"MOVE_PAGE_TO",DUPLICATE_PAGE:"DUPLICATE_PAGE",SET_ZOOM_LEVEL:"SET_ZOOM_LEVEL",ZOOM_IN:"ZOOM_IN",ZOOM_OUT:"ZOOM_OUT",RESET_ZOOM:"RESET_ZOOM",UPDATE_PAGE_MARGINS:"UPDATE_PAGE_MARGINS",RECORD_OPERATION:"RECORD_OPERATION",UNDO:"UNDO",REDO:"REDO",CLEAR_UNDO_REDO:"CLEAR_UNDO_REDO"},nt=(e,t)=>{const r=new Date().toISOString();switch(t.type){case H.INITIALIZE_DOCUMENT:{const{initialContent:n=me,pageSize:i=_e}=t.payload||{},a={...Pe(0,i),content:Le(n)};return tt({title:e.title,pageSize:i,pages:[a]})}case H.UPDATE_TITLE:return{...e,title:t.payload,updatedAt:r};case H.UPDATE_PAGE_CONTENT:{const{pageIndex:n,content:i}=t.payload;if(n<0||n>=e.pages.length)return e;const a=[...e.pages];return a[n]={...a[n],content:Le(i)},{...e,pages:a,updatedAt:r}}case H.UPDATE_PAGES:{const n=Array.isArray(t.payload)?{pages:t.payload}:t.payload||{},i=kt(n.pages||[],e.pageSize),a=Array.isArray(n.pageBreaks)?n.pageBreaks:i.slice(0,-1).map((o,s)=>({id:`auto-break-${s}`,pageNumber:s+1}));return{...e,pages:i,activePage:Math.min(e.activePage,i.length-1),pageBreaks:a,totalPages:i.length,updatedAt:r}}case H.ADD_PAGE:{const n=typeof t.payload?.index=="number"?Math.min(Math.max(t.payload.index,0),e.pages.length):e.pages.length,i=[...e.pages];i.splice(n,0,Pe(n,e.pageSize));const a=i.map((s,p)=>({...s,index:p,size:e.pageSize})),o=a.slice(0,-1).map((s,p)=>({id:`auto-break-${p}`,pageNumber:p+1}));return{...e,pages:a,activePage:n,pageBreaks:o,totalPages:a.length,updatedAt:r}}case H.DELETE_PAGE:{const n=t.payload;if(e.pages.length<=1)return e;const i=[...e.pages];i.splice(n,1);const a=i.map((p,l)=>({...p,index:l,size:e.pageSize}));let o=e.activePage;o>=a.length?o=a.length-1:n<=o&&o>0&&(o-=1);const s=a.slice(0,-1).map((p,l)=>({id:`auto-break-${l}`,pageNumber:l+1}));return{...e,pages:a,activePage:o,pageBreaks:s,totalPages:a.length,updatedAt:r}}case H.SET_ACTIVE_PAGE:{const n=t.payload;if(n===e.activePage)return e;const i=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;return n<0||n>=i?e:{...e,activePage:n,updatedAt:r}}case H.UPDATE_PAGE_SIZE:{const n=t.payload;if(n===e.pageSize)return e;try{Ie(n)}catch{return console.warn(`Invalid page size: ${n}`),e}const i=e.pages.map((o,s)=>({...o,index:s,size:n})),a=i.slice(0,-1).map((o,s)=>({id:`auto-break-${s}`,pageNumber:s+1}));return{...e,pageSize:n,pages:i,pageBreaks:a,updatedAt:r}}case H.RESET_DOCUMENT:return tt();case H.UPDATE_CONTINUOUS_CONTENT:{const n=Le(t.payload);return n===e.continuousContent?e:{...e,continuousContent:n,updatedAt:r}}case H.UPDATE_PAGE_BOUNDARIES:{const n=Array.isArray(t.payload)?t.payload:[];if(n.length===e.pageBoundaries.length&&n.length>0&&n[0].id===e.pageBoundaries[0]?.id&&n[n.length-1].id===e.pageBoundaries[n.length-1]?.id)return e;const i=e.activePage>=n.length?Math.max(0,n.length-1):e.activePage;return{...e,pageBoundaries:n,totalPages:n.length,activePage:i,updatedAt:r}}case H.ADD_PAGE_BREAK:{const{position:n="end",pageIndex:i}=t.payload||{},a='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';let o=e.continuousContent;if(n==="end")o=o+a+"<p><br></p>";else if(typeof n=="number"){const s=o.substring(0,n),p=o.substring(n);o=s+a+p}else if(typeof i=="number"&&typeof document<"u"){const s=document.createElement("div");s.innerHTML=o;const p=s.querySelectorAll('page-break, [data-page-break="true"]');if(i===0&&p.length===0)o=o+a+"<p><br></p>";else if(i<p.length){const l=p[i],d=document.createElement("page-break");d.setAttribute("data-page-break","true"),d.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const f=document.createElement("p");f.innerHTML="<br>",l.parentNode.insertBefore(d,l.nextSibling),d.parentNode.insertBefore(f,d.nextSibling),o=s.innerHTML}else o=o+a+"<p><br></p>"}return{...e,continuousContent:o,updatedAt:r}}case H.REMOVE_PAGE_BREAK:{const{pageIndex:n}=t.payload||{};if(typeof n!="number"||typeof document>"u")return e;const i=document.createElement("div");i.innerHTML=e.continuousContent;const a=i.querySelectorAll('page-break, [data-page-break="true"]');return a[n]&&a[n].remove(),i.querySelectorAll('page-break, [data-page-break="true"]').forEach((s,p)=>{s.setAttribute("data-page-number",String(p+2))}),{...e,continuousContent:i.innerHTML,updatedAt:r}}case H.SET_EDITOR_MODE:{const n=t.payload;if(n===e.editorMode)return e;let i=e.continuousContent,a=e.pages;return n==="continuous"?i=e.pages.map(s=>s.content).filter(s=>s&&s!==me).join(`
`)||me:e.continuousContent&&e.continuousContent!==me&&(a=[{...Pe(0,e.pageSize),content:e.continuousContent}]),{...e,editorMode:n,continuousContent:i,pages:a,updatedAt:r}}case H.SET_ZOOM_LEVEL:{const n=t.payload;return n<Ke||n>Xe?(console.warn(`Invalid zoom level: ${n}. Must be between ${Ke} and ${Xe}.`),e):n===e.zoomLevel?e:{...e,zoomLevel:n,updatedAt:r}}case H.ZOOM_IN:{if(!Je(e.zoomLevel))return e;const n=e.zoomLevel+_t;return{...e,zoomLevel:n,updatedAt:r}}case H.ZOOM_OUT:{if(!Qe(e.zoomLevel))return e;const n=e.zoomLevel-_t;return{...e,zoomLevel:n,updatedAt:r}}case H.RESET_ZOOM:return e.zoomLevel===Ve?e:{...e,zoomLevel:Ve,updatedAt:r};case H.UPDATE_PAGE_MARGINS:{const n=t.payload;return n===e.pageMargins?e:{...e,pageMargins:n,updatedAt:r}}case H.RECORD_OPERATION:{const{operation:n,inverseOperation:i}=t.payload;return{...e,undoStack:[...e.undoStack,{operation:n,inverseOperation:i}],redoStack:[],canUndo:!0,canRedo:!1,updatedAt:r}}case H.UNDO:{if(e.undoStack.length===0)return e;const n=e.undoStack[e.undoStack.length-1],i=e.undoStack.slice(0,-1);let a=e;return n.inverseOperation&&(a=nt(e,n.inverseOperation)),{...a,undoStack:i,redoStack:[...e.redoStack,n],canUndo:i.length>0,canRedo:!0,updatedAt:r}}case H.REDO:{if(e.redoStack.length===0)return e;const n=e.redoStack[e.redoStack.length-1],i=e.redoStack.slice(0,-1);let a=e;return n.operation&&(a=nt(e,n.operation)),{...a,undoStack:[...e.undoStack,n],redoStack:i,canUndo:!0,canRedo:i.length>0,updatedAt:r}}case H.CLEAR_UNDO_REDO:return{...e,undoStack:[],redoStack:[],canUndo:!1,canRedo:!1,updatedAt:r};case"IMAGE_ALIGN":{const{element:n,state:i}=t.payload;return n&&i&&(n.style.float=i.float,n.style.margin=i.margin,n.style.display=i.display,i.width&&(n.style.width=i.width),i.height&&(n.style.height=i.height)),e}case"IMAGE_DELETE":{const{element:n}=t.payload;return n&&n.parentNode&&n.parentNode.removeChild(n),e}case"IMAGE_REINSERT":{const{state:n}=t.payload;return n&&n.parent&&n.element&&(n.nextSibling?n.parent.insertBefore(n.element,n.nextSibling):n.parent.appendChild(n.element)),e}case"IMAGE_ASPECT_RATIO":return e;case"IMAGE_RESIZE":{const{element:n,state:i}=t.payload;return n&&i&&(i.width&&(n.style.width=i.width),i.height&&(n.style.height=i.height)),e}default:return e}},St=h.createContext(null),zn=({children:e,initialState:t={}})=>{const[r,n]=h.useReducer(nt,tt(t)),i=h.useMemo(()=>({initializeDocument:o=>n({type:H.INITIALIZE_DOCUMENT,payload:o}),updateTitle:o=>n({type:H.UPDATE_TITLE,payload:o}),updatePageContent:o=>n({type:H.UPDATE_PAGE_CONTENT,payload:o}),updatePages:o=>n({type:H.UPDATE_PAGES,payload:o}),addPage:o=>n({type:H.ADD_PAGE,payload:o}),deletePage:o=>n({type:H.DELETE_PAGE,payload:o}),setActivePage:o=>n({type:H.SET_ACTIVE_PAGE,payload:o}),updatePageSize:o=>n({type:H.UPDATE_PAGE_SIZE,payload:o}),resetDocument:()=>n({type:H.RESET_DOCUMENT}),updateContinuousContent:o=>n({type:H.UPDATE_CONTINUOUS_CONTENT,payload:o}),updatePageBoundaries:o=>n({type:H.UPDATE_PAGE_BOUNDARIES,payload:o}),addPageBreak:o=>n({type:H.ADD_PAGE_BREAK,payload:o}),removePageBreak:o=>n({type:H.REMOVE_PAGE_BREAK,payload:o}),setEditorMode:o=>n({type:H.SET_EDITOR_MODE,payload:o}),insertPageAt:o=>n({type:H.INSERT_PAGE_AT,payload:o}),movePageTo:o=>n({type:H.MOVE_PAGE_TO,payload:o}),duplicatePage:o=>n({type:H.DUPLICATE_PAGE,payload:o}),setZoomLevel:o=>n({type:H.SET_ZOOM_LEVEL,payload:o}),zoomIn:()=>n({type:H.ZOOM_IN}),zoomOut:()=>n({type:H.ZOOM_OUT}),resetZoom:()=>n({type:H.RESET_ZOOM}),updatePageMargins:o=>n({type:H.UPDATE_PAGE_MARGINS,payload:o}),recordOperation:(o,s)=>n({type:H.RECORD_OPERATION,payload:{operation:o,inverseOperation:s}}),undo:()=>n({type:H.UNDO}),redo:()=>n({type:H.REDO}),clearUndoRedo:()=>n({type:H.CLEAR_UNDO_REDO})}),[]),a=h.useMemo(()=>({state:r,actions:i,dispatch:n}),[r,i]);return y.jsx(St.Provider,{value:a,children:e})},rt=()=>{const e=h.useContext(St);if(!e)throw new Error("useDocument must be used within a DocumentProvider");return e},ot=()=>{const{state:e}=rt();return e},Te=()=>{const{actions:e}=rt();return e};var De={exports:{}},je={exports:{}},V={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct;function Fn(){if(Ct)return V;Ct=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,l=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,g=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,A=e?Symbol.for("react.lazy"):60116,_=e?Symbol.for("react.block"):60121,I=e?Symbol.for("react.fundamental"):60117,T=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function C(c){if(typeof c=="object"&&c!==null){var m=c.$$typeof;switch(m){case t:switch(c=c.type,c){case p:case l:case n:case a:case i:case f:return c;default:switch(c=c&&c.$$typeof,c){case s:case d:case A:case x:case o:return c;default:return m}}case r:return m}}}function E(c){return C(c)===l}return V.AsyncMode=p,V.ConcurrentMode=l,V.ContextConsumer=s,V.ContextProvider=o,V.Element=t,V.ForwardRef=d,V.Fragment=n,V.Lazy=A,V.Memo=x,V.Portal=r,V.Profiler=a,V.StrictMode=i,V.Suspense=f,V.isAsyncMode=function(c){return E(c)||C(c)===p},V.isConcurrentMode=E,V.isContextConsumer=function(c){return C(c)===s},V.isContextProvider=function(c){return C(c)===o},V.isElement=function(c){return typeof c=="object"&&c!==null&&c.$$typeof===t},V.isForwardRef=function(c){return C(c)===d},V.isFragment=function(c){return C(c)===n},V.isLazy=function(c){return C(c)===A},V.isMemo=function(c){return C(c)===x},V.isPortal=function(c){return C(c)===r},V.isProfiler=function(c){return C(c)===a},V.isStrictMode=function(c){return C(c)===i},V.isSuspense=function(c){return C(c)===f},V.isValidElementType=function(c){return typeof c=="string"||typeof c=="function"||c===n||c===l||c===a||c===i||c===f||c===g||typeof c=="object"&&c!==null&&(c.$$typeof===A||c.$$typeof===x||c.$$typeof===o||c.$$typeof===s||c.$$typeof===d||c.$$typeof===I||c.$$typeof===T||c.$$typeof===S||c.$$typeof===_)},V.typeOf=C,V}var K={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wt;function Un(){return wt||(wt=1,process.env.NODE_ENV!=="production"&&(function(){var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,l=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,g=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,A=e?Symbol.for("react.lazy"):60116,_=e?Symbol.for("react.block"):60121,I=e?Symbol.for("react.fundamental"):60117,T=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function C(O){return typeof O=="string"||typeof O=="function"||O===n||O===l||O===a||O===i||O===f||O===g||typeof O=="object"&&O!==null&&(O.$$typeof===A||O.$$typeof===x||O.$$typeof===o||O.$$typeof===s||O.$$typeof===d||O.$$typeof===I||O.$$typeof===T||O.$$typeof===S||O.$$typeof===_)}function E(O){if(typeof O=="object"&&O!==null){var ce=O.$$typeof;switch(ce){case t:var be=O.type;switch(be){case p:case l:case n:case a:case i:case f:return be;default:var ve=be&&be.$$typeof;switch(ve){case s:case d:case A:case x:case o:return ve;default:return ce}}case r:return ce}}}var c=p,m=l,w=s,j=o,W=t,ne=d,oe=n,Q=A,L=x,U=r,ee=a,X=i,J=f,re=!1;function se(O){return re||(re=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),b(O)||E(O)===p}function b(O){return E(O)===l}function u(O){return E(O)===s}function k(O){return E(O)===o}function R(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function M(O){return E(O)===d}function F(O){return E(O)===n}function z(O){return E(O)===A}function D(O){return E(O)===x}function $(O){return E(O)===r}function q(O){return E(O)===a}function G(O){return E(O)===i}function ae(O){return E(O)===f}K.AsyncMode=c,K.ConcurrentMode=m,K.ContextConsumer=w,K.ContextProvider=j,K.Element=W,K.ForwardRef=ne,K.Fragment=oe,K.Lazy=Q,K.Memo=L,K.Portal=U,K.Profiler=ee,K.StrictMode=X,K.Suspense=J,K.isAsyncMode=se,K.isConcurrentMode=b,K.isContextConsumer=u,K.isContextProvider=k,K.isElement=R,K.isForwardRef=M,K.isFragment=F,K.isLazy=z,K.isMemo=D,K.isPortal=$,K.isProfiler=q,K.isStrictMode=G,K.isSuspense=ae,K.isValidElementType=C,K.typeOf=E})()),K}var Ot;function Nt(){return Ot||(Ot=1,process.env.NODE_ENV==="production"?je.exports=Fn():je.exports=Un()),je.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var at,Mt;function Gn(){if(Mt)return at;Mt=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function i(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var o={},s=0;s<10;s++)o["_"+String.fromCharCode(s)]=s;var p=Object.getOwnPropertyNames(o).map(function(d){return o[d]});if(p.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(d){l[d]=d}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return at=i()?Object.assign:function(a,o){for(var s,p=n(a),l,d=1;d<arguments.length;d++){s=Object(arguments[d]);for(var f in s)t.call(s,f)&&(p[f]=s[f]);if(e){l=e(s);for(var g=0;g<l.length;g++)r.call(s,l[g])&&(p[l[g]]=s[l[g]])}}return p},at}var st,Rt;function it(){if(Rt)return st;Rt=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return st=e,st}var ct,It;function Lt(){return It||(It=1,ct=Function.call.bind(Object.prototype.hasOwnProperty)),ct}var lt,Dt;function qn(){if(Dt)return lt;Dt=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var t=it(),r={},n=Lt();e=function(a){var o="Warning: "+a;typeof console<"u"&&console.error(o);try{throw new Error(o)}catch{}}}function i(a,o,s,p,l){if(process.env.NODE_ENV!=="production"){for(var d in a)if(n(a,d)){var f;try{if(typeof a[d]!="function"){var g=Error((p||"React class")+": "+s+" type `"+d+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[d]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw g.name="Invariant Violation",g}f=a[d](o,d,p,s,null,t)}catch(A){f=A}if(f&&!(f instanceof Error)&&e((p||"React class")+": type specification of "+s+" `"+d+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof f+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),f instanceof Error&&!(f.message in r)){r[f.message]=!0;var x=l?l():"";e("Failed "+s+" type: "+f.message+(x??""))}}}}return i.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(r={})},lt=i,lt}var ut,jt;function Wn(){if(jt)return ut;jt=1;var e=Nt(),t=Gn(),r=it(),n=Lt(),i=qn(),a=function(){};process.env.NODE_ENV!=="production"&&(a=function(s){var p="Warning: "+s;typeof console<"u"&&console.error(p);try{throw new Error(p)}catch{}});function o(){return null}return ut=function(s,p){var l=typeof Symbol=="function"&&Symbol.iterator,d="@@iterator";function f(b){var u=b&&(l&&b[l]||b[d]);if(typeof u=="function")return u}var g="<<anonymous>>",x={array:T("array"),bigint:T("bigint"),bool:T("boolean"),func:T("function"),number:T("number"),object:T("object"),string:T("string"),symbol:T("symbol"),any:S(),arrayOf:C,element:E(),elementType:c(),instanceOf:m,node:ne(),objectOf:j,oneOf:w,oneOfType:W,shape:Q,exact:L};function A(b,u){return b===u?b!==0||1/b===1/u:b!==b&&u!==u}function _(b,u){this.message=b,this.data=u&&typeof u=="object"?u:{},this.stack=""}_.prototype=Error.prototype;function I(b){if(process.env.NODE_ENV!=="production")var u={},k=0;function R(F,z,D,$,q,G,ae){if($=$||g,G=G||D,ae!==r){if(p){var O=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw O.name="Invariant Violation",O}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var ce=$+":"+D;!u[ce]&&k<3&&(a("You are manually calling a React.PropTypes validation function for the `"+G+"` prop on `"+$+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),u[ce]=!0,k++)}}return z[D]==null?F?z[D]===null?new _("The "+q+" `"+G+"` is marked as required "+("in `"+$+"`, but its value is `null`.")):new _("The "+q+" `"+G+"` is marked as required in "+("`"+$+"`, but its value is `undefined`.")):null:b(z,D,$,q,G)}var M=R.bind(null,!1);return M.isRequired=R.bind(null,!0),M}function T(b){function u(k,R,M,F,z,D){var $=k[R],q=X($);if(q!==b){var G=J($);return new _("Invalid "+F+" `"+z+"` of type "+("`"+G+"` supplied to `"+M+"`, expected ")+("`"+b+"`."),{expectedType:b})}return null}return I(u)}function S(){return I(o)}function C(b){function u(k,R,M,F,z){if(typeof b!="function")return new _("Property `"+z+"` of component `"+M+"` has invalid PropType notation inside arrayOf.");var D=k[R];if(!Array.isArray(D)){var $=X(D);return new _("Invalid "+F+" `"+z+"` of type "+("`"+$+"` supplied to `"+M+"`, expected an array."))}for(var q=0;q<D.length;q++){var G=b(D,q,M,F,z+"["+q+"]",r);if(G instanceof Error)return G}return null}return I(u)}function E(){function b(u,k,R,M,F){var z=u[k];if(!s(z)){var D=X(z);return new _("Invalid "+M+" `"+F+"` of type "+("`"+D+"` supplied to `"+R+"`, expected a single ReactElement."))}return null}return I(b)}function c(){function b(u,k,R,M,F){var z=u[k];if(!e.isValidElementType(z)){var D=X(z);return new _("Invalid "+M+" `"+F+"` of type "+("`"+D+"` supplied to `"+R+"`, expected a single ReactElement type."))}return null}return I(b)}function m(b){function u(k,R,M,F,z){if(!(k[R]instanceof b)){var D=b.name||g,$=se(k[R]);return new _("Invalid "+F+" `"+z+"` of type "+("`"+$+"` supplied to `"+M+"`, expected ")+("instance of `"+D+"`."))}return null}return I(u)}function w(b){if(!Array.isArray(b))return process.env.NODE_ENV!=="production"&&(arguments.length>1?a("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):a("Invalid argument supplied to oneOf, expected an array.")),o;function u(k,R,M,F,z){for(var D=k[R],$=0;$<b.length;$++)if(A(D,b[$]))return null;var q=JSON.stringify(b,function(ae,O){var ce=J(O);return ce==="symbol"?String(O):O});return new _("Invalid "+F+" `"+z+"` of value `"+String(D)+"` "+("supplied to `"+M+"`, expected one of "+q+"."))}return I(u)}function j(b){function u(k,R,M,F,z){if(typeof b!="function")return new _("Property `"+z+"` of component `"+M+"` has invalid PropType notation inside objectOf.");var D=k[R],$=X(D);if($!=="object")return new _("Invalid "+F+" `"+z+"` of type "+("`"+$+"` supplied to `"+M+"`, expected an object."));for(var q in D)if(n(D,q)){var G=b(D,q,M,F,z+"."+q,r);if(G instanceof Error)return G}return null}return I(u)}function W(b){if(!Array.isArray(b))return process.env.NODE_ENV!=="production"&&a("Invalid argument supplied to oneOfType, expected an instance of array."),o;for(var u=0;u<b.length;u++){var k=b[u];if(typeof k!="function")return a("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+re(k)+" at index "+u+"."),o}function R(M,F,z,D,$){for(var q=[],G=0;G<b.length;G++){var ae=b[G],O=ae(M,F,z,D,$,r);if(O==null)return null;O.data&&n(O.data,"expectedType")&&q.push(O.data.expectedType)}var ce=q.length>0?", expected one of type ["+q.join(", ")+"]":"";return new _("Invalid "+D+" `"+$+"` supplied to "+("`"+z+"`"+ce+"."))}return I(R)}function ne(){function b(u,k,R,M,F){return U(u[k])?null:new _("Invalid "+M+" `"+F+"` supplied to "+("`"+R+"`, expected a ReactNode."))}return I(b)}function oe(b,u,k,R,M){return new _((b||"React class")+": "+u+" type `"+k+"."+R+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+M+"`.")}function Q(b){function u(k,R,M,F,z){var D=k[R],$=X(D);if($!=="object")return new _("Invalid "+F+" `"+z+"` of type `"+$+"` "+("supplied to `"+M+"`, expected `object`."));for(var q in b){var G=b[q];if(typeof G!="function")return oe(M,F,z,q,J(G));var ae=G(D,q,M,F,z+"."+q,r);if(ae)return ae}return null}return I(u)}function L(b){function u(k,R,M,F,z){var D=k[R],$=X(D);if($!=="object")return new _("Invalid "+F+" `"+z+"` of type `"+$+"` "+("supplied to `"+M+"`, expected `object`."));var q=t({},k[R],b);for(var G in q){var ae=b[G];if(n(b,G)&&typeof ae!="function")return oe(M,F,z,G,J(ae));if(!ae)return new _("Invalid "+F+" `"+z+"` key `"+G+"` supplied to `"+M+"`.\nBad object: "+JSON.stringify(k[R],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(b),null,"  "));var O=ae(D,G,M,F,z+"."+G,r);if(O)return O}return null}return I(u)}function U(b){switch(typeof b){case"number":case"string":case"undefined":return!0;case"boolean":return!b;case"object":if(Array.isArray(b))return b.every(U);if(b===null||s(b))return!0;var u=f(b);if(u){var k=u.call(b),R;if(u!==b.entries){for(;!(R=k.next()).done;)if(!U(R.value))return!1}else for(;!(R=k.next()).done;){var M=R.value;if(M&&!U(M[1]))return!1}}else return!1;return!0;default:return!1}}function ee(b,u){return b==="symbol"?!0:u?u["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&u instanceof Symbol:!1}function X(b){var u=typeof b;return Array.isArray(b)?"array":b instanceof RegExp?"object":ee(u,b)?"symbol":u}function J(b){if(typeof b>"u"||b===null)return""+b;var u=X(b);if(u==="object"){if(b instanceof Date)return"date";if(b instanceof RegExp)return"regexp"}return u}function re(b){var u=J(b);switch(u){case"array":case"object":return"an "+u;case"boolean":case"date":case"regexp":return"a "+u;default:return u}}function se(b){return!b.constructor||!b.constructor.name?g:b.constructor.name}return x.checkPropTypes=i,x.resetWarningCache=i.resetWarningCache,x.PropTypes=x,x},ut}var dt,Bt;function Zn(){if(Bt)return dt;Bt=1;var e=it();function t(){}function r(){}return r.resetWarningCache=t,dt=function(){function n(o,s,p,l,d,f){if(f!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}n.isRequired=n;function i(){return n}var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return a.PropTypes=a,a},dt}var Ht;function Yn(){if(Ht)return De.exports;if(Ht=1,process.env.NODE_ENV!=="production"){var e=Nt(),t=!0;De.exports=Wn()(e.isElement,t)}else De.exports=Zn()();return De.exports}var Vn=Yn();const v=wn(Vn),ft={"7.5pt":{pt:7.5,px:10,label:"7.5"},"9pt":{pt:9,px:12,label:"9"},"10pt":{pt:10,px:13,label:"10"},"11pt":{pt:11,px:15,label:"11"},"12pt":{pt:12,px:16,label:"12"},"14pt":{pt:14,px:19,label:"14"},"16pt":{pt:16,px:21,label:"16"},"18pt":{pt:18,px:24,label:"18"},"20pt":{pt:20,px:27,label:"20"},"22pt":{pt:22,px:29,label:"22"},"24pt":{pt:24,px:32,label:"24"},"26pt":{pt:26,px:35,label:"26"},"28pt":{pt:28,px:37,label:"28"},"36pt":{pt:36,px:48,label:"36"},"48pt":{pt:48,px:64,label:"48"},"72pt":{pt:72,px:96,label:"72"}},$t=[{value:"10px",label:"7.5",pt:7.5},{value:"12px",label:"9",pt:9},{value:"13px",label:"10",pt:10},{value:"15px",label:"11",pt:11},{value:"16px",label:"12",pt:12},{value:"19px",label:"14",pt:14},{value:"21px",label:"16",pt:16},{value:"24px",label:"18",pt:18},{value:"27px",label:"20",pt:20},{value:"32px",label:"24",pt:24},{value:"37px",label:"28",pt:28},{value:"48px",label:"36",pt:36},{value:"64px",label:"48",pt:48},{value:"96px",label:"72",pt:72}],ke="16px",zt=e=>Math.round(e*96/72),Ft=e=>Math.round(e*72/96*2)/2,Kn=e=>{const t=Object.values(ft).find(r=>r.pt===e);return t?`${t.px}px`:`${zt(e)}px`},Xn=e=>{const t=parseInt(e),r=Object.values(ft).find(n=>n.px===t);return r?r.pt:Ft(t)},Jn=e=>{if(!e)return!1;if(e.endsWith("px")){const t=parseInt(e);return t>=8&&t<=144}if(e.endsWith("pt")){const t=parseFloat(e);return t>=6&&t<=108}return!1},fe={minWidth:50,minHeight:50,maxWidth:800,maxHeight:600,aspectRatio:!0,preserveAspectRatio:!0,defaultWidth:300,defaultHeight:200},P={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};function Qn({handler:e,startX:t,startY:r,currentX:n,currentY:i,startWidth:a,startHeight:o,options:s=fe}){const p=n-t,l=i-r;let d=a,f=o;switch(e){case P.TOP_LEFT:d=Math.max(s.minWidth,a-p),f=Math.max(s.minHeight,o-l);break;case P.TOP_RIGHT:d=Math.max(s.minWidth,a+p),f=Math.max(s.minHeight,o-l);break;case P.BOTTOM_LEFT:d=Math.max(s.minWidth,a-p),f=Math.max(s.minHeight,o+l);break;case P.BOTTOM_RIGHT:d=Math.max(s.minWidth,a+p),f=Math.max(s.minHeight,o+l);break;case P.TOP:f=Math.max(s.minHeight,o-l);break;case P.BOTTOM:f=Math.max(s.minHeight,o+l);break;case P.LEFT:d=Math.max(s.minWidth,a-p);break;case P.RIGHT:d=Math.max(s.minWidth,a+p);break;default:return{width:d,height:f}}if(s.preserveAspectRatio&&s.aspectRatio){const g=a/o;[P.TOP_LEFT,P.TOP_RIGHT,P.BOTTOM_LEFT,P.BOTTOM_RIGHT].includes(e)?d/g>f?f=Math.max(s.minHeight,d/g):d=Math.max(s.minWidth,f*g):[P.TOP,P.BOTTOM].includes(e)?d=f*g:[P.LEFT,P.RIGHT].includes(e)&&(f=d/g)}return s.maxWidth&&d>s.maxWidth&&(d=s.maxWidth,s.preserveAspectRatio&&s.aspectRatio&&(f=d/(a/o))),s.maxHeight&&f>s.maxHeight&&(f=s.maxHeight,s.preserveAspectRatio&&s.aspectRatio&&(d=f*(a/o))),d=Math.max(s.minWidth,d),f=Math.max(s.minHeight,f),{width:Math.round(d),height:Math.round(f)}}function de(e){return e?!!(e.tagName==="IMG"||e.tagName==="DIV"&&e.style.backgroundImage&&e.style.backgroundImage!=="none"):!1}function er(e){return de(e)?{width:e.offsetWidth,height:e.offsetHeight}:{width:0,height:0}}function tr(e,{width:t,height:r}){de(e)&&(e.tagName==="IMG"?(e.style.width=`${t}px`,e.style.height=`${r}px`,e.width=t,e.height=r):e.tagName==="DIV"&&(e.style.width=`${t}px`,e.style.height=`${r}px`))}function gt(e,t=fe){if(!de(e))return null;const r=document.createElement("div");r.className="image-resize-overlay",r.style.position="fixed",r.style.zIndex="1000",r.style.pointerEvents="none";const n=e.getBoundingClientRect();return r.style.top=`${n.top}px`,r.style.left=`${n.left}px`,r.style.width=`${n.width}px`,r.style.height=`${n.height}px`,Object.values(P).forEach(a=>{const o=document.createElement("div");o.className=`resize-handler resize-handler-${a}`,o.dataset.handler=a,o.style.position="absolute",o.style.width="10px",o.style.height="10px",o.style.backgroundColor="#007bff",o.style.border="2px solid white",o.style.borderRadius="50%",o.style.boxShadow="0 0 3px rgba(0,0,0,0.3)",o.style.cursor=nr(a),o.style.pointerEvents="all",Ut(o,a,n.width,n.height),r.appendChild(o)}),r}function nr(e){switch(e){case P.TOP_LEFT:case P.BOTTOM_RIGHT:return"nwse-resize";case P.TOP_RIGHT:case P.BOTTOM_LEFT:return"nesw-resize";case P.TOP:case P.BOTTOM:return"ns-resize";case P.LEFT:case P.RIGHT:return"ew-resize";default:return"default"}}function Ut(e,t,r,n){switch(t){case P.TOP_LEFT:e.style.top="-5px",e.style.left="-5px";break;case P.TOP_RIGHT:e.style.top="-5px",e.style.right="-5px";break;case P.BOTTOM_LEFT:e.style.bottom="-5px",e.style.left="-5px";break;case P.BOTTOM_RIGHT:e.style.bottom="-5px",e.style.right="-5px";break;case P.TOP:e.style.top="-5px",e.style.left=`${r/2+-5}px`;break;case P.BOTTOM:e.style.bottom="-5px",e.style.left=`${r/2+-5}px`;break;case P.LEFT:e.style.top=`${n/2+-5}px`,e.style.left="-5px";break;case P.RIGHT:e.style.top=`${n/2+-5}px`,e.style.right="-5px";break}}function Se(e,t){if(!e||!t)return;const r=t.getBoundingClientRect();e.style.top=`${r.top}px`,e.style.left=`${r.left}px`,e.style.width=`${r.width}px`,e.style.height=`${r.height}px`,e.querySelectorAll(".resize-handler").forEach(i=>{const a=i.dataset.handler;Ut(i,a,r.width,r.height)})}function ye(e){e&&e.parentNode&&e.parentNode.removeChild(e)}const rr={"10px":"1","12px":"2","13px":"2","15px":"3","16px":"3","19px":"4","21px":"4","24px":"5","27px":"5","32px":"6","37px":"6","48px":"6","64px":"7","96px":"7"},Gt={bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:ke,headingLevel:"p",imageSelected:!1,imageResizeOptions:fe,preserveAspectRatio:!0},qt=()=>{const[e,t]=h.useState(Gt),r=Te(),n=h.useCallback(T=>{try{const S=window.getSelection();if(!S||S.rangeCount===0)return!1;const C=S.getRangeAt(0);if(!C.toString())return t(c=>({...c,fontFamily:T})),!1;try{const c=document.createElement("span");c.style.fontFamily=T;const m=C.extractContents();return c.appendChild(m),C.insertNode(c),C.selectNodeContents(c),S.removeAllRanges(),S.addRange(C),t(w=>({...w,fontFamily:T})),!0}catch{return document.execCommand("fontName",!1,T),t(m=>({...m,fontFamily:T})),!0}}catch(S){return console.warn("[useFormatting] Font family change failed:",S),!1}},[]),i=h.useCallback(T=>{try{const S=window.getSelection();if(!S||S.rangeCount===0)return!1;const C=S.getRangeAt(0);if(!C.toString())return t(c=>({...c,fontSize:T})),!1;try{const c=document.createElement("span");c.style.fontSize=T;const m=C.extractContents();return c.appendChild(m),C.insertNode(c),C.selectNodeContents(c),S.removeAllRanges(),S.addRange(C),t(w=>({...w,fontSize:T})),!0}catch{const m=rr[T]||"3";return document.execCommand("fontSize",!1,m),t(w=>({...w,fontSize:T})),!0}}catch(S){return console.warn("[useFormatting] Font size change failed:",S),!1}},[]),a=h.useCallback(T=>{try{const S=window.getSelection();if(!S||S.rangeCount===0)return!1;const C=S.getRangeAt(0),E=C.toString(),m={justifyLeft:"left",justifyCenter:"center",justifyRight:"right",justifyFull:"justify"}[T];if(!m)return!1;if(!E){const j=C.startContainer,W=j.nodeType===Node.TEXT_NODE?j.parentElement:j,ne=Be(W)||ar();return ne&&(ne.style.textAlign=m,o(m)),!0}const w=or(C);if(w.length===0){const j=document.createElement("p");j.style.textAlign=m;const W=C.extractContents();j.appendChild(W),C.insertNode(j),C.selectNodeContents(j),S.removeAllRanges(),S.addRange(C)}else w.forEach(j=>{j.style.textAlign=m});return o(m),!0}catch(S){return console.warn("[useFormatting] Text alignment failed:",S),!1}},[]),o=h.useCallback(T=>{t(S=>({...S,alignLeft:T==="left",alignCenter:T==="center",alignRight:T==="right",alignJustify:T==="justify"}))},[]),s=h.useCallback((T,S=null)=>{try{if(T==="undo"){r.undo();return}if(T==="redo"){r.redo();return}if(typeof document.execCommand!="function"){console.warn("[useFormatting] execCommand not supported");return}if(T==="fontSize"){i(S);return}if(T==="fontName"){n(S);return}if(["justifyLeft","justifyCenter","justifyRight","justifyFull"].includes(T)){a(T);return}switch(document.execCommand(T,!1,S)||console.warn(`[useFormatting] Command "${T}" failed`),T){case"bold":case"italic":case"underline":case"strikethrough":case"justifyLeft":case"justifyCenter":case"justifyRight":case"justifyFull":case"fontName":break;case"formatBlock":t(E=>({...E,headingLevel:S}));break;default:break}}catch(C){console.warn(`[useFormatting] Error executing command "${T}":`,C)}},[i,n,r]),p=h.useRef(null),l=h.useRef(null),d=h.useRef(null),f=h.useRef(null),g=h.useRef(fe);h.useCallback(T=>{if(!de(T))return;p.current&&(ye(p.current),p.current=null),T.classList.add("selected");const S=gt(T);S&&(p.current=S,l.current=T,document.body.appendChild(S),t(C=>({...C,imageSelected:!0,preserveAspectRatio:g.current.preserveAspectRatio})))},[]);const x=h.useCallback(()=>{l.current&&(l.current.classList.remove("selected"),l.current=null),p.current&&(ye(p.current),p.current=null),d.current=null,f.current=null,t(T=>({...T,imageSelected:!1}))},[]),A=h.useCallback(()=>{const T=!g.current.preserveAspectRatio;g.current={...g.current,preserveAspectRatio:T,aspectRatio:T},t(S=>({...S,preserveAspectRatio:T}))},[]);h.useCallback((T,S,C)=>{l.current&&(d.current={x:S,y:C,width:l.current.offsetWidth,height:l.current.offsetHeight},f.current=T,document.body.classList.add("resize-in-progress"),document.body.style.cursor=sr(T))},[]),h.useCallback((T,S)=>{if(!l.current||!d.current||!f.current)return;const{x:C,y:E,width:c,height:m}=d.current,w=f.current,j=ir({handler:w,startX:C,startY:E,currentX:T,currentY:S,startWidth:c,startHeight:m,options:g.current});cr(l.current,j),p.current&&Se(p.current,l.current)},[]),h.useCallback(()=>{if(d.current=null,f.current=null,document.body.classList.remove("resize-in-progress"),document.body.style.cursor="",l.current){const T=new Event("input",{bubbles:!0,cancelable:!0});l.current.dispatchEvent(T)}},[]);const _=h.useCallback(()=>{try{const T=window.getSelection();if(!T||T.rangeCount===0)return;const S=T.getRangeAt(0),C=S.toString();let E=ke,c="Arial",m="p",w="left";if(C){const W=S.startContainer,ne=W.nodeType===Node.TEXT_NODE?W.parentElement:W;if(ne){const oe=window.getComputedStyle(ne),Q=oe.fontSize,L=oe.fontFamily;Q&&Q.endsWith("px")&&(E=Q),L&&L!=="serif"&&(c=L.split(",")[0].replace(/['"]/g,"").trim());const U=Be(ne);if(U){const ee=U.tagName?.toLowerCase();["h1","h2","h3","h4","h5","h6","p"].includes(ee)&&(m=ee);const J=window.getComputedStyle(U).textAlign;["left","center","right","justify"].includes(J)&&(w=J)}}}const j={bold:document.queryCommandState("bold"),italic:document.queryCommandState("italic"),underline:document.queryCommandState("underline"),strikethrough:document.queryCommandState("strikethrough"),alignLeft:w==="left",alignCenter:w==="center",alignRight:w==="right",alignJustify:w==="justify",fontFamily:c,fontSize:E,headingLevel:m};t(W=>({...W,...j}))}catch(T){console.warn("[useFormatting] Error updating format from selection:",T)}},[]),I=h.useCallback(()=>{x(),t(Gt)},[x]);return h.useEffect(()=>()=>{p.current&&ye(p.current)},[]),{currentFormat:e,formatText:s,resetFormat:I,updateCurrentFormatFromSelection:_,toggleAspectRatio:A}};function Be(e){let t=e;for(;t&&t!==document.body;){const r=t.tagName?.toLowerCase();if(["h1","h2","h3","h4","h5","h6","p"].includes(r))return t;if(t.contentEditable==="true"||t.contentEditable==="")break;t=t.parentElement}return null}function or(e){const t=[],r=e.startContainer,n=e.endContainer,i=Be(r.nodeType===Node.TEXT_NODE?r.parentElement:r),a=Be(n.nodeType===Node.TEXT_NODE?n.parentElement:n);if(i===a&&i)return[i];const o=document.createTreeWalker(e.commonAncestorContainer,NodeFilter.SHOW_ELEMENT,{acceptNode:p=>{const l=p.tagName?.toLowerCase();return["h1","h2","h3","h4","h5","h6","p"].includes(l)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let s=o.nextNode();for(;s;)e.intersectsNode(s)&&t.push(s),s=o.nextNode();return t}function ar(){try{const e=window.getSelection();if(!e||e.rangeCount===0)return null;const t=e.getRangeAt(0),r=document.createElement("p");return r.innerHTML="<br>",t.insertNode(r),t.selectNodeContents(r),t.collapse(!0),e.removeAllRanges(),e.addRange(t),r}catch(e){return console.warn("[useFormatting] Failed to create paragraph at cursor:",e),null}}function sr(e){switch(e){case P.TOP_LEFT:case P.BOTTOM_RIGHT:return"nwse-resize";case P.TOP_RIGHT:case P.BOTTOM_LEFT:return"nesw-resize";case RESIZE_HANDLRES.TOP:case P.BOTTOM:return"ns-resize";case P.LEFT:case P.RIGHT:return"ew-resize";default:return"default"}}function ir({handler:e,startX:t,startY:r,currentX:n,currentY:i,startWidth:a,startHeight:o,options:s=fe}){const p=n-t,l=i-r;let d=a,f=o;switch(e){case P.TOP_LEFT:d=Math.max(s.minWidth,a-p),f=Math.max(s.minHeight,o-l);break;case P.TOP_RIGHT:d=Math.max(s.minWidth,a+p),f=Math.max(s.minHeight,o-l);break;case P.BOTTOM_LEFT:d=Math.max(s.minWidth,a-p),f=Math.max(s.minHeight,o+l);break;case P.BOTTOM_RIGHT:d=Math.max(s.minWidth,a+p),f=Math.max(s.minHeight,o+l);break;case P.TOP:f=Math.max(s.minHeight,o-l);break;case P.BOTTOM:f=Math.max(s.minHeight,o+l);break;case P.LEFT:d=Math.max(s.minWidth,a-p);break;case P.RIGHT:d=Math.max(s.minWidth,a+p);break;default:return{width:d,height:f}}if(s.preserveAspectRatio&&s.aspectRatio){const g=a/o;[P.TOP_LEFT,P.TOP_RIGHT,P.BOTTOM_LEFT,P.BOTTOM_RIGHT].includes(e)?d/g>f?f=Math.max(s.minHeight,d/g):d=Math.max(s.minWidth,f*g):[P.TOP,P.BOTTOM].includes(e)?d=f*g:[P.LEFT,P.RIGHT].includes(e)&&(f=d/g)}return s.maxWidth&&d>s.maxWidth&&(d=s.maxWidth,s.preserveAspectRatio&&s.aspectRatio&&(f=d/(a/o))),s.maxHeight&&f>s.maxHeight&&(f=s.maxHeight,s.preserveAspectRatio&&s.aspectRatio&&(d=f*(a/o))),d=Math.max(s.minWidth,d),f=Math.max(s.minHeight,f),{width:Math.round(d),height:Math.round(f)}}function cr(e,{width:t,height:r}){de(e)&&(e.tagName==="IMG"?(e.style.width=`${t}px`,e.style.height=`${r}px`,e.width=t,e.height=r):e.tagName==="DIV"&&(e.style.width=`${t}px`,e.style.height=`${r}px`))}const pe='page-break, [data-page-break="true"]',Wt=e=>ie[e]||ie.A4,lr=(e,t={})=>{if(!e||typeof document>"u")return[];const r=t.pageSize||"A4",n=Wt(r),i=e.querySelectorAll(pe),a=[];a.push({id:"page-0",pageNumber:1,top:0,height:n.height});const o=e.getBoundingClientRect(),s=e.scrollTop;return i.forEach((p,l)=>{const f=p.getBoundingClientRect().top-o.top+s;a.push({id:`page-${l+1}`,pageNumber:l+2,top:f,height:n.height})}),a},Zt=(e,t=100,r=ge)=>{const n=Wt(e),i=In(r),a=n.height-i,o=t/100;return a/o},ur=(e,t)=>{if(!e||!t)return 0;try{const r=t.querySelectorAll(pe);if(r.length===0)return 0;const n=e.getBoundingClientRect(),i=n.top+n.height/2;for(let a=r.length-1;a>=0;a--)if(r[a].getBoundingClientRect().top<i)return a+1;return 0}catch(r){return console.warn("[getCurrentPage] Failed to calculate page:",r),0}},Yt=e=>{if(!e)return[];const t=Array.from(e.children);if(t.length===0)return[];let r=[],n=[];for(const i of t)i.tagName==="PAGE-BREAK"||i.getAttribute("data-page-break")==="true"?n.length>0&&(r.push(n),n=[]):n.push(i);return n.length>0&&r.push(n),r.length===0&&t.length>0&&r.push(t.filter(i=>!(i.tagName==="PAGE-BREAK"||i.getAttribute("data-page-break")==="true"))),r},dr=e=>{if(!e||!e.getBoundingClientRect)return 0;const t=e.getBoundingClientRect();if(e.tagName==="P"){const r=e.querySelectorAll("img"),n=e.textContent.trim();if(r.length===1&&!n){const a=r[0].getBoundingClientRect(),s=window.getComputedStyle(e).textAlign;if(s==="center"||s==="-webkit-center")return a.height+16}return t.height+16}return e.tagName==="H1"||e.tagName==="H2"||e.tagName==="H3"||e.tagName==="H4"||e.tagName==="H5"||e.tagName==="H6"?t.height+20:e.tagName==="UL"||e.tagName==="OL"?t.height+16:t.height},fr=(e,t)=>{if(!e)return!1;try{const r=document.createElement("page-break");return r.setAttribute("data-page-break","true"),r.setAttribute("contenteditable","false"),r.setAttribute("data-page-number",t||"2"),e.parentNode.insertBefore(r,e),!0}catch(r){return console.warn("[insertPageBreakBefore] Failed to insert page break:",r),!1}},gr=(e,t,r,n,i,a,o)=>{if(!e)return!1;try{const p=Zt(r,n,i)*(t-1),l=Array.from(e.children);let d=0,f=null;for(let g=0;g<l.length;g++){const x=l[g];if(x.tagName==="PAGE-BREAK"||x.getAttribute("data-page-break")==="true")continue;const A=dr(x);if(d+A>p){f=x;break}d+=A}if(f){const g=document.createElement("page-break");if(g.setAttribute("data-page-break","true"),g.setAttribute("contenteditable","false"),g.setAttribute("data-page-number",String(t)),f.parentNode.insertBefore(g,f),a){const x=e.innerHTML;a(x)}return o&&setTimeout(()=>{o()},50),!0}else{const g=document.createElement("page-break");g.setAttribute("data-page-break","true"),g.setAttribute("contenteditable","false"),g.setAttribute("data-page-number",String(t)),e.appendChild(g);const x=document.createElement("p");if(x.innerHTML="<br>",e.appendChild(x),a){const A=e.innerHTML;a(A)}return o&&setTimeout(()=>{o()},50),!0}}catch(s){return console.error("[insertPageBreakAtBoundary] Failed to insert page break:",s),!1}},pr=(e,t,r,n,i,a,o)=>{if(!e)return!1;if(r().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const p=Array.from(e.querySelectorAll(pe));if(t>p.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const l=window.getSelection();let d=!1,f=[],g=null;if(t===0){const A=p[0];if(!A)return console.warn("[removePageAndContent] No page break found for first page"),!1;let _=e.firstChild;for(;_&&_!==A;)f.push(_),_=_.nextSibling;g=A}else{const A=p[t-1];if(!A)return console.warn("[removePageAndContent] Page break not found"),!1;const _=p[t];let I=A.nextSibling;for(;I&&I!==_;)f.push(I),I=I.nextSibling;g=A}if(l&&l.rangeCount>0){const _=l.getRangeAt(0).startContainer;for(const I of f)if(I.contains(_)||I===_){d=!0;break}}if(g&&g.parentNode&&g.remove(),f.forEach(A=>{A.parentNode&&A.remove()}),e.querySelectorAll(pe).forEach((A,_)=>{A.setAttribute("data-page-number",String(_+2))}),d&&a&&setTimeout(()=>{a(0)},50),n){const A=e.innerHTML;n(A)}return i&&setTimeout(()=>{i(),o&&setTimeout(()=>{o()},150)},100),!0}catch(p){return console.error("[removePageAndContent] Failed to remove page:",p),!1}},hr=e=>{if(e)try{e.querySelectorAll(pe).forEach((r,n)=>{r.setAttribute("data-page-number",String(n+2))})}catch(t){console.error("[renumberPageBreaks] Failed to renumber page breaks:",t)}},mr=(e,t,r,n,i)=>{if(!e||!t)return!1;try{if(e.remove(),hr(t),r){const a=t.innerHTML;r(a)}return n&&setTimeout(()=>{n(),i&&setTimeout(()=>{i()},100)},50),!0}catch(a){return console.error("[removePageBreak] Failed to remove page break:",a),!1}},yr=200,Er=50,Vt=3,br=20,Kt=e=>{if(!e||!e.getBoundingClientRect)return 0;const t=e.getBoundingClientRect();if(e.tagName==="P"){const r=e.querySelectorAll("img"),n=e.textContent.trim();if(r.length===1&&!n){const a=r[0].getBoundingClientRect(),s=window.getComputedStyle(e).textAlign;if(s==="center"||s==="-webkit-center")return a.height+16}return t.height+16}return e.tagName==="H1"||e.tagName==="H2"||e.tagName==="H3"||e.tagName==="H4"||e.tagName==="H5"||e.tagName==="H6"?t.height+20:e.tagName==="UL"||e.tagName==="OL"?t.height+16:t.height},Tr=(e,t)=>{if(!e||e.length===0)return null;let r=0,n=null;for(let i=0;i<e.length;i++){const a=e[i];if(!a||!a.getBoundingClientRect)continue;const o=Kt(a);if(o<1)continue;if(r+o>t)return n===null?i>0?{overflowIndex:i,overflowElement:a,accumulatedHeight:r}:null:{overflowIndex:i,overflowElement:a,accumulatedHeight:r};r+=o,n=a}return null},vr=(e,t,r,n,i,a,o,s)=>{if(!e||o.current)return!1;try{o.current=!0;const p=Zt(t,r,n);let l=Yt(e),d=!1,f=0;for(let g=0;g<l.length&&f<Vt;g++){const x=l[g],A=Tr(x,p);if(A&&A.overflowIndex>0){let _=0;for(let C=0;C<x.length;C++){const E=x[C];E&&E.getBoundingClientRect&&(_+=Kt(E))}if(_-p<br)continue;const T=g+2;fr(A.overflowElement,T)&&(d=!0,f++,l=Yt(e))}}if(d){if(i){const g=e.innerHTML;i(g)}setTimeout(()=>{a&&a(),f>=Vt&&s&&setTimeout(()=>{o.current||s()},100)},Er)}return d}catch(p){return console.warn("[checkAndReflow] Reflow failed:",p),!1}finally{o.current=!1}},xr=(e,t,r=yr)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{t.current=null,e()},r)},Ar=400,Xt=(e,t)=>{if(e){e.focus();try{let r=null,n=0;if(t===0)r=e.firstChild,n=0;else{const a=e.querySelectorAll(pe)[t-1];a&&a.nextSibling&&(r=a.nextSibling,n=0)}if(r){const i=document.createRange(),a=window.getSelection();r.nodeType===Node.TEXT_NODE?i.setStart(r,n):i.setStart(r,0),i.collapse(!0),a.removeAllRanges(),a.addRange(i)}}catch(r){console.warn("[positionCursorAtPage] Failed to position cursor:",r)}}},_r=(e,t,r,n)=>{if(!e||!t){console.warn("[scrollToPage] Missing refs");return}try{let i=null;if(r===0)i=t;else{const o=t.querySelectorAll(pe)[r-1];if(o)i=o;else{console.warn("[scrollToPage] Page break not found for page",r);return}}if(i){const a=i.getBoundingClientRect(),o=e.getBoundingClientRect(),s=e.scrollTop+(a.top-o.top);e.scrollTo({top:s,behavior:"smooth"}),setTimeout(()=>{n?n(r):Xt(t,r)},Ar)}}catch(i){console.error("[scrollToPage] Error:",i)}},Pr=(e,t,r={},n=300)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{t.current=null,e(r)},Math.max(0,n))},kr=e=>{if(!e)return null;const t=window.getSelection();if(t.rangeCount===0)return null;const r=t.getRangeAt(0);if(!e.contains(r.commonAncestorContainer))return null;let n=1;const i=e.querySelectorAll(pe);for(const d of i)if(r.comparePoint(d,0)>0)n++;else break;const a=document.createRange();a.setStart(e,0),a.setEnd(r.startContainer,r.startOffset);const s=a.toString().replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim(),p=s.length,l=(s.match(/\n/g)||[]).length+1;return{page:n,line:l,charOffset:p}},Sr=300,Jt=(e,t,r=100,n="NARROW")=>{const i=Te(),a=h.useRef(null),o=h.useRef(null),s=h.useRef(e),p=h.useRef(r),l=h.useRef(n),d=h.useRef(!1);h.useEffect(()=>{s.current=e},[e]),h.useEffect(()=>{p.current=r},[r]),h.useEffect(()=>{l.current=n},[n]),h.useEffect(()=>()=>{a.current&&clearTimeout(a.current),o.current&&clearTimeout(o.current)},[]);const f=h.useCallback((m={})=>t?.current?lr(t.current,m):[],[t]),g=h.useCallback((m={})=>{const w=f(m);return i.updatePageBoundaries(w),w},[f,i]),x=h.useCallback(async m=>{if(!t?.current)return!1;const w=s.current||"A4",j=p.current||100,W=l.current||"NARROW";return gr(t.current,m,w,j,W,i.updateContinuousContent,g)},[t,i,g]),A=h.useCallback(()=>{if(!t?.current)return;const m=s.current||"A4",w=p.current||100,j=l.current||"NARROW";vr(t.current,m,w,j,i.updateContinuousContent,g,d,A)},[t,i,g]),_=h.useCallback(m=>{xr(A,o,m)},[A]),I=h.useCallback((m={})=>{const w=typeof m.delay=="number"?m.delay:Sr;Pr(g,a,m,w)},[g]),T=h.useCallback(m=>!m?.current||!t?.current?0:ur(m.current,t.current),[t]),S=h.useCallback(m=>{t?.current&&Xt(t.current,m)},[t]),C=h.useCallback((m,w)=>{if(!w?.current||!t?.current){console.warn("[scrollToPage] Missing refs");return}_r(w.current,t.current,m,S)},[t,S]),E=h.useCallback(m=>t?.current?pr(t.current,m,f,i.updateContinuousContent,g,S,A):!1,[t,f,i,g,S,A]),c=h.useCallback(m=>t?.current?mr(m,t.current,i.updateContinuousContent,g,A):!1,[t,i,g,A]);return{calculatePageBoundaries:f,checkAndUpdateBoundaries:I,updateBoundaries:g,getCurrentPage:T,scrollToPage:C,positionCursorAtPage:S,checkAndReflow:A,triggerAutoReflow:_,removePageAndContent:E,removePageBreak:c,insertPageBreakAtBoundary:x,boundaryTimeoutRef:a,reflowTimeoutRef:o}},Cr="html-editor-storage",wr=1,le="images";function Or(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function Ce(){return new Promise((e,t)=>{const r=indexedDB.open(Cr,wr);r.onerror=()=>{t(new Error("Failed to open IndexedDB database"))},r.onsuccess=()=>{e(r.result)},r.onupgradeneeded=n=>{const i=n.target.result;i.objectStoreNames.contains(le)||i.createObjectStore(le,{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1})}})}function Qt(e){return new Promise((t,r)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){r(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){r(new Error("Image exceeds maximum size of 5MB"));return}const i=new FileReader;i.onload=async a=>{const o=a.target.result,p=o.split(",")[1].length*3/4;if(p>5*1024*1024){r(new Error("Image exceeds maximum size of 5MB"));return}try{const l=await Ce(),d=`editor-image-${Or()}`,g=l.transaction([le],"readwrite").objectStore(le),x={key:d,dataUrl:o,size:p,type:e.type,timestamp:Date.now()},A=g.add(x);A.onsuccess=()=>{l.close(),t(d)},A.onerror=()=>{l.close(),r(new Error("Failed to save image to IndexedDB"))}}catch(l){r(l)}},i.onerror=()=>{r(new Error("Error reading image file"))},i.readAsDataURL(e)})}async function en(e){try{const t=await Ce();return new Promise((r,n)=>{const o=t.transaction([le],"readonly").objectStore(le).get(e);o.onsuccess=()=>{t.close();const s=o.result;r(s?s.dataUrl:null)},o.onerror=()=>{t.close(),n(new Error("Failed to retrieve image from IndexedDB"))}})}catch(t){return console.error("Error getting image:",t),null}}async function tn(e){try{const t=await Ce();return new Promise((r,n)=>{const o=t.transaction([le],"readwrite").objectStore(le).delete(e);o.onsuccess=()=>{t.close(),r()},o.onerror=()=>{t.close(),n(new Error("Failed to delete image from IndexedDB"))}})}catch(t){console.error("Error deleting image:",t)}}async function Nr(){try{const e=await Ce();return new Promise((t,r)=>{const a=e.transaction([le],"readwrite").objectStore(le).clear();a.onsuccess=()=>{e.close(),t()},a.onerror=()=>{e.close(),r(new Error("Failed to clear images from IndexedDB"))}})}catch(e){console.error("Error clearing images:",e)}}async function Mr(){try{const e=await Ce();return new Promise((t,r)=>{const a=e.transaction([le],"readonly").objectStore(le).getAllKeys();a.onsuccess=()=>{e.close(),t(a.result||[])},a.onerror=()=>{e.close(),r(new Error("Failed to get image keys from IndexedDB"))}})}catch(e){return console.error("Error getting image keys:",e),[]}}const Rr=["SPAN","STRONG","EM","B","I","U","S","STRIKE","DEL","INS","SUB","SUP","MARK","SMALL","CODE","KBD","SAMP","VAR","A","ABBR","CITE","DFN","TIME"],Ir=["BR","HR","IMG","INPUT","PAGE-BREAK"];function Lr(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function nn(e){const t=[];for(let r=0;r<e.attributes.length;r++){const n=e.attributes[r];t.push(` ${n.name}="${n.value}"`)}return t.join("")}function He(e){if(!e||typeof e!="string")return"<p><br></p>";const t=e.trim();if(!t)return"<p><br></p>";const r=document.createElement("div");return r.innerHTML=t,we(r)||"<p><br></p>"}function Dr(e){const t=e.cloneNode(!0);return t.querySelectorAll(":scope > p").forEach(n=>{for(;n.firstChild;)t.insertBefore(n.firstChild,n);n.remove()}),t.innerHTML}function we(e){const t=[],r=Array.from(e.childNodes);for(let n=0;n<r.length;n++){const i=r[n];if(i.nodeType===Node.TEXT_NODE){const a=i.textContent.trim();a&&t.push(`<p>${Lr(a)}</p>`)}else if(i.nodeType===Node.ELEMENT_NODE){const a=i,o=a.tagName,s=o.toLowerCase(),p=nn(a);if(o==="DIV"){const l=we(a);l.trim()?t.push(l):t.push("<p><br></p>")}else if(o==="P")t.push(a.outerHTML);else if(["H1","H2","H3","H4","H5","H6"].includes(o)){const l=Dr(a);t.push(`<${s}${p}>${l}</${s}>`)}else if(o==="BR")t.push("<p><br></p>");else if(o==="IMG")t.push(a.outerHTML);else if(["UL","OL"].includes(o))t.push(jr(a));else if(o==="LI")t.push(a.outerHTML);else if(o==="TABLE")t.push(Br(a));else if(["TBODY","THEAD","TFOOT","TR","TD","TH"].includes(o))t.push(a.outerHTML);else if(o==="BLOCKQUOTE"){const l=we(a);t.push(`<blockquote${p}>${l}</blockquote>`)}else if(o==="PRE")t.push(a.outerHTML);else if(Rr.includes(o))t.push(a.outerHTML);else if(o==="PAGE-BREAK"||a.getAttribute("data-page-break")==="true")t.push(a.outerHTML);else if(o==="HR")t.push(a.outerHTML);else if(o==="FIGURE")t.push(a.outerHTML);else if(Ir.includes(o))t.push(a.outerHTML);else{const l=we(a);t.push(`<${s}${p}>${l}</${s}>`)}}}return t.length===0?"":t.join("")}function jr(e){const t=e.tagName.toLowerCase(),r=nn(e),n=[];return Array.from(e.children).forEach(i=>{if(i.tagName==="LI")n.push(i.outerHTML);else{const a=we(i);a.trim()&&n.push(`<li>${a}</li>`)}}),n.length===0?`<${t}${r}><li><br></li></${t}>`:`<${t}${r}>${n.join("")}</${t}>`}function Br(e){return e.outerHTML}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),rn=e=>{const t=$r(e);return t.charAt(0).toUpperCase()+t.slice(1)},on=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),zr=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...s},p)=>h.createElement("svg",{ref:p,...Fr,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:on("lucide",i),...!a&&!zr(s)&&{"aria-hidden":"true"},...s},[...o.map(([l,d])=>h.createElement(l,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=(e,t)=>{const r=h.forwardRef(({className:n,...i},a)=>h.createElement(Ur,{ref:a,iconNode:t,className:on(`lucide-${Hr(rn(e))}`,`lucide-${e}`,n),...i}));return r.displayName=rn(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=Z("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Z("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=Z("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=Z("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=Z("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Z("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Z("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=Z("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=Z("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Z("image-upscale",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M17 21h2a2 2 0 0 0 2-2",key:"130fy9"}],["path",{d:"M21 12v3",key:"1wzk3p"}],["path",{d:"m21 3-5 5",key:"1g5oa7"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2",key:"kk3yz1"}],["path",{d:"m5 21 4.144-4.144a1.21 1.21 0 0 1 1.712 0L13 19",key:"fyekpt"}],["path",{d:"M9 3h3",key:"d52fa"}],["rect",{x:"3",y:"11",width:"10",height:"10",rx:"1",key:"1wpmix"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Z("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=Z("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=Z("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=Z("list-indent-decrease",[["path",{d:"M21 5H11",key:"us1j55"}],["path",{d:"M21 12H11",key:"wd7e0v"}],["path",{d:"M21 19H11",key:"saa85w"}],["path",{d:"m7 8-4 4 4 4",key:"o5hrat"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Z("list-indent-increase",[["path",{d:"M21 5H11",key:"us1j55"}],["path",{d:"M21 12H11",key:"wd7e0v"}],["path",{d:"M21 19H11",key:"saa85w"}],["path",{d:"m3 8 4 4-4 4",key:"1a3j6y"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=Z("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=Z("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=Z("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=Z("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=Z("scaling",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M14 15H9v-5",key:"pi4jk9"}],["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M21 3 9 15",key:"15kdhq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=Z("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=Z("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=Z("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=Z("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Z("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=Z("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=Z("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=Z("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=Z("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=Z("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=Z("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=Z("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Z("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),un=(e,t,r="")=>{if(!e)return[];const n=document.createElement("div");n.innerHTML=e;const i=n.querySelectorAll("h1, h2, h3, h4, h5, h6");return Array.from(i).map((a,o)=>{const s=parseInt(a.tagName.charAt(1)),p=a.textContent.trim();return p?{id:`${r}heading-${o}`,level:s,text:p,page:t||1}:null}).filter(Boolean)},bo=e=>{if(!e)return 0;const t=document.createElement("div");return t.innerHTML=e,(t.textContent||t.innerText||"").trim().split(/\s+/).filter(n=>n.length>0).length},dn=({isCollapsed:e,onToggle:t,wordCount:r,pageCount:n})=>{const i=ot(),{pages:a,activePage:o,continuousContent:s}=i,[p,l]=h.useState(0),[d,f]=h.useState([]);h.useEffect(()=>{if(r!==void 0&&n!==void 0){l(r),f(un(s,1,"continuous-"));return}let x=0;const A=[];a.forEach((_,I)=>{x+=bo(_.content),A.push(...un(_.content,I+1,`page-${I}-`))}),l(x),f(A)},[a,r,n,s]);const g=n!==void 0?n:a.length;return y.jsxs("aside",{className:`sidebar ${e?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[y.jsxs("div",{className:"sidebar-header",children:[y.jsxs("div",{className:"sidebar-title",children:[y.jsx($e,{size:18}),y.jsx("h2",{children:"Document Info"})]}),y.jsx("button",{className:"sidebar-toggle",onClick:t,"aria-label":e?"Expand sidebar":"Collapse sidebar",title:e?"Expand sidebar":"Collapse sidebar",children:e?y.jsx(Wr,{size:16}):y.jsx(qr,{size:16})})]}),!e&&y.jsxs("div",{className:"sidebar-content",children:[y.jsxs("div",{className:"sidebar-section",children:[y.jsx("h3",{children:"Statistics"}),y.jsxs("div",{className:"stat-item",children:[y.jsxs("div",{className:"stat-label",children:[y.jsx(Zr,{size:14}),y.jsx("span",{children:"Pages:"})]}),y.jsx("span",{className:"stat-value",children:g})]}),y.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[y.jsxs("div",{className:"stat-label",children:[y.jsx(Yr,{size:14}),y.jsx("span",{children:"Words:"})]}),y.jsx("span",{className:"stat-value",children:p.toLocaleString()})]}),y.jsxs("div",{className:"stat-item",children:[y.jsxs("div",{className:"stat-label",children:[y.jsx($e,{size:14}),y.jsx("span",{children:"Active Page:"})]}),y.jsx("span",{className:"stat-value",children:o+1})]})]}),d.length>0&&y.jsxs("div",{className:"sidebar-section",children:[y.jsxs("h3",{children:[y.jsx(an,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),y.jsx("div",{className:"document-outline","data-testid":"outline",children:d.map(x=>{const A=x.level===1?Vr:x.level===2?Kr:Xr;return y.jsxs("div",{className:`outline-item outline-level-${x.level}`,style:{marginLeft:`${(x.level-1)*12}px`},children:[y.jsx(A,{size:12,className:"outline-icon"}),y.jsx("span",{className:"outline-text",children:x.text}),y.jsxs("span",{className:"outline-page",children:["p.",x.page]})]},x.id)})})]})]})]})};class fn{constructor(t="Editor"){this.namespace=t}_format(t,r,n){return`[${new Date().toISOString()}] [${this.namespace}] [${t}] ${r}`}info(t,r){}warn(t,r){}error(t,r){}debug(t,r){}}const gn=new fn("Editor"),pn=new Set(["P","DIV","H1","H2","H3","H4","H5","H6","LI","BLOCKQUOTE","PRE","TABLE"]),hn=32;function mn(e,t){if(!e)return;e.dataset||(e.dataset={}),e.style||(e.style={});const r=parseInt(e.dataset.indentLevel||"0",10),n=Math.max(0,t?r-1:r+1);n===0?(e.style.marginLeft="",delete e.dataset.indentLevel):(e.style.marginLeft=`${n*hn}px`,e.dataset.indentLevel=String(n))}function To(e,t){mn(e,t)}function vo(e){let t=e;for(;t;){if(t.nodeType===1&&t.tagName&&pn.has(t.tagName.toUpperCase()))return t;t=t.parentElement||t.parentNode}return null}function xo(){const e=window.getSelection();if(!e||e.rangeCount===0)return[];const t=e.getRangeAt(0),r=new Set;let n=t.commonAncestorContainer;for(n.nodeType===Node.TEXT_NODE&&(n=n.parentElement);n&&n.contentEditable!=="true";)n=n.parentElement;return n?(n.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, li, blockquote, pre, table").forEach(o=>{document.createRange().selectNodeContents(o),t.intersectsNode(o)&&r.add(o)}),r.size===0&&n.querySelectorAll("img").forEach(s=>{if(document.createRange().selectNode(s),t.intersectsNode(s)){let l=s.parentElement;for(;l&&l!==n;){if(l.tagName&&pn.has(l.tagName.toUpperCase())){r.add(l);break}l=l.parentElement}}}),Array.from(r).filter(o=>{let s=o.parentElement;for(;s;){if(r.has(s))return!1;s=s.parentElement}return!0})):[]}function Ao(e){if(e.style&&e.style.marginLeft&&e.style.marginLeft!==""){const t=parseInt(e.dataset.indentLevel||"0",10),r=Math.max(0,t-1);r===0?(e.style.marginLeft="",delete e.dataset.indentLevel):(e.style.marginLeft=`${r*hn}px`,e.dataset.indentLevel=String(r));return}if(e.innerHTML.startsWith("&nbsp;&nbsp;&nbsp;&nbsp;")){e.innerHTML=e.innerHTML.replace(/^(&nbsp;){4}/,"");return}try{const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);let r=t.nextNode();for(;r;){const n=r.textContent;if(n.startsWith("")){r.textContent=n.substring(4);break}r=t.nextNode()}}catch{e.innerHTML=e.innerHTML.replace(/^(&nbsp;){4}/,"")}}function pt(e=!1){const t=window.getSelection();if(!t||t.rangeCount===0)return!1;let r=xo();const n=t.getRangeAt(0);if(r.length===0){const o=vo(n.startContainer);if(!o)return!1;r=[o]}const i=r[0],a=r[r.length-1];r.forEach(o=>{if((o.tagName?o.tagName.toUpperCase():"")==="LI"){To(o,e);return}e?Ao(o):mn(o,!1)});try{const o=document.createRange(),s=f=>f.nodeType===Node.TEXT_NODE?f:document.createTreeWalker(f,NodeFilter.SHOW_TEXT,null).nextNode(),p=f=>{if(f.nodeType===Node.TEXT_NODE)return f;const g=document.createTreeWalker(f,NodeFilter.SHOW_TEXT,null);let x=null,A=g.nextNode();for(;A;)x=A,A=g.nextNode();return x},l=s(i);l?o.setStart(l,0):o.setStart(i,0);const d=p(a);d?o.setEnd(d,d.length):o.setEnd(a,a.childNodes.length),t.removeAllRanges(),t.addRange(o)}catch{try{const s=document.createRange();s.setStartBefore(i),s.setEndAfter(a),t.removeAllRanges(),t.addRange(s)}catch(s){console.warn("Could not restore selection after indentation:",s)}}return!0}function _o(e){if(e.key!=="Tab")return!1;e.preventDefault();const t=e.shiftKey,r=window.getSelection(),n=r&&r.rangeCount>0?r.getRangeAt(0):null;return r&&r.rangeCount>0&&n&&!n.collapsed&&pt(t)||t||document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;"),!0}const Po=[{value:"Segoe UI",label:"Segoe UI"},{value:"Arial",label:"Arial"},{value:"Times New Roman",label:"Times New Roman"},{value:"Courier New",label:"Courier New"},{value:"Georgia",label:"Georgia"},{value:"Verdana",label:"Verdana"},{value:"Noto Sans Sinhala",label:"Noto Sans Sinhala"},{value:"Iskoola Pota",label:"Iskoola Pota"},{value:"Noto Sans Tamil",label:"Noto Sans Tamil"},{value:"Noto Sans",label:"Noto Sans"}],ko=[{value:"p",label:"Normal"},{value:"h1",label:"Heading 1"},{value:"h2",label:"Heading 2"},{value:"h3",label:"Heading 3"},{value:"h4",label:"Heading 4"},{value:"h5",label:"Heading 5"},{value:"h6",label:"Heading 6"}],So='<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>',ze=({currentFormat:e,onFormatText:t,onAddPageBreak:r,canUndo:n=!1,canRedo:i=!1})=>{const a=async l=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(l.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(l.size>5242880){alert("Image exceeds maximum size of 5MB");return}const f=await Qt(l),g=await en(f);if(g){const A=`<img src="${g}" data-key="${f}" alt="Inserted image" />`;document.execCommand("insertHTML",!1,A),gn.info("Image inserted",{key:f})}const x=document.getElementById("image-upload");x&&(x.value="")}catch(d){gn.error("Error uploading image",d)}},o=(l,d,f,g)=>y.jsx("button",{onClick:()=>t(l),className:e[d]?"active":"",title:g,children:y.jsx(f,{size:16})},l),s=(l,d,f,g=!1)=>y.jsx("button",{onClick:l,disabled:g,title:f,style:{opacity:g?.5:1},children:y.jsx(d,{size:16})},f),p=()=>y.jsx("div",{className:"toolbar-separator"});return y.jsxs("div",{className:"editor-toolbar",children:[s(()=>t("undo"),ho,"Undo",!n),s(()=>t("redo"),so,"Redo",!i),p(),o("bold","bold",Gr,"Bold"),o("italic","italic",eo,"Italic"),o("underline","underline",po,"Underline"),o("strikethrough","strikethrough",lo,"Strikethrough"),p(),o("justifyLeft","alignLeft",ln,"Align Left"),o("justifyCenter","alignCenter",sn,"Align Center"),o("justifyRight","alignRight",cn,"Align Right"),o("justifyFull","alignJustify",fo,"Justify"),p(),y.jsx("select",{onChange:l=>t("fontName",l.target.value),value:e.fontFamily||"Segoe UI",title:"Font Family",children:Po.map(({value:l,label:d})=>y.jsx("option",{value:l,children:d},l))}),y.jsx("select",{onChange:l=>t("fontSize",l.target.value),value:e.fontSize||ke,title:"Font Size",children:$t.map(({value:l,label:d})=>y.jsx("option",{value:l,children:d},l))}),y.jsx("select",{onChange:l=>t("formatBlock",l.target.value),value:e.headingLevel||"p",title:"Heading Level",children:ko.map(({value:l,label:d})=>y.jsx("option",{value:l,children:d},l))}),p(),s(()=>t("insertUnorderedList"),an,"Bullet List"),s(()=>t("insertOrderedList"),oo,"Numbered List"),p(),y.jsx("button",{onClick:()=>{pt(!1)||document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;")},title:"Increase Indent (Tab)",children:y.jsx(ro,{size:16})}),y.jsx("button",{onClick:()=>{pt(!0)},title:"Decrease Indent (Shift+Tab)",children:y.jsx(no,{size:16})}),p(),y.jsx("button",{onClick:()=>{const l=prompt("Enter URL:");l&&t("createLink",l)},title:"Insert Link",children:y.jsx(to,{size:16})}),s(()=>t("insertHTML",So),uo,"Insert Table"),r&&s(r,$e,"Insert Page Break"),p(),y.jsx("input",{type:"file",accept:"image/*",onChange:l=>l.target.files[0]&&a(l.target.files[0]),style:{display:"none"},id:"image-upload"}),y.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:y.jsx(Qr,{size:16})})]})};ze.propTypes={currentFormat:v.shape({bold:v.bool,italic:v.bool,underline:v.bool,strikethrough:v.bool,alignLeft:v.bool,alignCenter:v.bool,alignRight:v.bool,alignJustify:v.bool,fontFamily:v.string,fontSize:v.string,headingLevel:v.string}).isRequired,onFormatText:v.func.isRequired,onAddPageBreak:v.func,canUndo:v.bool,canRedo:v.bool},ze.defaultProps={onAddPageBreak:void 0,canUndo:!1,canRedo:!1};function Co(e){return!e||typeof e!="string"?e:He(e)}function wo(e){e.preventDefault();const t=e.clipboardData||window.clipboardData;if(!t)return null;let r=t.getData("text/html")||t.getData("text/plain");return r?(t.getData("text/html")?r=Co(r):r=Oo(r),document.execCommand("insertHTML",!1,r),r):null}function Oo(e){if(!e)return"";const t=e.split(/\n\s*\n/).filter(r=>r.trim());return t.length===0?"<p><br></p>":t.map(r=>{const n=r.split(`
`).filter(a=>a.trim());return n.length===0?"<p><br></p>":`<p>${n.map(a=>No(a.trim())).join("<br>")}</p>`}).join("")}function No(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}const Ee=e=>e?e.nodeType===Node.ELEMENT_NODE?e.tagName==="PAGE-BREAK"||e.getAttribute("data-page-break")==="true":e.parentElement&&Ee(e.parentElement):!1,ht=({dimensions:e,editorRef:t,onInput:r,onContentChange:n,onKeyDown:i,onClick:a,onScroll:o,onPaste:s,onRemovePageBreak:p,zoomLevel:l=100,pageMargins:d=ge})=>{const f=h.useMemo(()=>Pt(d),[d]),g=l/100,x=h.useCallback((E,c)=>{if(!E)return!1;const m=E.getBoundingClientRect(),w=c-m.top;return w<f.top||w>m.height-f.bottom},[f.top,f.bottom]),A=h.useCallback((E,c)=>{c.preventDefault();const m=E.getBoundingClientRect(),w=c.clientX-m.left,j=c.clientY-m.top,W=m.width-40,ne=-12,oe=m.width-20;w>=W&&w<=oe&&j>=ne&&j<=8&&p&&p(E)},[p]),_=h.useCallback(E=>{E.preventDefault();const c=t.current.getBoundingClientRect();if(E.clientY-c.top<f.top){const w=t.current.firstElementChild;if(w&&w.tagName!=="PAGE-BREAK"){const j=document.createRange(),W=window.getSelection();j.setStart(w,0),j.collapse(!0),W.removeAllRanges(),W.addRange(j)}}else{const w=t.current.lastElementChild;if(w&&w.tagName!=="PAGE-BREAK"){const j=document.createRange(),W=window.getSelection();j.selectNodeContents(w),j.collapse(!1),W.removeAllRanges(),W.addRange(j)}}},[t,f.top]),I=h.useCallback(E=>{const c=window.getSelection();if(!c||c.rangeCount===0)return;const m=c.getRangeAt(0),{startContainer:w,endContainer:j}=m;if((Ee(w)||Ee(j))&&(E.key.length===1||E.key==="Enter"||E.key===" "))return E.preventDefault(),!1;if(_o(E))return n&&n(),!1;if((E.key==="Backspace"||E.key==="Delete")&&(Ee(w)||Ee(j)))return E.preventDefault(),!1;i&&i(E)},[i,n]),T=h.useCallback(E=>{if(!t.current)return;const c=E.target;if(Ee(c)){A(c,E);return}if(x(t.current,E.clientY)){_(E);return}a&&a(E)},[t,a,A,_,x]),S=h.useCallback(E=>{const c=window.getSelection();if(!c||c.rangeCount===0)return;const m=c.getRangeAt(0),{startContainer:w}=m;if(Ee(w))return E.preventDefault(),!1},[]),C=h.useCallback(E=>{const c=wo(E);s&&s(E,c)},[s]);return y.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${e.width}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh",transform:`scale(${g})`,transformOrigin:"top center",transition:"transform 0.2s ease-out"},children:y.jsx("div",{ref:t,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${e.height}px`,width:`${e.width}px`,backgroundColor:"white",padding:`${f.top}px ${f.right}px ${f.bottom}px ${f.left}px`,boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:'"Segoe UI", "Noto Sans Sinhala", "Noto Sans", "Malithi Web", "Iskoola Pota", "Kaputa Unicode", "Helvetica Neue", Arial, "Hiragino Sans GB", "WenQuanYi Micro Hei", "Microsoft YaHei", sans-serif',fontSize:ke,lineHeight:"1.3",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:r,onKeyDown:I,onBeforeInput:S,onClick:T,onScroll:o,onPaste:C,"data-testid":"continuous-editor"})})};ht.propTypes={dimensions:v.shape({width:v.number.isRequired,height:v.number.isRequired}).isRequired,editorRef:v.shape({current:v.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onInput:v.func.isRequired,onContentChange:v.func,onKeyDown:v.func,onClick:v.func,onScroll:v.func,onPaste:v.func,onRemovePageBreak:v.func,zoomLevel:v.number,pageMargins:v.string},ht.defaultProps={onContentChange:void 0,onKeyDown:void 0,onClick:void 0,onScroll:void 0,onPaste:void 0,onRemovePageBreak:void 0,zoomLevel:100,pageMargins:ge};const yn=h.memo(ht),mt=({pageBoundaries:e=[{id:"page-0",pageNumber:1}],activePage:t=0,pageSize:r="A4",pageMargins:n=ge,zoomLevel:i=100,canZoomIn:a=!0,canZoomOut:o=!0,onNavigate:s,onAddPage:p,onDeletePage:l,onPageSizeChange:d,onPageMarginsChange:f,onZoomIn:g,onZoomOut:x,onZoomReset:A}={})=>{const _=Math.max(e?.length||0,1),I=c=>{s&&s(c)},T=()=>{p&&p()},S=c=>{if(_<=1){console.warn("[PageManager] Cannot delete the only page");return}l&&l(c)},C=c=>{d&&d(c)},E=c=>{f&&f(c)};return y.jsxs("div",{className:"page-manager",children:[y.jsxs("div",{className:"page-settings-group",children:[y.jsxs("div",{className:"page-settings-header",children:[y.jsx(co,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Settings"]}),y.jsxs("div",{className:"page-settings-controls",children:[y.jsxs("div",{className:"page-setting-item",children:[y.jsx("label",{htmlFor:"page-size-selector",children:"Size:"}),y.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:r,onChange:c=>C(c.target.value),children:[y.jsx("option",{value:"A4",children:"A4"}),y.jsx("option",{value:"Letter",children:"Letter"}),y.jsx("option",{value:"Legal",children:"Legal"})]})]}),y.jsxs("div",{className:"page-setting-item",children:[y.jsx("label",{htmlFor:"page-margins-selector",children:"Margins:"}),y.jsx("select",{id:"page-margins-selector",role:"combobox","aria-label":"Page margins selector",value:n,onChange:c=>E(c.target.value),children:Ln().map(c=>y.jsx("option",{value:c,children:Dn(c)},c))})]})]})]}),y.jsxs("div",{className:"zoom-controls-compact",children:[y.jsx("button",{type:"button",className:"zoom-button-compact",onClick:x,disabled:!o,"aria-label":"Zoom out",title:"Zoom out (Ctrl + -)",children:y.jsx(Eo,{size:12})}),y.jsxs("span",{className:"zoom-level-display",children:[i,"%"]}),y.jsx("button",{type:"button",className:"zoom-button-compact",onClick:g,disabled:!a,"aria-label":"Zoom in",title:"Zoom in (Ctrl + +)",children:y.jsx(yo,{size:12})}),y.jsx("button",{type:"button",className:"zoom-reset-compact",onClick:A,"aria-label":"Reset zoom",title:"Reset zoom to 100% (Ctrl + 0)",children:"Reset"})]}),y.jsx("div",{className:"page-list",children:e.map((c,m)=>y.jsxs("div",{className:"page-item",children:[y.jsxs("button",{type:"button",className:`page-button ${m===t?"active":""}`,onClick:()=>I(m),"aria-label":`Go to page ${m+1}`,"aria-current":m===t?"page":void 0,children:[y.jsx($e,{size:14}),y.jsxs("span",{children:["Page ",m+1]})]}),_>1&&y.jsx("button",{type:"button",className:"delete-page-button",onClick:w=>{w.stopPropagation(),S(m)},"aria-label":`Delete page ${m+1}`,title:"Delete this page and its content",children:y.jsx(mo,{size:14})})]},c.id||`page-${m}`))}),y.jsxs("button",{type:"button",className:"add-page-button",onClick:T,"aria-label":"Add new page",title:"Add new page at end",children:[y.jsx(ao,{size:16}),y.jsx("span",{children:"Add Page"})]})]})};mt.propTypes={pageBoundaries:v.arrayOf(v.shape({id:v.string.isRequired,pageNumber:v.number.isRequired,top:v.number,height:v.number})),activePage:v.number,pageSize:v.oneOf(["A4","Letter","Legal"]),pageMargins:v.string,zoomLevel:v.number,canZoomIn:v.bool,canZoomOut:v.bool,onNavigate:v.func,onAddPage:v.func,onDeletePage:v.func,onPageSizeChange:v.func,onPageMarginsChange:v.func,onZoomIn:v.func,onZoomOut:v.func,onZoomReset:v.func},mt.defaultProps={pageBoundaries:[{id:"page-0",pageNumber:1}],activePage:0,pageSize:"A4",pageMargins:ge,zoomLevel:100,canZoomIn:!0,canZoomOut:!0,onNavigate:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onPageMarginsChange:void 0,onZoomIn:void 0,onZoomOut:void 0,onZoomReset:void 0};const En=h.memo(mt);function Mo(e){switch(e){case P.TOP_LEFT:case P.BOTTOM_RIGHT:return"nwse-resize";case P.TOP_RIGHT:case P.BOTTOM_LEFT:return"nesw-resize";case P.TOP:case P.BOTTOM:return"ns-resize";case P.LEFT:case P.RIGHT:return"ew-resize";default:return"default"}}function Ro({handler:e,startX:t,startY:r,currentX:n,currentY:i,startWidth:a,startHeight:o,options:s=fe}){const p=n-t,l=i-r;let d=a,f=o;switch(e){case P.TOP_LEFT:d=Math.max(s.minWidth,a-p),f=Math.max(s.minHeight,o-l);break;case P.TOP_RIGHT:d=Math.max(s.minWidth,a+p),f=Math.max(s.minHeight,o-l);break;case P.BOTTOM_LEFT:d=Math.max(s.minWidth,a-p),f=Math.max(s.minHeight,o+l);break;case P.BOTTOM_RIGHT:d=Math.max(s.minWidth,a+p),f=Math.max(s.minHeight,o+l);break;case P.TOP:f=Math.max(s.minHeight,o-l);break;case P.BOTTOM:f=Math.max(s.minHeight,o+l);break;case P.LEFT:d=Math.max(s.minWidth,a-p);break;case P.RIGHT:d=Math.max(s.minWidth,a+p);break;default:return{width:d,height:f}}if(s.preserveAspectRatio&&s.aspectRatio){const g=a/o;[P.TOP_LEFT,P.TOP_RIGHT,P.BOTTOM_LEFT,P.BOTTOM_RIGHT].includes(e)?d/g>f?f=Math.max(s.minHeight,d/g):d=Math.max(s.minWidth,f*g):[P.TOP,P.BOTTOM].includes(e)?d=f*g:[P.LEFT,P.RIGHT].includes(e)&&(f=d/g)}return s.maxWidth&&d>s.maxWidth&&(d=s.maxWidth,s.preserveAspectRatio&&s.aspectRatio&&(f=d/(a/o))),s.maxHeight&&f>s.maxHeight&&(f=s.maxHeight,s.preserveAspectRatio&&s.aspectRatio&&(d=f*(a/o))),d=Math.max(s.minWidth,d),f=Math.max(s.minHeight,f),{width:Math.round(d),height:Math.round(f)}}function bn(e,{width:t,height:r}){de(e)&&(e.tagName==="IMG"?(e.style.width=`${t}px`,e.style.height=`${r}px`,e.width=t,e.height=r):e.tagName==="DIV"&&(e.style.width=`${t}px`,e.style.height=`${r}px`))}function Io(e,t,r){bn(t,r);const n=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(n)}function Lo(e,t,r,n){const{ctrlKey:i,metaKey:a,shiftKey:o,key:s}=e,p=i||a,l=r.offsetWidth,d=r.offsetHeight,g={">":p&&o?()=>({width:Math.min(n.maxWidth||800,l+10),height:d}):null,"<":p&&o?()=>({width:Math.max(n.minWidth||50,l-10),height:d}):null,"+":p&&o?()=>({width:l,height:Math.min(n.maxHeight||600,d+10)}):null,"-":p&&o?()=>({width:l,height:Math.max(n.minHeight||50,d-10)}):null,r:p&&!o?()=>({width:300,height:200}):null}[s];if(g){e.preventDefault();const x=g();return Io(t,r,x),!0}return!1}const Fe=({editorRef:e,onImageResize:t,onImageSelect:r,onImageDeselect:n,resizeOptions:i=fe})=>{const a=h.useRef(null),o=h.useRef(null),s=h.useRef(null),p=h.useRef(null),l=h.useRef(i),d=h.useRef(!1),f=Te();h.useEffect(()=>{l.current=i},[i]);const g=h.useCallback(E=>{if(!de(E))return;a.current&&(ye(a.current),a.current=null),E.classList.add("selected");const c=gt(E,l.current);c&&(a.current=c,o.current=E,document.body.appendChild(c),c.querySelectorAll(".resize-handler").forEach(w=>{w.addEventListener("mousedown",A)}),r&&r(E))},[r]),x=h.useCallback(()=>{o.current&&(o.current.classList.remove("selected"),o.current=null),a.current&&(ye(a.current),a.current=null),s.current=null,p.current=null,d.current=!1,n&&n()},[n]),A=h.useCallback(E=>{if(E.preventDefault(),E.stopPropagation(),!o.current)return;const c=E.currentTarget.dataset.handler,m=o.current.getBoundingClientRect(),w=window.pageYOffset||document.documentElement.scrollTop,j=window.pageXOffset||document.documentElement.scrollLeft;s.current={x:E.clientX,y:E.clientY,width:o.current.offsetWidth,height:o.current.offsetHeight,originalWidth:o.current.offsetWidth,originalHeight:o.current.offsetHeight,offsetX:E.clientX-m.left-j,offsetY:E.clientY-m.top-w},p.current=c,d.current=!0,document.body.classList.add("resize-in-progress"),document.body.style.cursor=Mo(c),document.addEventListener("mousemove",_),document.addEventListener("mouseup",I)},[]),_=h.useCallback(E=>{if(!d.current||!o.current||!s.current||!p.current)return;E.preventDefault(),E.stopPropagation();const{x:c,y:m,width:w,height:j}=s.current,W=p.current,ne=E.clientX,oe=E.clientY,Q=Ro({handler:W,startX:c,startY:m,currentX:ne,currentY:oe,startWidth:w,startHeight:j,options:l.current});bn(o.current,Q),a.current&&Se(a.current,o.current)},[]),I=h.useCallback(E=>{if(d.current){if(E.preventDefault(),E.stopPropagation(),o.current&&s.current){const c={width:s.current.originalWidth,height:s.current.originalHeight},m={width:o.current.offsetWidth,height:o.current.offsetHeight};(c.width!==m.width||c.height!==m.height)&&f.recordOperation({type:"IMAGE_RESIZE",payload:{element:o.current,state:m}},{type:"IMAGE_RESIZE",payload:{element:o.current,state:c}})}if(s.current=null,p.current=null,d.current=!1,document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",I),document.body.classList.remove("resize-in-progress"),document.body.style.cursor="",o.current){const c=new Event("input",{bubbles:!0,cancelable:!0});o.current.dispatchEvent(c),t&&t(o.current,{width:o.current.offsetWidth,height:o.current.offsetHeight})}}},[t,f]),T=h.useCallback(E=>{a.current&&!a.current.contains(E.target)&&x();const c=E.target;if(de(c)){if(c===o.current)return;g(c)}},[g,x]),S=h.useCallback(E=>{if((E.key==="Delete"||E.key==="Backspace")&&o.current&&!d.current){E.preventDefault();const c=o.current;if(c.parentNode){c.parentNode.removeChild(c),x();const m=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(m)}}E.key==="Escape"&&o.current&&x(),o.current&&!d.current&&Lo(E,e,o.current,l.current)},[e,x]),C=h.useCallback(()=>{a.current&&o.current&&Se(a.current,o.current)},[]);return h.useEffect(()=>{if(!e.current)return;const c=e.current.closest(".editor-viewport");return c&&(c.addEventListener("scroll",C),window.addEventListener("scroll",C)),()=>{c&&c.removeEventListener("scroll",C),window.removeEventListener("scroll",C)}},[e,C]),h.useEffect(()=>{if(!e.current)return;const E=e.current;return E.addEventListener("click",T),E.addEventListener("keydown",S),window.addEventListener("resize",C),()=>{E.removeEventListener("click",T),E.removeEventListener("keydown",S),window.removeEventListener("resize",C),d.current&&(document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",I),document.body.classList.remove("resize-in-progress"),document.body.style.cursor=""),a.current&&ye(a.current)}},[e,T,S,C,_,I]),h.useEffect(()=>{if(!e.current)return;const E=new MutationObserver(c=>{c.forEach(m=>{m.type==="childList"&&(m.removedNodes.forEach(w=>{w.nodeType===Node.ELEMENT_NODE&&de(w)&&w===o.current&&x()}),m.addedNodes.forEach(w=>{if(w.nodeType!==Node.ELEMENT_NODE)return;if(de(w)){setTimeout(()=>g(w),50);return}const j=w.querySelectorAll?.("img")||[];j.length>0&&setTimeout(()=>g(j[0]),50)}))})});return E.observe(e.current,{childList:!0,subtree:!0}),()=>E.disconnect()},[e,x,g]),null};Fe.propTypes={editorRef:v.shape({current:v.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onImageResize:v.func,onImageSelect:v.func,onImageDeselect:v.func,resizeOptions:v.shape({minWidth:v.number,minHeight:v.number,maxWidth:v.number,maxHeight:v.number,aspectRatio:v.bool,preserveAspectRatio:v.bool,defaultWidth:v.number,defaultHeight:v.number})},Fe.defaultProps={onImageResize:void 0,onImageSelect:void 0,onImageDeselect:void 0,resizeOptions:fe};const yt=({imageElement:e,onAlignChange:t,onAspectRatioToggle:r,onDelete:n,onClose:i,initialPreserveAspectRatio:a=!0})=>{const[o,s]=h.useState({top:0,left:0}),[p,l]=h.useState(!1),[d,f]=h.useState("top"),[g,x]=h.useState(a),A=h.useRef(null),_=h.useRef(null),I=Te(),T=L=>{if(!L)return;(typeof window<"u"&&typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame:ee=>setTimeout(ee,16))(()=>{const ee=document.querySelector(".image-resize-overlay");ee&&Se(ee,L)})},S=L=>{if(!L)return null;const U=window.getComputedStyle(L);return{float:U.float||"none",margin:L.style.margin||"",display:U.display||"inline",width:L.style.width||L.width||"",height:L.style.height||L.height||"",aspectRatio:g}},C=h.useCallback(()=>{if(!e)return"left";const L=window.getComputedStyle(e);return L.float==="right"?"right":L.float==="left"?"left":L.display==="block"&&L.margin.includes("auto")?"center":"left"},[e]),[E,c]=h.useState("left");h.useEffect(()=>{e&&c(C())},[e,C]);const m=h.useCallback(()=>{if(!e||!A.current)return;const L=e.getBoundingClientRect(),U=A.current.getBoundingClientRect(),ee=window.visualViewport?window.visualViewport:{width:window.innerWidth,height:window.innerHeight},X=L.bottom>=0&&L.top<=ee.height&&L.right>=0&&L.left<=ee.width;let J="top",re=0,se=0;if(X){const M=L.top-U.height-10,F=ee.height-L.bottom-U.height-10;F>M&&F>0?(J="bottom",re=L.bottom+10):(J="top",re=L.top-U.height-10)}else J="top",re=10;se=L.left+L.width/2-U.width/2;const b=window.innerWidth,u=window.innerHeight;let k=Math.max(10,Math.min(se,b-U.width-10)),R=Math.max(10,Math.min(re,u-U.height-10));s({top:R,left:k}),f(J),l(!0)},[e]);h.useLayoutEffect(()=>{m();const L=()=>{m()},U=_.current;return U&&U.addEventListener("scroll",L),window.addEventListener("scroll",L),window.addEventListener("resize",L),()=>{U&&U.removeEventListener("scroll",L),window.removeEventListener("scroll",L),window.removeEventListener("resize",L),l(!1)}},[e,m]),h.useEffect(()=>{const L=U=>{A.current&&!A.current.contains(U.target)&&U.target!==e&&i()};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[e,i]);const w={left:{float:"left",margin:"0 10px 10px 0",display:"block"},center:{float:"none",margin:"10px auto",display:"block"},right:{float:"right",margin:"0 0 10px 10px",display:"block"}},j=L=>{if(e&&w[L]){const U=S(e),ee=E,X=w[L];e.style.float=X.float,e.style.margin=X.margin,e.style.display=X.display,c(L),T(e);const J=S(e);I.recordOperation({type:"IMAGE_ALIGN",payload:{element:e,alignment:L,state:J}},{type:"IMAGE_ALIGN",payload:{element:e,alignment:ee,state:U}}),t&&t(L)}},W=()=>{if(e&&e.parentNode){const L={element:e,parent:e.parentNode,nextSibling:e.nextSibling};I.recordOperation({type:"IMAGE_DELETE",payload:{element:e}},{type:"IMAGE_REINSERT",payload:{state:L}}),e.parentNode.removeChild(e),n&&n(),i()}},ne=()=>{const L=g,U=!g;x(U),I.recordOperation({type:"IMAGE_ASPECT_RATIO",payload:{element:e,preserveAspectRatio:U}},{type:"IMAGE_ASPECT_RATIO",payload:{element:e,preserveAspectRatio:L}}),r&&r(U)},oe={border:"1px solid #ccc",borderRadius:"4px",padding:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"28px",height:"28px"},Q=L=>({...oe,background:L?"#007bff":"transparent",color:L?"#fff":"#333"});return!e||typeof document>"u"?null:Cn.createPortal(y.jsxs("div",{ref:A,className:"image-tooltip-menu","data-menu-position":d,"aria-hidden":!p,style:{position:"fixed",top:`${o.top}px`,left:`${o.left}px`,zIndex:999,background:"#fff",border:"1px solid #ddd",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",padding:"8px",display:"flex",gap:"2px",alignItems:"center",pointerEvents:p?"auto":"none",minWidth:"140px",minHeight:"32px",opacity:p?1:0,visibility:p?"visible":"hidden",transition:"opacity 0.15s ease, visibility 0.15s ease"},children:[y.jsx("button",{className:`tooltip-button aspect-ratio-toggle ${g?"":"active"}`,onClick:ne,title:`Toggle aspect ratio preservation (currently ${g?"ON":"OFF"})`,children:g?y.jsx(io,{size:14}):y.jsx(Jr,{size:14})}),y.jsx("button",{className:`tooltip-button ${E==="left"?"active":""}`,onClick:()=>j("left"),title:"Align Left",style:Q(E==="left"),children:y.jsx(ln,{size:14})}),y.jsx("button",{className:`tooltip-button ${E==="center"?"active":""}`,onClick:()=>j("center"),title:"Align Center",style:Q(E==="center"),children:y.jsx(sn,{size:14})}),y.jsx("button",{className:`tooltip-button ${E==="right"?"active":""}`,onClick:()=>j("right"),title:"Align Right",style:Q(E==="right"),children:y.jsx(cn,{size:14})}),y.jsx("button",{className:"tooltip-button delete-button",onClick:W,title:"Delete Image",style:{background:"transparent",color:"#dc3545",border:"1px solid #dc3545",borderRadius:"4px",padding:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"28px",height:"28px"},children:y.jsx(go,{size:14})})]}),document.body)};yt.propTypes={imageElement:v.instanceOf(typeof Element<"u"?Element:Object),onAlignChange:v.func,onAspectRatioToggle:v.func,onDelete:v.func,onClose:v.func.isRequired,initialPreserveAspectRatio:v.bool},yt.defaultProps={imageElement:null,onAlignChange:void 0,onAspectRatioToggle:void 0,onDelete:void 0,initialPreserveAspectRatio:!0};const Do=50,Et=50,jo=50,Ue=h.forwardRef(({pageManagerComponent:e=null,onNavigatePage:t,onAddPage:r,onDeletePage:n,onPageSizeChange:i,onPageMarginsChange:a,onChange:o,showSidebar:s=!0,showToolbar:p=!0,showPageManager:l=!0},d)=>{const f=ot(),g=Te(),{pageSize:x,pageMargins:A,continuousContent:_,pageBoundaries:I,activePage:T,zoomLevel:S,canUndo:C,canRedo:E}=f,c=h.useRef(null),m=h.useRef(null),{currentFormat:w,formatText:j,updateCurrentFormatFromSelection:W}=qt(),[ne,oe]=h.useState(!1),[Q,L]=h.useState(null),[U,ee]=h.useState(!0),X=h.useRef(null),{checkAndUpdateBoundaries:J,getCurrentPage:re,scrollToPage:se,updateBoundaries:b,triggerAutoReflow:u,removePageAndContent:k,removePageBreak:R,insertPageBreakAtBoundary:M}=Jt(x,m,S,A),F=h.useMemo(()=>Ie(x),[x]),[z,D]=h.useState(!1),$=h.useRef(null),q=h.useRef(!1),G=h.useRef(!1),ae=h.useRef(!1),O=h.useRef(_);h.useEffect(()=>{if(m.current){if(!ae.current){m.current.innerHTML=_,ae.current=!0,O.current=_;const N=setTimeout(()=>{b()},Do);return()=>clearTimeout(N)}if(O.current!==_){if(m.current.innerHTML!==_){m.current.innerHTML=_;const Y=setTimeout(()=>{b(),q.current&&be()},Et);return O.current=_,()=>clearTimeout(Y)}O.current=_}}},[_,b,I.length,g,se]),h.useEffect(()=>{o&&ae.current&&o(_)},[_,o]);const ce=h.useMemo(()=>({getHTMLContent:()=>m.current?m.current.innerHTML:_,getPlainText:()=>(m.current?m.current.innerHTML:_).replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim(),getCursorPosition:()=>m.current?kr(m.current):null,setContent:N=>{const Y=He(N);Y!==_&&g.updateContinuousContent(Y),m.current&&m.current.innerHTML!==Y&&(m.current.innerHTML=Y),O.current=Y,m.current&&setTimeout(()=>{b()},Et)},insertContent:N=>{if(!m.current||!N)return;const Y=He(N),te=window.getSelection();let ue=!1;if(te&&te.rangeCount>0){const Tt=te.getRangeAt(0);m.current.contains(Tt.commonAncestorContainer)&&(ue=!0)}if(!ue&&X.current)try{te.removeAllRanges(),te.addRange(X.current)}catch(Tt){console.warn("[insertContent] Failed to restore last cursor position:",Tt);const Oe=m.current.lastChild;if(Oe){const Ze=document.createRange();Oe.nodeType===Node.TEXT_NODE?Ze.setStart(Oe,Oe.textContent.length):Ze.setStartAfter(Oe),Ze.collapse(!0),te.removeAllRanges(),te.addRange(Ze)}}document.execCommand("insertHTML",!1,Y);const he=m.current.innerHTML;g.updateContinuousContent(he),O.current=he,setTimeout(()=>{b(),u(200)},Et)}}),[_,g,b,m,X,J]);h.useImperativeHandle(d,()=>ce,[ce]),h.useEffect(()=>{const N=()=>{if(W(),m.current){const te=window.getSelection();if(te.rangeCount>0){const ue=te.getRangeAt(0);ue.collapsed&&m.current.contains(ue.commonAncestorContainer)&&(X.current=ue.cloneRange())}}};document.addEventListener("selectionchange",N);const Y=()=>{if(setTimeout(W,10),X.current&&m.current)try{const te=window.getSelection();te.removeAllRanges(),te.addRange(X.current)}catch(te){console.warn("[handleFocus] Failed to restore cursor:",te)}};return m.current&&m.current.addEventListener("focus",Y),()=>{document.removeEventListener("selectionchange",N),m.current&&m.current.removeEventListener("focus",Y)}},[W]);const be=h.useCallback(()=>{q.current=!1;const N=Math.max(0,I.length-1);g.setActivePage(N),setTimeout(()=>{se(N,c)},jo)},[I.length,g,se]),ve=h.useCallback(()=>{if(!m.current)return;let N=m.current.innerHTML;N=He(N),N!==m.current.innerHTML&&(m.current.innerHTML=N);const Y=_;if(Y!==N){const ue={type:"UPDATE_CONTINUOUS_CONTENT",payload:N},he={type:"UPDATE_CONTINUOUS_CONTENT",payload:Y};g.recordOperation(ue,he)}g.updateContinuousContent(N),J(),u(200);const te=re(c);te!==T&&g.setActivePage(te)},[g,J,re,T,u,c,m,_]),Ho=h.useCallback(N=>{ve()},[ve]),Tn=h.useCallback(N=>{g.updatePageSize(N),b({pageSize:N}),i&&i(N)},[g,b,i]),vn=h.useCallback(N=>{g.updatePageMargins(N),b({pageMargins:N}),a&&a(N)},[g,b,a]),xn=h.useCallback(N=>{N<0||N>=I.length||(G.current=!0,g.setActivePage(N),se(N,c),setTimeout(()=>{G.current=!1},NAVIGATION_LOCK_TIMEOUT),t&&t(N))},[g,se,t,I.length]),An=h.useCallback(()=>{const N=I.length+1;M(N)&&(q.current=!0,setTimeout(()=>{q.current&&be()},100)),r&&r()},[I.length,M,g,se,r]),$o=h.useCallback(()=>{const N=window.getSelection();if(N&&N.rangeCount>0){if(!m?.current)return;const ue=`<page-break data-page-break="true" contenteditable="false" data-page-number="${m.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,ue),setTimeout(()=>{b();const he=re(c);g.setActivePage(he)},150)}},[b,re,g,c]),zo=h.useCallback(N=>{if(!N)return;R(N)&&setTimeout(()=>{const te=re(c);g.setActivePage(te)},200)},[R,re,g,c]),_n=h.useCallback(N=>{if(I.length<=1){console.warn("Cannot delete the only page");return}k(N)&&(g.setActivePage(0),n&&n(N))},[I.length,k,g,n]),Ge=h.useCallback(()=>{g.zoomIn()},[g]),qe=h.useCallback(()=>{g.zoomOut()},[g]),We=h.useCallback(()=>{g.resetZoom()},[g]),Pn=h.useCallback(()=>{g.undo()},[g]),kn=h.useCallback(()=>{g.redo()},[g]);h.useEffect(()=>{const N=Y=>{if(Y.ctrlKey||Y.metaKey){["+","=","-","_","0","z","y"].includes(Y.key)&&Y.preventDefault();const te=document.activeElement===m.current,ue=document.activeElement===c.current,he=document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA"||document.activeElement?.isContentEditable===!1;if(te||ue||!he)switch(Y.key){case"+":case"=":Ge();break;case"-":case"_":qe();break;case"0":We();break;case"z":Y.shiftKey||Pn();break;case"y":kn();break}}};return window.addEventListener("keydown",N),()=>{window.removeEventListener("keydown",N)}},[Ge,qe,We,Pn,kn]);const Fo=h.useCallback(()=>{!c.current||!m.current||G.current||($.current&&clearTimeout($.current),$.current=setTimeout(()=>{if(G.current){$.current=null;return}const N=re(c);N!==T&&N>=0&&g.setActivePage(N),$.current=null},SCROLL_DEBOUNCE))},[re,T,g]),Uo=h.useMemo(()=>{if(!_)return 0;const Y=_.replace(/<[^>]*>/g," ").match(new RegExp("\\p{L}+","gu"));return Y?Y.length:0},[_]),Go=I.length||1,qo=h.useCallback(N=>{oe(!0),L(N)},[]),Sn=h.useCallback(()=>{oe(!1),L(null)},[]),Wo=h.useCallback((N,Y)=>{},[]);return h.useEffect(()=>()=>{$.current&&clearTimeout($.current)},[]),y.jsxs("div",{className:"multi-page-editor",children:[p&&y.jsx(ze,{currentFormat:{...w,imageSelected:ne},onFormatText:j,onAddPageBreak:$o,canUndo:C,canRedo:E}),y.jsxs("div",{className:"editor-container",children:[s&&y.jsx(dn,{editorView:null,isCollapsed:z,onToggle:()=>D(N=>!N),wordCount:Uo,pageCount:Go}),y.jsx("div",{className:"editor-viewport continuous-scroll",ref:c,onScroll:Fo,children:y.jsx(yn,{content:_,dimensions:F,pageSize:x,pageMargins:A,pageBoundaries:I,editorRef:m,onInput:Ho,onContentChange:ve,onClick:()=>m.current?.focus(),onRemovePageBreak:zo,zoomLevel:S})}),y.jsx(Fe,{editorRef:m,onImageSelect:qo,onImageDeselect:Sn,onImageResize:Wo,resizeOptions:{...fe,preserveAspectRatio:U,aspectRatio:U}}),ne&&Q&&y.jsx(yt,{imageElement:Q,initialPreserveAspectRatio:U,onAlignChange:N=>{},onAspectRatioToggle:N=>{ee(N)},onDelete:()=>{if(Q){const N=Q.getAttribute("data-key");N&&tn(N).catch(Y=>{console.error("Failed to delete image from IndexedDB:",Y)})}},onClose:Sn}),l&&y.jsx("div",{className:"page-manager-sidebar",children:e?h.cloneElement(e,{onNavigate:xn,onAddPage:An,onDeletePage:_n,onPageSizeChange:Tn,onPageMarginsChange:vn,zoomLevel:S,canZoomIn:Je(S),canZoomOut:Qe(S),onZoomIn:Ge,onZoomOut:qe,onZoomReset:We}):y.jsx(En,{pageBoundaries:I,activePage:T,pageSize:x,pageMargins:A,zoomLevel:S,canZoomIn:Je(S),canZoomOut:Qe(S),onNavigate:xn,onAddPage:An,onDeletePage:_n,onPageSizeChange:Tn,onPageMarginsChange:vn,onZoomIn:Ge,onZoomOut:qe,onZoomReset:We})})]})]})});Ue.displayName="HtmlEditor",Ue.propTypes={pageManagerComponent:v.element,onNavigatePage:v.func,onAddPage:v.func,onDeletePage:v.func,onPageSizeChange:v.func,onPageMarginsChange:v.func,onChange:v.func,showSidebar:v.bool,showToolbar:v.bool,showPageManager:v.bool},Ue.defaultProps={pageManagerComponent:null,onNavigatePage:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onPageMarginsChange:void 0,onChange:void 0,showSidebar:!0,showToolbar:!0,showPageManager:!0};class bt extends h.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("[ErrorBoundary] Caught error:",t),console.error("[ErrorBoundary] Error info:",r),this.setState({error:t,errorInfo:r}),this.props.onError&&this.props.onError(t,r)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:y.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #f44336",borderRadius:"4px",backgroundColor:"#ffebee",color:"#c62828"},children:[y.jsx("h2",{style:{marginTop:0},children:" Something went wrong"}),y.jsx("p",{children:"The editor encountered an unexpected error and couldn't continue."}),this.props.showDetails&&this.state.error&&y.jsxs("details",{style:{marginTop:"10px",padding:"10px",backgroundColor:"white",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[y.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),y.jsxs("pre",{style:{marginTop:"10px",overflow:"auto",maxHeight:"200px"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),y.jsx("button",{onClick:this.handleReset,style:{marginTop:"15px",padding:"8px 16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Try Again"})]}):this.props.children}}bt.propTypes={children:v.node.isRequired,fallback:v.node,onError:v.func,onReset:v.func,showDetails:v.bool},bt.defaultProps={fallback:null,onError:void 0,onReset:void 0,showDetails:process.env.NODE_ENV==="development"};const Bo={A4:{width:ie.A4.width,height:ie.A4.height},Letter:{width:ie.Letter.width,height:ie.Letter.height},Legal:{width:ie.Legal.width,height:ie.Legal.height}};B.COMMON_FONT_SIZES=$t,B.DEFAULT_FONT_SIZE=ke,B.DEFAULT_IMAGE_RESIZE_OPTIONS=fe,B.DEFAULT_PAGE_SIZE=et,B.DocumentProvider=zn,B.EditorToolbar=ze,B.ErrorBoundary=bt,B.FONT_SIZE_MAP=ft,B.HtmlEditor=Ue,B.ImageResizeHandlers=Fe,B.PAGE_DIMENSIONS=Bo,B.PAGE_SIZES=ie,B.PageManager=En,B.PageView=yn,B.RESIZE_HANDLERS=P,B.Sidebar=dn,B.applyImageDimensions=tr,B.calculateResizeDimensions=Qn,B.clearImages=Nr,B.createResizeOverlay=gt,B.deleteImage=tn,B.getAllImageKeys=Mr,B.getAvailablePageSizes=Bn,B.getImage=en,B.getImageDimensions=er,B.getPageDimensions=Ie,B.getPixelValue=Kn,B.getPointValue=Xn,B.isResizableImage=de,B.isValidFontSize=Jn,B.isValidPageSize=jn,B.logger=fn,B.pixelsToPoints=Ft,B.pointsToPixels=zt,B.removeResizeOverlay=ye,B.saveImage=Qt,B.updateResizeOverlay=Se,B.useContinuousReflow=Jt,B.useDocument=rt,B.useDocumentActions=Te,B.useDocumentState=ot,B.useFormatting=qt,Object.defineProperty(B,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
