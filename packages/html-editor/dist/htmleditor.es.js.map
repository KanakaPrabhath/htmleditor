{"version":3,"file":"htmleditor.es.js","sources":["../../../node_modules/react/cjs/react-jsx-runtime.production.js","../../../node_modules/react/cjs/react-jsx-runtime.development.js","../../../node_modules/react/jsx-runtime.js","../src/lib/editor/zoom-utils.js","../src/context/DocumentContext.jsx","../../../node_modules/prop-types/node_modules/react-is/cjs/react-is.production.min.js","../../../node_modules/prop-types/node_modules/react-is/cjs/react-is.development.js","../../../node_modules/prop-types/node_modules/react-is/index.js","../../../node_modules/object-assign/index.js","../../../node_modules/prop-types/lib/ReactPropTypesSecret.js","../../../node_modules/prop-types/lib/has.js","../../../node_modules/prop-types/checkPropTypes.js","../../../node_modules/prop-types/factoryWithTypeCheckers.js","../../../node_modules/prop-types/factoryWithThrowingShims.js","../../../node_modules/prop-types/index.js","../src/hooks/useFormatting.js","../src/hooks/useContinuousReflow.js","../../../node_modules/lucide-react/dist/esm/shared/src/utils.js","../../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../../node_modules/lucide-react/dist/esm/Icon.js","../../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../../node_modules/lucide-react/dist/esm/icons/bold.js","../../../node_modules/lucide-react/dist/esm/icons/chevron-left.js","../../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../../node_modules/lucide-react/dist/esm/icons/file-check.js","../../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../../node_modules/lucide-react/dist/esm/icons/hash.js","../../../node_modules/lucide-react/dist/esm/icons/heading-1.js","../../../node_modules/lucide-react/dist/esm/icons/heading-2.js","../../../node_modules/lucide-react/dist/esm/icons/heading-3.js","../../../node_modules/lucide-react/dist/esm/icons/image.js","../../../node_modules/lucide-react/dist/esm/icons/italic.js","../../../node_modules/lucide-react/dist/esm/icons/link.js","../../../node_modules/lucide-react/dist/esm/icons/list-ordered.js","../../../node_modules/lucide-react/dist/esm/icons/list.js","../../../node_modules/lucide-react/dist/esm/icons/plus.js","../../../node_modules/lucide-react/dist/esm/icons/redo.js","../../../node_modules/lucide-react/dist/esm/icons/settings.js","../../../node_modules/lucide-react/dist/esm/icons/strikethrough.js","../../../node_modules/lucide-react/dist/esm/icons/table.js","../../../node_modules/lucide-react/dist/esm/icons/text-align-center.js","../../../node_modules/lucide-react/dist/esm/icons/text-align-end.js","../../../node_modules/lucide-react/dist/esm/icons/text-align-justify.js","../../../node_modules/lucide-react/dist/esm/icons/text-align-start.js","../../../node_modules/lucide-react/dist/esm/icons/underline.js","../../../node_modules/lucide-react/dist/esm/icons/undo.js","../../../node_modules/lucide-react/dist/esm/icons/x.js","../../../node_modules/lucide-react/dist/esm/icons/zoom-in.js","../../../node_modules/lucide-react/dist/esm/icons/zoom-out.js","../src/components/editor/Sidebar.jsx","../src/lib/storage/local-storage.js","../src/lib/editor/utils/logger.js","../src/components/editor/EditorToolbar.jsx","../src/components/editor/PageView.jsx","../src/components/editor/PageManager.jsx","../src/components/editor/HtmlEditor.jsx","../src/components/ErrorBoundary.jsx","../src/index.js"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\nfunction jsxProd(type, config, maybeKey) {\n  var key = null;\n  void 0 !== maybeKey && (key = \"\" + maybeKey);\n  void 0 !== config.key && (key = \"\" + config.key);\n  if (\"key\" in config) {\n    maybeKey = {};\n    for (var propName in config)\n      \"key\" !== propName && (maybeKey[propName] = config[propName]);\n  } else maybeKey = config;\n  config = maybeKey.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== config ? config : null,\n    props: maybeKey\n  };\n}\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsxProd;\nexports.jsxs = jsxProd;\n","/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n        case REACT_ACTIVITY_TYPE:\n          return \"Activity\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_CONTEXT_TYPE:\n            return type.displayName || \"Context\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function UnknownOwner() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(type, key, props, owner, debugStack, debugTask) {\n      var refProp = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== refProp ? refProp : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        maybeKey,\n        getOwner(),\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      isValidElement(node)\n        ? node._store && (node._store.validated = 1)\n        : \"object\" === typeof node &&\n          null !== node &&\n          node.$$typeof === REACT_LAZY_TYPE &&\n          (\"fulfilled\" === node._payload.status\n            ? isValidElement(node._payload.value) &&\n              node._payload.value._store &&\n              (node._payload.value._store.validated = 1)\n            : node._store && (node._store.validated = 1));\n    }\n    function isValidElement(object) {\n      return (\n        \"object\" === typeof object &&\n        null !== object &&\n        object.$$typeof === REACT_ELEMENT_TYPE\n      );\n    }\n    var React = require(\"react\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n      REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          };\n    React = {\n      react_stack_bottom_frame: function (callStackForError) {\n        return callStackForError();\n      }\n    };\n    var specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var unknownOwnerDebugStack = React.react_stack_bottom_frame.bind(\n      React,\n      UnknownOwner\n    )();\n    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsx = function (type, config, maybeKey) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        !1,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n    exports.jsxs = function (type, config, maybeKey) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        !0,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n  })();\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\r\n * Zoom utilities for the HTML editor\r\n * Provides constants and helper functions for zoom functionality\r\n */\r\n\r\n/**\r\n * Allowed zoom levels in percentage\r\n * Range: 50% to 200% in 5% increments\r\n */\r\nexport const ZOOM_LEVELS = [\r\n  50, 55, 60, 65, 70, 75, 80, 85, 90, 95,\r\n  100, 105, 110, 115, 120, 125, 130, 135, 140, 145,\r\n  150, 155, 160, 165, 170, 175, 180, 185, 190, 195, 200\r\n];\r\n\r\n/**\r\n * Default zoom level\r\n */\r\nexport const DEFAULT_ZOOM = 100;\r\n\r\n/**\r\n * Minimum zoom level\r\n */\r\nexport const MIN_ZOOM = 50;\r\n\r\n/**\r\n * Maximum zoom level\r\n */\r\nexport const MAX_ZOOM = 200;\r\n\r\n/**\r\n * Zoom increment/decrement step\r\n */\r\nexport const ZOOM_STEP = 5;\r\n\r\n/**\r\n * Check if zoom can be increased\r\n * @param {number} currentZoom - Current zoom level\r\n * @returns {boolean} True if zoom can be increased\r\n */\r\nexport const canZoomIn = (currentZoom) => {\r\n  return currentZoom < MAX_ZOOM;\r\n};\r\n\r\n/**\r\n * Check if zoom can be decreased\r\n * @param {number} currentZoom - Current zoom level\r\n * @returns {boolean} True if zoom can be decreased\r\n */\r\nexport const canZoomOut = (currentZoom) => {\r\n  return currentZoom > MIN_ZOOM;\r\n};\r\n\r\n/**\r\n * Get next zoom level (zoom in)\r\n * @param {number} currentZoom - Current zoom level\r\n * @returns {number} Next zoom level or current if at max\r\n */\r\nexport const getNextZoomLevel = (currentZoom) => {\r\n  if (!canZoomIn(currentZoom)) return currentZoom;\r\n  \r\n  const nextLevel = currentZoom + ZOOM_STEP;\r\n  return nextLevel <= MAX_ZOOM ? nextLevel : currentZoom;\r\n};\r\n\r\n/**\r\n * Get previous zoom level (zoom out)\r\n * @param {number} currentZoom - Current zoom level\r\n * @returns {number} Previous zoom level or current if at min\r\n */\r\nexport const getPreviousZoomLevel = (currentZoom) => {\r\n  if (!canZoomOut(currentZoom)) return currentZoom;\r\n  \r\n  const prevLevel = currentZoom - ZOOM_STEP;\r\n  return prevLevel >= MIN_ZOOM ? prevLevel : currentZoom;\r\n};\r\n\r\n/**\r\n * Validate if a zoom level is allowed\r\n * @param {number} zoom - Zoom level to validate\r\n * @returns {boolean} True if zoom level is valid\r\n */\r\nexport const isValidZoomLevel = (zoom) => {\r\n  return zoom >= MIN_ZOOM && zoom <= MAX_ZOOM;\r\n};\r\n\r\n/**\r\n * Get zoom as decimal multiplier\r\n * @param {number} zoom - Zoom percentage\r\n * @returns {number} Decimal multiplier (e.g., 100 -> 1.0, 150 -> 1.5)\r\n */\r\nexport const getZoomMultiplier = (zoom) => {\r\n  return zoom / 100;\r\n};\r\n","import React, { createContext, useContext, useReducer, useCallback, useMemo } from 'react';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { DEFAULT_ZOOM, MIN_ZOOM, MAX_ZOOM, ZOOM_STEP, canZoomIn as checkCanZoomIn, canZoomOut as checkCanZoomOut } from '../lib/editor/zoom-utils.js';\r\n\r\n// Constants moved outside for performance\r\nconst DEFAULT_PAGE_SIZE = 'A4';\r\nconst EMPTY_PARAGRAPH = '<p><br></p>';\r\nconst DEFAULT_EDITOR_MODE = 'continuous';\r\n\r\nconst PAGE_DIMENSIONS = {\r\n  A4: { width: 794, height: 1123 },\r\n  Letter: { width: 816, height: 1056 },\r\n  Legal: { width: 816, height: 1344 }\r\n};\r\n\r\n// Helper functions moved outside reducer for better performance and reusability\r\nconst createEmptyPage = (index, size = DEFAULT_PAGE_SIZE) => ({\r\n  id: uuidv4(),\r\n  index,\r\n  size,\r\n  content: EMPTY_PARAGRAPH,\r\n  images: [],\r\n  isBreakPoint: false\r\n});\r\n\r\nconst sanitizeContent = (html) => {\r\n  if (typeof html !== 'string' || html.trim() === '') {\r\n    return EMPTY_PARAGRAPH;\r\n  }\r\n  return html;\r\n};\r\n\r\nconst withMinimumPage = (pages, pageSize = DEFAULT_PAGE_SIZE) => {\r\n  const nextPages = pages.length > 0 ? pages : [createEmptyPage(0, pageSize)];\r\n  return nextPages.map((page, index) => ({\r\n    id: page.id || uuidv4(),\r\n    index,\r\n    size: page.size || pageSize,\r\n    content: sanitizeContent(page.content),\r\n    images: page.images || [],\r\n    isBreakPoint: Boolean(page.isBreakPoint)\r\n  }));\r\n};\r\n\r\nconst createDefaultBoundary = (pageSize = DEFAULT_PAGE_SIZE) => {\r\n  const dimensions = PAGE_DIMENSIONS[pageSize] || PAGE_DIMENSIONS.A4;\r\n  return [{\r\n    id: 'page-0',\r\n    pageNumber: 1,\r\n    top: 0,\r\n    height: dimensions.height\r\n  }];\r\n};\r\n\r\nconst buildInitialState = (overrides = {}) => {\r\n  const now = new Date().toISOString();\r\n  const pageSize = overrides.pageSize || DEFAULT_PAGE_SIZE;\r\n  const pages = withMinimumPage(overrides.pages || [createEmptyPage(0, pageSize)], pageSize);\r\n\r\n  return {\r\n    id: uuidv4(),\r\n    title: overrides.title || 'Untitled Document',\r\n    createdAt: now,\r\n    updatedAt: now,\r\n    pageSize,\r\n    pages,\r\n    activePage: overrides.activePage && overrides.activePage < pages.length ? overrides.activePage : 0,\r\n    pageBreaks: overrides.pageBreaks || [],\r\n    totalPages: pages.length,\r\n    editorMode: overrides.editorMode || DEFAULT_EDITOR_MODE,\r\n    continuousContent: overrides.continuousContent || EMPTY_PARAGRAPH,\r\n    pageBoundaries: overrides.pageBoundaries || createDefaultBoundary(pageSize),\r\n    zoomLevel: overrides.zoomLevel || DEFAULT_ZOOM\r\n  };\r\n};\r\n\r\n// Action types\r\nconst ActionTypes = {\r\n  INITIALIZE_DOCUMENT: 'INITIALIZE_DOCUMENT',\r\n  UPDATE_TITLE: 'UPDATE_TITLE',\r\n  UPDATE_PAGE_CONTENT: 'UPDATE_PAGE_CONTENT',\r\n  UPDATE_PAGES: 'UPDATE_PAGES',\r\n  ADD_PAGE: 'ADD_PAGE',\r\n  DELETE_PAGE: 'DELETE_PAGE',\r\n  SET_ACTIVE_PAGE: 'SET_ACTIVE_PAGE',\r\n  UPDATE_PAGE_SIZE: 'UPDATE_PAGE_SIZE',\r\n  RESET_DOCUMENT: 'RESET_DOCUMENT',\r\n  UPDATE_CONTINUOUS_CONTENT: 'UPDATE_CONTINUOUS_CONTENT',\r\n  UPDATE_PAGE_BOUNDARIES: 'UPDATE_PAGE_BOUNDARIES',\r\n  ADD_PAGE_BREAK: 'ADD_PAGE_BREAK',\r\n  REMOVE_PAGE_BREAK: 'REMOVE_PAGE_BREAK',\r\n  SET_EDITOR_MODE: 'SET_EDITOR_MODE',\r\n  INSERT_PAGE_AT: 'INSERT_PAGE_AT',\r\n  MOVE_PAGE_TO: 'MOVE_PAGE_TO',\r\n  DUPLICATE_PAGE: 'DUPLICATE_PAGE',\r\n  SET_ZOOM_LEVEL: 'SET_ZOOM_LEVEL',\r\n  ZOOM_IN: 'ZOOM_IN',\r\n  ZOOM_OUT: 'ZOOM_OUT',\r\n  RESET_ZOOM: 'RESET_ZOOM'\r\n};\r\n\r\n// Reducer\r\nconst documentReducer = (state, action) => {\r\n  const now = new Date().toISOString();\r\n\r\n  switch (action.type) {\r\n    case ActionTypes.INITIALIZE_DOCUMENT: {\r\n      const { initialContent = EMPTY_PARAGRAPH, pageSize = DEFAULT_PAGE_SIZE } = action.payload || {};\r\n      const page = { ...createEmptyPage(0, pageSize), content: sanitizeContent(initialContent) };\r\n      return buildInitialState({\r\n        title: state.title,\r\n        pageSize,\r\n        pages: [page]\r\n      });\r\n    }\r\n\r\n    case ActionTypes.UPDATE_TITLE:\r\n      return {\r\n        ...state,\r\n        title: action.payload,\r\n        updatedAt: now\r\n      };\r\n\r\n    case ActionTypes.UPDATE_PAGE_CONTENT: {\r\n      const { pageIndex, content } = action.payload;\r\n      if (pageIndex < 0 || pageIndex >= state.pages.length) {\r\n        return state;\r\n      }\r\n\r\n      const newPages = [...state.pages];\r\n      newPages[pageIndex] = {\r\n        ...newPages[pageIndex],\r\n        content: sanitizeContent(content)\r\n      };\r\n\r\n      return {\r\n        ...state,\r\n        pages: newPages,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.UPDATE_PAGES: {\r\n      const payload = Array.isArray(action.payload)\r\n        ? { pages: action.payload }\r\n        : action.payload || {};\r\n\r\n      const nextPages = withMinimumPage(payload.pages || [], state.pageSize);\r\n      const pageBreaks = Array.isArray(payload.pageBreaks)\r\n        ? payload.pageBreaks\r\n        : nextPages.slice(0, -1).map((_, index) => ({\r\n            id: `auto-break-${index}`,\r\n            pageNumber: index + 1\r\n          }));\r\n\r\n      return {\r\n        ...state,\r\n        pages: nextPages,\r\n        activePage: Math.min(state.activePage, nextPages.length - 1),\r\n        pageBreaks,\r\n        totalPages: nextPages.length,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.ADD_PAGE: {\r\n      const insertIndex = typeof action.payload?.index === 'number'\r\n        ? Math.min(Math.max(action.payload.index, 0), state.pages.length)\r\n        : state.pages.length;\r\n\r\n      const newPages = [...state.pages];\r\n      newPages.splice(insertIndex, 0, createEmptyPage(insertIndex, state.pageSize));\r\n      \r\n      const updatedPages = newPages.map((page, index) => ({\r\n        ...page,\r\n        index,\r\n        size: state.pageSize\r\n      }));\r\n\r\n      const pageBreaks = updatedPages.slice(0, -1).map((_, index) => ({\r\n        id: `auto-break-${index}`,\r\n        pageNumber: index + 1\r\n      }));\r\n\r\n      return {\r\n        ...state,\r\n        pages: updatedPages,\r\n        activePage: insertIndex,\r\n        pageBreaks,\r\n        totalPages: updatedPages.length,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.DELETE_PAGE: {\r\n      const pageIndex = action.payload;\r\n      if (state.pages.length <= 1) {\r\n        return state;\r\n      }\r\n\r\n      const newPages = [...state.pages];\r\n      newPages.splice(pageIndex, 1);\r\n      \r\n      const updatedPages = newPages.map((page, index) => ({\r\n        ...page,\r\n        index,\r\n        size: state.pageSize\r\n      }));\r\n\r\n      let newActivePage = state.activePage;\r\n      if (newActivePage >= updatedPages.length) {\r\n        newActivePage = updatedPages.length - 1;\r\n      } else if (pageIndex <= newActivePage && newActivePage > 0) {\r\n        newActivePage -= 1;\r\n      }\r\n\r\n      const pageBreaks = updatedPages.slice(0, -1).map((_, index) => ({\r\n        id: `auto-break-${index}`,\r\n        pageNumber: index + 1\r\n      }));\r\n\r\n      return {\r\n        ...state,\r\n        pages: updatedPages,\r\n        activePage: newActivePage,\r\n        pageBreaks,\r\n        totalPages: updatedPages.length,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.SET_ACTIVE_PAGE: {\r\n      const pageIndex = action.payload;\r\n      \r\n      // Early exit if same page\r\n      if (pageIndex === state.activePage) {\r\n        return state;\r\n      }\r\n      \r\n      const maxPage = state.editorMode === 'continuous' \r\n        ? state.pageBoundaries.length \r\n        : state.pages.length;\r\n      \r\n      // Validate page index\r\n      if (pageIndex < 0 || pageIndex >= maxPage) {\r\n        return state;\r\n      }\r\n      \r\n      return {\r\n        ...state,\r\n        activePage: pageIndex,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.UPDATE_PAGE_SIZE: {\r\n      const newSize = action.payload;\r\n      \r\n      // Early exit if size hasn't changed\r\n      if (newSize === state.pageSize) {\r\n        return state;\r\n      }\r\n      \r\n      // Validate page size\r\n      if (!PAGE_DIMENSIONS[newSize]) {\r\n        console.warn(`Invalid page size: ${newSize}`);\r\n        return state;\r\n      }\r\n      \r\n      const updatedPages = state.pages.map((page, index) => ({\r\n        ...page,\r\n        index,\r\n        size: newSize\r\n      }));\r\n\r\n      const pageBreaks = updatedPages.slice(0, -1).map((_, index) => ({\r\n        id: `auto-break-${index}`,\r\n        pageNumber: index + 1\r\n      }));\r\n\r\n      return {\r\n        ...state,\r\n        pageSize: newSize,\r\n        pages: updatedPages,\r\n        pageBreaks,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.RESET_DOCUMENT:\r\n      return buildInitialState();\r\n\r\n    case ActionTypes.UPDATE_CONTINUOUS_CONTENT: {\r\n      const newContent = sanitizeContent(action.payload);\r\n      // Early exit if content hasn't changed\r\n      if (newContent === state.continuousContent) {\r\n        return state;\r\n      }\r\n      return {\r\n        ...state,\r\n        continuousContent: newContent,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.UPDATE_PAGE_BOUNDARIES: {\r\n      const boundaries = Array.isArray(action.payload) ? action.payload : [];\r\n      \r\n      // Early exit if boundaries haven't changed (deep comparison on length and first/last)\r\n      if (boundaries.length === state.pageBoundaries.length && \r\n          boundaries.length > 0 &&\r\n          boundaries[0].id === state.pageBoundaries[0]?.id &&\r\n          boundaries[boundaries.length - 1].id === state.pageBoundaries[boundaries.length - 1]?.id) {\r\n        return state;\r\n      }\r\n      \r\n      const newActivePage = state.activePage >= boundaries.length \r\n        ? Math.max(0, boundaries.length - 1)\r\n        : state.activePage;\r\n\r\n      return {\r\n        ...state,\r\n        pageBoundaries: boundaries,\r\n        totalPages: boundaries.length,\r\n        activePage: newActivePage,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.ADD_PAGE_BREAK: {\r\n      const { position = 'end', pageIndex } = action.payload || {};\r\n      const pageBreakTag = '<page-break data-page-break=\"true\" style=\"display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;\"></page-break>';\r\n      \r\n      let newContent = state.continuousContent;\r\n\r\n      if (position === 'end') {\r\n        newContent = newContent + pageBreakTag + '<p><br></p>';\r\n      } else if (typeof position === 'number') {\r\n        const before = newContent.substring(0, position);\r\n        const after = newContent.substring(position);\r\n        newContent = before + pageBreakTag + after;\r\n      } else if (typeof pageIndex === 'number' && typeof document !== 'undefined') {\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = newContent;\r\n        \r\n        const pageBreaks = tempDiv.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n        \r\n        if (pageIndex === 0 && pageBreaks.length === 0) {\r\n          newContent = newContent + pageBreakTag + '<p><br></p>';\r\n        } else if (pageIndex < pageBreaks.length) {\r\n          const targetBreak = pageBreaks[pageIndex];\r\n          const newBreak = document.createElement('page-break');\r\n          newBreak.setAttribute('data-page-break', 'true');\r\n          newBreak.setAttribute('style', 'display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;');\r\n          \r\n          const newParagraph = document.createElement('p');\r\n          newParagraph.innerHTML = '<br>';\r\n          \r\n          targetBreak.parentNode.insertBefore(newBreak, targetBreak.nextSibling);\r\n          newBreak.parentNode.insertBefore(newParagraph, newBreak.nextSibling);\r\n          \r\n          newContent = tempDiv.innerHTML;\r\n        } else {\r\n          newContent = newContent + pageBreakTag + '<p><br></p>';\r\n        }\r\n      }\r\n      \r\n      return {\r\n        ...state,\r\n        continuousContent: newContent,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.REMOVE_PAGE_BREAK: {\r\n      const { pageIndex } = action.payload || {};\r\n      \r\n      if (typeof pageIndex !== 'number' || typeof document === 'undefined') {\r\n        return state;\r\n      }\r\n      \r\n      const tempDiv = document.createElement('div');\r\n      tempDiv.innerHTML = state.continuousContent;\r\n      \r\n      const pageBreaks = tempDiv.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n      \r\n      if (pageBreaks[pageIndex]) {\r\n        pageBreaks[pageIndex].remove();\r\n      }\r\n      \r\n      const remainingBreaks = tempDiv.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n      remainingBreaks.forEach((breakEl, index) => {\r\n        breakEl.setAttribute('data-page-number', String(index + 2));\r\n      });\r\n      \r\n      return {\r\n        ...state,\r\n        continuousContent: tempDiv.innerHTML,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.SET_EDITOR_MODE: {\r\n      const newMode = action.payload;\r\n      if (newMode === state.editorMode) {\r\n        return state;\r\n      }\r\n\r\n      let newContent = state.continuousContent;\r\n      let newPages = state.pages;\r\n\r\n      if (newMode === 'continuous') {\r\n        const allContent = state.pages\r\n          .map(page => page.content)\r\n          .filter(content => content && content !== EMPTY_PARAGRAPH)\r\n          .join('\\n');\r\n        newContent = allContent || EMPTY_PARAGRAPH;\r\n      } else {\r\n        if (state.continuousContent && state.continuousContent !== EMPTY_PARAGRAPH) {\r\n          newPages = [{ ...createEmptyPage(0, state.pageSize), content: state.continuousContent }];\r\n        }\r\n      }\r\n      \r\n      return {\r\n        ...state,\r\n        editorMode: newMode,\r\n        continuousContent: newContent,\r\n        pages: newPages,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.SET_ZOOM_LEVEL: {\r\n      const newZoomLevel = action.payload;\r\n      \r\n      // Validate zoom level is within bounds\r\n      if (newZoomLevel < MIN_ZOOM || newZoomLevel > MAX_ZOOM) {\r\n        console.warn(`Invalid zoom level: ${newZoomLevel}. Must be between ${MIN_ZOOM} and ${MAX_ZOOM}.`);\r\n        return state;\r\n      }\r\n      \r\n      // Early exit if zoom hasn't changed\r\n      if (newZoomLevel === state.zoomLevel) {\r\n        return state;\r\n      }\r\n      \r\n      return {\r\n        ...state,\r\n        zoomLevel: newZoomLevel,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.ZOOM_IN: {\r\n      if (!checkCanZoomIn(state.zoomLevel)) {\r\n        return state;\r\n      }\r\n      \r\n      const newZoomLevel = state.zoomLevel + ZOOM_STEP;\r\n      return {\r\n        ...state,\r\n        zoomLevel: newZoomLevel,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.ZOOM_OUT: {\r\n      if (!checkCanZoomOut(state.zoomLevel)) {\r\n        return state;\r\n      }\r\n      \r\n      const newZoomLevel = state.zoomLevel - ZOOM_STEP;\r\n      return {\r\n        ...state,\r\n        zoomLevel: newZoomLevel,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    case ActionTypes.RESET_ZOOM: {\r\n      if (state.zoomLevel === DEFAULT_ZOOM) {\r\n        return state;\r\n      }\r\n      \r\n      return {\r\n        ...state,\r\n        zoomLevel: DEFAULT_ZOOM,\r\n        updatedAt: now\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// Context\r\nconst DocumentContext = createContext(null);\r\n\r\n// Provider Component\r\nexport const DocumentProvider = ({ children, initialState = {} }) => {\r\n  const [state, dispatch] = useReducer(documentReducer, buildInitialState(initialState));\r\n\r\n  // Action creators wrapped in useCallback for performance\r\n  const actions = useMemo(() => ({\r\n    initializeDocument: (payload) => dispatch({ type: ActionTypes.INITIALIZE_DOCUMENT, payload }),\r\n    updateTitle: (title) => dispatch({ type: ActionTypes.UPDATE_TITLE, payload: title }),\r\n    updatePageContent: (payload) => dispatch({ type: ActionTypes.UPDATE_PAGE_CONTENT, payload }),\r\n    updatePages: (payload) => dispatch({ type: ActionTypes.UPDATE_PAGES, payload }),\r\n    addPage: (payload) => dispatch({ type: ActionTypes.ADD_PAGE, payload }),\r\n    deletePage: (pageIndex) => dispatch({ type: ActionTypes.DELETE_PAGE, payload: pageIndex }),\r\n    setActivePage: (pageIndex) => dispatch({ type: ActionTypes.SET_ACTIVE_PAGE, payload: pageIndex }),\r\n    updatePageSize: (size) => dispatch({ type: ActionTypes.UPDATE_PAGE_SIZE, payload: size }),\r\n    resetDocument: () => dispatch({ type: ActionTypes.RESET_DOCUMENT }),\r\n    updateContinuousContent: (content) => dispatch({ type: ActionTypes.UPDATE_CONTINUOUS_CONTENT, payload: content }),\r\n    updatePageBoundaries: (boundaries) => dispatch({ type: ActionTypes.UPDATE_PAGE_BOUNDARIES, payload: boundaries }),\r\n    addPageBreak: (payload) => dispatch({ type: ActionTypes.ADD_PAGE_BREAK, payload }),\r\n    removePageBreak: (payload) => dispatch({ type: ActionTypes.REMOVE_PAGE_BREAK, payload }),\r\n    setEditorMode: (mode) => dispatch({ type: ActionTypes.SET_EDITOR_MODE, payload: mode }),\r\n    insertPageAt: (payload) => dispatch({ type: ActionTypes.INSERT_PAGE_AT, payload }),\r\n    movePageTo: (payload) => dispatch({ type: ActionTypes.MOVE_PAGE_TO, payload }),\r\n    duplicatePage: (payload) => dispatch({ type: ActionTypes.DUPLICATE_PAGE, payload }),\r\n    setZoomLevel: (level) => dispatch({ type: ActionTypes.SET_ZOOM_LEVEL, payload: level }),\r\n    zoomIn: () => dispatch({ type: ActionTypes.ZOOM_IN }),\r\n    zoomOut: () => dispatch({ type: ActionTypes.ZOOM_OUT }),\r\n    resetZoom: () => dispatch({ type: ActionTypes.RESET_ZOOM })\r\n  }), []);\r\n\r\n  const value = useMemo(() => ({\r\n    state,\r\n    actions,\r\n    dispatch\r\n  }), [state, actions]);\r\n\r\n  return (\r\n    <DocumentContext.Provider value={value}>\r\n      {children}\r\n    </DocumentContext.Provider>\r\n  );\r\n};\r\n\r\n// Custom hook to use document context\r\nexport const useDocument = () => {\r\n  const context = useContext(DocumentContext);\r\n  if (!context) {\r\n    throw new Error('useDocument must be used within a DocumentProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n// Selector hooks for specific state values\r\nexport const useDocumentState = () => {\r\n  const { state } = useDocument();\r\n  return state;\r\n};\r\n\r\nexport const useDocumentActions = () => {\r\n  const { actions } = useDocument();\r\n  return actions;\r\n};\r\n\r\nexport default DocumentContext;\r\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","module.exports = Function.call.bind(Object.prototype.hasOwnProperty);\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n  var has = require('./lib/has');\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) { /**/ }\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' +\n              'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar has = require('./lib/has');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bigint: createPrimitiveTypeChecker('bigint'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message, data) {\n    this.message = message;\n    this.data = data && typeof data === 'object' ? data: {};\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError(\n          'Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'),\n          {expectedType: expectedType}\n        );\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var expectedTypes = [];\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret);\n        if (checkerResult == null) {\n          return null;\n        }\n        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {\n          expectedTypes.push(checkerResult.data.expectedType);\n        }\n      }\n      var expectedTypesMessage = (expectedTypes.length > 0) ? ', expected one of type [' + expectedTypes.join(', ') + ']': '';\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function invalidValidatorError(componentName, location, propFullName, key, type) {\n    return new PropTypeError(\n      (componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' +\n      'it must be a function, usually from the `prop-types` package, but received `' + type + '`.'\n    );\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (has(shapeTypes, key) && typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import { useState, useCallback } from 'react';\r\n\r\n// Constants for better maintainability\r\nconst FONT_SIZE_MAP = {\r\n  '10px': '1',\r\n  '12px': '2',\r\n  '14px': '3',\r\n  '16px': '4',\r\n  '18px': '5',\r\n  '24px': '6',\r\n  '32px': '7'\r\n};\r\n\r\nconst DEFAULT_FORMAT = {\r\n  bold: false,\r\n  italic: false,\r\n  underline: false,\r\n  strikethrough: false,\r\n  alignLeft: false,\r\n  alignCenter: false,\r\n  alignRight: false,\r\n  alignJustify: false,\r\n  fontFamily: 'Arial',\r\n  fontSize: '12px',\r\n  headingLevel: 'p' // Add heading level tracking\r\n};\r\n\r\n/**\r\n * useFormatting - Hook for managing text formatting state and commands\r\n * Handles document.execCommand for rich text formatting\r\n * Optimized with better selection handling and error recovery\r\n */\r\nexport const useFormatting = () => {\r\n  const [currentFormat, setCurrentFormat] = useState(DEFAULT_FORMAT);\r\n\r\n  /**\r\n   * Update alignment state helper\r\n   */\r\n  const updateAlignment = useCallback((align) => {\r\n    setCurrentFormat(prev => ({\r\n      ...prev,\r\n      alignLeft: align === 'left',\r\n      alignCenter: align === 'center',\r\n      alignRight: align === 'right',\r\n      alignJustify: align === 'justify'\r\n    }));\r\n  }, []);\r\n\r\n  /**\r\n   * Handle font size with improved reliability\r\n   */\r\n  const handleFontSize = useCallback((value) => {\r\n    try {\r\n      // Save current selection\r\n      const selection = window.getSelection();\r\n      if (!selection || selection.rangeCount === 0) {\r\n        return false;\r\n      }\r\n\r\n      const range = selection.getRangeAt(0);\r\n      const selectedText = range.toString();\r\n\r\n      if (!selectedText) {\r\n        // No text selected - just update state for next input\r\n        setCurrentFormat(prev => ({ ...prev, fontSize: value }));\r\n        return false;\r\n      }\r\n\r\n      // Try modern approach first - wrap in span with style\r\n      try {\r\n        const span = document.createElement('span');\r\n        span.style.fontSize = value;\r\n        \r\n        // Extract contents and wrap\r\n        const fragment = range.extractContents();\r\n        span.appendChild(fragment);\r\n        range.insertNode(span);\r\n        \r\n        // Restore selection\r\n        range.selectNodeContents(span);\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n        \r\n        setCurrentFormat(prev => ({ ...prev, fontSize: value }));\r\n        return true;\r\n      } catch (error) {\r\n        // Fallback to execCommand\r\n        const sizeNumber = FONT_SIZE_MAP[value] || '2';\r\n        document.execCommand('fontSize', false, sizeNumber);\r\n        setCurrentFormat(prev => ({ ...prev, fontSize: value }));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.warn('[useFormatting] Font size change failed:', error);\r\n      return false;\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * Format text using document.execCommand\r\n   * Optimized with better error handling and selection management\r\n   */\r\n  const formatText = useCallback((command, value = null) => {\r\n    try {\r\n      // Check if document.execCommand is supported\r\n      if (typeof document.execCommand !== 'function') {\r\n        console.warn('[useFormatting] execCommand not supported');\r\n        return;\r\n      }\r\n\r\n      // Handle fontSize separately for better control\r\n      if (command === 'fontSize') {\r\n        handleFontSize(value);\r\n        return;\r\n      }\r\n\r\n      // Execute the command\r\n      const success = document.execCommand(command, false, value);\r\n      \r\n      if (!success) {\r\n        console.warn(`[useFormatting] Command \"${command}\" failed`);\r\n      }\r\n\r\n      // Update format state based on command\r\n      switch (command) {\r\n        case 'bold':\r\n          setCurrentFormat(prev => ({ ...prev, bold: !prev.bold }));\r\n          break;\r\n        case 'italic':\r\n          setCurrentFormat(prev => ({ ...prev, italic: !prev.italic }));\r\n          break;\r\n        case 'underline':\r\n          setCurrentFormat(prev => ({ ...prev, underline: !prev.underline }));\r\n          break;\r\n        case 'strikethrough':\r\n          setCurrentFormat(prev => ({ ...prev, strikethrough: !prev.strikethrough }));\r\n          break;\r\n        case 'justifyLeft':\r\n          updateAlignment('left');\r\n          break;\r\n        case 'justifyCenter':\r\n          updateAlignment('center');\r\n          break;\r\n        case 'justifyRight':\r\n          updateAlignment('right');\r\n          break;\r\n        case 'justifyFull':\r\n          updateAlignment('justify');\r\n          break;\r\n        case 'fontName':\r\n          setCurrentFormat(prev => ({ ...prev, fontFamily: value }));\r\n          break;\r\n        case 'formatBlock':\r\n          setCurrentFormat(prev => ({ ...prev, headingLevel: value }));\r\n          break;\r\n        default:\r\n          // Commands like insertUnorderedList, createLink, etc. don't need state updates\r\n          break;\r\n      }\r\n    } catch (error) {\r\n      console.warn(`[useFormatting] Error executing command \"${command}\":`, error);\r\n    }\r\n  }, [handleFontSize, updateAlignment]);\r\n\r\n  /**\r\n   * Reset formatting to default\r\n   */\r\n  const resetFormat = useCallback(() => {\r\n    setCurrentFormat(DEFAULT_FORMAT);\r\n  }, []);\r\n\r\n  return {\r\n    currentFormat,\r\n    formatText,\r\n    resetFormat\r\n  };\r\n};\r\n","import { useCallback, useRef, useEffect } from 'react';\r\nimport { useDocumentActions } from '../context/DocumentContext';\r\n\r\n// Constants moved outside to prevent recreation\r\nconst PAGE_DIMENSIONS = {\r\n  A4: { width: 595, height: 842 },\r\n  Letter: { width: 612, height: 792 },\r\n  Legal: { width: 612, height: 1008 }\r\n};\r\n\r\nconst CONTENT_PADDING = {\r\n  top: 60,\r\n  bottom: 100,\r\n  left: 72,\r\n  right: 72\r\n};\r\n\r\n// Performance constants\r\nconst DEFAULT_BOUNDARY_DELAY = 300;\r\nconst DEFAULT_REFLOW_DELAY = 200; // Reduced from 500ms for better typing responsiveness\r\nconst BOUNDARY_UPDATE_DELAY = 50;\r\nconst CURSOR_POSITION_DELAY = 400;\r\nconst SCROLL_POSITION_DELAY = 50;\r\nconst PAGE_BREAK_SELECTOR = 'page-break, [data-page-break=\"true\"]';\r\n\r\n// Performance optimization: Cache selectors\r\n\r\n/**\r\n * useContinuousReflow - Automatically insert page breaks based on content height\r\n * Monitors content height and inserts <page-break> tags when content exceeds page dimensions\r\n * Content remains in a single continuous contenteditable surface\r\n * @param {string} pageSize - The page size (A4, Letter, Legal)\r\n * @param {React.RefObject} editorRef - Reference to the editor element\r\n * @param {number} zoomLevel - Current zoom level percentage (50-200)\r\n */\r\nexport const useContinuousReflow = (pageSize, editorRef, zoomLevel = 100) => {\r\n  const actions = useDocumentActions();\r\n  const boundaryTimeoutRef = useRef(null);\r\n  const reflowTimeoutRef = useRef(null);\r\n  const latestPageSizeRef = useRef(pageSize);\r\n  const latestZoomLevelRef = useRef(zoomLevel);\r\n  const isReflowingRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    latestPageSizeRef.current = pageSize;\r\n  }, [pageSize]);\r\n\r\n  useEffect(() => {\r\n    latestZoomLevelRef.current = zoomLevel;\r\n  }, [zoomLevel]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (boundaryTimeoutRef.current) {\r\n        clearTimeout(boundaryTimeoutRef.current);\r\n      }\r\n      if (reflowTimeoutRef.current) {\r\n        clearTimeout(reflowTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  /**\r\n   * Check if content in a page section exceeds the maximum height\r\n   * Returns the element where overflow occurs\r\n   * Optimized for performance with early exit\r\n   */\r\n  const findOverflowPoint = useCallback((pageElements, maxHeight) => {\r\n    if (!pageElements || pageElements.length === 0) {\r\n      return null;\r\n    }\r\n    \r\n    let currentHeight = 0;\r\n    let lastValidElement = null;\r\n    let lastValidIndex = -1;\r\n    \r\n    for (let i = 0; i < pageElements.length; i++) {\r\n      const element = pageElements[i];\r\n      if (!element || !element.getBoundingClientRect) {\r\n        continue;\r\n      }\r\n      \r\n      const elementHeight = element.getBoundingClientRect().height;\r\n      \r\n      // Skip empty elements (like empty <p> tags from Enter key)\r\n      if (elementHeight < 1) {\r\n        continue;\r\n      }\r\n      \r\n      const potentialHeight = currentHeight + elementHeight;\r\n      \r\n      // Check if adding this element would exceed the page height\r\n      if (potentialHeight > maxHeight) {\r\n        // If we haven't added any elements yet (first element is too large)\r\n        if (lastValidElement === null) {\r\n          // Element is larger than page - must break anyway\r\n          // But only if it's not the very first element on the page\r\n          if (i > 0) {\r\n            return { \r\n              overflowIndex: i, \r\n              overflowElement: element, \r\n              accumulatedHeight: currentHeight \r\n            };\r\n          }\r\n          // If it's the first element and it's too large, let it overflow (unbreakable content)\r\n          return null;\r\n        }\r\n        \r\n        // We have overflow - return the current element as the break point\r\n        return { \r\n          overflowIndex: i, \r\n          overflowElement: element, \r\n          accumulatedHeight: currentHeight \r\n        };\r\n      }\r\n      \r\n      // Element fits, add it to current height\r\n      currentHeight += elementHeight;\r\n      lastValidElement = element;\r\n      lastValidIndex = i;\r\n    }\r\n    \r\n    return null; // No overflow\r\n  }, []);\r\n\r\n  /**\r\n   * Insert a page break element before the specified element\r\n   */\r\n  const insertPageBreakBefore = useCallback((targetElement, pageNumber) => {\r\n    if (!targetElement || !editorRef?.current) {\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const editor = editorRef.current;\r\n      const pageBreak = document.createElement('page-break');\r\n      pageBreak.setAttribute('data-page-break', 'true');\r\n      pageBreak.setAttribute('contenteditable', 'false');\r\n      pageBreak.setAttribute('data-page-number', pageNumber || '2');\r\n      \r\n      // Insert before the target element\r\n      targetElement.parentNode.insertBefore(pageBreak, targetElement);\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.warn('[insertPageBreakBefore] Failed to insert page break:', error);\r\n      return false;\r\n    }\r\n  }, [editorRef]);\r\n\r\n  /**\r\n   * Calculate visual page boundaries based on <page-break> tags in content\r\n   * Returns array of boundary objects with top positions\r\n   * Optimized with cached selectors and better null checks\r\n   */\r\n  const calculatePageBoundaries = useCallback((options = {}) => {\r\n    if (!editorRef?.current || typeof document === 'undefined') {\r\n      return [];\r\n    }\r\n\r\n    const targetPageSize = options.pageSize || latestPageSizeRef.current || 'A4';\r\n    const dimensions = PAGE_DIMENSIONS[targetPageSize] || PAGE_DIMENSIONS.A4;\r\n    \r\n    const editor = editorRef.current;\r\n    \r\n    // Find all <page-break> elements using cached selector\r\n    const pageBreakElements = editor.querySelectorAll(PAGE_BREAK_SELECTOR);\r\n    \r\n    const boundaries = [];\r\n    \r\n    // Always have at least one page (page 1)\r\n    boundaries.push({\r\n      id: 'page-0',\r\n      pageNumber: 1,\r\n      top: 0,\r\n      height: dimensions.height\r\n    });\r\n\r\n    // Add boundaries for each page break - optimized measurement\r\n    const editorRect = editor.getBoundingClientRect();\r\n    const editorScrollTop = editor.scrollTop;\r\n    \r\n    pageBreakElements.forEach((breakEl, index) => {\r\n      const rect = breakEl.getBoundingClientRect();\r\n      const relativeTop = rect.top - editorRect.top + editorScrollTop;\r\n      \r\n      boundaries.push({\r\n        id: `page-${index + 1}`,\r\n        pageNumber: index + 2,\r\n        top: relativeTop,\r\n        height: dimensions.height\r\n      });\r\n    });\r\n\r\n    return boundaries;\r\n  }, [editorRef]);\r\n\r\n  /**\r\n   * Update page boundaries in Context state\r\n   */\r\n  const updateBoundaries = useCallback((options = {}) => {\r\n    const boundaries = calculatePageBoundaries(options);\r\n    actions.updatePageBoundaries(boundaries);\r\n    return boundaries;\r\n  }, [calculatePageBoundaries, actions]);\r\n\r\n  /**\r\n   * Automatic reflow: Insert page breaks when content exceeds page height\r\n   * Optimized with performance guards and single-page-at-a-time processing\r\n   * Accounts for current zoom level when calculating max height\r\n   */\r\n  const checkAndReflow = useCallback(() => {\r\n    // Performance guard: prevent concurrent reflows\r\n    if (!editorRef?.current || isReflowingRef.current) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      isReflowingRef.current = true;\r\n      const editor = editorRef.current;\r\n      const targetPageSize = latestPageSizeRef.current || 'A4';\r\n      const currentZoom = latestZoomLevelRef.current || 100;\r\n      const dimensions = PAGE_DIMENSIONS[targetPageSize] || PAGE_DIMENSIONS.A4;\r\n      \r\n      // Calculate max content height accounting for zoom\r\n      // When zoomed in (e.g., 150%), content appears larger, so effective height is less\r\n      // When zoomed out (e.g., 50%), content appears smaller, so effective height is more\r\n      const baseMaxHeight = dimensions.height - CONTENT_PADDING.top - CONTENT_PADDING.bottom;\r\n      const zoomMultiplier = currentZoom / 100;\r\n      const maxHeight = baseMaxHeight / zoomMultiplier;\r\n      \r\n      // Get all child elements in the editor\r\n      const allChildren = Array.from(editor.children);\r\n      \r\n      if (allChildren.length === 0) {\r\n        return;\r\n      }\r\n      \r\n      // Find existing page breaks using cached selector\r\n      const existingBreaks = allChildren.filter(el => \r\n        el.tagName === 'PAGE-BREAK' || el.getAttribute('data-page-break') === 'true'\r\n      );\r\n      \r\n      // Split content into pages based on existing breaks\r\n      const pages = [];\r\n      let currentPage = [];\r\n      \r\n      for (const child of allChildren) {\r\n        if (child.tagName === 'PAGE-BREAK' || child.getAttribute('data-page-break') === 'true') {\r\n          if (currentPage.length > 0) {\r\n            pages.push(currentPage);\r\n            currentPage = [];\r\n          }\r\n        } else {\r\n          currentPage.push(child);\r\n        }\r\n      }\r\n      \r\n      // Add the last page\r\n      if (currentPage.length > 0) {\r\n        pages.push(currentPage);\r\n      }\r\n      \r\n      // If no pages, all elements are on one page\r\n      if (pages.length === 0 && allChildren.length > 0) {\r\n        pages.push(allChildren.filter(el => \r\n          !(el.tagName === 'PAGE-BREAK' || el.getAttribute('data-page-break') === 'true')\r\n        ));\r\n      }\r\n      \r\n      // Check each page for overflow (process ALL pages for better typing support)\r\n      let insertedBreaks = false;\r\n      let pagesProcessed = 0;\r\n      const MAX_PAGES_PER_REFLOW = 3; // Process up to 3 pages per reflow cycle\r\n      const MIN_OVERFLOW_THRESHOLD = 20; // Minimum pixels of overflow before breaking\r\n      \r\n      for (let pageIndex = 0; pageIndex < pages.length && pagesProcessed < MAX_PAGES_PER_REFLOW; pageIndex++) {\r\n        const pageElements = pages[pageIndex];\r\n        const overflow = findOverflowPoint(pageElements, maxHeight);\r\n        \r\n        // Only insert break if we have actual overflow and not on first element\r\n        // Also check that the overflow is significant (not just a pixel or two)\r\n        if (overflow && overflow.overflowIndex > 0) {\r\n          // Calculate actual overflow amount\r\n          let totalPageHeight = 0;\r\n          for (let i = 0; i < pageElements.length; i++) {\r\n            const el = pageElements[i];\r\n            if (el && el.getBoundingClientRect) {\r\n              totalPageHeight += el.getBoundingClientRect().height;\r\n            }\r\n          }\r\n          \r\n          // Only break if overflow is significant\r\n          const overflowAmount = totalPageHeight - maxHeight;\r\n          if (overflowAmount < MIN_OVERFLOW_THRESHOLD) {\r\n            continue; // Skip this page, overflow is too small\r\n          }\r\n          \r\n          const pageNumber = pageIndex + 2;\r\n          const inserted = insertPageBreakBefore(overflow.overflowElement, pageNumber);\r\n          \r\n          if (inserted) {\r\n            insertedBreaks = true;\r\n            pagesProcessed++;\r\n            \r\n            // Re-query pages after insertion to continue checking\r\n            const updatedChildren = Array.from(editor.children);\r\n            const updatedPages = [];\r\n            let currentPageElements = [];\r\n            \r\n            for (const child of updatedChildren) {\r\n              if (child.tagName === 'PAGE-BREAK' || child.getAttribute('data-page-break') === 'true') {\r\n                if (currentPageElements.length > 0) {\r\n                  updatedPages.push(currentPageElements);\r\n                  currentPageElements = [];\r\n                }\r\n              } else {\r\n                currentPageElements.push(child);\r\n              }\r\n            }\r\n            \r\n            if (currentPageElements.length > 0) {\r\n              updatedPages.push(currentPageElements);\r\n            }\r\n            \r\n            pages = updatedPages;\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Update boundaries if we inserted breaks\r\n      if (insertedBreaks) {\r\n        // Trigger content update to Context\r\n        const html = editor.innerHTML;\r\n        actions.updateContinuousContent(html);\r\n        \r\n        // Recalculate boundaries with slight delay for DOM update\r\n        setTimeout(() => {\r\n          updateBoundaries();\r\n          \r\n          // If we processed the max number of pages, schedule another reflow check\r\n          // to handle any remaining overflows from typing\r\n          if (pagesProcessed >= MAX_PAGES_PER_REFLOW) {\r\n            setTimeout(() => {\r\n              if (!isReflowingRef.current) {\r\n                checkAndReflow();\r\n              }\r\n            }, 100);\r\n          }\r\n        }, BOUNDARY_UPDATE_DELAY);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.warn('[checkAndReflow] Reflow failed:', error);\r\n    } finally {\r\n      isReflowingRef.current = false;\r\n    }\r\n  }, [editorRef, findOverflowPoint, insertPageBreakBefore, actions, updateBoundaries]);\r\n\r\n  /**\r\n   * Debounced automatic reflow check\r\n   * Optimized to prevent excessive reflow operations\r\n   */\r\n  const triggerAutoReflow = useCallback((delay = DEFAULT_REFLOW_DELAY) => {\r\n    if (reflowTimeoutRef.current) {\r\n      clearTimeout(reflowTimeoutRef.current);\r\n    }\r\n\r\n    reflowTimeoutRef.current = setTimeout(() => {\r\n      reflowTimeoutRef.current = null;\r\n      checkAndReflow();\r\n    }, delay);\r\n  }, [checkAndReflow]);\r\n\r\n  /**\r\n   * Debounced boundary calculation\r\n   * Triggers after content changes to recalculate page boundaries\r\n   * Optimized with configurable delay\r\n   */\r\n  const checkAndUpdateBoundaries = useCallback((options = {}) => {\r\n    if (boundaryTimeoutRef.current) {\r\n      clearTimeout(boundaryTimeoutRef.current);\r\n    }\r\n\r\n    const delay = typeof options.delay === 'number' ? options.delay : DEFAULT_BOUNDARY_DELAY;\r\n\r\n    boundaryTimeoutRef.current = setTimeout(() => {\r\n      boundaryTimeoutRef.current = null;\r\n      updateBoundaries(options);\r\n    }, Math.max(0, delay));\r\n  }, [updateBoundaries]);\r\n\r\n  /**\r\n   * Get current page number based on viewport scroll position\r\n   * @param {HTMLElement} containerRef - The scroll container element\r\n   */\r\n  const getCurrentPage = useCallback((containerRef) => {\r\n    if (!containerRef?.current || !editorRef?.current) {\r\n      return 0;\r\n    }\r\n\r\n    try {\r\n      const container = containerRef.current;\r\n      const editor = editorRef.current;\r\n      \r\n      // Get all page breaks\r\n      const pageBreaks = editor.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n      \r\n      if (pageBreaks.length === 0) {\r\n        return 0; // Only one page\r\n      }\r\n      \r\n      // Get viewport center position\r\n      const containerRect = container.getBoundingClientRect();\r\n      const viewportCenter = containerRect.top + (containerRect.height / 2);\r\n      \r\n      // Check each page break to find which page we're on\r\n      // Start from the last break and work backwards\r\n      for (let i = pageBreaks.length - 1; i >= 0; i--) {\r\n        const breakElement = pageBreaks[i];\r\n        const breakRect = breakElement.getBoundingClientRect();\r\n        \r\n        // If the break is above the viewport center, we're on the page after it\r\n        if (breakRect.top < viewportCenter) {\r\n          return i + 1; // Page index (0-based)\r\n        }\r\n      }\r\n      \r\n      // If we're above all breaks, we're on page 0\r\n      return 0;\r\n    } catch (error) {\r\n      console.warn('[getCurrentPage] Failed to calculate page:', error);\r\n      return 0;\r\n    }\r\n  }, [editorRef]);\r\n\r\n  /**\r\n   * Position cursor at the start of a specific page\r\n   */\r\n  const positionCursorAtPage = useCallback((pageNumber) => {\r\n    if (!editorRef?.current) {\r\n      return;\r\n    }\r\n\r\n    const editor = editorRef.current;\r\n    editor.focus();\r\n\r\n    try {\r\n      let targetNode = null;\r\n      let targetOffset = 0;\r\n\r\n      if (pageNumber === 0) {\r\n        // First page - position at start\r\n        targetNode = editor.firstChild;\r\n        targetOffset = 0;\r\n      } else {\r\n        // Find the page break element for this page\r\n        const pageBreaks = editor.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n        const breakElement = pageBreaks[pageNumber - 1];\r\n        \r\n        if (breakElement && breakElement.nextSibling) {\r\n          targetNode = breakElement.nextSibling;\r\n          targetOffset = 0;\r\n        }\r\n      }\r\n\r\n      if (targetNode) {\r\n        const range = document.createRange();\r\n        const selection = window.getSelection();\r\n        \r\n        // If target is a text node, use it directly\r\n        if (targetNode.nodeType === Node.TEXT_NODE) {\r\n          range.setStart(targetNode, targetOffset);\r\n        } else {\r\n          // If it's an element, position at its start\r\n          range.setStart(targetNode, 0);\r\n        }\r\n        \r\n        range.collapse(true);\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n      }\r\n    } catch (error) {\r\n      console.warn('[positionCursorAtPage] Failed to position cursor:', error);\r\n    }\r\n  }, [editorRef]);\r\n\r\n  /**\r\n   * Scroll to a specific page and position cursor at the start of that page\r\n   */\r\n  const scrollToPage = useCallback((pageNumber, containerRef) => {\r\n    if (!containerRef?.current || !editorRef?.current) {\r\n      console.warn('[scrollToPage] Missing refs');\r\n      return;\r\n    }\r\n\r\n    const container = containerRef.current;\r\n    const editor = editorRef.current;\r\n    \r\n    try {\r\n      let targetElement = null;\r\n      \r\n      if (pageNumber === 0) {\r\n        // First page - scroll to top of editor\r\n        targetElement = editor;\r\n      } else {\r\n        // Find the page break for this page\r\n        const pageBreaks = editor.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n        const targetBreak = pageBreaks[pageNumber - 1];\r\n        \r\n        if (targetBreak) {\r\n          targetElement = targetBreak;\r\n        } else {\r\n          console.warn('[scrollToPage] Page break not found for page', pageNumber);\r\n          return;\r\n        }\r\n      }\r\n      \r\n      if (targetElement) {\r\n        // Get the element's position relative to the container\r\n        const elementRect = targetElement.getBoundingClientRect();\r\n        const containerRect = container.getBoundingClientRect();\r\n        \r\n        // Calculate scroll position: current scroll + element position relative to container\r\n        const scrollTop = container.scrollTop + (elementRect.top - containerRect.top);\r\n        \r\n        console.log('[scrollToPage] Scrolling to page', pageNumber, 'scrollTop:', scrollTop);\r\n        \r\n        // Scroll to the page\r\n        container.scrollTo({\r\n          top: scrollTop,\r\n          behavior: 'smooth'\r\n        });\r\n        \r\n        // Position cursor after scroll completes\r\n        setTimeout(() => {\r\n          positionCursorAtPage(pageNumber);\r\n        }, 400);\r\n      }\r\n    } catch (error) {\r\n      console.error('[scrollToPage] Error:', error);\r\n    }\r\n  }, [editorRef, positionCursorAtPage]);\r\n\r\n  /**\r\n   * Remove a page and its content from the continuous editor\r\n   * Removes the page break and all content between the page boundaries\r\n   * @param {number} pageIndex - The index of the page to remove (0-based)\r\n   */\r\n  const removePageAndContent = useCallback((pageIndex) => {\r\n    if (!editorRef?.current) {\r\n      return false;\r\n    }\r\n\r\n    const editor = editorRef.current;\r\n    const boundaries = calculatePageBoundaries();\r\n\r\n    // Cannot delete if only one page\r\n    if (boundaries.length <= 1) {\r\n      console.warn('[removePageAndContent] Cannot delete the only page');\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      // Find all page breaks in the editor\r\n      const pageBreaks = Array.from(editor.querySelectorAll('page-break, [data-page-break=\"true\"]'));\r\n      \r\n      if (pageIndex > pageBreaks.length) {\r\n        console.warn('[removePageAndContent] Invalid page index');\r\n        return false;\r\n      }\r\n\r\n      // Save cursor position before deletion\r\n      const selection = window.getSelection();\r\n      let cursorWasInDeletedContent = false;\r\n      \r\n      let nodesToRemove = [];\r\n      let pageBreakToRemove = null;\r\n\r\n      // Special handling for first page (pageIndex === 0)\r\n      if (pageIndex === 0) {\r\n        // For the first page, remove all content before the first page break\r\n        const firstPageBreak = pageBreaks[0];\r\n        \r\n        if (!firstPageBreak) {\r\n          console.warn('[removePageAndContent] No page break found for first page');\r\n          return false;\r\n        }\r\n\r\n        // Collect all nodes before the first page break\r\n        let currentNode = editor.firstChild;\r\n        while (currentNode && currentNode !== firstPageBreak) {\r\n          nodesToRemove.push(currentNode);\r\n          currentNode = currentNode.nextSibling;\r\n        }\r\n\r\n        // The first page break itself should also be removed\r\n        pageBreakToRemove = firstPageBreak;\r\n\r\n      } else {\r\n        // For pages 1 and onwards, remove content between page breaks\r\n        // The page break that starts this page is at index (pageIndex - 1)\r\n        // because page 0 has no break, page 1 has break[0], page 2 has break[1], etc.\r\n        const pageBreakElement = pageBreaks[pageIndex - 1];\r\n        \r\n        if (!pageBreakElement) {\r\n          console.warn('[removePageAndContent] Page break not found');\r\n          return false;\r\n        }\r\n\r\n        // Find the next page break (if any) to determine the end of this page\r\n        const nextPageBreakElement = pageBreaks[pageIndex];\r\n\r\n        // Collect all nodes between the current page break and the next one (or end)\r\n        let currentNode = pageBreakElement.nextSibling;\r\n\r\n        while (currentNode) {\r\n          // Stop if we reach the next page break\r\n          if (currentNode === nextPageBreakElement) {\r\n            break;\r\n          }\r\n          \r\n          nodesToRemove.push(currentNode);\r\n          currentNode = currentNode.nextSibling;\r\n        }\r\n\r\n        pageBreakToRemove = pageBreakElement;\r\n      }\r\n\r\n      // Check if cursor is in the content being deleted\r\n      if (selection && selection.rangeCount > 0) {\r\n        const range = selection.getRangeAt(0);\r\n        const cursorNode = range.startContainer;\r\n        \r\n        for (const node of nodesToRemove) {\r\n          if (node.contains(cursorNode) || node === cursorNode) {\r\n            cursorWasInDeletedContent = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      // Remove the page break element\r\n      if (pageBreakToRemove && pageBreakToRemove.parentNode) {\r\n        pageBreakToRemove.remove();\r\n      }\r\n\r\n      // Remove all content nodes\r\n      nodesToRemove.forEach(node => {\r\n        if (node.parentNode) {\r\n          node.remove();\r\n        }\r\n      });\r\n\r\n      // Renumber remaining page breaks\r\n      const remainingBreaks = editor.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n      remainingBreaks.forEach((breakEl, index) => {\r\n        breakEl.setAttribute('data-page-number', String(index + 2));\r\n      });\r\n\r\n      // Position cursor appropriately after deletion\r\n      if (cursorWasInDeletedContent) {\r\n        // Position cursor at the start of the first remaining page (page 0)\r\n        setTimeout(() => {\r\n          positionCursorAtPage(0);\r\n        }, 50);\r\n      }\r\n\r\n      // Update content in Context\r\n      const updatedHTML = editor.innerHTML;\r\n      actions.updateContinuousContent(updatedHTML);\r\n\r\n      // Update boundaries after deletion\r\n      setTimeout(() => {\r\n        updateBoundaries();\r\n      }, 100);\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('[removePageAndContent] Failed to remove page:', error);\r\n      return false;\r\n    }\r\n  }, [editorRef, calculatePageBoundaries, actions, updateBoundaries, positionCursorAtPage]);\r\n\r\n  return {\r\n    calculatePageBoundaries,\r\n    checkAndUpdateBoundaries,\r\n    updateBoundaries,\r\n    getCurrentPage,\r\n    scrollToPage,\r\n    positionCursorAtPage,\r\n    checkAndReflow,\r\n    triggerAutoReflow,\r\n    removePageAndContent,\r\n    boundaryTimeoutRef,\r\n    reflowTimeoutRef\r\n  };\r\n};\r\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n};\n\nexport { hasA11yProp, mergeClasses, toCamelCase, toKebabCase, toPascalCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses, hasA11yProp } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => createElement(\n    \"svg\",\n    {\n      ref,\n      ...defaultAttributes,\n      width: size,\n      height: size,\n      stroke: color,\n      strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n      className: mergeClasses(\"lucide\", className),\n      ...!children && !hasA11yProp(rest) && { \"aria-hidden\": \"true\" },\n      ...rest\n    },\n    [\n      ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n      ...Array.isArray(children) ? children : [children]\n    ]\n  )\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className\n      ),\n      ...props\n    })\n  );\n  Component.displayName = toPascalCase(iconName);\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8\", key: \"mg9rjx\" }\n  ]\n];\nconst Bold = createLucideIcon(\"bold\", __iconNode);\n\nexport { __iconNode, Bold as default };\n//# sourceMappingURL=bold.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]];\nconst ChevronLeft = createLucideIcon(\"chevron-left\", __iconNode);\n\nexport { __iconNode, ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]];\nconst ChevronRight = createLucideIcon(\"chevron-right\", __iconNode);\n\nexport { __iconNode, ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"m9 15 2 2 4-4\", key: \"1grp1n\" }]\n];\nconst FileCheck = createLucideIcon(\"file-check\", __iconNode);\n\nexport { __iconNode, FileCheck as default };\n//# sourceMappingURL=file-check.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n];\nconst FileText = createLucideIcon(\"file-text\", __iconNode);\n\nexport { __iconNode, FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"9\", y2: \"9\", key: \"4lhtct\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"15\", y2: \"15\", key: \"vyu0kd\" }],\n  [\"line\", { x1: \"10\", x2: \"8\", y1: \"3\", y2: \"21\", key: \"1ggp8o\" }],\n  [\"line\", { x1: \"16\", x2: \"14\", y1: \"3\", y2: \"21\", key: \"weycgp\" }]\n];\nconst Hash = createLucideIcon(\"hash\", __iconNode);\n\nexport { __iconNode, Hash as default };\n//# sourceMappingURL=hash.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M4 12h8\", key: \"17cfdx\" }],\n  [\"path\", { d: \"M4 18V6\", key: \"1rz3zl\" }],\n  [\"path\", { d: \"M12 18V6\", key: \"zqpxq5\" }],\n  [\"path\", { d: \"m17 12 3-2v8\", key: \"1hhhft\" }]\n];\nconst Heading1 = createLucideIcon(\"heading-1\", __iconNode);\n\nexport { __iconNode, Heading1 as default };\n//# sourceMappingURL=heading-1.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M4 12h8\", key: \"17cfdx\" }],\n  [\"path\", { d: \"M4 18V6\", key: \"1rz3zl\" }],\n  [\"path\", { d: \"M12 18V6\", key: \"zqpxq5\" }],\n  [\"path\", { d: \"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1\", key: \"9jr5yi\" }]\n];\nconst Heading2 = createLucideIcon(\"heading-2\", __iconNode);\n\nexport { __iconNode, Heading2 as default };\n//# sourceMappingURL=heading-2.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M4 12h8\", key: \"17cfdx\" }],\n  [\"path\", { d: \"M4 18V6\", key: \"1rz3zl\" }],\n  [\"path\", { d: \"M12 18V6\", key: \"zqpxq5\" }],\n  [\"path\", { d: \"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2\", key: \"68ncm8\" }],\n  [\"path\", { d: \"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2\", key: \"1ejuhz\" }]\n];\nconst Heading3 = createLucideIcon(\"heading-3\", __iconNode);\n\nexport { __iconNode, Heading3 as default };\n//# sourceMappingURL=heading-3.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", ry: \"2\", key: \"1m3agn\" }],\n  [\"circle\", { cx: \"9\", cy: \"9\", r: \"2\", key: \"af1f0g\" }],\n  [\"path\", { d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\", key: \"1xmnt7\" }]\n];\nconst Image = createLucideIcon(\"image\", __iconNode);\n\nexport { __iconNode, Image as default };\n//# sourceMappingURL=image.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"19\", x2: \"10\", y1: \"4\", y2: \"4\", key: \"15jd3p\" }],\n  [\"line\", { x1: \"14\", x2: \"5\", y1: \"20\", y2: \"20\", key: \"bu0au3\" }],\n  [\"line\", { x1: \"15\", x2: \"9\", y1: \"4\", y2: \"20\", key: \"uljnxc\" }]\n];\nconst Italic = createLucideIcon(\"italic\", __iconNode);\n\nexport { __iconNode, Italic as default };\n//# sourceMappingURL=italic.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\", key: \"1cjeqo\" }],\n  [\"path\", { d: \"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\", key: \"19qd67\" }]\n];\nconst Link = createLucideIcon(\"link\", __iconNode);\n\nexport { __iconNode, Link as default };\n//# sourceMappingURL=link.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M11 5h10\", key: \"1cz7ny\" }],\n  [\"path\", { d: \"M11 12h10\", key: \"1438ji\" }],\n  [\"path\", { d: \"M11 19h10\", key: \"11t30w\" }],\n  [\"path\", { d: \"M4 4h1v5\", key: \"10yrso\" }],\n  [\"path\", { d: \"M4 9h2\", key: \"r1h2o0\" }],\n  [\"path\", { d: \"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02\", key: \"xtkcd5\" }]\n];\nconst ListOrdered = createLucideIcon(\"list-ordered\", __iconNode);\n\nexport { __iconNode, ListOrdered as default };\n//# sourceMappingURL=list-ordered.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 5h.01\", key: \"18ugdj\" }],\n  [\"path\", { d: \"M3 12h.01\", key: \"nlz23k\" }],\n  [\"path\", { d: \"M3 19h.01\", key: \"noohij\" }],\n  [\"path\", { d: \"M8 5h13\", key: \"1pao27\" }],\n  [\"path\", { d: \"M8 12h13\", key: \"1za7za\" }],\n  [\"path\", { d: \"M8 19h13\", key: \"m83p4d\" }]\n];\nconst List = createLucideIcon(\"list\", __iconNode);\n\nexport { __iconNode, List as default };\n//# sourceMappingURL=list.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n];\nconst Plus = createLucideIcon(\"plus\", __iconNode);\n\nexport { __iconNode, Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21 7v6h-6\", key: \"3ptur4\" }],\n  [\"path\", { d: \"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7\", key: \"1kgawr\" }]\n];\nconst Redo = createLucideIcon(\"redo\", __iconNode);\n\nexport { __iconNode, Redo as default };\n//# sourceMappingURL=redo.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n];\nconst Settings = createLucideIcon(\"settings\", __iconNode);\n\nexport { __iconNode, Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 4H9a3 3 0 0 0-2.83 4\", key: \"43sutm\" }],\n  [\"path\", { d: \"M14 12a4 4 0 0 1 0 8H6\", key: \"nlfj13\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }]\n];\nconst Strikethrough = createLucideIcon(\"strikethrough\", __iconNode);\n\nexport { __iconNode, Strikethrough as default };\n//# sourceMappingURL=strikethrough.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 3v18\", key: \"108xh3\" }],\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M3 9h18\", key: \"1pudct\" }],\n  [\"path\", { d: \"M3 15h18\", key: \"5xshup\" }]\n];\nconst Table = createLucideIcon(\"table\", __iconNode);\n\nexport { __iconNode, Table as default };\n//# sourceMappingURL=table.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21 5H3\", key: \"1fi0y6\" }],\n  [\"path\", { d: \"M17 12H7\", key: \"16if0g\" }],\n  [\"path\", { d: \"M19 19H5\", key: \"vjpgq2\" }]\n];\nconst TextAlignCenter = createLucideIcon(\"text-align-center\", __iconNode);\n\nexport { __iconNode, TextAlignCenter as default };\n//# sourceMappingURL=text-align-center.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21 5H3\", key: \"1fi0y6\" }],\n  [\"path\", { d: \"M21 12H9\", key: \"dn1m92\" }],\n  [\"path\", { d: \"M21 19H7\", key: \"4cu937\" }]\n];\nconst TextAlignEnd = createLucideIcon(\"text-align-end\", __iconNode);\n\nexport { __iconNode, TextAlignEnd as default };\n//# sourceMappingURL=text-align-end.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 5h18\", key: \"1u36vt\" }],\n  [\"path\", { d: \"M3 12h18\", key: \"1i2n21\" }],\n  [\"path\", { d: \"M3 19h18\", key: \"awlh7x\" }]\n];\nconst TextAlignJustify = createLucideIcon(\"text-align-justify\", __iconNode);\n\nexport { __iconNode, TextAlignJustify as default };\n//# sourceMappingURL=text-align-justify.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21 5H3\", key: \"1fi0y6\" }],\n  [\"path\", { d: \"M15 12H3\", key: \"6jk70r\" }],\n  [\"path\", { d: \"M17 19H3\", key: \"z6ezky\" }]\n];\nconst TextAlignStart = createLucideIcon(\"text-align-start\", __iconNode);\n\nexport { __iconNode, TextAlignStart as default };\n//# sourceMappingURL=text-align-start.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M6 4v6a6 6 0 0 0 12 0V4\", key: \"9kb039\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"20\", y2: \"20\", key: \"nun2al\" }]\n];\nconst Underline = createLucideIcon(\"underline\", __iconNode);\n\nexport { __iconNode, Underline as default };\n//# sourceMappingURL=underline.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 7v6h6\", key: \"1v2h90\" }],\n  [\"path\", { d: \"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13\", key: \"1r6uu6\" }]\n];\nconst Undo = createLucideIcon(\"undo\", __iconNode);\n\nexport { __iconNode, Undo as default };\n//# sourceMappingURL=undo.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n];\nconst X = createLucideIcon(\"x\", __iconNode);\n\nexport { __iconNode, X as default };\n//# sourceMappingURL=x.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"11\", x2: \"11\", y1: \"8\", y2: \"14\", key: \"1vmskp\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n];\nconst ZoomIn = createLucideIcon(\"zoom-in\", __iconNode);\n\nexport { __iconNode, ZoomIn as default };\n//# sourceMappingURL=zoom-in.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n];\nconst ZoomOut = createLucideIcon(\"zoom-out\", __iconNode);\n\nexport { __iconNode, ZoomOut as default };\n//# sourceMappingURL=zoom-out.js.map\n","import React, { useState, useEffect } from 'react';\r\nimport { useDocumentState } from '../../context/DocumentContext';\r\nimport { \r\n  FileText, \r\n  Hash, \r\n  FileCheck, \r\n  ChevronLeft, \r\n  ChevronRight,\r\n  Heading1,\r\n  Heading2,\r\n  Heading3,\r\n  List\r\n} from 'lucide-react';\r\nimport './Sidebar.css';\r\n\r\n/**\r\n * Sidebar Component\r\n * Displays document information, outline, and word count\r\n * @param {Object} props\r\n * @param {Object} props.editorView - Editor view instance (not used in contenteditable)\r\n * @param {boolean} props.isCollapsed - Whether sidebar is collapsed\r\n * @param {Function} props.onToggle - Callback for collapse toggle\r\n * @param {number} props.wordCount - Optional word count (for continuous mode)\r\n * @param {number} props.pageCount - Optional page count (for continuous mode)\r\n */\r\nexport const Sidebar = ({ editorView, isCollapsed, onToggle, wordCount: propWordCount, pageCount: propPageCount }) => {\r\n  const documentState = useDocumentState();\r\n  const { pages, activePage, continuousContent, editorMode } = documentState;\r\n  const [wordCount, setWordCount] = useState(0);\r\n  const [outline, setOutline] = useState([]);\r\n\r\n  // Calculate word count and extract outline from content\r\n  useEffect(() => {\r\n    // Use prop values if provided (continuous mode)\r\n    if (propWordCount !== undefined && propPageCount !== undefined) {\r\n      setWordCount(propWordCount);\r\n      \r\n      // Extract outline from continuous content\r\n      if (continuousContent) {\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = continuousContent;\r\n        const headingElements = tempDiv.querySelectorAll('h1, h2, h3, h4, h5, h6');\r\n        const headings = Array.from(headingElements).map((heading, index) => {\r\n          const level = parseInt(heading.tagName.charAt(1));\r\n          const text = heading.textContent.trim();\r\n          return text ? {\r\n            id: `heading-${index}`,\r\n            level,\r\n            text,\r\n            page: 1 // Continuous mode doesn't have meaningful page numbers for headings\r\n          } : null;\r\n        }).filter(Boolean);\r\n        setOutline(headings);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Paged mode: Calculate from pages array\r\n    let totalWords = 0;\r\n    const headings = [];\r\n\r\n    pages.forEach((page, pageIndex) => {\r\n      if (page.content) {\r\n        // Extract text content and count words\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = page.content;\r\n        const text = tempDiv.textContent || tempDiv.innerText || '';\r\n        const words = text.trim().split(/\\s+/).filter(word => word.length > 0);\r\n        totalWords += words.length;\r\n\r\n        // Extract headings for outline\r\n        const headingElements = tempDiv.querySelectorAll('h1, h2, h3, h4, h5, h6');\r\n        headingElements.forEach((heading, index) => {\r\n          const level = parseInt(heading.tagName.charAt(1));\r\n          const text = heading.textContent.trim();\r\n          if (text) {\r\n            headings.push({\r\n              id: `heading-${pageIndex}-${index}`,\r\n              level,\r\n              text,\r\n              page: pageIndex + 1\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    setWordCount(totalWords);\r\n    setOutline(headings);\r\n  }, [pages, propWordCount, propPageCount, continuousContent]);\r\n\r\n  const displayPageCount = propPageCount !== undefined ? propPageCount : pages.length;\r\n\r\n  return (\r\n    <aside \r\n      className={`sidebar ${isCollapsed ? 'collapsed' : ''}`} \r\n      role=\"complementary\"\r\n      aria-label=\"Document information\"\r\n      data-testid=\"sidebar\"\r\n    >\r\n      <div className=\"sidebar-header\">\r\n        <div className=\"sidebar-title\">\r\n          <FileText size={18} />\r\n          <h2>Document Info</h2>\r\n        </div>\r\n        <button\r\n          className=\"sidebar-toggle\"\r\n          onClick={onToggle}\r\n          aria-label={isCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\r\n          title={isCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\r\n        >\r\n          {isCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n        </button>\r\n      </div>\r\n\r\n      {!isCollapsed && (\r\n        <div className=\"sidebar-content\">\r\n          <div className=\"sidebar-section\">\r\n            <h3>Statistics</h3>\r\n            <div className=\"stat-item\">\r\n              <div className=\"stat-label\">\r\n                <FileCheck size={14} />\r\n                <span>Pages:</span>\r\n              </div>\r\n              <span className=\"stat-value\">{displayPageCount}</span>\r\n            </div>\r\n            <div className=\"stat-item\" data-testid=\"word-count\">\r\n              <div className=\"stat-label\">\r\n                <Hash size={14} />\r\n                <span>Words:</span>\r\n              </div>\r\n              <span className=\"stat-value\">{wordCount.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"stat-item\">\r\n              <div className=\"stat-label\">\r\n                <FileText size={14} />\r\n                <span>Active Page:</span>\r\n              </div>\r\n              <span className=\"stat-value\">{activePage + 1}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {outline.length > 0 && (\r\n            <div className=\"sidebar-section\">\r\n              <h3>\r\n                <List size={14} style={{ display: 'inline-block', marginRight: '6px', verticalAlign: 'middle' }} />\r\n                Document Outline\r\n              </h3>\r\n              <div className=\"document-outline\" data-testid=\"outline\">\r\n                {outline.map((heading) => {\r\n                  const HeadingIcon = heading.level === 1 ? Heading1 : heading.level === 2 ? Heading2 : Heading3;\r\n                  return (\r\n                    <div \r\n                      key={heading.id}\r\n                      className={`outline-item outline-level-${heading.level}`}\r\n                      style={{ marginLeft: `${(heading.level - 1) * 12}px` }}\r\n                    >\r\n                      <HeadingIcon size={12} className=\"outline-icon\" />\r\n                      <span className=\"outline-text\">{heading.text}</span>\r\n                      <span className=\"outline-page\">p.{heading.page}</span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"sidebar-section\">\r\n            <h3>Document</h3>\r\n            <p>HTML Editor</p>\r\n            <p>Multi-page support</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </aside>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n","/**\r\n * Local storage service for handling image persistence in the editor\r\n * Stores images as base64 data URLs with size validation\r\n */\r\n\r\n/**\r\n * Generates a UUID v4 string for unique image keys\r\n * @returns {string} UUID string\r\n */\r\nfunction generateUUID() {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n    const r = Math.random() * 16 | 0;\r\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n    return v.toString(16);\r\n  });\r\n}\r\n\r\n/**\r\n * Saves an image file to browser local storage\r\n * @param {File} file - Image file to store\r\n * @returns {Promise<string>} Promise resolving to storage key\r\n * @throws {Error} When image validation fails or storage quota exceeded\r\n */\r\nexport function saveImage(file) {\r\n  return new Promise((resolve, reject) => {\r\n    // Validate file type\r\n    const validTypes = ['image/png', 'image/jpeg', 'image/gif', 'image/webp'];\r\n    if (!validTypes.includes(file.type)) {\r\n      reject(new Error('Invalid image format. Supported formats: png, jpeg, gif, webp'));\r\n      return;\r\n    }\r\n\r\n    // Check file size (5MB limit)\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      reject(new Error('Image exceeds maximum size of 5MB'));\r\n      return;\r\n    }\r\n\r\n    const reader = new FileReader();\r\n    \r\n    reader.onload = (event) => {\r\n      const dataUrl = event.target.result;\r\n      \r\n      // Calculate base64 size (3 bytes for every 4 characters)\r\n      const base64String = dataUrl.split(',')[1];\r\n      const sizeInBytes = (base64String.length * 3) / 4;\r\n      \r\n      if (sizeInBytes > 5 * 1024 * 1024) {\r\n        reject(new Error('Image exceeds maximum size of 5MB'));\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const key = `editor-image-${generateUUID()}`;\r\n        localStorage.setItem(key, dataUrl);\r\n        resolve(key);\r\n      } catch (error) {\r\n        if (error.name === 'QuotaExceededError') {\r\n          reject(new Error('Storage quota exceeded'));\r\n        } else {\r\n          reject(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    reader.onerror = () => {\r\n      reject(new Error('Error reading image file'));\r\n    };\r\n\r\n    reader.readAsDataURL(file);\r\n  });\r\n}\r\n\r\n/**\r\n * Retrieves an image from local storage by key\r\n * @param {string} key - Storage key for the image\r\n * @returns {string|null} Data URL of the image or null if not found\r\n */\r\nexport function getImage(key) {\r\n  return localStorage.getItem(key);\r\n}\r\n\r\n/**\r\n * Deletes an image from local storage\r\n * @param {string} key - Storage key for the image\r\n */\r\nexport function deleteImage(key) {\r\n  localStorage.removeItem(key);\r\n}\r\n\r\n/**\r\n * Clears all editor images from local storage\r\n */\r\nexport function clearImages() {\r\n  Object.keys(localStorage).forEach(key => {\r\n    if (key.startsWith('editor-image-')) {\r\n      localStorage.removeItem(key);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Gets all stored image keys\r\n * @returns {string[]} Array of image storage keys\r\n */\r\nexport function getAllImageKeys() {\r\n  return Object.keys(localStorage).filter(key => \r\n    key.startsWith('editor-image-')\r\n  );\r\n}","/**\r\n * Logger utility for the editor\r\n * Provides consistent logging across the application\r\n * Disabled in production for performance\r\n */\r\n\r\nconst isDevelopment = import.meta.env.MODE === 'development';\r\n\r\n/**\r\n * Logger class for structured logging\r\n */\r\nclass Logger {\r\n  constructor(namespace = 'Editor') {\r\n    this.namespace = namespace;\r\n  }\r\n\r\n  /**\r\n   * Formats log message with namespace\r\n   * @param {string} level - Log level\r\n   * @param {string} message - Log message\r\n   * @param {any} data - Optional data to log\r\n   * @returns {string} Formatted message\r\n   */\r\n  _format(level, message, data) {\r\n    const timestamp = new Date().toISOString();\r\n    return `[${timestamp}] [${this.namespace}] [${level}] ${message}`;\r\n  }\r\n\r\n  /**\r\n   * Info level logging\r\n   * @param {string} message - Info message\r\n   * @param {any} data - Optional data\r\n   */\r\n  info(message, data) {\r\n    if (!isDevelopment) return;\r\n    \r\n    console.log(this._format('INFO', message));\r\n    if (data) console.log(data);\r\n  }\r\n\r\n  /**\r\n   * Warning level logging\r\n   * @param {string} message - Warning message\r\n   * @param {any} data - Optional data\r\n   */\r\n  warn(message, data) {\r\n    if (!isDevelopment) return;\r\n    \r\n    console.warn(this._format('WARN', message));\r\n    if (data) console.warn(data);\r\n  }\r\n\r\n  /**\r\n   * Error level logging\r\n   * @param {string} message - Error message\r\n   * @param {Error|any} error - Error object or data\r\n   */\r\n  error(message, error) {\r\n    if (!isDevelopment) return;\r\n    \r\n    console.error(this._format('ERROR', message));\r\n    if (error) {\r\n      if (error instanceof Error) {\r\n        console.error(error.message);\r\n        console.error(error.stack);\r\n      } else {\r\n        console.error(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Debug level logging\r\n   * @param {string} message - Debug message\r\n   * @param {any} data - Optional data\r\n   */\r\n  debug(message, data) {\r\n    if (!isDevelopment) return;\r\n    \r\n    console.debug(this._format('DEBUG', message));\r\n    if (data) console.debug(data);\r\n  }\r\n}\r\n\r\n// Create default logger instance\r\nexport const logger = new Logger('Editor');\r\n\r\n// Export Logger class for custom instances\r\nexport default Logger;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { \r\n  Bold, \r\n  Italic, \r\n  Underline, \r\n  Strikethrough,\r\n  AlignLeft,\r\n  AlignCenter,\r\n  AlignRight,\r\n  AlignJustify,\r\n  List,\r\n  ListOrdered,\r\n  Link,\r\n  Table,\r\n  FileText,\r\n  Undo,\r\n  Redo,\r\n  Image as ImageIcon\r\n} from 'lucide-react';\r\nimport { saveImage } from '../../lib/storage/local-storage';\r\nimport { logger } from '../../lib/editor/utils/logger';\r\n\r\n/**\r\n * EditorToolbar - Formatting toolbar for the multi-page editor\r\n * Provides text formatting, alignment, lists, links, tables, and image insertion\r\n */\r\nconst EditorToolbar = ({ \r\n  currentFormat, \r\n  onFormatText, \r\n  onAddPageBreak\r\n}) => {\r\n  /**\r\n   * Handle image upload\r\n   */\r\n  const handleImageUpload = async (file) => {\r\n    try {\r\n      const validTypes = ['image/png', 'image/jpeg', 'image/gif', 'image/webp'];\r\n      if (!validTypes.includes(file.type)) {\r\n        alert('Invalid image format. Supported: PNG, JPEG, GIF, WEBP');\r\n        return;\r\n      }\r\n\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        alert('Image exceeds maximum size of 5MB');\r\n        return;\r\n      }\r\n\r\n      const key = await saveImage(file);\r\n      const imageUrl = localStorage.getItem(key);\r\n      \r\n      if (imageUrl) {\r\n        document.execCommand('insertImage', false, imageUrl);\r\n        logger.info('Image inserted', { key });\r\n      }\r\n    } catch (error) {\r\n      logger.error('Error uploading image', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"editor-toolbar\">\r\n      <button \r\n        onClick={() => onFormatText('undo')} \r\n        title=\"Undo\"\r\n      >\r\n        <Undo size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('redo')} \r\n        title=\"Redo\"\r\n      >\r\n        <Redo size={16} />\r\n      </button>\r\n      \r\n      <div className=\"toolbar-separator\" />\r\n      \r\n      <button \r\n        onClick={() => onFormatText('bold')} \r\n        className={currentFormat.bold ? 'active' : ''} \r\n        title=\"Bold\"\r\n      >\r\n        <Bold size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('italic')} \r\n        className={currentFormat.italic ? 'active' : ''} \r\n        title=\"Italic\"\r\n      >\r\n        <Italic size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('underline')} \r\n        className={currentFormat.underline ? 'active' : ''} \r\n        title=\"Underline\"\r\n      >\r\n        <Underline size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('strikethrough')} \r\n        className={currentFormat.strikethrough ? 'active' : ''} \r\n        title=\"Strikethrough\"\r\n      >\r\n        <Strikethrough size={16} />\r\n      </button>\r\n      \r\n      <div className=\"toolbar-separator\" />\r\n      \r\n      <button \r\n        onClick={() => onFormatText('justifyLeft')} \r\n        className={currentFormat.alignLeft ? 'active' : ''} \r\n        title=\"Align Left\"\r\n      >\r\n        <AlignLeft size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('justifyCenter')} \r\n        className={currentFormat.alignCenter ? 'active' : ''} \r\n        title=\"Align Center\"\r\n      >\r\n        <AlignCenter size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('justifyRight')} \r\n        className={currentFormat.alignRight ? 'active' : ''} \r\n        title=\"Align Right\"\r\n      >\r\n        <AlignRight size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('justifyFull')} \r\n        className={currentFormat.alignJustify ? 'active' : ''} \r\n        title=\"Justify\"\r\n      >\r\n        <AlignJustify size={16} />\r\n      </button>\r\n      \r\n      <div className=\"toolbar-separator\" />\r\n      \r\n      <select \r\n        onChange={(e) => onFormatText('fontName', e.target.value)}\r\n        defaultValue=\"Arial\"\r\n        title=\"Font Family\"\r\n      >\r\n        <option value=\"Arial\">Arial</option>\r\n        <option value=\"Times New Roman\">Times New Roman</option>\r\n        <option value=\"Courier New\">Courier New</option>\r\n        <option value=\"Georgia\">Georgia</option>\r\n        <option value=\"Verdana\">Verdana</option>\r\n      </select>\r\n      \r\n      <select \r\n        onChange={(e) => onFormatText('fontSize', e.target.value)}\r\n        defaultValue=\"12px\"\r\n        title=\"Font Size\"\r\n      >\r\n        <option value=\"10px\">10</option>\r\n        <option value=\"12px\">12</option>\r\n        <option value=\"14px\">14</option>\r\n        <option value=\"16px\">16</option>\r\n        <option value=\"18px\">18</option>\r\n        <option value=\"24px\">24</option>\r\n        <option value=\"32px\">32</option>\r\n      </select>\r\n      \r\n      <select \r\n        onChange={(e) => onFormatText('formatBlock', e.target.value)}\r\n        value={currentFormat.headingLevel || 'p'}\r\n        title=\"Heading Level\"\r\n      >\r\n        <option value=\"p\">Normal</option>\r\n        <option value=\"h1\">Heading 1</option>\r\n        <option value=\"h2\">Heading 2</option>\r\n        <option value=\"h3\">Heading 3</option>\r\n        <option value=\"h4\">Heading 4</option>\r\n        <option value=\"h5\">Heading 5</option>\r\n        <option value=\"h6\">Heading 6</option>\r\n      </select>\r\n      \r\n      <div className=\"toolbar-separator\" />\r\n      \r\n      <button \r\n        onClick={() => onFormatText('insertUnorderedList')} \r\n        title=\"Bullet List\"\r\n      >\r\n        <List size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('insertOrderedList')} \r\n        title=\"Numbered List\"\r\n      >\r\n        <ListOrdered size={16} />\r\n      </button>\r\n      \r\n      <div className=\"toolbar-separator\" />\r\n      \r\n      <button \r\n        onClick={() => {\r\n          const url = prompt('Enter URL:');\r\n          if (url) onFormatText('createLink', url);\r\n        }} \r\n        title=\"Insert Link\"\r\n      >\r\n        <Link size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('insertHTML', '<table border=\"1\"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>')} \r\n        title=\"Insert Table\"\r\n      >\r\n        <Table size={16} />\r\n      </button>\r\n      \r\n      {onAddPageBreak && (\r\n        <button \r\n          onClick={onAddPageBreak} \r\n          title=\"Insert Page Break\"\r\n        >\r\n          <FileText size={16} />\r\n        </button>\r\n      )}\r\n      \r\n      <input \r\n        type=\"file\" \r\n        accept=\"image/*\" \r\n        onChange={(e) => e.target.files[0] && handleImageUpload(e.target.files[0])}\r\n        style={{ display: 'none' }}\r\n        id=\"image-upload\"\r\n      />\r\n      <button \r\n        onClick={() => document.getElementById('image-upload').click()} \r\n        title=\"Insert Image\"\r\n      >\r\n        <ImageIcon size={16} />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nEditorToolbar.propTypes = {\r\n  currentFormat: PropTypes.shape({\r\n    bold: PropTypes.bool,\r\n    italic: PropTypes.bool,\r\n    underline: PropTypes.bool,\r\n    strikethrough: PropTypes.bool,\r\n    alignLeft: PropTypes.bool,\r\n    alignCenter: PropTypes.bool,\r\n    alignRight: PropTypes.bool,\r\n    alignJustify: PropTypes.bool,\r\n    fontFamily: PropTypes.string,\r\n    fontSize: PropTypes.string,\r\n    headingLevel: PropTypes.string\r\n  }).isRequired,\r\n  onFormatText: PropTypes.func.isRequired,\r\n  onAddPageBreak: PropTypes.func\r\n};\r\n\r\nEditorToolbar.defaultProps = {\r\n  onAddPageBreak: undefined\r\n};\r\n\r\nexport default EditorToolbar;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * PageView - MS Word-like continuous contenteditable surface\r\n * Single contenteditable div with manual page breaks using <page-break> tags\r\n * Content flows continuously with explicit page boundaries\r\n * Supports zoom scaling via CSS transform\r\n */\r\nconst PageView = ({ \r\n  content, \r\n  dimensions, \r\n  pageSize,\r\n  pageBoundaries = [],\r\n  editorRef,\r\n  onInput,\r\n  onKeyDown,\r\n  onClick,\r\n  onScroll,\r\n  zoomLevel = 100\r\n}) => {\r\n  const padding = {\r\n    top: 60,\r\n    bottom: 100,\r\n    left: 72,\r\n    right: 72\r\n  };\r\n\r\n  // Calculate zoom multiplier\r\n  const zoomMultiplier = zoomLevel / 100;\r\n\r\n  // Helper function to check if cursor is in padding area\r\n  const isInPaddingArea = (element, clientY) => {\r\n    if (!element) return false;\r\n    \r\n    const rect = element.getBoundingClientRect();\r\n    const relativeY = clientY - rect.top;\r\n    \r\n    // Check if in top or bottom padding\r\n    if (relativeY < padding.top || relativeY > (rect.height - padding.bottom)) {\r\n      return true;\r\n    }\r\n    \r\n    return false;\r\n  };\r\n\r\n  // Helper function to check if element is or contains a page-break\r\n  const isPageBreakElement = (node) => {\r\n    if (!node) return false;\r\n    if (node.nodeType === Node.ELEMENT_NODE) {\r\n      return node.tagName === 'PAGE-BREAK' || node.getAttribute('data-page-break') === 'true';\r\n    }\r\n    return node.parentElement && isPageBreakElement(node.parentElement);\r\n  };\r\n\r\n  // Prevent deletion of page-break elements and handle Tab key\r\n  const handleKeyDown = (event) => {\r\n    const selection = window.getSelection();\r\n    if (!selection || selection.rangeCount === 0) return;\r\n\r\n    const range = selection.getRangeAt(0);\r\n    const { startContainer, endContainer } = range;\r\n\r\n    // Prevent typing on page-break elements\r\n    if (isPageBreakElement(startContainer) || isPageBreakElement(endContainer)) {\r\n      if (event.key.length === 1 || event.key === 'Enter' || event.key === ' ') {\r\n        event.preventDefault();\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // Handle Tab key to insert tab character\r\n    if (event.key === 'Tab') {\r\n      event.preventDefault();\r\n      document.execCommand('insertHTML', false, '&nbsp;&nbsp;&nbsp;&nbsp;');\r\n      return false;\r\n    }\r\n\r\n    // Prevent deletion of page-break elements\r\n    if (event.key === 'Backspace' || event.key === 'Delete') {\r\n      if (isPageBreakElement(startContainer) || isPageBreakElement(endContainer)) {\r\n        event.preventDefault();\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (onKeyDown) {\r\n      onKeyDown(event);\r\n    }\r\n  };\r\n\r\n  // Handle click events to prevent cursor placement in padding areas\r\n  const handleClick = (event) => {\r\n    if (!editorRef.current) return;\r\n\r\n    const clickedElement = event.target;\r\n    \r\n    // Prevent clicking on page-break elements\r\n    if (isPageBreakElement(clickedElement)) {\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n\r\n    // Check if click is in padding area\r\n    if (isInPaddingArea(editorRef.current, event.clientY)) {\r\n      event.preventDefault();\r\n      \r\n      // Move cursor to the nearest valid content area\r\n      const rect = editorRef.current.getBoundingClientRect();\r\n      const relativeY = event.clientY - rect.top;\r\n      \r\n      if (relativeY < padding.top) {\r\n        // Click was in top padding - move to first content element\r\n        const firstChild = editorRef.current.firstElementChild;\r\n        if (firstChild && firstChild.tagName !== 'PAGE-BREAK') {\r\n          const range = document.createRange();\r\n          const sel = window.getSelection();\r\n          range.setStart(firstChild, 0);\r\n          range.collapse(true);\r\n          sel.removeAllRanges();\r\n          sel.addRange(range);\r\n        }\r\n      } else {\r\n        // Click was in bottom padding - move to last content element\r\n        const lastChild = editorRef.current.lastElementChild;\r\n        if (lastChild && lastChild.tagName !== 'PAGE-BREAK') {\r\n          const range = document.createRange();\r\n          const sel = window.getSelection();\r\n          range.selectNodeContents(lastChild);\r\n          range.collapse(false);\r\n          sel.removeAllRanges();\r\n          sel.addRange(range);\r\n        }\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (onClick) {\r\n      onClick(event);\r\n    }\r\n  };\r\n\r\n  // Prevent input in padding areas and on page breaks\r\n  const handleBeforeInput = (event) => {\r\n    const selection = window.getSelection();\r\n    if (!selection || selection.rangeCount === 0) return;\r\n\r\n    const range = selection.getRangeAt(0);\r\n    const { startContainer } = range;\r\n\r\n    // Prevent input on page-break elements\r\n    if (isPageBreakElement(startContainer)) {\r\n      event.preventDefault();\r\n      return false;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className=\"continuous-page-container\"\r\n      style={{\r\n        position: 'relative',\r\n        width: '100%',\r\n        maxWidth: `${dimensions.width}px`,\r\n        margin: '40px auto',\r\n        backgroundColor: 'transparent',\r\n        minHeight: '100vh',\r\n        transform: `scale(${zoomMultiplier})`,\r\n        transformOrigin: 'top center',\r\n        transition: 'transform 0.2s ease-out'\r\n      }}\r\n    >\r\n      {/* Continuous contenteditable surface with page styling */}\r\n      <div\r\n        ref={editorRef}\r\n        contentEditable={true}\r\n        suppressContentEditableWarning={true}\r\n        className=\"continuous-content\"\r\n        style={{\r\n          position: 'relative',\r\n          zIndex: 1,\r\n          minHeight: `${dimensions.height}px`,\r\n          width: `${dimensions.width}px`,\r\n          backgroundColor: 'white',\r\n          padding: `${padding.top}px ${padding.right}px ${padding.bottom}px ${padding.left}px`,\r\n          boxSizing: 'border-box',\r\n          boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',\r\n          outline: 'none',\r\n          cursor: 'text',\r\n          fontFamily: 'Arial, sans-serif',\r\n          fontSize: '12px',\r\n          lineHeight: '1.15',\r\n          color: '#333',\r\n          wordWrap: 'break-word',\r\n          whiteSpace: 'pre-wrap',\r\n          overflowWrap: 'break-word',\r\n          border: '1px solid #e0e0e0'\r\n        }}\r\n        onInput={onInput}\r\n        onKeyDown={handleKeyDown}\r\n        onBeforeInput={handleBeforeInput}\r\n        onClick={handleClick}\r\n        onScroll={onScroll}\r\n        data-testid=\"continuous-editor\"\r\n      >\r\n        {/* Content is set via innerHTML in parent component */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nPageView.propTypes = {\r\n  content: PropTypes.string.isRequired,\r\n  dimensions: PropTypes.shape({\r\n    width: PropTypes.number.isRequired,\r\n    height: PropTypes.number.isRequired\r\n  }).isRequired,\r\n  pageSize: PropTypes.oneOf(['A4', 'Letter', 'Legal']).isRequired,\r\n  pageBoundaries: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      pageNumber: PropTypes.number.isRequired,\r\n      top: PropTypes.number,\r\n      height: PropTypes.number\r\n    })\r\n  ),\r\n  editorRef: PropTypes.shape({\r\n    current: PropTypes.instanceOf(typeof Element !== 'undefined' ? Element : Object)\r\n  }).isRequired,\r\n  onInput: PropTypes.func.isRequired,\r\n  onKeyDown: PropTypes.func,\r\n  onClick: PropTypes.func,\r\n  onScroll: PropTypes.func,\r\n  zoomLevel: PropTypes.number\r\n};\r\n\r\nPageView.defaultProps = {\r\n  pageBoundaries: [],\r\n  onKeyDown: undefined,\r\n  onClick: undefined,\r\n  onScroll: undefined,\r\n  zoomLevel: 100\r\n};\r\n\r\nexport default PageView;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FileText, Plus, X, Settings, ZoomIn, ZoomOut } from 'lucide-react';\r\n\r\n/**\r\n * PageManager Component - Standalone Component\r\n * \r\n * COMPLETELY INDEPENDENT - can be used with or without the editor\r\n * Accepts all state as props, uses callbacks for all actions\r\n * Perfect for external apps that want to provide their own PageManager UI\r\n * \r\n * @param {Object} props - Component props\r\n * @param {Array} props.pageBoundaries - Array of page boundary objects [{id, pageNumber, top, height}, ...]\r\n * @param {number} props.activePage - Current active page index (0-based)\r\n * @param {string} props.pageSize - Current page size ('A4', 'Letter', or 'Legal')\r\n * @param {number} props.zoomLevel - Current zoom level (50-200)\r\n * @param {boolean} props.canZoomIn - Whether zoom in is allowed\r\n * @param {boolean} props.canZoomOut - Whether zoom out is allowed\r\n * @param {Function} props.onNavigate - Callback when page changes (pageIndex)\r\n * @param {Function} props.onAddPage - Callback when page is added\r\n * @param {Function} props.onDeletePage - Callback when page is deleted (pageIndex)\r\n * @param {Function} props.onPageSizeChange - Callback when page size changes (newSize)\r\n * @param {Function} props.onZoomIn - Callback when zoom in is clicked\r\n * @param {Function} props.onZoomOut - Callback when zoom out is clicked\r\n * @param {Function} props.onZoomReset - Callback when zoom reset is clicked\r\n */\r\nexport const PageManager = ({ \r\n  pageBoundaries = [{ id: 'page-0', pageNumber: 1 }],\r\n  activePage = 0,\r\n  pageSize = 'A4',\r\n  zoomLevel = 100,\r\n  canZoomIn = true,\r\n  canZoomOut = true,\r\n  onNavigate, \r\n  onAddPage,\r\n  onDeletePage,\r\n  onPageSizeChange,\r\n  onZoomIn,\r\n  onZoomOut,\r\n  onZoomReset\r\n} = {}) => {\r\n  // Ensure we always have at least one page\r\n  const totalPages = Math.max(pageBoundaries?.length || 0, 1);\r\n\r\n  const handleNavigate = (pageIndex) => {\r\n    // Delegate to parent callback\r\n    if (onNavigate) {\r\n      onNavigate(pageIndex);\r\n    }\r\n  };\r\n\r\n  const handleAddPage = () => {\r\n    // Delegate to parent callback\r\n    if (onAddPage) {\r\n      onAddPage();\r\n    }\r\n  };\r\n\r\n  const handleDeletePage = (pageIndex) => {\r\n    if (totalPages <= 1) {\r\n      console.warn('[PageManager] Cannot delete the only page');\r\n      return;\r\n    }\r\n    \r\n    // Delegate to parent callback\r\n    if (onDeletePage) {\r\n      onDeletePage(pageIndex);\r\n    }\r\n  };\r\n\r\n  const handlePageSizeChange = (newSize) => {\r\n    // Delegate to parent callback\r\n    if (onPageSizeChange) {\r\n      onPageSizeChange(newSize);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page-manager\">\r\n      {/* Page Size Selector */}\r\n      <div className=\"page-size-controls\">\r\n        <label htmlFor=\"page-size-selector\">\r\n          <Settings size={14} style={{ marginRight: '4px', verticalAlign: 'middle' }} />\r\n          Page Size:\r\n        </label>\r\n        <select\r\n          id=\"page-size-selector\"\r\n          role=\"combobox\"\r\n          aria-label=\"Page size selector\"\r\n          value={pageSize}\r\n          onChange={(e) => handlePageSizeChange(e.target.value)}\r\n        >\r\n          <option value=\"A4\">A4</option>\r\n          <option value=\"Letter\">Letter</option>\r\n          <option value=\"Legal\">Legal</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Zoom Controls */}\r\n      <div className=\"zoom-controls\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"zoom-button\"\r\n          onClick={onZoomOut}\r\n          disabled={!canZoomOut}\r\n          aria-label=\"Zoom out\"\r\n          title=\"Zoom out (Ctrl + -)\"\r\n        >\r\n          <ZoomOut size={14} />\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"zoom-reset-button\"\r\n          onClick={onZoomReset}\r\n          aria-label=\"Reset zoom\"\r\n          title=\"Reset zoom to 100% (Ctrl + 0)\"\r\n        >\r\n          {zoomLevel}%\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"zoom-button\"\r\n          onClick={onZoomIn}\r\n          disabled={!canZoomIn}\r\n          aria-label=\"Zoom in\"\r\n          title=\"Zoom in (Ctrl + +)\"\r\n        >\r\n          <ZoomIn size={14} />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Page List */}\r\n      <div className=\"page-list\">\r\n        {(pageBoundaries && pageBoundaries.length > 0 ? pageBoundaries : [{ id: 'page-0', pageNumber: 1 }]).map((boundary, index) => (\r\n          <div key={boundary.id || `page-${index}`} className=\"page-item\">\r\n            <button\r\n              type=\"button\"\r\n              className={`page-button ${index === activePage ? 'active' : ''}`}\r\n              onClick={() => handleNavigate(index)}\r\n              aria-label={`Go to page ${index + 1}`}\r\n              aria-current={index === activePage ? 'page' : undefined}\r\n            >\r\n              <FileText size={14} />\r\n              <span>Page {index + 1}</span>\r\n            </button>\r\n            {/* Show delete button for all pages when more than 1 page exists */}\r\n            {totalPages > 1 && (\r\n              <button\r\n                type=\"button\"\r\n                className=\"delete-page-button\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  handleDeletePage(index);\r\n                }}\r\n                aria-label={`Delete page ${index + 1}`}\r\n                title=\"Delete this page and its content\"\r\n              >\r\n                <X size={14} />\r\n              </button>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      \r\n      {/* Add Page Button */}\r\n      <button\r\n        type=\"button\"\r\n        className=\"add-page-button\"\r\n        onClick={handleAddPage}\r\n        aria-label=\"Add new page\"\r\n        title=\"Add new page at end\"\r\n      >\r\n        <Plus size={16} />\r\n        <span>Add Page</span>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nPageManager.propTypes = {\r\n  pageBoundaries: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      pageNumber: PropTypes.number.isRequired,\r\n      top: PropTypes.number,\r\n      height: PropTypes.number\r\n    })\r\n  ),\r\n  activePage: PropTypes.number,\r\n  pageSize: PropTypes.oneOf(['A4', 'Letter', 'Legal']),\r\n  zoomLevel: PropTypes.number,\r\n  canZoomIn: PropTypes.bool,\r\n  canZoomOut: PropTypes.bool,\r\n  onNavigate: PropTypes.func,\r\n  onAddPage: PropTypes.func,\r\n  onDeletePage: PropTypes.func,\r\n  onPageSizeChange: PropTypes.func,\r\n  onZoomIn: PropTypes.func,\r\n  onZoomOut: PropTypes.func,\r\n  onZoomReset: PropTypes.func\r\n};\r\n\r\nPageManager.defaultProps = {\r\n  pageBoundaries: [{ id: 'page-0', pageNumber: 1 }],\r\n  activePage: 0,\r\n  pageSize: 'A4',\r\n  zoomLevel: 100,\r\n  canZoomIn: true,\r\n  canZoomOut: true,\r\n  onNavigate: undefined,\r\n  onAddPage: undefined,\r\n  onDeletePage: undefined,\r\n  onPageSizeChange: undefined,\r\n  onZoomIn: undefined,\r\n  onZoomOut: undefined,\r\n  onZoomReset: undefined\r\n};\r\n\r\nexport default React.memo(PageManager);","import React, { useCallback, useEffect, useRef, useState, useMemo, forwardRef, useImperativeHandle } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDocumentState, useDocumentActions } from '../../context/DocumentContext';\r\nimport { useFormatting, useContinuousReflow } from '../../hooks';\r\nimport { canZoomIn, canZoomOut } from '../../lib/editor/zoom-utils';\r\nimport Sidebar from './Sidebar';\r\nimport EditorToolbar from './EditorToolbar';\r\nimport PageView from './PageView';\r\nimport PageManager from './PageManager';\r\nimport './MultiPageEditor.css';\r\n\r\n// Constants moved outside component to prevent recreation\r\nconst PAGE_DIMENSIONS = {\r\n  A4: { width: 595, height: 842 },\r\n  Letter: { width: 612, height: 792 },\r\n  Legal: { width: 612, height: 1008 }\r\n};\r\n\r\nconst INITIAL_BOUNDARY_DELAY = 50;\r\nconst BOUNDARY_UPDATE_DELAY = 50;\r\nconst NAVIGATION_DELAY = 50;\r\nconst SCROLL_DEBOUNCE = 100;\r\nconst FOCUS_DELAY = 200;\r\nconst NAVIGATION_LOCK_TIMEOUT = 500;\r\n\r\n/**\r\n * HtmlEditor - Main WYSIWYG HTML Editor Component\r\n * \r\n * Exposed methods via ref:\r\n * - getHTMLContent() - Returns the current HTML content as a string\r\n * - getPlainText() - Returns the plain text content (HTML stripped)\r\n * - setContent(html) - Sets the editor content programmatically\r\n * \r\n * @param {Object} props\r\n * @param {React.ReactNode} props.pageManagerComponent - Optional custom PageManager component from parent app\r\n * @param {Function} props.onNavigatePage - Optional callback when navigating to a page (pageIndex)\r\n * @param {Function} props.onAddPage - Optional callback when adding a page\r\n * @param {Function} props.onDeletePage - Optional callback when deleting a page (pageIndex)\r\n * @param {Function} props.onPageSizeChange - Optional callback when page size changes (newSize)\r\n * @param {Function} props.onChange - Optional callback when content changes (htmlContent)\r\n * @param {boolean} props.showSidebar - Whether to show the sidebar (default: true)\r\n * @param {boolean} props.showToolbar - Whether to show the toolbar (default: true)\r\n * @param {boolean} props.showPageManager - Whether to show the PageManager component (default: true)\r\n * @param {React.Ref} ref - Forwarded ref to access editor methods\r\n */\r\nconst HtmlEditor = forwardRef(({\r\n  pageManagerComponent = null,\r\n  onNavigatePage,\r\n  onAddPage,\r\n  onDeletePage,\r\n  onPageSizeChange: onPageSizeChangeCallback,\r\n  onChange,\r\n  showSidebar = true,\r\n  showToolbar = true,\r\n  showPageManager = true\r\n}, ref) => {\r\n  const documentState = useDocumentState();\r\n  const actions = useDocumentActions();\r\n  const { pageSize, continuousContent, pageBoundaries, activePage, zoomLevel } = documentState;\r\n\r\n  const containerRef = useRef(null);\r\n  const editorRef = useRef(null);\r\n\r\n  const { currentFormat, formatText } = useFormatting();\r\n  const { \r\n    checkAndUpdateBoundaries, \r\n    getCurrentPage, \r\n    scrollToPage,\r\n    positionCursorAtPage,\r\n    updateBoundaries,\r\n    triggerAutoReflow,\r\n    removePageAndContent\r\n  } = useContinuousReflow(pageSize, editorRef, zoomLevel);\r\n\r\n  const dimensions = useMemo(() => PAGE_DIMENSIONS[pageSize] || PAGE_DIMENSIONS.A4, [pageSize]);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const scrollTimeoutRef = useRef(null);\r\n  const addingPageRef = useRef(false);\r\n  const isNavigatingRef = useRef(false);\r\n\r\n  // Initialize editor content and sync programmatic updates\r\n  const contentSetRef = useRef(false);\r\n  const lastContentRef = useRef(continuousContent);\r\n  \r\n  useEffect(() => {\r\n    if (!editorRef.current) return;\r\n    \r\n    // Initial setup\r\n    if (!contentSetRef.current) {\r\n      editorRef.current.innerHTML = continuousContent;\r\n      contentSetRef.current = true;\r\n      lastContentRef.current = continuousContent;\r\n      \r\n      const timer = setTimeout(() => {\r\n        updateBoundaries();\r\n      }, INITIAL_BOUNDARY_DELAY);\r\n      return () => clearTimeout(timer);\r\n    }\r\n    \r\n    // Sync programmatic content changes to DOM\r\n    if (lastContentRef.current !== continuousContent) {\r\n      const currentDOMContent = editorRef.current.innerHTML;\r\n      \r\n      // Only update if DOM is out of sync (prevents user input loops)\r\n      if (currentDOMContent !== continuousContent) {\r\n        editorRef.current.innerHTML = continuousContent;\r\n        \r\n        const timer = setTimeout(() => {\r\n          updateBoundaries();\r\n          \r\n          if (addingPageRef.current) {\r\n            addingPageRef.current = false;\r\n            const newPageIndex = Math.max(0, pageBoundaries.length - 1);\r\n            actions.setActivePage(newPageIndex);\r\n            \r\n            setTimeout(() => {\r\n              scrollToPage(newPageIndex, containerRef);\r\n            }, NAVIGATION_DELAY);\r\n          }\r\n        }, BOUNDARY_UPDATE_DELAY);\r\n        \r\n        lastContentRef.current = continuousContent;\r\n        return () => clearTimeout(timer);\r\n      }\r\n      \r\n      lastContentRef.current = continuousContent;\r\n    }\r\n  }, [continuousContent, updateBoundaries, pageBoundaries.length, actions, scrollToPage]);\r\n\r\n  // Notify parent app when content changes\r\n  useEffect(() => {\r\n    if (onChange && contentSetRef.current) {\r\n      onChange(continuousContent);\r\n    }\r\n  }, [continuousContent, onChange]);\r\n\r\n  // Expose methods to parent component via ref\r\n  useImperativeHandle(ref, () => ({\r\n    /**\r\n     * Get the current HTML content from the editor\r\n     * @returns {string} The HTML content with page breaks\r\n     */\r\n    getHTMLContent: () => {\r\n      return continuousContent;\r\n    },\r\n    /**\r\n     * Get the plain text content (HTML stripped)\r\n     * @returns {string} Plain text content\r\n     */\r\n    getPlainText: () => {\r\n      return continuousContent.replace(/<[^>]*>/g, ' ').replace(/\\s+/g, ' ').trim();\r\n    },\r\n    /**\r\n     * Set the editor content programmatically\r\n     * @param {string} html - HTML content to set\r\n     */\r\n    setContent: (html) => {\r\n      actions.updateContinuousContent(html);\r\n      if (editorRef.current) {\r\n        editorRef.current.innerHTML = html;\r\n        setTimeout(() => {\r\n          updateBoundaries();\r\n        }, 50);\r\n      }\r\n    }\r\n  }), [continuousContent, actions, updateBoundaries]);\r\n\r\n  // Focus editor on mount\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      if (editorRef.current) {\r\n        editorRef.current.focus();\r\n      }\r\n    }, 200);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  const handleInput = useCallback((event) => {\r\n    const html = event.currentTarget.innerHTML;\r\n    actions.updateContinuousContent(html);\r\n    \r\n    // Update page boundaries after content change (already debounced in hook)\r\n    checkAndUpdateBoundaries();\r\n    \r\n    // Trigger automatic reflow with shorter delay for typing (200ms instead of default 500ms)\r\n    triggerAutoReflow(200);\r\n    \r\n    // Update active page based on viewport scroll position\r\n    const currentPage = getCurrentPage(containerRef);\r\n    if (currentPage !== activePage) {\r\n      actions.setActivePage(currentPage);\r\n    }\r\n  }, [checkAndUpdateBoundaries, actions, getCurrentPage, activePage, triggerAutoReflow, containerRef]);\r\n\r\n  const handlePageSizeChange = useCallback((newSize) => {\r\n    actions.updatePageSize(newSize);\r\n    // Recalculate boundaries with new page size (debounced in hook)\r\n    updateBoundaries({ pageSize: newSize });\r\n    \r\n    // Call parent callback if provided\r\n    if (onPageSizeChangeCallback) {\r\n      onPageSizeChangeCallback(newSize);\r\n    }\r\n  }, [actions, updateBoundaries, onPageSizeChangeCallback]);\r\n\r\n  const handleNavigatePage = useCallback((pageIndex) => {\r\n    // Validate page index\r\n    if (pageIndex < 0 || pageIndex >= pageBoundaries.length) {\r\n      return;\r\n    }\r\n    \r\n    // Set flag to prevent handleScroll from interfering during navigation\r\n    isNavigatingRef.current = true;\r\n    \r\n    // Set active page immediately\r\n    actions.setActivePage(pageIndex);\r\n    \r\n    // Scroll to the page\r\n    scrollToPage(pageIndex, containerRef);\r\n    \r\n    // Clear the navigation flag after scroll completes\r\n    setTimeout(() => {\r\n      isNavigatingRef.current = false;\r\n    }, NAVIGATION_LOCK_TIMEOUT);\r\n    \r\n    // Call parent callback if provided\r\n    if (onNavigatePage) {\r\n      onNavigatePage(pageIndex);\r\n    }\r\n  }, [actions, scrollToPage, onNavigatePage, pageBoundaries.length]);\r\n\r\n  const handleAddPage = useCallback(() => {\r\n    // Set flag to indicate we're adding a page\r\n    addingPageRef.current = true;\r\n    \r\n    // Add a page break at the end - this updates Context state\r\n    actions.addPageBreak({ position: 'end' });\r\n    \r\n    // The useEffect above will sync the content to DOM, update boundaries, and navigate\r\n    \r\n    // Call parent callback if provided\r\n    if (onAddPage) {\r\n      onAddPage();\r\n    }\r\n  }, [actions, onAddPage]);\r\n\r\n  const handleAddPageBreak = useCallback(() => {\r\n    // Insert page break at current cursor position\r\n    const selection = window.getSelection();\r\n    if (selection && selection.rangeCount > 0) {\r\n      if (!editorRef?.current) return;\r\n      \r\n      // Count existing page breaks to determine the page number\r\n      const existingBreaks = editorRef.current.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n      const pageNumber = existingBreaks.length + 2; // +2 because we're creating a break for the next page\r\n      \r\n      const pageBreakHTML = `<page-break data-page-break=\"true\" contenteditable=\"false\" data-page-number=\"${pageNumber}\"></page-break><p><br></p>`;\r\n      \r\n      // Insert the page break\r\n      document.execCommand('insertHTML', false, pageBreakHTML);\r\n      \r\n      // Update boundaries after a short delay and ensure PageManager updates\r\n      setTimeout(() => {\r\n        const newBoundaries = updateBoundaries();\r\n        // Get current page based on scroll position and stay on it\r\n        const currentPage = getCurrentPage(containerRef);\r\n        actions.setActivePage(currentPage);\r\n      }, 150);\r\n    }\r\n  }, [updateBoundaries, getCurrentPage, actions, containerRef]);\r\n\r\n  const handleDeletePage = useCallback((pageIndex) => {\r\n    if (pageBoundaries.length <= 1) {\r\n      console.warn('Cannot delete the only page');\r\n      return;\r\n    }\r\n    \r\n    // Use the new removePageAndContent function from the hook\r\n    // This will remove both the page break and all content within that page\r\n    const success = removePageAndContent(pageIndex);\r\n    \r\n    if (success) {\r\n      // Set active page to the first page after deletion\r\n      actions.setActivePage(0);\r\n      \r\n      // Call parent callback if provided\r\n      if (onDeletePage) {\r\n        onDeletePage(pageIndex);\r\n      }\r\n    }\r\n  }, [pageBoundaries.length, removePageAndContent, actions, onDeletePage]);\r\n\r\n  // Zoom handlers\r\n  const handleZoomIn = useCallback(() => {\r\n    actions.zoomIn();\r\n  }, [actions]);\r\n\r\n  const handleZoomOut = useCallback(() => {\r\n    actions.zoomOut();\r\n  }, [actions]);\r\n\r\n  const handleZoomReset = useCallback(() => {\r\n    actions.resetZoom();\r\n  }, [actions]);\r\n\r\n  // Keyboard shortcuts for zoom\r\n  useEffect(() => {\r\n    const handleKeyDown = (event) => {\r\n      // Only handle when editor or its container has focus\r\n      if (!editorRef.current && !containerRef.current) return;\r\n      \r\n      // Check if Ctrl key (or Cmd on Mac) is pressed\r\n      if (event.ctrlKey || event.metaKey) {\r\n        switch (event.key) {\r\n          case '+':\r\n          case '=':\r\n            event.preventDefault();\r\n            handleZoomIn();\r\n            break;\r\n          case '-':\r\n          case '_':\r\n            event.preventDefault();\r\n            handleZoomOut();\r\n            break;\r\n          case '0':\r\n            event.preventDefault();\r\n            handleZoomReset();\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [handleZoomIn, handleZoomOut, handleZoomReset]);\r\n\r\n  const handleScroll = useCallback(() => {\r\n    // Early exit if refs not ready or navigating\r\n    if (!containerRef.current || !editorRef.current || isNavigatingRef.current) {\r\n      return;\r\n    }\r\n\r\n    // Clear existing timeout for debouncing\r\n    if (scrollTimeoutRef.current) {\r\n      clearTimeout(scrollTimeoutRef.current);\r\n    }\r\n\r\n    scrollTimeoutRef.current = setTimeout(() => {\r\n      // Double-check navigation state after debounce\r\n      if (isNavigatingRef.current) {\r\n        scrollTimeoutRef.current = null;\r\n        return;\r\n      }\r\n      \r\n      const currentPage = getCurrentPage(containerRef);\r\n      \r\n      // Only update if page actually changed\r\n      if (currentPage !== activePage && currentPage >= 0) {\r\n        actions.setActivePage(currentPage);\r\n      }\r\n      \r\n      scrollTimeoutRef.current = null;\r\n    }, SCROLL_DEBOUNCE);\r\n  }, [getCurrentPage, activePage, actions]);\r\n\r\n  // Word count for sidebar - memoized to prevent expensive regex on every render\r\n  const wordCount = useMemo(() => {\r\n    if (!continuousContent) return 0;\r\n    const text = continuousContent.replace(/<[^>]*>/g, ' ');\r\n    const words = text.match(/\\b\\w+\\b/g);\r\n    return words ? words.length : 0;\r\n  }, [continuousContent]);\r\n\r\n  const totalPages = pageBoundaries.length || 1;\r\n\r\n  // Cleanup scroll timeout on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (scrollTimeoutRef.current) {\r\n        clearTimeout(scrollTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"multi-page-editor\">\r\n      {showToolbar && (\r\n        <EditorToolbar\r\n          currentFormat={currentFormat}\r\n          onFormatText={formatText}\r\n          onAddPageBreak={handleAddPageBreak}\r\n        />\r\n      )}\r\n\r\n      <div className=\"editor-container\">\r\n        {showSidebar && (\r\n          <Sidebar\r\n            editorView={null}\r\n            isCollapsed={sidebarCollapsed}\r\n            onToggle={() => setSidebarCollapsed((prev) => !prev)}\r\n            wordCount={wordCount}\r\n            pageCount={totalPages}\r\n          />\r\n        )}\r\n\r\n        <div\r\n          className=\"editor-viewport continuous-scroll\"\r\n          ref={containerRef}\r\n          onScroll={handleScroll}\r\n        >\r\n          <PageView\r\n            content={continuousContent}\r\n            dimensions={dimensions}\r\n            pageSize={pageSize}\r\n            pageBoundaries={pageBoundaries}\r\n            editorRef={editorRef}\r\n            onInput={handleInput}\r\n            onClick={() => editorRef.current?.focus()}\r\n            zoomLevel={zoomLevel}\r\n          />\r\n        </div>\r\n\r\n        {/* Render PageManager only if showPageManager is true */}\r\n        {showPageManager && (\r\n          <div className=\"page-manager-sidebar\">\r\n            {pageManagerComponent ? (\r\n              React.cloneElement(pageManagerComponent, {\r\n                onNavigate: handleNavigatePage,\r\n                onAddPage: handleAddPage,\r\n                onDeletePage: handleDeletePage,\r\n                onPageSizeChange: handlePageSizeChange,\r\n                zoomLevel,\r\n                canZoomIn: canZoomIn(zoomLevel),\r\n                canZoomOut: canZoomOut(zoomLevel),\r\n                onZoomIn: handleZoomIn,\r\n                onZoomOut: handleZoomOut,\r\n                onZoomReset: handleZoomReset\r\n              })\r\n            ) : (\r\n              <PageManager\r\n                pageBoundaries={pageBoundaries}\r\n                activePage={activePage}\r\n                pageSize={pageSize}\r\n                zoomLevel={zoomLevel}\r\n                canZoomIn={canZoomIn(zoomLevel)}\r\n                canZoomOut={canZoomOut(zoomLevel)}\r\n                onNavigate={handleNavigatePage}\r\n                onAddPage={handleAddPage}\r\n                onDeletePage={handleDeletePage}\r\n                onPageSizeChange={handlePageSizeChange}\r\n                onZoomIn={handleZoomIn}\r\n                onZoomOut={handleZoomOut}\r\n                onZoomReset={handleZoomReset}\r\n              />\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nHtmlEditor.displayName = 'HtmlEditor';\r\n\r\nHtmlEditor.propTypes = {\r\n  pageManagerComponent: PropTypes.element,\r\n  onNavigatePage: PropTypes.func,\r\n  onAddPage: PropTypes.func,\r\n  onDeletePage: PropTypes.func,\r\n  onPageSizeChange: PropTypes.func,\r\n  onChange: PropTypes.func,\r\n  showSidebar: PropTypes.bool,\r\n  showToolbar: PropTypes.bool,\r\n  showPageManager: PropTypes.bool\r\n};\r\n\r\nHtmlEditor.defaultProps = {\r\n  pageManagerComponent: null,\r\n  onNavigatePage: undefined,\r\n  onAddPage: undefined,\r\n  onDeletePage: undefined,\r\n  onPageSizeChange: undefined,\r\n  onChange: undefined,\r\n  showSidebar: true,\r\n  showToolbar: true,\r\n  showPageManager: true\r\n};\r\n\r\nexport default HtmlEditor;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * ErrorBoundary - Catches React errors and displays a fallback UI\r\n * Prevents the entire app from crashing due to component errors\r\n * \r\n * Usage:\r\n * <ErrorBoundary fallback={<div>Something went wrong</div>}>\r\n *   <YourComponent />\r\n * </ErrorBoundary>\r\n */\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // Update state so the next render will show the fallback UI\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    // Log error details for debugging\r\n    console.error('[ErrorBoundary] Caught error:', error);\r\n    console.error('[ErrorBoundary] Error info:', errorInfo);\r\n\r\n    this.setState({\r\n      error,\r\n      errorInfo\r\n    });\r\n\r\n    // Call optional error callback\r\n    if (this.props.onError) {\r\n      this.props.onError(error, errorInfo);\r\n    }\r\n  }\r\n\r\n  handleReset = () => {\r\n    this.setState({\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null\r\n    });\r\n\r\n    if (this.props.onReset) {\r\n      this.props.onReset();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // Custom fallback UI\r\n      if (this.props.fallback) {\r\n        return this.props.fallback;\r\n      }\r\n\r\n      // Default fallback UI\r\n      return (\r\n        <div style={{\r\n          padding: '20px',\r\n          margin: '20px',\r\n          border: '2px solid #f44336',\r\n          borderRadius: '4px',\r\n          backgroundColor: '#ffebee',\r\n          color: '#c62828'\r\n        }}>\r\n          <h2 style={{ marginTop: 0 }}>⚠️ Something went wrong</h2>\r\n          <p>The editor encountered an unexpected error and couldn't continue.</p>\r\n          \r\n          {this.props.showDetails && this.state.error && (\r\n            <details style={{ \r\n              marginTop: '10px', \r\n              padding: '10px', \r\n              backgroundColor: 'white',\r\n              borderRadius: '4px',\r\n              fontSize: '12px',\r\n              fontFamily: 'monospace'\r\n            }}>\r\n              <summary style={{ cursor: 'pointer', fontWeight: 'bold' }}>\r\n                Error Details\r\n              </summary>\r\n              <pre style={{ \r\n                marginTop: '10px', \r\n                overflow: 'auto',\r\n                maxHeight: '200px'\r\n              }}>\r\n                {this.state.error.toString()}\r\n                {this.state.errorInfo && this.state.errorInfo.componentStack}\r\n              </pre>\r\n            </details>\r\n          )}\r\n          \r\n          <button\r\n            onClick={this.handleReset}\r\n            style={{\r\n              marginTop: '15px',\r\n              padding: '8px 16px',\r\n              backgroundColor: '#f44336',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n              fontWeight: 'bold'\r\n            }}\r\n          >\r\n            Try Again\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nErrorBoundary.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  fallback: PropTypes.node,\r\n  onError: PropTypes.func,\r\n  onReset: PropTypes.func,\r\n  showDetails: PropTypes.bool\r\n};\r\n\r\nErrorBoundary.defaultProps = {\r\n  fallback: null,\r\n  onError: undefined,\r\n  onReset: undefined,\r\n  showDetails: process.env.NODE_ENV === 'development'\r\n};\r\n\r\nexport default ErrorBoundary;\r\n","// Main library entry point\r\n// Export all public components, hooks, and utilities\r\n\r\n// === CONTEXT-BASED STATE MANAGEMENT (New!) ===\r\n// Import DocumentProvider to wrap your app and use the editor\r\nexport { DocumentProvider, useDocument, useDocumentState, useDocumentActions } from './context/DocumentContext';\r\n\r\n// === CORE EDITOR COMPONENT ===\r\n// HtmlEditor - Must be wrapped in DocumentProvider\r\nexport { default as HtmlEditor } from './components/editor/HtmlEditor';\r\n\r\n// === ERROR HANDLING ===\r\n// ErrorBoundary - Wrap your components for error recovery\r\nexport { default as ErrorBoundary } from './components/ErrorBoundary';\r\n\r\n// === STANDALONE COMPONENTS ===\r\n// Individual Components (can be used separately with your own state)\r\nexport { default as EditorToolbar } from './components/editor/EditorToolbar';\r\nexport { default as Sidebar } from './components/editor/Sidebar';\r\nexport { default as PageView } from './components/editor/PageView';\r\n\r\n// PageManager - COMPLETELY STANDALONE\r\n// Use this in external apps with your own state management\r\nexport { default as PageManager } from './components/editor/PageManager';\r\n\r\n// === CUSTOM HOOKS ===\r\n// These hooks require DocumentProvider context\r\nexport { useFormatting, useContinuousReflow } from './hooks';\r\n\r\n// === STORAGE UTILITIES ===\r\nexport { saveImage, getImage, deleteImage, clearImages, getAllImageKeys } from './lib/storage/local-storage';\r\n\r\n// === CONSTANTS ===\r\nexport const PAGE_DIMENSIONS = {\r\n  A4: { width: 794, height: 1123 },\r\n  Letter: { width: 816, height: 1056 },\r\n  Legal: { width: 816, height: 1344 }\r\n};\r\n\r\n// === LOGGER UTILITY ===\r\nexport { default as logger } from './lib/editor/utils/logger';\r\n"],"names":["REACT_ELEMENT_TYPE","REACT_FRAGMENT_TYPE","jsxProd","type","config","maybeKey","key","propName","reactJsxRuntime_production","getComponentNameFromType","REACT_CLIENT_REFERENCE","REACT_PROFILER_TYPE","REACT_STRICT_MODE_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_ACTIVITY_TYPE","REACT_PORTAL_TYPE","REACT_CONTEXT_TYPE","REACT_CONSUMER_TYPE","REACT_FORWARD_REF_TYPE","innerType","REACT_MEMO_TYPE","REACT_LAZY_TYPE","testStringCoercion","value","checkKeyStringCoercion","JSCompiler_inline_result","JSCompiler_temp_const","JSCompiler_inline_result$jscomp$0","getTaskName","name","getOwner","dispatcher","ReactSharedInternals","UnknownOwner","hasValidKey","hasOwnProperty","getter","defineKeyPropWarningGetter","props","displayName","warnAboutAccessingKey","specialPropKeyWarningShown","elementRefGetterWithDeprecationWarning","componentName","didWarnAboutElementRef","ReactElement","owner","debugStack","debugTask","refProp","jsxDEVImpl","isStaticChildren","children","isArrayImpl","validateChildKeys","keys","k","didWarnAboutKeySpread","node","isValidElement","object","React","require$$0","createTask","callStackForError","unknownOwnerDebugStack","unknownOwnerDebugTask","reactJsxRuntime_development","trackActualOwner","jsxRuntimeModule","require$$1","DEFAULT_ZOOM","MIN_ZOOM","MAX_ZOOM","ZOOM_STEP","canZoomIn","currentZoom","canZoomOut","DEFAULT_PAGE_SIZE","EMPTY_PARAGRAPH","DEFAULT_EDITOR_MODE","PAGE_DIMENSIONS","createEmptyPage","index","size","uuidv4","sanitizeContent","html","withMinimumPage","pages","pageSize","page","createDefaultBoundary","buildInitialState","overrides","now","ActionTypes","documentReducer","state","action","initialContent","pageIndex","content","newPages","payload","nextPages","pageBreaks","_","insertIndex","updatedPages","newActivePage","maxPage","newSize","newContent","boundaries","position","pageBreakTag","before","after","tempDiv","targetBreak","newBreak","newParagraph","breakEl","newMode","newZoomLevel","checkCanZoomIn","checkCanZoomOut","DocumentContext","createContext","DocumentProvider","initialState","dispatch","useReducer","actions","useMemo","title","mode","level","jsx","useDocument","context","useContext","useDocumentState","useDocumentActions","b","c","d","e","f","g","h","l","n","p","q","r","t","v","w","x","y","z","a","u","A","reactIs_production_min","hasSymbol","REACT_PROVIDER_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","isValidElementType","typeOf","$$typeof","$$typeofType","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","hasWarnedAboutDeprecatedIsAsyncMode","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","reactIs_development","reactIsModule","getOwnPropertySymbols","propIsEnumerable","toObject","val","shouldUseNative","test1","test2","i","order2","test3","letter","objectAssign","target","source","from","to","symbols","s","ReactPropTypesSecret","ReactPropTypesSecret_1","has","printWarning","loggedTypeFailures","text","message","checkPropTypes","typeSpecs","values","location","getStack","typeSpecName","error","err","ex","stack","checkPropTypes_1","ReactIs","assign","require$$2","require$$3","require$$4","emptyFunctionThatReturnsNull","factoryWithTypeCheckers","throwOnDirectAccess","ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","iteratorFn","ANONYMOUS","ReactPropTypes","createPrimitiveTypeChecker","createAnyTypeChecker","createArrayOfTypeChecker","createElementTypeChecker","createElementTypeTypeChecker","createInstanceTypeChecker","createNodeChecker","createObjectOfTypeChecker","createEnumTypeChecker","createUnionTypeChecker","createShapeTypeChecker","createStrictShapeTypeChecker","is","PropTypeError","data","createChainableTypeChecker","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","isRequired","propFullName","secret","cacheKey","chainedCheckType","expectedType","propValue","propType","getPropType","preciseType","getPreciseType","typeChecker","expectedClass","expectedClassName","actualClassName","getClassName","expectedValues","valuesString","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","expectedTypes","checkerResult","expectedTypesMessage","isNode","invalidValidatorError","shapeTypes","allKeys","iterator","step","entry","isSymbol","emptyFunction","emptyFunctionWithReset","factoryWithThrowingShims","shim","getShim","propTypesModule","FONT_SIZE_MAP","DEFAULT_FORMAT","useFormatting","currentFormat","setCurrentFormat","useState","updateAlignment","useCallback","align","prev","handleFontSize","selection","range","span","fragment","sizeNumber","formatText","command","resetFormat","CONTENT_PADDING","DEFAULT_BOUNDARY_DELAY","DEFAULT_REFLOW_DELAY","BOUNDARY_UPDATE_DELAY","PAGE_BREAK_SELECTOR","useContinuousReflow","editorRef","zoomLevel","boundaryTimeoutRef","useRef","reflowTimeoutRef","latestPageSizeRef","latestZoomLevelRef","isReflowingRef","useEffect","findOverflowPoint","pageElements","maxHeight","currentHeight","lastValidElement","element","elementHeight","insertPageBreakBefore","targetElement","pageNumber","editor","pageBreak","calculatePageBoundaries","options","targetPageSize","dimensions","pageBreakElements","editorRect","editorScrollTop","relativeTop","updateBoundaries","checkAndReflow","baseMaxHeight","zoomMultiplier","allChildren","existingBreaks","el","currentPage","child","insertedBreaks","pagesProcessed","MAX_PAGES_PER_REFLOW","MIN_OVERFLOW_THRESHOLD","overflow","totalPageHeight","updatedChildren","currentPageElements","triggerAutoReflow","delay","checkAndUpdateBoundaries","getCurrentPage","containerRef","container","containerRect","viewportCenter","positionCursorAtPage","targetNode","targetOffset","breakElement","scrollToPage","elementRect","scrollTop","removePageAndContent","cursorWasInDeletedContent","nodesToRemove","pageBreakToRemove","firstPageBreak","currentNode","pageBreakElement","nextPageBreakElement","cursorNode","updatedHTML","toKebabCase","string","toCamelCase","match","p1","p2","toPascalCase","camelCase","mergeClasses","classes","className","array","hasA11yProp","prop","defaultAttributes","Icon","forwardRef","color","strokeWidth","absoluteStrokeWidth","iconNode","rest","ref","createElement","tag","attrs","createLucideIcon","iconName","Component","__iconNode","Bold","ChevronLeft","ChevronRight","FileCheck","FileText","Hash","Heading1","Heading2","Heading3","Image","Italic","Link","ListOrdered","List","Plus","Redo","Settings","Strikethrough","Table","TextAlignCenter","TextAlignEnd","TextAlignJustify","TextAlignStart","Underline","Undo","X","ZoomIn","ZoomOut","Sidebar","editorView","isCollapsed","onToggle","propWordCount","propPageCount","documentState","activePage","continuousContent","editorMode","wordCount","setWordCount","outline","setOutline","headingElements","headings","heading","totalWords","words","word","displayPageCount","jsxs","HeadingIcon","generateUUID","saveImage","file","resolve","reject","reader","event","dataUrl","getImage","deleteImage","clearImages","getAllImageKeys","Logger","namespace","logger","EditorToolbar","onFormatText","onAddPageBreak","handleImageUpload","imageUrl","AlignLeft","AlignCenter","AlignRight","AlignJustify","url","ImageIcon","PropTypes","PageView","pageBoundaries","onInput","onKeyDown","onClick","onScroll","padding","isInPaddingArea","clientY","rect","relativeY","isPageBreakElement","handleKeyDown","startContainer","endContainer","handleClick","clickedElement","firstChild","sel","lastChild","handleBeforeInput","PageManager","onNavigate","onAddPage","onDeletePage","onPageSizeChange","onZoomIn","onZoomOut","onZoomReset","totalPages","handleNavigate","handleAddPage","handleDeletePage","handlePageSizeChange","boundary","PageManager$1","INITIAL_BOUNDARY_DELAY","NAVIGATION_DELAY","SCROLL_DEBOUNCE","NAVIGATION_LOCK_TIMEOUT","HtmlEditor","pageManagerComponent","onNavigatePage","onPageSizeChangeCallback","onChange","showSidebar","showToolbar","showPageManager","sidebarCollapsed","setSidebarCollapsed","scrollTimeoutRef","addingPageRef","isNavigatingRef","contentSetRef","lastContentRef","timer","newPageIndex","useImperativeHandle","handleInput","handleNavigatePage","handleAddPageBreak","pageBreakHTML","handleZoomIn","handleZoomOut","handleZoomReset","handleScroll","ErrorBoundary","errorInfo"],"mappings":"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","x_google_ignoreList":[0,1,2,5,6,7,8,9,10,11,12,13,14,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48]}