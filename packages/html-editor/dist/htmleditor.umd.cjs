(function(j,E){typeof exports=="object"&&typeof module<"u"?E(exports,require("react"),require("uuid"),require("@reduxjs/toolkit")):typeof define=="function"&&define.amd?define(["exports","react","uuid","@reduxjs/toolkit"],E):(j=typeof globalThis<"u"?globalThis:j||self,E(j.HTMLEditor={},j.React,j.uuid,j.RTK))})(this,(function(j,E,ie,bt){"use strict";function Et(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pe={exports:{}},se={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Le;function vt(){if(Le)return se;Le=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(t,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:e,type:t,key:a,ref:i!==void 0?i:null,props:s}}return se.Fragment=n,se.jsx=r,se.jsxs=r,se}var ce={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ze;function kt(){return ze||(ze=1,process.env.NODE_ENV!=="production"&&(function(){function e(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Y?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case I:return"Fragment";case C:return"Profiler";case O:return"StrictMode";case w:return"Suspense";case z:return"SuspenseList";case J:return"Activity"}if(typeof o=="object")switch(typeof o.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),o.$$typeof){case N:return"Portal";case S:return o.displayName||"Context";case _:return(o._context.displayName||"Context")+".Consumer";case u:var h=o.render;return o=o.displayName,o||(o=h.displayName||h.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case D:return h=o.displayName||null,h!==null?h:e(o.type)||"Memo";case q:h=o._payload,o=o._init;try{return e(o(h))}catch{}}return null}function n(o){return""+o}function r(o){try{n(o);var h=!1}catch{h=!0}if(h){h=console;var P=h.error,k=typeof Symbol=="function"&&Symbol.toStringTag&&o[Symbol.toStringTag]||o.constructor.name||"Object";return P.call(h,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",k),n(o)}}function t(o){if(o===I)return"<>";if(typeof o=="object"&&o!==null&&o.$$typeof===q)return"<...>";try{var h=e(o);return h?"<"+h+">":"<...>"}catch{return"<...>"}}function i(){var o=K.A;return o===null?null:o.getOwner()}function s(){return Error("react-stack-top-frame")}function a(o){if(V.call(o,"key")){var h=Object.getOwnPropertyDescriptor(o,"key").get;if(h&&h.isReactWarning)return!1}return o.key!==void 0}function l(o,h){function P(){Z||(Z=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",h))}P.isReactWarning=!0,Object.defineProperty(o,"key",{get:P,configurable:!0})}function g(){var o=e(this.type);return Q[o]||(Q[o]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),o=this.props.ref,o!==void 0?o:null}function p(o,h,P,k,L,M){var x=P.ref;return o={$$typeof:$,type:o,key:h,props:P,_owner:k},(x!==void 0?x:null)!==null?Object.defineProperty(o,"ref",{enumerable:!1,get:g}):Object.defineProperty(o,"ref",{enumerable:!1,value:null}),o._store={},Object.defineProperty(o._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(o,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(o,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:L}),Object.defineProperty(o,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:M}),Object.freeze&&(Object.freeze(o.props),Object.freeze(o)),o}function b(o,h,P,k,L,M){var x=h.children;if(x!==void 0)if(k)if(W(x)){for(k=0;k<x.length;k++)f(x[k]);Object.freeze&&Object.freeze(x)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(x);if(V.call(h,"key")){x=e(o);var m=Object.keys(h).filter(function(B){return B!=="key"});k=0<m.length?"{key: someKey, "+m.join(": ..., ")+": ...}":"{key: someKey}",d[x+k]||(m=0<m.length?"{"+m.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,k,x,m,x),d[x+k]=!0)}if(x=null,P!==void 0&&(r(P),x=""+P),a(h)&&(r(h.key),x=""+h.key),"key"in h){P={};for(var R in h)R!=="key"&&(P[R]=h[R])}else P=h;return x&&l(P,typeof o=="function"?o.displayName||o.name||"Unknown":o),p(o,x,P,i(),L,M)}function f(o){T(o)?o._store&&(o._store.validated=1):typeof o=="object"&&o!==null&&o.$$typeof===q&&(o._payload.status==="fulfilled"?T(o._payload.value)&&o._payload.value._store&&(o._payload.value._store.validated=1):o._store&&(o._store.validated=1))}function T(o){return typeof o=="object"&&o!==null&&o.$$typeof===$}var v=E,$=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),S=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),Y=Symbol.for("react.client.reference"),K=v.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=Object.prototype.hasOwnProperty,W=Array.isArray,ee=console.createTask?console.createTask:function(){return null};v={react_stack_bottom_frame:function(o){return o()}};var Z,Q={},te=v.react_stack_bottom_frame.bind(v,s)(),ae=ee(t(s)),d={};ce.Fragment=I,ce.jsx=function(o,h,P){var k=1e4>K.recentlyCreatedOwnerStacks++;return b(o,h,P,!1,k?Error("react-stack-top-frame"):te,k?ee(t(o)):ae)},ce.jsxs=function(o,h,P){var k=1e4>K.recentlyCreatedOwnerStacks++;return b(o,h,P,!0,k?Error("react-stack-top-frame"):te,k?ee(t(o)):ae)}})()),ce}var Ue;function Pt(){return Ue||(Ue=1,process.env.NODE_ENV==="production"?pe.exports=vt():pe.exports=kt()),pe.exports}var c=Pt();const le="A4",oe="<p><br></p>",At="continuous",Te={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},ue=(e,n=le)=>({id:ie.v4(),index:e,size:n,content:oe,images:[],isBreakPoint:!1}),ge=e=>typeof e!="string"||e.trim()===""?oe:e,qe=(e,n=le)=>(e.length>0?e:[ue(0,n)]).map((t,i)=>({id:t.id||ie.v4(),index:i,size:t.size||n,content:ge(t.content),images:t.images||[],isBreakPoint:!!t.isBreakPoint})),Tt=(e=le)=>[{id:"page-0",pageNumber:1,top:0,height:(Te[e]||Te.A4).height}],xe=(e={})=>{const n=new Date().toISOString(),r=e.pageSize||le,t=qe(e.pages||[ue(0,r)],r);return{id:ie.v4(),title:e.title||"Untitled Document",createdAt:n,updatedAt:n,pageSize:r,pages:t,activePage:e.activePage&&e.activePage<t.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:t.length,editorMode:e.editorMode||At,continuousContent:e.continuousContent||oe,pageBoundaries:e.pageBoundaries||Tt(r)}},U={INITIALIZE_DOCUMENT:"INITIALIZE_DOCUMENT",UPDATE_TITLE:"UPDATE_TITLE",UPDATE_PAGE_CONTENT:"UPDATE_PAGE_CONTENT",UPDATE_PAGES:"UPDATE_PAGES",ADD_PAGE:"ADD_PAGE",DELETE_PAGE:"DELETE_PAGE",SET_ACTIVE_PAGE:"SET_ACTIVE_PAGE",UPDATE_PAGE_SIZE:"UPDATE_PAGE_SIZE",RESET_DOCUMENT:"RESET_DOCUMENT",UPDATE_CONTINUOUS_CONTENT:"UPDATE_CONTINUOUS_CONTENT",UPDATE_PAGE_BOUNDARIES:"UPDATE_PAGE_BOUNDARIES",ADD_PAGE_BREAK:"ADD_PAGE_BREAK",REMOVE_PAGE_BREAK:"REMOVE_PAGE_BREAK",SET_EDITOR_MODE:"SET_EDITOR_MODE",INSERT_PAGE_AT:"INSERT_PAGE_AT",MOVE_PAGE_TO:"MOVE_PAGE_TO",DUPLICATE_PAGE:"DUPLICATE_PAGE"},xt=(e,n)=>{const r=new Date().toISOString();switch(n.type){case U.INITIALIZE_DOCUMENT:{const{initialContent:t=oe,pageSize:i=le}=n.payload||{},s={...ue(0,i),content:ge(t)};return xe({title:e.title,pageSize:i,pages:[s]})}case U.UPDATE_TITLE:return{...e,title:n.payload,updatedAt:r};case U.UPDATE_PAGE_CONTENT:{const{pageIndex:t,content:i}=n.payload;if(t<0||t>=e.pages.length)return e;const s=[...e.pages];return s[t]={...s[t],content:ge(i)},{...e,pages:s,updatedAt:r}}case U.UPDATE_PAGES:{const t=Array.isArray(n.payload)?{pages:n.payload}:n.payload||{},i=qe(t.pages||[],e.pageSize),s=Array.isArray(t.pageBreaks)?t.pageBreaks:i.slice(0,-1).map((a,l)=>({id:`auto-break-${l}`,pageNumber:l+1}));return{...e,pages:i,activePage:Math.min(e.activePage,i.length-1),pageBreaks:s,totalPages:i.length,updatedAt:r}}case U.ADD_PAGE:{const t=typeof n.payload?.index=="number"?Math.min(Math.max(n.payload.index,0),e.pages.length):e.pages.length,i=[...e.pages];i.splice(t,0,ue(t,e.pageSize));const s=i.map((l,g)=>({...l,index:g,size:e.pageSize})),a=s.slice(0,-1).map((l,g)=>({id:`auto-break-${g}`,pageNumber:g+1}));return{...e,pages:s,activePage:t,pageBreaks:a,totalPages:s.length,updatedAt:r}}case U.DELETE_PAGE:{const t=n.payload;if(e.pages.length<=1)return e;const i=[...e.pages];i.splice(t,1);const s=i.map((g,p)=>({...g,index:p,size:e.pageSize}));let a=e.activePage;a>=s.length?a=s.length-1:t<=a&&a>0&&(a-=1);const l=s.slice(0,-1).map((g,p)=>({id:`auto-break-${p}`,pageNumber:p+1}));return{...e,pages:s,activePage:a,pageBreaks:l,totalPages:s.length,updatedAt:r}}case U.SET_ACTIVE_PAGE:{const t=n.payload;if(t===e.activePage)return e;const i=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;return t<0||t>=i?e:{...e,activePage:t,updatedAt:r}}case U.UPDATE_PAGE_SIZE:{const t=n.payload;if(t===e.pageSize)return e;if(!Te[t])return console.warn(`Invalid page size: ${t}`),e;const i=e.pages.map((a,l)=>({...a,index:l,size:t})),s=i.slice(0,-1).map((a,l)=>({id:`auto-break-${l}`,pageNumber:l+1}));return{...e,pageSize:t,pages:i,pageBreaks:s,updatedAt:r}}case U.RESET_DOCUMENT:return xe();case U.UPDATE_CONTINUOUS_CONTENT:{const t=ge(n.payload);return t===e.continuousContent?e:{...e,continuousContent:t,updatedAt:r}}case U.UPDATE_PAGE_BOUNDARIES:{const t=Array.isArray(n.payload)?n.payload:[];if(t.length===e.pageBoundaries.length&&t.length>0&&t[0].id===e.pageBoundaries[0]?.id&&t[t.length-1].id===e.pageBoundaries[t.length-1]?.id)return e;const i=e.activePage>=t.length?Math.max(0,t.length-1):e.activePage;return{...e,pageBoundaries:t,totalPages:t.length,activePage:i,updatedAt:r}}case U.ADD_PAGE_BREAK:{const{position:t="end",pageIndex:i}=n.payload||{},s='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';let a=e.continuousContent;if(t==="end")a=a+s+"<p><br></p>";else if(typeof t=="number"){const l=a.substring(0,t),g=a.substring(t);a=l+s+g}else if(typeof i=="number"&&typeof document<"u"){const l=document.createElement("div");l.innerHTML=a;const g=l.querySelectorAll('page-break, [data-page-break="true"]');if(i===0&&g.length===0)a=a+s+"<p><br></p>";else if(i<g.length){const p=g[i],b=document.createElement("page-break");b.setAttribute("data-page-break","true"),b.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const f=document.createElement("p");f.innerHTML="<br>",p.parentNode.insertBefore(b,p.nextSibling),b.parentNode.insertBefore(f,b.nextSibling),a=l.innerHTML}else a=a+s+"<p><br></p>"}return{...e,continuousContent:a,updatedAt:r}}case U.REMOVE_PAGE_BREAK:{const{pageIndex:t}=n.payload||{};if(typeof t!="number"||typeof document>"u")return e;const i=document.createElement("div");i.innerHTML=e.continuousContent;const s=i.querySelectorAll('page-break, [data-page-break="true"]');return s[t]&&s[t].remove(),i.querySelectorAll('page-break, [data-page-break="true"]').forEach((l,g)=>{l.setAttribute("data-page-number",String(g+2))}),{...e,continuousContent:i.innerHTML,updatedAt:r}}case U.SET_EDITOR_MODE:{const t=n.payload;if(t===e.editorMode)return e;let i=e.continuousContent,s=e.pages;return t==="continuous"?i=e.pages.map(l=>l.content).filter(l=>l&&l!==oe).join(`
`)||oe:e.continuousContent&&e.continuousContent!==oe&&(s=[{...ue(0,e.pageSize),content:e.continuousContent}]),{...e,editorMode:t,continuousContent:i,pages:s,updatedAt:r}}default:return e}},He=E.createContext(null),_t=({children:e,initialState:n={}})=>{const[r,t]=E.useReducer(xt,xe(n)),i=E.useMemo(()=>({initializeDocument:a=>t({type:U.INITIALIZE_DOCUMENT,payload:a}),updateTitle:a=>t({type:U.UPDATE_TITLE,payload:a}),updatePageContent:a=>t({type:U.UPDATE_PAGE_CONTENT,payload:a}),updatePages:a=>t({type:U.UPDATE_PAGES,payload:a}),addPage:a=>t({type:U.ADD_PAGE,payload:a}),deletePage:a=>t({type:U.DELETE_PAGE,payload:a}),setActivePage:a=>t({type:U.SET_ACTIVE_PAGE,payload:a}),updatePageSize:a=>t({type:U.UPDATE_PAGE_SIZE,payload:a}),resetDocument:()=>t({type:U.RESET_DOCUMENT}),updateContinuousContent:a=>t({type:U.UPDATE_CONTINUOUS_CONTENT,payload:a}),updatePageBoundaries:a=>t({type:U.UPDATE_PAGE_BOUNDARIES,payload:a}),addPageBreak:a=>t({type:U.ADD_PAGE_BREAK,payload:a}),removePageBreak:a=>t({type:U.REMOVE_PAGE_BREAK,payload:a}),setEditorMode:a=>t({type:U.SET_EDITOR_MODE,payload:a}),insertPageAt:a=>t({type:U.INSERT_PAGE_AT,payload:a}),movePageTo:a=>t({type:U.MOVE_PAGE_TO,payload:a}),duplicatePage:a=>t({type:U.DUPLICATE_PAGE,payload:a})}),[]),s=E.useMemo(()=>({state:r,actions:i,dispatch:t}),[r,i]);return c.jsx(He.Provider,{value:s,children:e})},_e=()=>{const e=E.useContext(He);if(!e)throw new Error("useDocument must be used within a DocumentProvider");return e},Ce=()=>{const{state:e}=_e();return e},Se=()=>{const{actions:e}=_e();return e};var fe={exports:{}},he={exports:{}},H={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ge;function Ct(){if(Ge)return H;Ge=1;var e=typeof Symbol=="function"&&Symbol.for,n=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,t=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,g=e?Symbol.for("react.async_mode"):60111,p=e?Symbol.for("react.concurrent_mode"):60111,b=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,T=e?Symbol.for("react.suspense_list"):60120,v=e?Symbol.for("react.memo"):60115,$=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,I=e?Symbol.for("react.fundamental"):60117,O=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function _(u){if(typeof u=="object"&&u!==null){var w=u.$$typeof;switch(w){case n:switch(u=u.type,u){case g:case p:case t:case s:case i:case f:return u;default:switch(u=u&&u.$$typeof,u){case l:case b:case $:case v:case a:return u;default:return w}}case r:return w}}}function S(u){return _(u)===p}return H.AsyncMode=g,H.ConcurrentMode=p,H.ContextConsumer=l,H.ContextProvider=a,H.Element=n,H.ForwardRef=b,H.Fragment=t,H.Lazy=$,H.Memo=v,H.Portal=r,H.Profiler=s,H.StrictMode=i,H.Suspense=f,H.isAsyncMode=function(u){return S(u)||_(u)===g},H.isConcurrentMode=S,H.isContextConsumer=function(u){return _(u)===l},H.isContextProvider=function(u){return _(u)===a},H.isElement=function(u){return typeof u=="object"&&u!==null&&u.$$typeof===n},H.isForwardRef=function(u){return _(u)===b},H.isFragment=function(u){return _(u)===t},H.isLazy=function(u){return _(u)===$},H.isMemo=function(u){return _(u)===v},H.isPortal=function(u){return _(u)===r},H.isProfiler=function(u){return _(u)===s},H.isStrictMode=function(u){return _(u)===i},H.isSuspense=function(u){return _(u)===f},H.isValidElementType=function(u){return typeof u=="string"||typeof u=="function"||u===t||u===p||u===s||u===i||u===f||u===T||typeof u=="object"&&u!==null&&(u.$$typeof===$||u.$$typeof===v||u.$$typeof===a||u.$$typeof===l||u.$$typeof===b||u.$$typeof===I||u.$$typeof===O||u.$$typeof===C||u.$$typeof===N)},H.typeOf=_,H}var G={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ye;function St(){return Ye||(Ye=1,process.env.NODE_ENV!=="production"&&(function(){var e=typeof Symbol=="function"&&Symbol.for,n=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,t=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,g=e?Symbol.for("react.async_mode"):60111,p=e?Symbol.for("react.concurrent_mode"):60111,b=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,T=e?Symbol.for("react.suspense_list"):60120,v=e?Symbol.for("react.memo"):60115,$=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,I=e?Symbol.for("react.fundamental"):60117,O=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function _(y){return typeof y=="string"||typeof y=="function"||y===t||y===p||y===s||y===i||y===f||y===T||typeof y=="object"&&y!==null&&(y.$$typeof===$||y.$$typeof===v||y.$$typeof===a||y.$$typeof===l||y.$$typeof===b||y.$$typeof===I||y.$$typeof===O||y.$$typeof===C||y.$$typeof===N)}function S(y){if(typeof y=="object"&&y!==null){var ne=y.$$typeof;switch(ne){case n:var Ae=y.type;switch(Ae){case g:case p:case t:case s:case i:case f:return Ae;default:var yt=Ae&&Ae.$$typeof;switch(yt){case l:case b:case $:case v:case a:return yt;default:return ne}}case r:return ne}}}var u=g,w=p,z=l,D=a,q=n,J=b,Y=t,K=$,V=v,W=r,ee=s,Z=i,Q=f,te=!1;function ae(y){return te||(te=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),d(y)||S(y)===g}function d(y){return S(y)===p}function o(y){return S(y)===l}function h(y){return S(y)===a}function P(y){return typeof y=="object"&&y!==null&&y.$$typeof===n}function k(y){return S(y)===b}function L(y){return S(y)===t}function M(y){return S(y)===$}function x(y){return S(y)===v}function m(y){return S(y)===r}function R(y){return S(y)===s}function B(y){return S(y)===i}function X(y){return S(y)===f}G.AsyncMode=u,G.ConcurrentMode=w,G.ContextConsumer=z,G.ContextProvider=D,G.Element=q,G.ForwardRef=J,G.Fragment=Y,G.Lazy=K,G.Memo=V,G.Portal=W,G.Profiler=ee,G.StrictMode=Z,G.Suspense=Q,G.isAsyncMode=ae,G.isConcurrentMode=d,G.isContextConsumer=o,G.isContextProvider=h,G.isElement=P,G.isForwardRef=k,G.isFragment=L,G.isLazy=M,G.isMemo=x,G.isPortal=m,G.isProfiler=R,G.isStrictMode=B,G.isSuspense=X,G.isValidElementType=_,G.typeOf=S})()),G}var Fe;function Ve(){return Fe||(Fe=1,process.env.NODE_ENV==="production"?he.exports=Ct():he.exports=St()),he.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var we,We;function wt(){if(We)return we;We=1;var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function t(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function i(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var a={},l=0;l<10;l++)a["_"+String.fromCharCode(l)]=l;var g=Object.getOwnPropertyNames(a).map(function(b){return a[b]});if(g.join("")!=="0123456789")return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(b){p[b]=b}),Object.keys(Object.assign({},p)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return we=i()?Object.assign:function(s,a){for(var l,g=t(s),p,b=1;b<arguments.length;b++){l=Object(arguments[b]);for(var f in l)n.call(l,f)&&(g[f]=l[f]);if(e){p=e(l);for(var T=0;T<p.length;T++)r.call(l,p[T])&&(g[p[T]]=l[p[T]])}}return g},we}var Ne,Ke;function je(){if(Ke)return Ne;Ke=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ne=e,Ne}var Oe,Je;function Ze(){return Je||(Je=1,Oe=Function.call.bind(Object.prototype.hasOwnProperty)),Oe}var Me,Xe;function Nt(){if(Xe)return Me;Xe=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var n=je(),r={},t=Ze();e=function(s){var a="Warning: "+s;typeof console<"u"&&console.error(a);try{throw new Error(a)}catch{}}}function i(s,a,l,g,p){if(process.env.NODE_ENV!=="production"){for(var b in s)if(t(s,b)){var f;try{if(typeof s[b]!="function"){var T=Error((g||"React class")+": "+l+" type `"+b+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof s[b]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw T.name="Invariant Violation",T}f=s[b](a,b,g,l,null,n)}catch($){f=$}if(f&&!(f instanceof Error)&&e((g||"React class")+": type specification of "+l+" `"+b+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof f+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),f instanceof Error&&!(f.message in r)){r[f.message]=!0;var v=p?p():"";e("Failed "+l+" type: "+f.message+(v??""))}}}}return i.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(r={})},Me=i,Me}var Re,Qe;function jt(){if(Qe)return Re;Qe=1;var e=Ve(),n=wt(),r=je(),t=Ze(),i=Nt(),s=function(){};process.env.NODE_ENV!=="production"&&(s=function(l){var g="Warning: "+l;typeof console<"u"&&console.error(g);try{throw new Error(g)}catch{}});function a(){return null}return Re=function(l,g){var p=typeof Symbol=="function"&&Symbol.iterator,b="@@iterator";function f(d){var o=d&&(p&&d[p]||d[b]);if(typeof o=="function")return o}var T="<<anonymous>>",v={array:O("array"),bigint:O("bigint"),bool:O("boolean"),func:O("function"),number:O("number"),object:O("object"),string:O("string"),symbol:O("symbol"),any:C(),arrayOf:_,element:S(),elementType:u(),instanceOf:w,node:J(),objectOf:D,oneOf:z,oneOfType:q,shape:K,exact:V};function $(d,o){return d===o?d!==0||1/d===1/o:d!==d&&o!==o}function N(d,o){this.message=d,this.data=o&&typeof o=="object"?o:{},this.stack=""}N.prototype=Error.prototype;function I(d){if(process.env.NODE_ENV!=="production")var o={},h=0;function P(L,M,x,m,R,B,X){if(m=m||T,B=B||x,X!==r){if(g){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var ne=m+":"+x;!o[ne]&&h<3&&(s("You are manually calling a React.PropTypes validation function for the `"+B+"` prop on `"+m+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),o[ne]=!0,h++)}}return M[x]==null?L?M[x]===null?new N("The "+R+" `"+B+"` is marked as required "+("in `"+m+"`, but its value is `null`.")):new N("The "+R+" `"+B+"` is marked as required in "+("`"+m+"`, but its value is `undefined`.")):null:d(M,x,m,R,B)}var k=P.bind(null,!1);return k.isRequired=P.bind(null,!0),k}function O(d){function o(h,P,k,L,M,x){var m=h[P],R=Z(m);if(R!==d){var B=Q(m);return new N("Invalid "+L+" `"+M+"` of type "+("`"+B+"` supplied to `"+k+"`, expected ")+("`"+d+"`."),{expectedType:d})}return null}return I(o)}function C(){return I(a)}function _(d){function o(h,P,k,L,M){if(typeof d!="function")return new N("Property `"+M+"` of component `"+k+"` has invalid PropType notation inside arrayOf.");var x=h[P];if(!Array.isArray(x)){var m=Z(x);return new N("Invalid "+L+" `"+M+"` of type "+("`"+m+"` supplied to `"+k+"`, expected an array."))}for(var R=0;R<x.length;R++){var B=d(x,R,k,L,M+"["+R+"]",r);if(B instanceof Error)return B}return null}return I(o)}function S(){function d(o,h,P,k,L){var M=o[h];if(!l(M)){var x=Z(M);return new N("Invalid "+k+" `"+L+"` of type "+("`"+x+"` supplied to `"+P+"`, expected a single ReactElement."))}return null}return I(d)}function u(){function d(o,h,P,k,L){var M=o[h];if(!e.isValidElementType(M)){var x=Z(M);return new N("Invalid "+k+" `"+L+"` of type "+("`"+x+"` supplied to `"+P+"`, expected a single ReactElement type."))}return null}return I(d)}function w(d){function o(h,P,k,L,M){if(!(h[P]instanceof d)){var x=d.name||T,m=ae(h[P]);return new N("Invalid "+L+" `"+M+"` of type "+("`"+m+"` supplied to `"+k+"`, expected ")+("instance of `"+x+"`."))}return null}return I(o)}function z(d){if(!Array.isArray(d))return process.env.NODE_ENV!=="production"&&(arguments.length>1?s("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):s("Invalid argument supplied to oneOf, expected an array.")),a;function o(h,P,k,L,M){for(var x=h[P],m=0;m<d.length;m++)if($(x,d[m]))return null;var R=JSON.stringify(d,function(X,y){var ne=Q(y);return ne==="symbol"?String(y):y});return new N("Invalid "+L+" `"+M+"` of value `"+String(x)+"` "+("supplied to `"+k+"`, expected one of "+R+"."))}return I(o)}function D(d){function o(h,P,k,L,M){if(typeof d!="function")return new N("Property `"+M+"` of component `"+k+"` has invalid PropType notation inside objectOf.");var x=h[P],m=Z(x);if(m!=="object")return new N("Invalid "+L+" `"+M+"` of type "+("`"+m+"` supplied to `"+k+"`, expected an object."));for(var R in x)if(t(x,R)){var B=d(x,R,k,L,M+"."+R,r);if(B instanceof Error)return B}return null}return I(o)}function q(d){if(!Array.isArray(d))return process.env.NODE_ENV!=="production"&&s("Invalid argument supplied to oneOfType, expected an instance of array."),a;for(var o=0;o<d.length;o++){var h=d[o];if(typeof h!="function")return s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+te(h)+" at index "+o+"."),a}function P(k,L,M,x,m){for(var R=[],B=0;B<d.length;B++){var X=d[B],y=X(k,L,M,x,m,r);if(y==null)return null;y.data&&t(y.data,"expectedType")&&R.push(y.data.expectedType)}var ne=R.length>0?", expected one of type ["+R.join(", ")+"]":"";return new N("Invalid "+x+" `"+m+"` supplied to "+("`"+M+"`"+ne+"."))}return I(P)}function J(){function d(o,h,P,k,L){return W(o[h])?null:new N("Invalid "+k+" `"+L+"` supplied to "+("`"+P+"`, expected a ReactNode."))}return I(d)}function Y(d,o,h,P,k){return new N((d||"React class")+": "+o+" type `"+h+"."+P+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+k+"`.")}function K(d){function o(h,P,k,L,M){var x=h[P],m=Z(x);if(m!=="object")return new N("Invalid "+L+" `"+M+"` of type `"+m+"` "+("supplied to `"+k+"`, expected `object`."));for(var R in d){var B=d[R];if(typeof B!="function")return Y(k,L,M,R,Q(B));var X=B(x,R,k,L,M+"."+R,r);if(X)return X}return null}return I(o)}function V(d){function o(h,P,k,L,M){var x=h[P],m=Z(x);if(m!=="object")return new N("Invalid "+L+" `"+M+"` of type `"+m+"` "+("supplied to `"+k+"`, expected `object`."));var R=n({},h[P],d);for(var B in R){var X=d[B];if(t(d,B)&&typeof X!="function")return Y(k,L,M,B,Q(X));if(!X)return new N("Invalid "+L+" `"+M+"` key `"+B+"` supplied to `"+k+"`.\nBad object: "+JSON.stringify(h[P],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(d),null,"  "));var y=X(x,B,k,L,M+"."+B,r);if(y)return y}return null}return I(o)}function W(d){switch(typeof d){case"number":case"string":case"undefined":return!0;case"boolean":return!d;case"object":if(Array.isArray(d))return d.every(W);if(d===null||l(d))return!0;var o=f(d);if(o){var h=o.call(d),P;if(o!==d.entries){for(;!(P=h.next()).done;)if(!W(P.value))return!1}else for(;!(P=h.next()).done;){var k=P.value;if(k&&!W(k[1]))return!1}}else return!1;return!0;default:return!1}}function ee(d,o){return d==="symbol"?!0:o?o["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&o instanceof Symbol:!1}function Z(d){var o=typeof d;return Array.isArray(d)?"array":d instanceof RegExp?"object":ee(o,d)?"symbol":o}function Q(d){if(typeof d>"u"||d===null)return""+d;var o=Z(d);if(o==="object"){if(d instanceof Date)return"date";if(d instanceof RegExp)return"regexp"}return o}function te(d){var o=Q(d);switch(o){case"array":case"object":return"an "+o;case"boolean":case"date":case"regexp":return"a "+o;default:return o}}function ae(d){return!d.constructor||!d.constructor.name?T:d.constructor.name}return v.checkPropTypes=i,v.resetWarningCache=i.resetWarningCache,v.PropTypes=v,v},Re}var Ie,et;function Ot(){if(et)return Ie;et=1;var e=je();function n(){}function r(){}return r.resetWarningCache=n,Ie=function(){function t(a,l,g,p,b,f){if(f!==e){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}t.isRequired=t;function i(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:i,element:t,elementType:t,instanceOf:i,node:t,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:n};return s.PropTypes=s,s},Ie}var tt;function Mt(){if(tt)return fe.exports;if(tt=1,process.env.NODE_ENV!=="production"){var e=Ve(),n=!0;fe.exports=jt()(e.isElement,n)}else fe.exports=Ot()();return fe.exports}var Rt=Mt();const A=Et(Rt),It={"10px":"1","12px":"2","14px":"3","16px":"4","18px":"5","24px":"6","32px":"7"},nt={bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:"12px"},rt=()=>{const[e,n]=E.useState(nt),r=E.useCallback(a=>{n(l=>({...l,alignLeft:a==="left",alignCenter:a==="center",alignRight:a==="right",alignJustify:a==="justify"}))},[]),t=E.useCallback(a=>{try{const l=window.getSelection();if(!l||l.rangeCount===0)return!1;const g=l.getRangeAt(0);if(!g.toString())return n(b=>({...b,fontSize:a})),!1;try{const b=document.createElement("span");b.style.fontSize=a;const f=g.extractContents();return b.appendChild(f),g.insertNode(b),g.selectNodeContents(b),l.removeAllRanges(),l.addRange(g),n(T=>({...T,fontSize:a})),!0}catch{const f=It[a]||"2";return document.execCommand("fontSize",!1,f),n(T=>({...T,fontSize:a})),!0}}catch(l){return console.warn("[useFormatting] Font size change failed:",l),!1}},[]),i=E.useCallback((a,l=null)=>{try{if(typeof document.execCommand!="function"){console.warn("[useFormatting] execCommand not supported");return}if(a==="fontSize"){t(l);return}switch(document.execCommand(a,!1,l)||console.warn(`[useFormatting] Command "${a}" failed`),a){case"bold":n(p=>({...p,bold:!p.bold}));break;case"italic":n(p=>({...p,italic:!p.italic}));break;case"underline":n(p=>({...p,underline:!p.underline}));break;case"strikethrough":n(p=>({...p,strikethrough:!p.strikethrough}));break;case"justifyLeft":r("left");break;case"justifyCenter":r("center");break;case"justifyRight":r("right");break;case"justifyFull":r("justify");break;case"fontName":n(p=>({...p,fontFamily:l}));break;default:break}}catch(g){console.warn(`[useFormatting] Error executing command "${a}":`,g)}},[t,r]),s=E.useCallback(()=>{n(nt)},[]);return{currentFormat:e,formatText:i,resetFormat:s}},me={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},at={top:60,bottom:100,left:72,right:72},Dt=300,Bt=500,$t=50,Lt='page-break, [data-page-break="true"]',ot=(e,n)=>{const r=Se(),t=E.useRef(null),i=E.useRef(null),s=E.useRef(e),a=E.useRef(!1);E.useEffect(()=>{s.current=e},[e]),E.useEffect(()=>()=>{t.current&&clearTimeout(t.current),i.current&&clearTimeout(i.current)},[]);const l=E.useCallback((C,_)=>{if(!C||C.length===0)return null;let S=0;for(let u=0;u<C.length;u++){const w=C[u];if(!w||!w.getBoundingClientRect)continue;const z=w.getBoundingClientRect().height;if(S+z>_)return{overflowIndex:u,overflowElement:w,accumulatedHeight:S};S+=z}return null},[]),g=E.useCallback((C,_)=>{if(!C||!n?.current)return!1;try{const S=n.current,u=document.createElement("page-break");return u.setAttribute("data-page-break","true"),u.setAttribute("contenteditable","false"),u.setAttribute("data-page-number",_||"2"),C.parentNode.insertBefore(u,C),!0}catch(S){return console.warn("[insertPageBreakBefore] Failed to insert page break:",S),!1}},[n]),p=E.useCallback((C={})=>{if(!n?.current||typeof document>"u")return[];const _=C.pageSize||s.current||"A4",S=me[_]||me.A4,u=n.current,w=u.querySelectorAll(Lt),z=[];z.push({id:"page-0",pageNumber:1,top:0,height:S.height});const D=u.getBoundingClientRect(),q=u.scrollTop;return w.forEach((J,Y)=>{const V=J.getBoundingClientRect().top-D.top+q;z.push({id:`page-${Y+1}`,pageNumber:Y+2,top:V,height:S.height})}),z},[n]),b=E.useCallback((C={})=>{const _=p(C);return r.updatePageBoundaries(_),_},[p,r]),f=E.useCallback(()=>{if(!(!n?.current||a.current))try{a.current=!0;const C=n.current,_=s.current||"A4",u=(me[_]||me.A4).height-at.top-at.bottom,w=Array.from(C.children);if(w.length===0)return;const z=w.filter(Y=>Y.tagName==="PAGE-BREAK"||Y.getAttribute("data-page-break")==="true"),D=[];let q=[];for(const Y of w)Y.tagName==="PAGE-BREAK"||Y.getAttribute("data-page-break")==="true"?q.length>0&&(D.push(q),q=[]):q.push(Y);q.length>0&&D.push(q),D.length===0&&w.length>0&&D.push(w.filter(Y=>!(Y.tagName==="PAGE-BREAK"||Y.getAttribute("data-page-break")==="true")));let J=!1;for(let Y=0;Y<D.length;Y++){const K=D[Y],V=l(K,u);if(V&&V.overflowIndex>0){const W=Y+2;if(g(V.overflowElement,W)){J=!0;break}}}if(J){const Y=C.innerHTML;r.updateContinuousContent(Y),setTimeout(()=>{b()},$t)}}catch(C){console.warn("[checkAndReflow] Reflow failed:",C)}finally{a.current=!1}},[n,l,g,r,b]),T=E.useCallback((C=Bt)=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{i.current=null,f()},C)},[f]),v=E.useCallback((C={})=>{t.current&&clearTimeout(t.current);const _=typeof C.delay=="number"?C.delay:Dt;t.current=setTimeout(()=>{t.current=null,b(C)},Math.max(0,_))},[b]),$=E.useCallback(C=>{if(!C?.current||!n?.current)return 0;try{const _=C.current,u=n.current.querySelectorAll('page-break, [data-page-break="true"]');if(u.length===0)return 0;const w=_.getBoundingClientRect(),z=w.top+w.height/2;for(let D=u.length-1;D>=0;D--)if(u[D].getBoundingClientRect().top<z)return D+1;return 0}catch(_){return console.warn("[getCurrentPage] Failed to calculate page:",_),0}},[n]),N=E.useCallback(C=>{if(!n?.current)return;const _=n.current;_.focus();try{let S=null,u=0;if(C===0)S=_.firstChild,u=0;else{const z=_.querySelectorAll('page-break, [data-page-break="true"]')[C-1];z&&z.nextSibling&&(S=z.nextSibling,u=0)}if(S){const w=document.createRange(),z=window.getSelection();S.nodeType===Node.TEXT_NODE?w.setStart(S,u):w.setStart(S,0),w.collapse(!0),z.removeAllRanges(),z.addRange(w)}}catch(S){console.warn("[positionCursorAtPage] Failed to position cursor:",S)}},[n]),I=E.useCallback((C,_)=>{if(!_?.current||!n?.current){console.warn("[scrollToPage] Missing refs");return}const S=_.current,u=n.current;try{let w=null;if(C===0)w=u;else{const D=u.querySelectorAll('page-break, [data-page-break="true"]')[C-1];if(D)w=D;else{console.warn("[scrollToPage] Page break not found for page",C);return}}if(w){const z=w.getBoundingClientRect(),D=S.getBoundingClientRect(),q=S.scrollTop+(z.top-D.top);console.log("[scrollToPage] Scrolling to page",C,"scrollTop:",q),S.scrollTo({top:q,behavior:"smooth"}),setTimeout(()=>{N(C)},400)}}catch(w){console.error("[scrollToPage] Error:",w)}},[n,N]),O=E.useCallback(C=>{if(!n?.current)return!1;const _=n.current;if(p().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const u=Array.from(_.querySelectorAll('page-break, [data-page-break="true"]'));if(C>u.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const w=window.getSelection();let z=!1,D=[],q=null;if(C===0){const K=u[0];if(!K)return console.warn("[removePageAndContent] No page break found for first page"),!1;let V=_.firstChild;for(;V&&V!==K;)D.push(V),V=V.nextSibling;q=K}else{const K=u[C-1];if(!K)return console.warn("[removePageAndContent] Page break not found"),!1;const V=u[C];let W=K.nextSibling;for(;W&&W!==V;)D.push(W),W=W.nextSibling;q=K}if(w&&w.rangeCount>0){const V=w.getRangeAt(0).startContainer;for(const W of D)if(W.contains(V)||W===V){z=!0;break}}q&&q.parentNode&&q.remove(),D.forEach(K=>{K.parentNode&&K.remove()}),_.querySelectorAll('page-break, [data-page-break="true"]').forEach((K,V)=>{K.setAttribute("data-page-number",String(V+2))}),z&&setTimeout(()=>{N(0)},50);const Y=_.innerHTML;return r.updateContinuousContent(Y),setTimeout(()=>{b()},100),!0}catch(u){return console.error("[removePageAndContent] Failed to remove page:",u),!1}},[n,p,r,b,N]);return{calculatePageBoundaries:p,checkAndUpdateBoundaries:v,updateBoundaries:b,getCurrentPage:$,scrollToPage:I,positionCursorAtPage:N,checkAndReflow:f,triggerAutoReflow:T,removePageAndContent:O,boundaryTimeoutRef:t,reflowTimeoutRef:i}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ut=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,t)=>t?t.toUpperCase():r.toLowerCase()),it=e=>{const n=Ut(e);return n.charAt(0).toUpperCase()+n.slice(1)},st=(...e)=>e.filter((n,r,t)=>!!n&&n.trim()!==""&&t.indexOf(n)===r).join(" ").trim(),qt=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ht={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=E.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:t,className:i="",children:s,iconNode:a,...l},g)=>E.createElement("svg",{ref:g,...Ht,width:n,height:n,stroke:e,strokeWidth:t?Number(r)*24/Number(n):r,className:st("lucide",i),...!s&&!qt(l)&&{"aria-hidden":"true"},...l},[...a.map(([p,b])=>E.createElement(p,b)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=(e,n)=>{const r=E.forwardRef(({className:t,...i},s)=>E.createElement(Gt,{ref:s,iconNode:n,className:st(`lucide-${zt(it(e))}`,`lucide-${e}`,t),...i}));return r.displayName=it(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=F("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=F("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=F("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=F("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=F("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=F("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=F("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=F("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=F("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=F("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=F("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=F("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=F("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=F("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=F("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=F("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=F("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=F("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=F("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=F("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=F("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=F("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=F("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=F("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=F("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=F("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=F("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),lt=({editorView:e,isCollapsed:n,onToggle:r,wordCount:t,pageCount:i})=>{const s=Ce(),{pages:a,activePage:l,continuousContent:g,editorMode:p}=s,[b,f]=E.useState(0),[T,v]=E.useState([]);E.useEffect(()=>{if(t!==void 0&&i!==void 0){if(f(t),g){const O=document.createElement("div");O.innerHTML=g;const C=O.querySelectorAll("h1, h2, h3, h4, h5, h6"),_=Array.from(C).map((S,u)=>{const w=parseInt(S.tagName.charAt(1)),z=S.textContent.trim();return z?{id:`heading-${u}`,level:w,text:z,page:1}:null}).filter(Boolean);v(_)}return}let N=0;const I=[];a.forEach((O,C)=>{if(O.content){const _=document.createElement("div");_.innerHTML=O.content;const u=(_.textContent||_.innerText||"").trim().split(/\s+/).filter(z=>z.length>0);N+=u.length,_.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((z,D)=>{const q=parseInt(z.tagName.charAt(1)),J=z.textContent.trim();J&&I.push({id:`heading-${C}-${D}`,level:q,text:J,page:C+1})})}}),f(N),v(I)},[a,t,i,g]);const $=i!==void 0?i:a.length;return c.jsxs("aside",{className:`sidebar ${n?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsxs("div",{className:"sidebar-title",children:[c.jsx(ye,{size:18}),c.jsx("h2",{children:"Document Info"})]}),c.jsx("button",{className:"sidebar-toggle",onClick:r,"aria-label":n?"Expand sidebar":"Collapse sidebar",title:n?"Expand sidebar":"Collapse sidebar",children:n?c.jsx(Vt,{size:16}):c.jsx(Ft,{size:16})})]}),!n&&c.jsxs("div",{className:"sidebar-content",children:[c.jsxs("div",{className:"sidebar-section",children:[c.jsx("h3",{children:"Statistics"}),c.jsxs("div",{className:"stat-item",children:[c.jsxs("div",{className:"stat-label",children:[c.jsx(Wt,{size:14}),c.jsx("span",{children:"Pages:"})]}),c.jsx("span",{className:"stat-value",children:$})]}),c.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[c.jsxs("div",{className:"stat-label",children:[c.jsx(Kt,{size:14}),c.jsx("span",{children:"Words:"})]}),c.jsx("span",{className:"stat-value",children:b.toLocaleString()})]}),c.jsxs("div",{className:"stat-item",children:[c.jsxs("div",{className:"stat-label",children:[c.jsx(ye,{size:14}),c.jsx("span",{children:"Active Page:"})]}),c.jsx("span",{className:"stat-value",children:l+1})]})]}),T.length>0&&c.jsxs("div",{className:"sidebar-section",children:[c.jsxs("h3",{children:[c.jsx(ct,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),c.jsx("div",{className:"document-outline","data-testid":"outline",children:T.map(N=>{const I=N.level===1?Jt:N.level===2?Zt:Xt;return c.jsxs("div",{className:`outline-item outline-level-${N.level}`,style:{marginLeft:`${(N.level-1)*12}px`},children:[c.jsx(I,{size:12,className:"outline-icon"}),c.jsx("span",{className:"outline-text",children:N.text}),c.jsxs("span",{className:"outline-page",children:["p.",N.page]})]},N.id)})})]}),c.jsxs("div",{className:"sidebar-section",children:[c.jsx("h3",{children:"Document"}),c.jsx("p",{children:"HTML Editor"}),c.jsx("p",{children:"Multi-page support"})]})]})]})};function yn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})}function ut(e){return new Promise((n,r)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){r(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){r(new Error("Image exceeds maximum size of 5MB"));return}const i=new FileReader;i.onload=s=>{const a=s.target.result;if(a.split(",")[1].length*3/4>5*1024*1024){r(new Error("Image exceeds maximum size of 5MB"));return}try{const p=`editor-image-${yn()}`;localStorage.setItem(p,a),n(p)}catch(p){p.name==="QuotaExceededError"?r(new Error("Storage quota exceeded")):r(p)}},i.onerror=()=>{r(new Error("Error reading image file"))},i.readAsDataURL(e)})}function bn(e){return localStorage.getItem(e)}function En(e){localStorage.removeItem(e)}function vn(){Object.keys(localStorage).forEach(e=>{e.startsWith("editor-image-")&&localStorage.removeItem(e)})}function kn(){return Object.keys(localStorage).filter(e=>e.startsWith("editor-image-"))}class dt{constructor(n="Editor"){this.namespace=n}_format(n,r,t){return`[${new Date().toISOString()}] [${this.namespace}] [${n}] ${r}`}info(n,r){}warn(n,r){}error(n,r){}debug(n,r){}}const pt=new dt("Editor"),be=({currentFormat:e,pageSize:n,onFormatText:r,onPageSizeChange:t,onAddPageBreak:i})=>{const s=async a=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(a.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(a.size>5242880){alert("Image exceeds maximum size of 5MB");return}const g=await ut(a),p=localStorage.getItem(g);p&&(document.execCommand("insertImage",!1,p),pt.info("Image inserted",{key:g}))}catch(l){pt.error("Error uploading image",l)}};return c.jsxs("div",{className:"editor-toolbar",children:[c.jsx("button",{onClick:()=>r("bold"),className:e.bold?"active":"",title:"Bold",children:c.jsx(Yt,{size:16})}),c.jsx("button",{onClick:()=>r("italic"),className:e.italic?"active":"",title:"Italic",children:c.jsx(en,{size:16})}),c.jsx("button",{onClick:()=>r("underline"),className:e.underline?"active":"",title:"Underline",children:c.jsx(fn,{size:16})}),c.jsx("button",{onClick:()=>r("strikethrough"),className:e.strikethrough?"active":"",title:"Strikethrough",children:c.jsx(cn,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("button",{onClick:()=>r("justifyLeft"),className:e.alignLeft?"active":"",title:"Align Left",children:c.jsx(gn,{size:16})}),c.jsx("button",{onClick:()=>r("justifyCenter"),className:e.alignCenter?"active":"",title:"Align Center",children:c.jsx(un,{size:16})}),c.jsx("button",{onClick:()=>r("justifyRight"),className:e.alignRight?"active":"",title:"Align Right",children:c.jsx(dn,{size:16})}),c.jsx("button",{onClick:()=>r("justifyFull"),className:e.alignJustify?"active":"",title:"Justify",children:c.jsx(pn,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsxs("select",{onChange:a=>r("fontName",a.target.value),defaultValue:"Arial",title:"Font Family",children:[c.jsx("option",{value:"Arial",children:"Arial"}),c.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),c.jsx("option",{value:"Courier New",children:"Courier New"}),c.jsx("option",{value:"Georgia",children:"Georgia"}),c.jsx("option",{value:"Verdana",children:"Verdana"})]}),c.jsxs("select",{onChange:a=>r("fontSize",a.target.value),defaultValue:"12px",title:"Font Size",children:[c.jsx("option",{value:"10px",children:"10"}),c.jsx("option",{value:"12px",children:"12"}),c.jsx("option",{value:"14px",children:"14"}),c.jsx("option",{value:"16px",children:"16"}),c.jsx("option",{value:"18px",children:"18"}),c.jsx("option",{value:"24px",children:"24"}),c.jsx("option",{value:"32px",children:"32"})]}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("button",{onClick:()=>r("insertUnorderedList"),title:"Bullet List",children:c.jsx(ct,{size:16})}),c.jsx("button",{onClick:()=>r("insertOrderedList"),title:"Numbered List",children:c.jsx(nn,{size:16})}),c.jsx("button",{onClick:()=>r("insertCheckList"),title:"Checklist",children:c.jsx(sn,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("button",{onClick:()=>{const a=prompt("Enter URL:");a&&r("createLink",a)},title:"Insert Link",children:c.jsx(tn,{size:16})}),c.jsx("button",{onClick:()=>r("insertHTML",'<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>'),title:"Insert Table",children:c.jsx(ln,{size:16})}),i&&c.jsx("button",{onClick:i,title:"Insert Page Break",children:c.jsx(ye,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("button",{onClick:()=>r("undo"),title:"Undo",children:c.jsx(hn,{size:16})}),c.jsx("button",{onClick:()=>r("redo"),title:"Redo",children:c.jsx(an,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("input",{type:"file",accept:"image/*",onChange:a=>a.target.files[0]&&s(a.target.files[0]),style:{display:"none"},id:"image-upload"}),c.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:c.jsx(Qt,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsxs("select",{value:n,onChange:a=>t(a.target.value),title:"Page Size",children:[c.jsx("option",{value:"A4",children:"A4"}),c.jsx("option",{value:"Letter",children:"Letter"}),c.jsx("option",{value:"Legal",children:"Legal"})]})]})};be.propTypes={currentFormat:A.shape({bold:A.bool,italic:A.bool,underline:A.bool,strikethrough:A.bool,alignLeft:A.bool,alignCenter:A.bool,alignRight:A.bool,alignJustify:A.bool,fontFamily:A.string,fontSize:A.string}).isRequired,pageSize:A.oneOf(["A4","Letter","Legal"]).isRequired,onFormatText:A.func.isRequired,onPageSizeChange:A.func.isRequired,onAddPageBreak:A.func},be.defaultProps={onAddPageBreak:void 0};const Ee=({content:e,dimensions:n,pageSize:r,pageBoundaries:t=[],editorRef:i,onInput:s,onKeyDown:a,onClick:l,onScroll:g})=>{const p={top:60,bottom:100,left:72,right:72},b=f=>{if(f.key==="Tab")return f.preventDefault(),document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;"),!1;const T=window.getSelection();if(!T||T.rangeCount===0)return;const v=T.getRangeAt(0),{startContainer:$,endContainer:N}=v,I=O=>O?O.nodeType===Node.ELEMENT_NODE?O.tagName==="PAGE-BREAK"||O.getAttribute("data-page-break")==="true":O.parentElement&&I(O.parentElement):!1;if((f.key==="Backspace"||f.key==="Delete")&&(I($)||I(N)))return f.preventDefault(),!1;a&&a(f)};return c.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${n.width}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh"},children:c.jsx("div",{ref:i,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${n.height}px`,backgroundColor:"white",padding:`${p.top}px ${p.right}px ${p.bottom}px ${p.left}px`,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:"Arial, sans-serif",fontSize:"12px",lineHeight:"1.15",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:s,onKeyDown:b,onClick:l,onScroll:g,"data-testid":"continuous-editor"})})};Ee.propTypes={content:A.string.isRequired,dimensions:A.shape({width:A.number.isRequired,height:A.number.isRequired}).isRequired,pageSize:A.oneOf(["A4","Letter","Legal"]).isRequired,pageBoundaries:A.arrayOf(A.shape({id:A.string.isRequired,pageNumber:A.number.isRequired,top:A.number,height:A.number})),editorRef:A.shape({current:A.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onInput:A.func.isRequired,onKeyDown:A.func,onClick:A.func,onScroll:A.func},Ee.defaultProps={pageBoundaries:[],onKeyDown:void 0,onClick:void 0,onScroll:void 0};const De=({pageBoundaries:e=[{id:"page-0",pageNumber:1}],activePage:n=0,pageSize:r="A4",onNavigate:t,onAddPage:i,onDeletePage:s,onPageSizeChange:a}={})=>{const l=Math.max(e?.length||0,1),g=T=>{t&&t(T)},p=()=>{i&&i()},b=T=>{if(l<=1){console.warn("[PageManager] Cannot delete the only page");return}s&&s(T)},f=T=>{a&&a(T)};return c.jsxs("div",{className:"page-manager",children:[c.jsxs("div",{className:"page-size-controls",children:[c.jsxs("label",{htmlFor:"page-size-selector",children:[c.jsx(on,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Size:"]}),c.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:r,onChange:T=>f(T.target.value),children:[c.jsx("option",{value:"A4",children:"A4"}),c.jsx("option",{value:"Letter",children:"Letter"}),c.jsx("option",{value:"Legal",children:"Legal"})]})]}),c.jsx("div",{className:"page-list",children:(e&&e.length>0?e:[{id:"page-0",pageNumber:1}]).map((T,v)=>c.jsxs("div",{className:"page-item",children:[c.jsxs("button",{type:"button",className:`page-button ${v===n?"active":""}`,onClick:()=>g(v),"aria-label":`Go to page ${v+1}`,"aria-current":v===n?"page":void 0,children:[c.jsx(ye,{size:14}),c.jsxs("span",{children:["Page ",v+1]})]}),l>1&&c.jsx("button",{type:"button",className:"delete-page-button",onClick:$=>{$.stopPropagation(),b(v)},"aria-label":`Delete page ${v+1}`,title:"Delete this page and its content",children:c.jsx(mn,{size:14})})]},T.id||`page-${v}`))}),c.jsxs("button",{type:"button",className:"add-page-button",onClick:p,"aria-label":"Add new page",title:"Add new page at end",children:[c.jsx(rn,{size:16}),c.jsx("span",{children:"Add Page"})]})]})};De.propTypes={pageBoundaries:A.arrayOf(A.shape({id:A.string.isRequired,pageNumber:A.number.isRequired,top:A.number,height:A.number})),activePage:A.number,pageSize:A.oneOf(["A4","Letter","Legal"]),onNavigate:A.func,onAddPage:A.func,onDeletePage:A.func,onPageSizeChange:A.func},De.defaultProps={pageBoundaries:[{id:"page-0",pageNumber:1}],activePage:0,pageSize:"A4",onNavigate:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0};const gt=E.memo(De),ft={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},Pn=50,An=50,Tn=50,xn=100,_n=500,ve=E.forwardRef(({pageManagerComponent:e=null,onNavigatePage:n,onAddPage:r,onDeletePage:t,onPageSizeChange:i,onChange:s,showSidebar:a=!0,showToolbar:l=!0,showPageManager:g=!0},p)=>{const b=Ce(),f=Se(),{pageSize:T,continuousContent:v,pageBoundaries:$,activePage:N}=b,I=E.useRef(null),O=E.useRef(null),{currentFormat:C,formatText:_}=rt(),{checkAndUpdateBoundaries:S,getCurrentPage:u,scrollToPage:w,positionCursorAtPage:z,updateBoundaries:D,triggerAutoReflow:q,removePageAndContent:J}=ot(T,O),Y=E.useMemo(()=>ft[T]||ft.A4,[T]),[K,V]=E.useState(!1),W=E.useRef(null),ee=E.useRef(!1),Z=E.useRef(!1),Q=E.useRef(!1),te=E.useRef(v);E.useEffect(()=>{if(O.current){if(!Q.current){O.current.innerHTML=v,Q.current=!0,te.current=v;const m=setTimeout(()=>{D()},Pn);return()=>clearTimeout(m)}if(te.current!==v){if(O.current.innerHTML!==v){O.current.innerHTML=v;const R=setTimeout(()=>{if(D(),ee.current){ee.current=!1;const B=Math.max(0,$.length-1);f.setActivePage(B),setTimeout(()=>{w(B,I)},Tn)}},An);return te.current=v,()=>clearTimeout(R)}te.current=v}}},[v,D,$.length,f,w]),E.useEffect(()=>{s&&Q.current&&s(v)},[v,s]),E.useImperativeHandle(p,()=>({getHTMLContent:()=>v,getPlainText:()=>v.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),setContent:m=>{f.updateContinuousContent(m),O.current&&(O.current.innerHTML=m,setTimeout(()=>{D()},50))}}),[v,f,D]),E.useEffect(()=>{const m=setTimeout(()=>{O.current&&O.current.focus()},200);return()=>clearTimeout(m)},[]);const ae=E.useCallback(m=>{const R=m.currentTarget.innerHTML;f.updateContinuousContent(R),S(),q();const B=u(I);B!==N&&f.setActivePage(B)},[S,f,u,N,q,I]),d=E.useCallback(m=>{f.updatePageSize(m),D({pageSize:m}),i&&i(m)},[f,D,i]),o=E.useCallback(m=>{m<0||m>=$.length||(Z.current=!0,f.setActivePage(m),w(m,I),setTimeout(()=>{Z.current=!1},_n),n&&n(m))},[f,w,n,$.length]),h=E.useCallback(()=>{ee.current=!0,f.addPageBreak({position:"end"}),r&&r()},[f,r]),P=E.useCallback(()=>{const m=window.getSelection();if(m&&m.rangeCount>0){if(!O?.current)return;const X=`<page-break data-page-break="true" contenteditable="false" data-page-number="${O.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,X),setTimeout(()=>{D();const y=u(I);f.setActivePage(y)},150)}},[D,u,f,I]),k=E.useCallback(m=>{if($.length<=1){console.warn("Cannot delete the only page");return}J(m)&&(f.setActivePage(0),t&&t(m))},[$.length,J,f,t]),L=E.useCallback(()=>{!I.current||!O.current||Z.current||(W.current&&clearTimeout(W.current),W.current=setTimeout(()=>{if(Z.current){W.current=null;return}const m=u(I);m!==N&&m>=0&&f.setActivePage(m),W.current=null},xn))},[u,N,f]),M=E.useMemo(()=>{if(!v)return 0;const R=v.replace(/<[^>]*>/g," ").match(/\b\w+\b/g);return R?R.length:0},[v]),x=$.length||1;return E.useEffect(()=>()=>{W.current&&clearTimeout(W.current)},[]),c.jsxs("div",{className:"multi-page-editor",children:[l&&c.jsx(be,{currentFormat:C,pageSize:T,onFormatText:_,onPageSizeChange:d,onAddPageBreak:P}),c.jsxs("div",{className:"editor-container",children:[a&&c.jsx(lt,{editorView:null,isCollapsed:K,onToggle:()=>V(m=>!m),wordCount:M,pageCount:x}),c.jsx("div",{className:"editor-viewport continuous-scroll",ref:I,onScroll:L,children:c.jsx(Ee,{content:v,dimensions:Y,pageSize:T,pageBoundaries:$,editorRef:O,onInput:ae,onClick:()=>O.current?.focus()})}),g&&c.jsx("div",{className:"page-manager-sidebar",children:e?E.cloneElement(e,{onNavigate:o,onAddPage:h,onDeletePage:k,onPageSizeChange:d}):c.jsx(gt,{pageBoundaries:$,activePage:N,pageSize:T,onNavigate:o,onAddPage:h,onDeletePage:k,onPageSizeChange:d})})]})]})});ve.displayName="ContentEditableEditor",ve.propTypes={pageManagerComponent:A.element,onNavigatePage:A.func,onAddPage:A.func,onDeletePage:A.func,onPageSizeChange:A.func,onChange:A.func,showSidebar:A.bool,showToolbar:A.bool,showPageManager:A.bool},ve.defaultProps={pageManagerComponent:null,onNavigatePage:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onChange:void 0,showSidebar:!0,showToolbar:!0,showPageManager:!0};class Be extends E.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("[ErrorBoundary] Caught error:",n),console.error("[ErrorBoundary] Error info:",r),this.setState({error:n,errorInfo:r}),this.props.onError&&this.props.onError(n,r)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:c.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #f44336",borderRadius:"4px",backgroundColor:"#ffebee",color:"#c62828"},children:[c.jsx("h2",{style:{marginTop:0},children:" Something went wrong"}),c.jsx("p",{children:"The editor encountered an unexpected error and couldn't continue."}),this.props.showDetails&&this.state.error&&c.jsxs("details",{style:{marginTop:"10px",padding:"10px",backgroundColor:"white",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[c.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),c.jsxs("pre",{style:{marginTop:"10px",overflow:"auto",maxHeight:"200px"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),c.jsx("button",{onClick:this.handleReset,style:{marginTop:"15px",padding:"8px 16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Try Again"})]}):this.props.children}}Be.propTypes={children:A.node.isRequired,fallback:A.node,onError:A.func,onReset:A.func,showDetails:A.bool},Be.defaultProps={fallback:null,onError:void 0,onReset:void 0,showDetails:process.env.NODE_ENV==="development"};const ke="A4",re="<p><br></p>",de=(e,n=ke)=>({id:ie.v4(),index:e,size:n,content:re,images:[],isBreakPoint:!1}),ht=(e,n=ke)=>(e.length>0?e:[de(0,n)]).map((t,i)=>({id:t.id||ie.v4(),index:i,size:t.size||n,content:Pe(t.content),images:t.images||[],isBreakPoint:!!t.isBreakPoint})),Pe=e=>typeof e!="string"||e.trim()===""?re:e,$e=(e={})=>{const n=new Date().toISOString(),r=e.pageSize||ke,t=ht(e.pages||[de(0,r)],r),i={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},a=[{id:"page-0",pageNumber:1,top:0,height:(i[r]||i.A4).height}];return{id:ie.v4(),title:e.title||"Untitled Document",createdAt:n,updatedAt:n,pageSize:r,pages:t,activePage:e.activePage&&e.activePage<t.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:t.length,editorMode:e.editorMode||"continuous",continuousContent:e.continuousContent||re,pageBoundaries:e.pageBoundaries||a}},Cn=$e(),mt=bt.createSlice({name:"document",initialState:Cn,reducers:{initializeDocument:(e,n)=>{const{initialContent:r=re,pageSize:t=ke}=n.payload||{},i={...de(0,t),content:Pe(r)};return $e({title:e.title,pageSize:t,pages:[i]})},updateTitle:(e,n)=>{e.title=n.payload,e.updatedAt=new Date().toISOString()},updatePageContent:(e,n)=>{const{pageIndex:r,content:t}=n.payload;r<0||r>=e.pages.length||(e.pages[r].content=Pe(t),e.updatedAt=new Date().toISOString())},updatePages:(e,n)=>{const r=Array.isArray(n.payload)?{pages:n.payload}:n.payload||{},t=ht(r.pages||[],e.pageSize);e.pages=t,e.activePage=Math.min(e.activePage,t.length-1),e.pageBreaks=Array.isArray(r.pageBreaks)?r.pageBreaks:t.slice(0,-1).map((i,s)=>({id:`auto-break-${s}`,pageNumber:s+1})),e.totalPages=t.length,e.updatedAt=new Date().toISOString()},addPage:(e,n)=>{const r=typeof n.payload?.index=="number"?Math.min(Math.max(n.payload.index,0),e.pages.length):e.pages.length;e.pages.splice(r,0,de(r,e.pageSize)),e.pages=e.pages.map((t,i)=>({...t,index:i,size:e.pageSize})),e.activePage=r,e.pageBreaks=e.pages.slice(0,-1).map((t,i)=>({id:`auto-break-${i}`,pageNumber:i+1})),e.totalPages=e.pages.length,e.updatedAt=new Date().toISOString()},deletePage:(e,n)=>{const r=n.payload;e.pages.length<=1||(e.pages.splice(r,1),e.pages=e.pages.map((t,i)=>({...t,index:i,size:e.pageSize})),e.activePage>=e.pages.length?e.activePage=e.pages.length-1:r<=e.activePage&&e.activePage>0&&(e.activePage-=1),e.pageBreaks=e.pages.slice(0,-1).map((t,i)=>({id:`auto-break-${i}`,pageNumber:i+1})),e.totalPages=e.pages.length,e.updatedAt=new Date().toISOString())},setActivePage:(e,n)=>{const r=n.payload,t=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;r>=0&&r<t&&(e.activePage=r,e.updatedAt=new Date().toISOString())},updatePageSize:(e,n)=>{const r=n.payload;e.pageSize=r,e.pages=e.pages.map((t,i)=>({...t,index:i,size:r})),e.pageBreaks=e.pages.slice(0,-1).map((t,i)=>({id:`auto-break-${i}`,pageNumber:i+1})),e.updatedAt=new Date().toISOString()},resetDocument:()=>$e(),updateContinuousContent:(e,n)=>{e.continuousContent=Pe(n.payload),e.updatedAt=new Date().toISOString()},updatePageBoundaries:(e,n)=>{e.pageBoundaries=n.payload||[],e.totalPages=e.pageBoundaries.length,e.activePage>=e.pageBoundaries.length&&(e.activePage=Math.max(0,e.pageBoundaries.length-1)),e.updatedAt=new Date().toISOString()},addPageBreak:(e,n)=>{const{position:r="end",pageIndex:t}=n.payload||{},i='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';if(r==="end")e.continuousContent=e.continuousContent+i+"<p><br></p>";else if(typeof r=="number"){const s=e.continuousContent.substring(0,r),a=e.continuousContent.substring(r);e.continuousContent=s+i+a}else if(typeof t=="number"&&typeof document<"u"){const s=document.createElement("div");s.innerHTML=e.continuousContent;const a=s.querySelectorAll('page-break, [data-page-break="true"]');if(t===0&&a.length===0)e.continuousContent=e.continuousContent+i+"<p><br></p>";else if(t<a.length){const l=a[t],g=document.createElement("page-break");g.setAttribute("data-page-break","true"),g.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const p=document.createElement("p");p.innerHTML="<br>",l.parentNode.insertBefore(g,l.nextSibling),g.parentNode.insertBefore(p,g.nextSibling),e.continuousContent=s.innerHTML}else e.continuousContent=e.continuousContent+i+"<p><br></p>"}e.updatedAt=new Date().toISOString()},removePageBreak:(e,n)=>{const{pageIndex:r}=n.payload||{};if(typeof r=="number"&&typeof document<"u"){const t=document.createElement("div");t.innerHTML=e.continuousContent;const i=t.querySelectorAll('page-break, [data-page-break="true"]');i[r]&&i[r].remove(),t.querySelectorAll('page-break, [data-page-break="true"]').forEach((a,l)=>{a.setAttribute("data-page-number",String(l+2))}),e.continuousContent=t.innerHTML,e.updatedAt=new Date().toISOString()}},setEditorMode:(e,n)=>{const r=n.payload;if(r!==e.editorMode){if(e.editorMode=r,r==="continuous"){const t=e.pages.map(i=>i.content).filter(i=>i&&i!==re).join(`
`);e.continuousContent=t||re}else e.continuousContent&&e.continuousContent!==re&&(e.pages=[{...de(0,e.pageSize),content:e.continuousContent}]);e.updatedAt=new Date().toISOString()}},insertPageAt:(e,n)=>{const{pageIndex:r,content:t=re}=n.payload||{};if(!(typeof r!="number"||r<0)){if(e.editorMode==="continuous"&&typeof document<"u"){const i=document.createElement("div");i.innerHTML=e.continuousContent;const s=i.querySelectorAll('page-break, [data-page-break="true"]'),a='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';if(r===0)e.continuousContent=t+a+e.continuousContent;else if(r>=s.length)e.continuousContent=e.continuousContent+a+t;else{const l=s[r-1],g=document.createElement("div");g.innerHTML=t;const p=document.createElement("page-break");p.setAttribute("data-page-break","true"),p.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"),l.parentNode.insertBefore(g,l.nextSibling),l.parentNode.insertBefore(p,g.nextSibling),e.continuousContent=i.innerHTML}}e.updatedAt=new Date().toISOString()}},movePageTo:(e,n)=>{const{fromIndex:r,toIndex:t}=n.payload||{};if(!(typeof r!="number"||typeof t!="number")&&!(r<0||t<0||r===t)){if(e.editorMode==="continuous"&&typeof document<"u"){const i=document.createElement("div");i.innerHTML=e.continuousContent,Array.from(i.querySelectorAll('page-break, [data-page-break="true"]'));const s=[];let a=i.firstChild,l=[];for(;a;)a.nodeType===1&&(a.tagName.toLowerCase()==="page-break"||a.getAttribute("data-page-break")==="true")?(s.push(l),l=[]):l.push(a.cloneNode(!0)),a=a.nextSibling;if(l.length>0&&s.push(l),r>=s.length||t>=s.length)return;const[g]=s.splice(r,1);s.splice(t,0,g);const p=[];s.forEach((b,f)=>{b.forEach(T=>p.push(T.outerHTML||T.textContent)),f<s.length-1&&p.push('<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>')}),e.continuousContent=p.join("")}e.updatedAt=new Date().toISOString()}},duplicatePage:(e,n)=>{const{pageIndex:r}=n.payload||{};if(!(typeof r!="number"||r<0)){if(e.editorMode==="continuous"&&typeof document<"u"){const t=document.createElement("div");t.innerHTML=e.continuousContent;const i=Array.from(t.querySelectorAll('page-break, [data-page-break="true"]'));let s=[],a=t.firstChild,l=0;for(;a;){if(a.nodeType===1&&(a.tagName.toLowerCase()==="page-break"||a.getAttribute("data-page-break")==="true")){if(l===r)break;l++,s=[]}else l===r&&s.push(a.cloneNode(!0));a=a.nextSibling}if(s.length>0&&r<i.length){const g=i[r],f=s.map($=>$.outerHTML||$.textContent).join("")+'<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>',T=document.createElement("div");T.innerHTML=f;let v=g;Array.from(T.children).forEach($=>{v.parentNode.insertBefore($.cloneNode(!0),v.nextSibling),v=v.nextSibling}),e.continuousContent=t.innerHTML}}e.updatedAt=new Date().toISOString()}}}}),{initializeDocument:Sn,updateTitle:wn,updatePageContent:Nn,updatePages:jn,addPage:On,deletePage:Mn,setActivePage:Rn,updatePageSize:In,resetDocument:Dn,updateContinuousContent:Bn,updatePageBoundaries:$n,addPageBreak:Ln,removePageBreak:zn,setEditorMode:Un,insertPageAt:qn,movePageTo:Hn,duplicatePage:Gn}=mt.actions,Yn=mt.reducer,Fn={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}};j.ContentEditableEditor=ve,j.ContinuousPageView=Ee,j.DocumentProvider=_t,j.EditorToolbar=be,j.ErrorBoundary=Be,j.PAGE_DIMENSIONS=Fn,j.PageManager=gt,j.Sidebar=lt,j.addPage=On,j.addPageBreak=Ln,j.clearImages=vn,j.deleteImage=En,j.deletePage=Mn,j.documentReducer=Yn,j.duplicatePage=Gn,j.getAllImageKeys=kn,j.getImage=bn,j.initializeDocument=Sn,j.insertPageAt=qn,j.logger=dt,j.movePageTo=Hn,j.removePageBreak=zn,j.resetDocument=Dn,j.saveImage=ut,j.setActivePage=Rn,j.setEditorMode=Un,j.updateContinuousContent=Bn,j.updatePageBoundaries=$n,j.updatePageContent=Nn,j.updatePageSize=In,j.updatePages=jn,j.updateTitle=wn,j.useContinuousReflow=ot,j.useDocument=_e,j.useDocumentActions=Se,j.useDocumentState=Ce,j.useFormatting=rt,Object.defineProperty(j,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
