(function(K,h){typeof exports=="object"&&typeof module<"u"?h(exports,require("react"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","react","uuid"],h):(K=typeof globalThis<"u"?globalThis:K||self,h(K.HTMLEditor={},K.React,K.uuid))})(this,(function(K,h,ve){"use strict";function yt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ue={exports:{}},ie={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Be;function bt(){if(Be)return ie;Be=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function l(t,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var d in i)d!=="key"&&(s[d]=i[d])}else s=i;return i=s.ref,{$$typeof:e,type:t,key:a,ref:i!==void 0?i:null,props:s}}return ie.Fragment=r,ie.jsx=l,ie.jsxs=l,ie}var se={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ue;function Et(){return Ue||(Ue=1,process.env.NODE_ENV!=="production"&&(function(){function e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===W?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case N:return"Profiler";case I:return"StrictMode";case O:return"Suspense";case k:return"SuspenseList";case U:return"Activity"}if(typeof n=="object")switch(typeof n.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),n.$$typeof){case C:return"Portal";case y:return n.displayName||"Context";case S:return(n._context.displayName||"Context")+".Consumer";case c:var g=n.render;return n=n.displayName,n||(n=g.displayName||g.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $:return g=n.displayName||null,g!==null?g:e(n.type)||"Memo";case M:g=n._payload,n=n._init;try{return e(n(g))}catch{}}return null}function r(n){return""+n}function l(n){try{r(n);var g=!1}catch{g=!0}if(g){g=console;var _=g.error,x=typeof Symbol=="function"&&Symbol.toStringTag&&n[Symbol.toStringTag]||n.constructor.name||"Object";return _.call(g,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",x),r(n)}}function t(n){if(n===D)return"<>";if(typeof n=="object"&&n!==null&&n.$$typeof===M)return"<...>";try{var g=e(n);return g?"<"+g+">":"<...>"}catch{return"<...>"}}function i(){var n=ne.A;return n===null?null:n.getOwner()}function s(){return Error("react-stack-top-frame")}function a(n){if(X.call(n,"key")){var g=Object.getOwnPropertyDescriptor(n,"key").get;if(g&&g.isReactWarning)return!1}return n.key!==void 0}function d(n,g){function _(){R||(R=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",g))}_.isReactWarning=!0,Object.defineProperty(n,"key",{get:_,configurable:!0})}function b(){var n=e(this.type);return Q[n]||(Q[n]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),n=this.props.ref,n!==void 0?n:null}function m(n,g,_,x,L,w){var T=_.ref;return n={$$typeof:B,type:n,key:g,props:_,_owner:x},(T!==void 0?T:null)!==null?Object.defineProperty(n,"ref",{enumerable:!1,get:b}):Object.defineProperty(n,"ref",{enumerable:!1,value:null}),n._store={},Object.defineProperty(n._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(n,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(n,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:L}),Object.defineProperty(n,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:w}),Object.freeze&&(Object.freeze(n.props),Object.freeze(n)),n}function v(n,g,_,x,L,w){var T=g.children;if(T!==void 0)if(x)if(H(T)){for(x=0;x<T.length;x++)p(T[x]);Object.freeze&&Object.freeze(T)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else p(T);if(X.call(g,"key")){T=e(n);var j=Object.keys(g).filter(function(q){return q!=="key"});x=0<j.length?"{key: someKey, "+j.join(": ..., ")+": ...}":"{key: someKey}",f[T+x]||(j=0<j.length?"{"+j.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,x,T,j,T),f[T+x]=!0)}if(T=null,_!==void 0&&(l(_),T=""+_),a(g)&&(l(g.key),T=""+g.key),"key"in g){_={};for(var Z in g)Z!=="key"&&(_[Z]=g[Z])}else _=g;return T&&d(_,typeof n=="function"?n.displayName||n.name||"Unknown":n),m(n,T,_,i(),L,w)}function p(n){P(n)?n._store&&(n._store.validated=1):typeof n=="object"&&n!==null&&n.$$typeof===M&&(n._payload.status==="fulfilled"?P(n._payload.value)&&n._payload.value._store&&(n._payload.value._store.validated=1):n._store&&(n._store.validated=1))}function P(n){return typeof n=="object"&&n!==null&&n.$$typeof===B}var A=h,B=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),y=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),W=Symbol.for("react.client.reference"),ne=A.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=Object.prototype.hasOwnProperty,H=Array.isArray,G=console.createTask?console.createTask:function(){return null};A={react_stack_bottom_frame:function(n){return n()}};var R,Q={},te=A.react_stack_bottom_frame.bind(A,s)(),re=G(t(s)),f={};se.Fragment=D,se.jsx=function(n,g,_){var x=1e4>ne.recentlyCreatedOwnerStacks++;return v(n,g,_,!1,x?Error("react-stack-top-frame"):te,x?G(t(n)):re)},se.jsxs=function(n,g,_){var x=1e4>ne.recentlyCreatedOwnerStacks++;return v(n,g,_,!0,x?Error("react-stack-top-frame"):te,x?G(t(n)):re)}})()),se}var qe;function vt(){return qe||(qe=1,process.env.NODE_ENV==="production"?ue.exports=bt():ue.exports=Et()),ue.exports}var o=vt();const _e=100,xe=50,Te=200,Ze=25,Ae=e=>e<Te,ke=e=>e>xe,ce="A4",ae="<p><br></p>",_t="continuous",Pe={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},le=(e,r=ce)=>({id:ve.v4(),index:e,size:r,content:ae,images:[],isBreakPoint:!1}),de=e=>typeof e!="string"||e.trim()===""?ae:e,Ge=(e,r=ce)=>(e.length>0?e:[le(0,r)]).map((t,i)=>({id:t.id||ve.v4(),index:i,size:t.size||r,content:de(t.content),images:t.images||[],isBreakPoint:!!t.isBreakPoint})),xt=(e=ce)=>[{id:"page-0",pageNumber:1,top:0,height:(Pe[e]||Pe.A4).height}],Ce=(e={})=>{const r=new Date().toISOString(),l=e.pageSize||ce,t=Ge(e.pages||[le(0,l)],l);return{id:ve.v4(),title:e.title||"Untitled Document",createdAt:r,updatedAt:r,pageSize:l,pages:t,activePage:e.activePage&&e.activePage<t.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:t.length,editorMode:e.editorMode||_t,continuousContent:e.continuousContent||ae,pageBoundaries:e.pageBoundaries||xt(l),zoomLevel:e.zoomLevel||_e}},z={INITIALIZE_DOCUMENT:"INITIALIZE_DOCUMENT",UPDATE_TITLE:"UPDATE_TITLE",UPDATE_PAGE_CONTENT:"UPDATE_PAGE_CONTENT",UPDATE_PAGES:"UPDATE_PAGES",ADD_PAGE:"ADD_PAGE",DELETE_PAGE:"DELETE_PAGE",SET_ACTIVE_PAGE:"SET_ACTIVE_PAGE",UPDATE_PAGE_SIZE:"UPDATE_PAGE_SIZE",RESET_DOCUMENT:"RESET_DOCUMENT",UPDATE_CONTINUOUS_CONTENT:"UPDATE_CONTINUOUS_CONTENT",UPDATE_PAGE_BOUNDARIES:"UPDATE_PAGE_BOUNDARIES",ADD_PAGE_BREAK:"ADD_PAGE_BREAK",REMOVE_PAGE_BREAK:"REMOVE_PAGE_BREAK",SET_EDITOR_MODE:"SET_EDITOR_MODE",INSERT_PAGE_AT:"INSERT_PAGE_AT",MOVE_PAGE_TO:"MOVE_PAGE_TO",DUPLICATE_PAGE:"DUPLICATE_PAGE",SET_ZOOM_LEVEL:"SET_ZOOM_LEVEL",ZOOM_IN:"ZOOM_IN",ZOOM_OUT:"ZOOM_OUT",RESET_ZOOM:"RESET_ZOOM"},Tt=(e,r)=>{const l=new Date().toISOString();switch(r.type){case z.INITIALIZE_DOCUMENT:{const{initialContent:t=ae,pageSize:i=ce}=r.payload||{},s={...le(0,i),content:de(t)};return Ce({title:e.title,pageSize:i,pages:[s]})}case z.UPDATE_TITLE:return{...e,title:r.payload,updatedAt:l};case z.UPDATE_PAGE_CONTENT:{const{pageIndex:t,content:i}=r.payload;if(t<0||t>=e.pages.length)return e;const s=[...e.pages];return s[t]={...s[t],content:de(i)},{...e,pages:s,updatedAt:l}}case z.UPDATE_PAGES:{const t=Array.isArray(r.payload)?{pages:r.payload}:r.payload||{},i=Ge(t.pages||[],e.pageSize),s=Array.isArray(t.pageBreaks)?t.pageBreaks:i.slice(0,-1).map((a,d)=>({id:`auto-break-${d}`,pageNumber:d+1}));return{...e,pages:i,activePage:Math.min(e.activePage,i.length-1),pageBreaks:s,totalPages:i.length,updatedAt:l}}case z.ADD_PAGE:{const t=typeof r.payload?.index=="number"?Math.min(Math.max(r.payload.index,0),e.pages.length):e.pages.length,i=[...e.pages];i.splice(t,0,le(t,e.pageSize));const s=i.map((d,b)=>({...d,index:b,size:e.pageSize})),a=s.slice(0,-1).map((d,b)=>({id:`auto-break-${b}`,pageNumber:b+1}));return{...e,pages:s,activePage:t,pageBreaks:a,totalPages:s.length,updatedAt:l}}case z.DELETE_PAGE:{const t=r.payload;if(e.pages.length<=1)return e;const i=[...e.pages];i.splice(t,1);const s=i.map((b,m)=>({...b,index:m,size:e.pageSize}));let a=e.activePage;a>=s.length?a=s.length-1:t<=a&&a>0&&(a-=1);const d=s.slice(0,-1).map((b,m)=>({id:`auto-break-${m}`,pageNumber:m+1}));return{...e,pages:s,activePage:a,pageBreaks:d,totalPages:s.length,updatedAt:l}}case z.SET_ACTIVE_PAGE:{const t=r.payload;if(t===e.activePage)return e;const i=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;return t<0||t>=i?e:{...e,activePage:t,updatedAt:l}}case z.UPDATE_PAGE_SIZE:{const t=r.payload;if(t===e.pageSize)return e;if(!Pe[t])return console.warn(`Invalid page size: ${t}`),e;const i=e.pages.map((a,d)=>({...a,index:d,size:t})),s=i.slice(0,-1).map((a,d)=>({id:`auto-break-${d}`,pageNumber:d+1}));return{...e,pageSize:t,pages:i,pageBreaks:s,updatedAt:l}}case z.RESET_DOCUMENT:return Ce();case z.UPDATE_CONTINUOUS_CONTENT:{const t=de(r.payload);return t===e.continuousContent?e:{...e,continuousContent:t,updatedAt:l}}case z.UPDATE_PAGE_BOUNDARIES:{const t=Array.isArray(r.payload)?r.payload:[];if(t.length===e.pageBoundaries.length&&t.length>0&&t[0].id===e.pageBoundaries[0]?.id&&t[t.length-1].id===e.pageBoundaries[t.length-1]?.id)return e;const i=e.activePage>=t.length?Math.max(0,t.length-1):e.activePage;return{...e,pageBoundaries:t,totalPages:t.length,activePage:i,updatedAt:l}}case z.ADD_PAGE_BREAK:{const{position:t="end",pageIndex:i}=r.payload||{},s='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';let a=e.continuousContent;if(t==="end")a=a+s+"<p><br></p>";else if(typeof t=="number"){const d=a.substring(0,t),b=a.substring(t);a=d+s+b}else if(typeof i=="number"&&typeof document<"u"){const d=document.createElement("div");d.innerHTML=a;const b=d.querySelectorAll('page-break, [data-page-break="true"]');if(i===0&&b.length===0)a=a+s+"<p><br></p>";else if(i<b.length){const m=b[i],v=document.createElement("page-break");v.setAttribute("data-page-break","true"),v.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const p=document.createElement("p");p.innerHTML="<br>",m.parentNode.insertBefore(v,m.nextSibling),v.parentNode.insertBefore(p,v.nextSibling),a=d.innerHTML}else a=a+s+"<p><br></p>"}return{...e,continuousContent:a,updatedAt:l}}case z.REMOVE_PAGE_BREAK:{const{pageIndex:t}=r.payload||{};if(typeof t!="number"||typeof document>"u")return e;const i=document.createElement("div");i.innerHTML=e.continuousContent;const s=i.querySelectorAll('page-break, [data-page-break="true"]');return s[t]&&s[t].remove(),i.querySelectorAll('page-break, [data-page-break="true"]').forEach((d,b)=>{d.setAttribute("data-page-number",String(b+2))}),{...e,continuousContent:i.innerHTML,updatedAt:l}}case z.SET_EDITOR_MODE:{const t=r.payload;if(t===e.editorMode)return e;let i=e.continuousContent,s=e.pages;return t==="continuous"?i=e.pages.map(d=>d.content).filter(d=>d&&d!==ae).join(`
`)||ae:e.continuousContent&&e.continuousContent!==ae&&(s=[{...le(0,e.pageSize),content:e.continuousContent}]),{...e,editorMode:t,continuousContent:i,pages:s,updatedAt:l}}case z.SET_ZOOM_LEVEL:{const t=r.payload;return t<xe||t>Te?(console.warn(`Invalid zoom level: ${t}. Must be between ${xe} and ${Te}.`),e):t===e.zoomLevel?e:{...e,zoomLevel:t,updatedAt:l}}case z.ZOOM_IN:{if(!Ae(e.zoomLevel))return e;const t=e.zoomLevel+Ze;return{...e,zoomLevel:t,updatedAt:l}}case z.ZOOM_OUT:{if(!ke(e.zoomLevel))return e;const t=e.zoomLevel-Ze;return{...e,zoomLevel:t,updatedAt:l}}case z.RESET_ZOOM:return e.zoomLevel===_e?e:{...e,zoomLevel:_e,updatedAt:l};default:return e}},He=h.createContext(null),At=({children:e,initialState:r={}})=>{const[l,t]=h.useReducer(Tt,Ce(r)),i=h.useMemo(()=>({initializeDocument:a=>t({type:z.INITIALIZE_DOCUMENT,payload:a}),updateTitle:a=>t({type:z.UPDATE_TITLE,payload:a}),updatePageContent:a=>t({type:z.UPDATE_PAGE_CONTENT,payload:a}),updatePages:a=>t({type:z.UPDATE_PAGES,payload:a}),addPage:a=>t({type:z.ADD_PAGE,payload:a}),deletePage:a=>t({type:z.DELETE_PAGE,payload:a}),setActivePage:a=>t({type:z.SET_ACTIVE_PAGE,payload:a}),updatePageSize:a=>t({type:z.UPDATE_PAGE_SIZE,payload:a}),resetDocument:()=>t({type:z.RESET_DOCUMENT}),updateContinuousContent:a=>t({type:z.UPDATE_CONTINUOUS_CONTENT,payload:a}),updatePageBoundaries:a=>t({type:z.UPDATE_PAGE_BOUNDARIES,payload:a}),addPageBreak:a=>t({type:z.ADD_PAGE_BREAK,payload:a}),removePageBreak:a=>t({type:z.REMOVE_PAGE_BREAK,payload:a}),setEditorMode:a=>t({type:z.SET_EDITOR_MODE,payload:a}),insertPageAt:a=>t({type:z.INSERT_PAGE_AT,payload:a}),movePageTo:a=>t({type:z.MOVE_PAGE_TO,payload:a}),duplicatePage:a=>t({type:z.DUPLICATE_PAGE,payload:a}),setZoomLevel:a=>t({type:z.SET_ZOOM_LEVEL,payload:a}),zoomIn:()=>t({type:z.ZOOM_IN}),zoomOut:()=>t({type:z.ZOOM_OUT}),resetZoom:()=>t({type:z.RESET_ZOOM})}),[]),s=h.useMemo(()=>({state:l,actions:i,dispatch:t}),[l,i]);return o.jsx(He.Provider,{value:s,children:e})},Se=()=>{const e=h.useContext(He);if(!e)throw new Error("useDocument must be used within a DocumentProvider");return e},Oe=()=>{const{state:e}=Se();return e},we=()=>{const{actions:e}=Se();return e};var fe={exports:{}},pe={exports:{}},Y={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ye;function kt(){if(Ye)return Y;Ye=1;var e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,l=e?Symbol.for("react.portal"):60106,t=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,b=e?Symbol.for("react.async_mode"):60111,m=e?Symbol.for("react.concurrent_mode"):60111,v=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,P=e?Symbol.for("react.suspense_list"):60120,A=e?Symbol.for("react.memo"):60115,B=e?Symbol.for("react.lazy"):60116,C=e?Symbol.for("react.block"):60121,D=e?Symbol.for("react.fundamental"):60117,I=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function S(c){if(typeof c=="object"&&c!==null){var O=c.$$typeof;switch(O){case r:switch(c=c.type,c){case b:case m:case t:case s:case i:case p:return c;default:switch(c=c&&c.$$typeof,c){case d:case v:case B:case A:case a:return c;default:return O}}case l:return O}}}function y(c){return S(c)===m}return Y.AsyncMode=b,Y.ConcurrentMode=m,Y.ContextConsumer=d,Y.ContextProvider=a,Y.Element=r,Y.ForwardRef=v,Y.Fragment=t,Y.Lazy=B,Y.Memo=A,Y.Portal=l,Y.Profiler=s,Y.StrictMode=i,Y.Suspense=p,Y.isAsyncMode=function(c){return y(c)||S(c)===b},Y.isConcurrentMode=y,Y.isContextConsumer=function(c){return S(c)===d},Y.isContextProvider=function(c){return S(c)===a},Y.isElement=function(c){return typeof c=="object"&&c!==null&&c.$$typeof===r},Y.isForwardRef=function(c){return S(c)===v},Y.isFragment=function(c){return S(c)===t},Y.isLazy=function(c){return S(c)===B},Y.isMemo=function(c){return S(c)===A},Y.isPortal=function(c){return S(c)===l},Y.isProfiler=function(c){return S(c)===s},Y.isStrictMode=function(c){return S(c)===i},Y.isSuspense=function(c){return S(c)===p},Y.isValidElementType=function(c){return typeof c=="string"||typeof c=="function"||c===t||c===m||c===s||c===i||c===p||c===P||typeof c=="object"&&c!==null&&(c.$$typeof===B||c.$$typeof===A||c.$$typeof===a||c.$$typeof===d||c.$$typeof===v||c.$$typeof===D||c.$$typeof===I||c.$$typeof===N||c.$$typeof===C)},Y.typeOf=S,Y}var V={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ve;function Pt(){return Ve||(Ve=1,process.env.NODE_ENV!=="production"&&(function(){var e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,l=e?Symbol.for("react.portal"):60106,t=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,b=e?Symbol.for("react.async_mode"):60111,m=e?Symbol.for("react.concurrent_mode"):60111,v=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,P=e?Symbol.for("react.suspense_list"):60120,A=e?Symbol.for("react.memo"):60115,B=e?Symbol.for("react.lazy"):60116,C=e?Symbol.for("react.block"):60121,D=e?Symbol.for("react.fundamental"):60117,I=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function S(u){return typeof u=="string"||typeof u=="function"||u===t||u===m||u===s||u===i||u===p||u===P||typeof u=="object"&&u!==null&&(u.$$typeof===B||u.$$typeof===A||u.$$typeof===a||u.$$typeof===d||u.$$typeof===v||u.$$typeof===D||u.$$typeof===I||u.$$typeof===N||u.$$typeof===C)}function y(u){if(typeof u=="object"&&u!==null){var J=u.$$typeof;switch(J){case r:var oe=u.type;switch(oe){case b:case m:case t:case s:case i:case p:return oe;default:var Ee=oe&&oe.$$typeof;switch(Ee){case d:case v:case B:case A:case a:return Ee;default:return J}}case l:return J}}}var c=b,O=m,k=d,$=a,M=r,U=v,W=t,ne=B,X=A,H=l,G=s,R=i,Q=p,te=!1;function re(u){return te||(te=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),f(u)||y(u)===b}function f(u){return y(u)===m}function n(u){return y(u)===d}function g(u){return y(u)===a}function _(u){return typeof u=="object"&&u!==null&&u.$$typeof===r}function x(u){return y(u)===v}function L(u){return y(u)===t}function w(u){return y(u)===B}function T(u){return y(u)===A}function j(u){return y(u)===l}function Z(u){return y(u)===s}function q(u){return y(u)===i}function ee(u){return y(u)===p}V.AsyncMode=c,V.ConcurrentMode=O,V.ContextConsumer=k,V.ContextProvider=$,V.Element=M,V.ForwardRef=U,V.Fragment=W,V.Lazy=ne,V.Memo=X,V.Portal=H,V.Profiler=G,V.StrictMode=R,V.Suspense=Q,V.isAsyncMode=re,V.isConcurrentMode=f,V.isContextConsumer=n,V.isContextProvider=g,V.isElement=_,V.isForwardRef=x,V.isFragment=L,V.isLazy=w,V.isMemo=T,V.isPortal=j,V.isProfiler=Z,V.isStrictMode=q,V.isSuspense=ee,V.isValidElementType=S,V.typeOf=y})()),V}var Fe;function We(){return Fe||(Fe=1,process.env.NODE_ENV==="production"?pe.exports=kt():pe.exports=Pt()),pe.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ne,Ke;function Ct(){if(Ke)return Ne;Ke=1;var e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;function t(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function i(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var a={},d=0;d<10;d++)a["_"+String.fromCharCode(d)]=d;var b=Object.getOwnPropertyNames(a).map(function(v){return a[v]});if(b.join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(v){m[v]=v}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Ne=i()?Object.assign:function(s,a){for(var d,b=t(s),m,v=1;v<arguments.length;v++){d=Object(arguments[v]);for(var p in d)r.call(d,p)&&(b[p]=d[p]);if(e){m=e(d);for(var P=0;P<m.length;P++)l.call(d,m[P])&&(b[m[P]]=d[m[P]])}}return b},Ne}var je,Je;function Me(){if(Je)return je;Je=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return je=e,je}var Re,Xe;function Qe(){return Xe||(Xe=1,Re=Function.call.bind(Object.prototype.hasOwnProperty)),Re}var Ie,et;function St(){if(et)return Ie;et=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var r=Me(),l={},t=Qe();e=function(s){var a="Warning: "+s;typeof console<"u"&&console.error(a);try{throw new Error(a)}catch{}}}function i(s,a,d,b,m){if(process.env.NODE_ENV!=="production"){for(var v in s)if(t(s,v)){var p;try{if(typeof s[v]!="function"){var P=Error((b||"React class")+": "+d+" type `"+v+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof s[v]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw P.name="Invariant Violation",P}p=s[v](a,v,b,d,null,r)}catch(B){p=B}if(p&&!(p instanceof Error)&&e((b||"React class")+": type specification of "+d+" `"+v+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof p+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),p instanceof Error&&!(p.message in l)){l[p.message]=!0;var A=m?m():"";e("Failed "+d+" type: "+p.message+(A??""))}}}}return i.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(l={})},Ie=i,Ie}var De,tt;function Ot(){if(tt)return De;tt=1;var e=We(),r=Ct(),l=Me(),t=Qe(),i=St(),s=function(){};process.env.NODE_ENV!=="production"&&(s=function(d){var b="Warning: "+d;typeof console<"u"&&console.error(b);try{throw new Error(b)}catch{}});function a(){return null}return De=function(d,b){var m=typeof Symbol=="function"&&Symbol.iterator,v="@@iterator";function p(f){var n=f&&(m&&f[m]||f[v]);if(typeof n=="function")return n}var P="<<anonymous>>",A={array:I("array"),bigint:I("bigint"),bool:I("boolean"),func:I("function"),number:I("number"),object:I("object"),string:I("string"),symbol:I("symbol"),any:N(),arrayOf:S,element:y(),elementType:c(),instanceOf:O,node:U(),objectOf:$,oneOf:k,oneOfType:M,shape:ne,exact:X};function B(f,n){return f===n?f!==0||1/f===1/n:f!==f&&n!==n}function C(f,n){this.message=f,this.data=n&&typeof n=="object"?n:{},this.stack=""}C.prototype=Error.prototype;function D(f){if(process.env.NODE_ENV!=="production")var n={},g=0;function _(L,w,T,j,Z,q,ee){if(j=j||P,q=q||T,ee!==l){if(b){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var J=j+":"+T;!n[J]&&g<3&&(s("You are manually calling a React.PropTypes validation function for the `"+q+"` prop on `"+j+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[J]=!0,g++)}}return w[T]==null?L?w[T]===null?new C("The "+Z+" `"+q+"` is marked as required "+("in `"+j+"`, but its value is `null`.")):new C("The "+Z+" `"+q+"` is marked as required in "+("`"+j+"`, but its value is `undefined`.")):null:f(w,T,j,Z,q)}var x=_.bind(null,!1);return x.isRequired=_.bind(null,!0),x}function I(f){function n(g,_,x,L,w,T){var j=g[_],Z=R(j);if(Z!==f){var q=Q(j);return new C("Invalid "+L+" `"+w+"` of type "+("`"+q+"` supplied to `"+x+"`, expected ")+("`"+f+"`."),{expectedType:f})}return null}return D(n)}function N(){return D(a)}function S(f){function n(g,_,x,L,w){if(typeof f!="function")return new C("Property `"+w+"` of component `"+x+"` has invalid PropType notation inside arrayOf.");var T=g[_];if(!Array.isArray(T)){var j=R(T);return new C("Invalid "+L+" `"+w+"` of type "+("`"+j+"` supplied to `"+x+"`, expected an array."))}for(var Z=0;Z<T.length;Z++){var q=f(T,Z,x,L,w+"["+Z+"]",l);if(q instanceof Error)return q}return null}return D(n)}function y(){function f(n,g,_,x,L){var w=n[g];if(!d(w)){var T=R(w);return new C("Invalid "+x+" `"+L+"` of type "+("`"+T+"` supplied to `"+_+"`, expected a single ReactElement."))}return null}return D(f)}function c(){function f(n,g,_,x,L){var w=n[g];if(!e.isValidElementType(w)){var T=R(w);return new C("Invalid "+x+" `"+L+"` of type "+("`"+T+"` supplied to `"+_+"`, expected a single ReactElement type."))}return null}return D(f)}function O(f){function n(g,_,x,L,w){if(!(g[_]instanceof f)){var T=f.name||P,j=re(g[_]);return new C("Invalid "+L+" `"+w+"` of type "+("`"+j+"` supplied to `"+x+"`, expected ")+("instance of `"+T+"`."))}return null}return D(n)}function k(f){if(!Array.isArray(f))return process.env.NODE_ENV!=="production"&&(arguments.length>1?s("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):s("Invalid argument supplied to oneOf, expected an array.")),a;function n(g,_,x,L,w){for(var T=g[_],j=0;j<f.length;j++)if(B(T,f[j]))return null;var Z=JSON.stringify(f,function(ee,u){var J=Q(u);return J==="symbol"?String(u):u});return new C("Invalid "+L+" `"+w+"` of value `"+String(T)+"` "+("supplied to `"+x+"`, expected one of "+Z+"."))}return D(n)}function $(f){function n(g,_,x,L,w){if(typeof f!="function")return new C("Property `"+w+"` of component `"+x+"` has invalid PropType notation inside objectOf.");var T=g[_],j=R(T);if(j!=="object")return new C("Invalid "+L+" `"+w+"` of type "+("`"+j+"` supplied to `"+x+"`, expected an object."));for(var Z in T)if(t(T,Z)){var q=f(T,Z,x,L,w+"."+Z,l);if(q instanceof Error)return q}return null}return D(n)}function M(f){if(!Array.isArray(f))return process.env.NODE_ENV!=="production"&&s("Invalid argument supplied to oneOfType, expected an instance of array."),a;for(var n=0;n<f.length;n++){var g=f[n];if(typeof g!="function")return s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+te(g)+" at index "+n+"."),a}function _(x,L,w,T,j){for(var Z=[],q=0;q<f.length;q++){var ee=f[q],u=ee(x,L,w,T,j,l);if(u==null)return null;u.data&&t(u.data,"expectedType")&&Z.push(u.data.expectedType)}var J=Z.length>0?", expected one of type ["+Z.join(", ")+"]":"";return new C("Invalid "+T+" `"+j+"` supplied to "+("`"+w+"`"+J+"."))}return D(_)}function U(){function f(n,g,_,x,L){return H(n[g])?null:new C("Invalid "+x+" `"+L+"` supplied to "+("`"+_+"`, expected a ReactNode."))}return D(f)}function W(f,n,g,_,x){return new C((f||"React class")+": "+n+" type `"+g+"."+_+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+x+"`.")}function ne(f){function n(g,_,x,L,w){var T=g[_],j=R(T);if(j!=="object")return new C("Invalid "+L+" `"+w+"` of type `"+j+"` "+("supplied to `"+x+"`, expected `object`."));for(var Z in f){var q=f[Z];if(typeof q!="function")return W(x,L,w,Z,Q(q));var ee=q(T,Z,x,L,w+"."+Z,l);if(ee)return ee}return null}return D(n)}function X(f){function n(g,_,x,L,w){var T=g[_],j=R(T);if(j!=="object")return new C("Invalid "+L+" `"+w+"` of type `"+j+"` "+("supplied to `"+x+"`, expected `object`."));var Z=r({},g[_],f);for(var q in Z){var ee=f[q];if(t(f,q)&&typeof ee!="function")return W(x,L,w,q,Q(ee));if(!ee)return new C("Invalid "+L+" `"+w+"` key `"+q+"` supplied to `"+x+"`.\nBad object: "+JSON.stringify(g[_],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(f),null,"  "));var u=ee(T,q,x,L,w+"."+q,l);if(u)return u}return null}return D(n)}function H(f){switch(typeof f){case"number":case"string":case"undefined":return!0;case"boolean":return!f;case"object":if(Array.isArray(f))return f.every(H);if(f===null||d(f))return!0;var n=p(f);if(n){var g=n.call(f),_;if(n!==f.entries){for(;!(_=g.next()).done;)if(!H(_.value))return!1}else for(;!(_=g.next()).done;){var x=_.value;if(x&&!H(x[1]))return!1}}else return!1;return!0;default:return!1}}function G(f,n){return f==="symbol"?!0:n?n["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&n instanceof Symbol:!1}function R(f){var n=typeof f;return Array.isArray(f)?"array":f instanceof RegExp?"object":G(n,f)?"symbol":n}function Q(f){if(typeof f>"u"||f===null)return""+f;var n=R(f);if(n==="object"){if(f instanceof Date)return"date";if(f instanceof RegExp)return"regexp"}return n}function te(f){var n=Q(f);switch(n){case"array":case"object":return"an "+n;case"boolean":case"date":case"regexp":return"a "+n;default:return n}}function re(f){return!f.constructor||!f.constructor.name?P:f.constructor.name}return A.checkPropTypes=i,A.resetWarningCache=i.resetWarningCache,A.PropTypes=A,A},De}var Le,nt;function wt(){if(nt)return Le;nt=1;var e=Me();function r(){}function l(){}return l.resetWarningCache=r,Le=function(){function t(a,d,b,m,v,p){if(p!==e){var P=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw P.name="Invariant Violation",P}}t.isRequired=t;function i(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:i,element:t,elementType:t,instanceOf:i,node:t,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:l,resetWarningCache:r};return s.PropTypes=s,s},Le}var rt;function Nt(){if(rt)return fe.exports;if(rt=1,process.env.NODE_ENV!=="production"){var e=We(),r=!0;fe.exports=Ot()(e.isElement,r)}else fe.exports=wt()();return fe.exports}var jt=Nt();const E=yt(jt),Mt={"10px":"1","12px":"2","14px":"3","16px":"4","18px":"5","24px":"6","32px":"7"},ot={bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:"12px",headingLevel:"p"},at=()=>{const[e,r]=h.useState(ot),l=h.useCallback(a=>{r(d=>({...d,alignLeft:a==="left",alignCenter:a==="center",alignRight:a==="right",alignJustify:a==="justify"}))},[]),t=h.useCallback(a=>{try{const d=window.getSelection();if(!d||d.rangeCount===0)return!1;const b=d.getRangeAt(0);if(!b.toString())return r(v=>({...v,fontSize:a})),!1;try{const v=document.createElement("span");v.style.fontSize=a;const p=b.extractContents();return v.appendChild(p),b.insertNode(v),b.selectNodeContents(v),d.removeAllRanges(),d.addRange(b),r(P=>({...P,fontSize:a})),!0}catch{const p=Mt[a]||"2";return document.execCommand("fontSize",!1,p),r(P=>({...P,fontSize:a})),!0}}catch(d){return console.warn("[useFormatting] Font size change failed:",d),!1}},[]),i=h.useCallback((a,d=null)=>{try{if(typeof document.execCommand!="function"){console.warn("[useFormatting] execCommand not supported");return}if(a==="fontSize"){t(d);return}switch(document.execCommand(a,!1,d)||console.warn(`[useFormatting] Command "${a}" failed`),a){case"bold":r(m=>({...m,bold:!m.bold}));break;case"italic":r(m=>({...m,italic:!m.italic}));break;case"underline":r(m=>({...m,underline:!m.underline}));break;case"strikethrough":r(m=>({...m,strikethrough:!m.strikethrough}));break;case"justifyLeft":l("left");break;case"justifyCenter":l("center");break;case"justifyRight":l("right");break;case"justifyFull":l("justify");break;case"fontName":r(m=>({...m,fontFamily:d}));break;case"formatBlock":r(m=>({...m,headingLevel:d}));break;default:break}}catch(b){console.warn(`[useFormatting] Error executing command "${a}":`,b)}},[t,l]),s=h.useCallback(()=>{r(ot)},[]);return{currentFormat:e,formatText:i,resetFormat:s}},ge={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},it={top:60,bottom:100,left:72,right:72},Rt=300,It=500,Dt=50,Lt='page-break, [data-page-break="true"]',st=(e,r,l=100)=>{const t=we(),i=h.useRef(null),s=h.useRef(null),a=h.useRef(e),d=h.useRef(l),b=h.useRef(!1);h.useEffect(()=>{a.current=e},[e]),h.useEffect(()=>{d.current=l},[l]),h.useEffect(()=>()=>{i.current&&clearTimeout(i.current),s.current&&clearTimeout(s.current)},[]);const m=h.useCallback((y,c)=>{if(!y||y.length===0)return null;let O=0;for(let k=0;k<y.length;k++){const $=y[k];if(!$||!$.getBoundingClientRect)continue;const M=$.getBoundingClientRect().height;if(O+M>c)return{overflowIndex:k,overflowElement:$,accumulatedHeight:O};O+=M}return null},[]),v=h.useCallback((y,c)=>{if(!y||!r?.current)return!1;try{const O=r.current,k=document.createElement("page-break");return k.setAttribute("data-page-break","true"),k.setAttribute("contenteditable","false"),k.setAttribute("data-page-number",c||"2"),y.parentNode.insertBefore(k,y),!0}catch(O){return console.warn("[insertPageBreakBefore] Failed to insert page break:",O),!1}},[r]),p=h.useCallback((y={})=>{if(!r?.current||typeof document>"u")return[];const c=y.pageSize||a.current||"A4",O=ge[c]||ge.A4,k=r.current,$=k.querySelectorAll(Lt),M=[];M.push({id:"page-0",pageNumber:1,top:0,height:O.height});const U=k.getBoundingClientRect(),W=k.scrollTop;return $.forEach((ne,X)=>{const G=ne.getBoundingClientRect().top-U.top+W;M.push({id:`page-${X+1}`,pageNumber:X+2,top:G,height:O.height})}),M},[r]),P=h.useCallback((y={})=>{const c=p(y);return t.updatePageBoundaries(c),c},[p,t]),A=h.useCallback(()=>{if(!(!r?.current||b.current))try{b.current=!0;const y=r.current,c=a.current||"A4",O=d.current||100,$=(ge[c]||ge.A4).height-it.top-it.bottom,M=O/100,U=$/M,W=Array.from(y.children);if(W.length===0)return;const ne=W.filter(R=>R.tagName==="PAGE-BREAK"||R.getAttribute("data-page-break")==="true"),X=[];let H=[];for(const R of W)R.tagName==="PAGE-BREAK"||R.getAttribute("data-page-break")==="true"?H.length>0&&(X.push(H),H=[]):H.push(R);H.length>0&&X.push(H),X.length===0&&W.length>0&&X.push(W.filter(R=>!(R.tagName==="PAGE-BREAK"||R.getAttribute("data-page-break")==="true")));let G=!1;for(let R=0;R<X.length;R++){const Q=X[R],te=m(Q,U);if(te&&te.overflowIndex>0){const re=R+2;if(v(te.overflowElement,re)){G=!0;break}}}if(G){const R=y.innerHTML;t.updateContinuousContent(R),setTimeout(()=>{P()},Dt)}}catch(y){console.warn("[checkAndReflow] Reflow failed:",y)}finally{b.current=!1}},[r,m,v,t,P]),B=h.useCallback((y=It)=>{s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{s.current=null,A()},y)},[A]),C=h.useCallback((y={})=>{i.current&&clearTimeout(i.current);const c=typeof y.delay=="number"?y.delay:Rt;i.current=setTimeout(()=>{i.current=null,P(y)},Math.max(0,c))},[P]),D=h.useCallback(y=>{if(!y?.current||!r?.current)return 0;try{const c=y.current,k=r.current.querySelectorAll('page-break, [data-page-break="true"]');if(k.length===0)return 0;const $=c.getBoundingClientRect(),M=$.top+$.height/2;for(let U=k.length-1;U>=0;U--)if(k[U].getBoundingClientRect().top<M)return U+1;return 0}catch(c){return console.warn("[getCurrentPage] Failed to calculate page:",c),0}},[r]),I=h.useCallback(y=>{if(!r?.current)return;const c=r.current;c.focus();try{let O=null,k=0;if(y===0)O=c.firstChild,k=0;else{const M=c.querySelectorAll('page-break, [data-page-break="true"]')[y-1];M&&M.nextSibling&&(O=M.nextSibling,k=0)}if(O){const $=document.createRange(),M=window.getSelection();O.nodeType===Node.TEXT_NODE?$.setStart(O,k):$.setStart(O,0),$.collapse(!0),M.removeAllRanges(),M.addRange($)}}catch(O){console.warn("[positionCursorAtPage] Failed to position cursor:",O)}},[r]),N=h.useCallback((y,c)=>{if(!c?.current||!r?.current){console.warn("[scrollToPage] Missing refs");return}const O=c.current,k=r.current;try{let $=null;if(y===0)$=k;else{const U=k.querySelectorAll('page-break, [data-page-break="true"]')[y-1];if(U)$=U;else{console.warn("[scrollToPage] Page break not found for page",y);return}}if($){const M=$.getBoundingClientRect(),U=O.getBoundingClientRect(),W=O.scrollTop+(M.top-U.top);console.log("[scrollToPage] Scrolling to page",y,"scrollTop:",W),O.scrollTo({top:W,behavior:"smooth"}),setTimeout(()=>{I(y)},400)}}catch($){console.error("[scrollToPage] Error:",$)}},[r,I]),S=h.useCallback(y=>{if(!r?.current)return!1;const c=r.current;if(p().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const k=Array.from(c.querySelectorAll('page-break, [data-page-break="true"]'));if(y>k.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const $=window.getSelection();let M=!1,U=[],W=null;if(y===0){const H=k[0];if(!H)return console.warn("[removePageAndContent] No page break found for first page"),!1;let G=c.firstChild;for(;G&&G!==H;)U.push(G),G=G.nextSibling;W=H}else{const H=k[y-1];if(!H)return console.warn("[removePageAndContent] Page break not found"),!1;const G=k[y];let R=H.nextSibling;for(;R&&R!==G;)U.push(R),R=R.nextSibling;W=H}if($&&$.rangeCount>0){const G=$.getRangeAt(0).startContainer;for(const R of U)if(R.contains(G)||R===G){M=!0;break}}W&&W.parentNode&&W.remove(),U.forEach(H=>{H.parentNode&&H.remove()}),c.querySelectorAll('page-break, [data-page-break="true"]').forEach((H,G)=>{H.setAttribute("data-page-number",String(G+2))}),M&&setTimeout(()=>{I(0)},50);const X=c.innerHTML;return t.updateContinuousContent(X),setTimeout(()=>{P()},100),!0}catch(k){return console.error("[removePageAndContent] Failed to remove page:",k),!1}},[r,p,t,P,I]);return{calculatePageBoundaries:p,checkAndUpdateBoundaries:C,updateBoundaries:P,getCurrentPage:D,scrollToPage:N,positionCursorAtPage:I,checkAndReflow:A,triggerAutoReflow:B,removePageAndContent:S,boundaryTimeoutRef:i,reflowTimeoutRef:s}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$t=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,l,t)=>t?t.toUpperCase():l.toLowerCase()),ct=e=>{const r=$t(e);return r.charAt(0).toUpperCase()+r.slice(1)},lt=(...e)=>e.filter((r,l,t)=>!!r&&r.trim()!==""&&t.indexOf(r)===l).join(" ").trim(),Bt=e=>{for(const r in e)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ut={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=h.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:t,className:i="",children:s,iconNode:a,...d},b)=>h.createElement("svg",{ref:b,...Ut,width:r,height:r,stroke:e,strokeWidth:t?Number(l)*24/Number(r):l,className:lt("lucide",i),...!s&&!Bt(d)&&{"aria-hidden":"true"},...d},[...a.map(([m,v])=>h.createElement(m,v)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=(e,r)=>{const l=h.forwardRef(({className:t,...i},s)=>h.createElement(qt,{ref:s,iconNode:r,className:lt(`lucide-${zt(ct(e))}`,`lucide-${e}`,t),...i}));return l.displayName=ct(e),l};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=F("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=F("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=F("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=F("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=F("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=F("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=F("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=F("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=F("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=F("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=F("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=F("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=F("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=F("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=F("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=F("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=F("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=F("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=F("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=F("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=F("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=F("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=F("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=F("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=F("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=F("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=F("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=F("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),dt=({editorView:e,isCollapsed:r,onToggle:l,wordCount:t,pageCount:i})=>{const s=Oe(),{pages:a,activePage:d,continuousContent:b,editorMode:m}=s,[v,p]=h.useState(0),[P,A]=h.useState([]);h.useEffect(()=>{if(t!==void 0&&i!==void 0){if(p(t),b){const I=document.createElement("div");I.innerHTML=b;const N=I.querySelectorAll("h1, h2, h3, h4, h5, h6"),S=Array.from(N).map((y,c)=>{const O=parseInt(y.tagName.charAt(1)),k=y.textContent.trim();return k?{id:`heading-${c}`,level:O,text:k,page:1}:null}).filter(Boolean);A(S)}return}let C=0;const D=[];a.forEach((I,N)=>{if(I.content){const S=document.createElement("div");S.innerHTML=I.content;const c=(S.textContent||S.innerText||"").trim().split(/\s+/).filter(k=>k.length>0);C+=c.length,S.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((k,$)=>{const M=parseInt(k.tagName.charAt(1)),U=k.textContent.trim();U&&D.push({id:`heading-${N}-${$}`,level:M,text:U,page:N+1})})}}),p(C),A(D)},[a,t,i,b]);const B=i!==void 0?i:a.length;return o.jsxs("aside",{className:`sidebar ${r?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[o.jsxs("div",{className:"sidebar-header",children:[o.jsxs("div",{className:"sidebar-title",children:[o.jsx(he,{size:18}),o.jsx("h2",{children:"Document Info"})]}),o.jsx("button",{className:"sidebar-toggle",onClick:l,"aria-label":r?"Expand sidebar":"Collapse sidebar",title:r?"Expand sidebar":"Collapse sidebar",children:r?o.jsx(Ht,{size:16}):o.jsx(Gt,{size:16})})]}),!r&&o.jsxs("div",{className:"sidebar-content",children:[o.jsxs("div",{className:"sidebar-section",children:[o.jsx("h3",{children:"Statistics"}),o.jsxs("div",{className:"stat-item",children:[o.jsxs("div",{className:"stat-label",children:[o.jsx(Yt,{size:14}),o.jsx("span",{children:"Pages:"})]}),o.jsx("span",{className:"stat-value",children:B})]}),o.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[o.jsxs("div",{className:"stat-label",children:[o.jsx(Vt,{size:14}),o.jsx("span",{children:"Words:"})]}),o.jsx("span",{className:"stat-value",children:v.toLocaleString()})]}),o.jsxs("div",{className:"stat-item",children:[o.jsxs("div",{className:"stat-label",children:[o.jsx(he,{size:14}),o.jsx("span",{children:"Active Page:"})]}),o.jsx("span",{className:"stat-value",children:d+1})]})]}),P.length>0&&o.jsxs("div",{className:"sidebar-section",children:[o.jsxs("h3",{children:[o.jsx(ut,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),o.jsx("div",{className:"document-outline","data-testid":"outline",children:P.map(C=>{const D=C.level===1?Ft:C.level===2?Wt:Kt;return o.jsxs("div",{className:`outline-item outline-level-${C.level}`,style:{marginLeft:`${(C.level-1)*12}px`},children:[o.jsx(D,{size:12,className:"outline-icon"}),o.jsx("span",{className:"outline-text",children:C.text}),o.jsxs("span",{className:"outline-page",children:["p.",C.page]})]},C.id)})})]}),o.jsxs("div",{className:"sidebar-section",children:[o.jsx("h3",{children:"Document"}),o.jsx("p",{children:"HTML Editor"}),o.jsx("p",{children:"Multi-page support"})]})]})]})};function mn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}function ft(e){return new Promise((r,l)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){l(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){l(new Error("Image exceeds maximum size of 5MB"));return}const i=new FileReader;i.onload=s=>{const a=s.target.result;if(a.split(",")[1].length*3/4>5*1024*1024){l(new Error("Image exceeds maximum size of 5MB"));return}try{const m=`editor-image-${mn()}`;localStorage.setItem(m,a),r(m)}catch(m){m.name==="QuotaExceededError"?l(new Error("Storage quota exceeded")):l(m)}},i.onerror=()=>{l(new Error("Error reading image file"))},i.readAsDataURL(e)})}function yn(e){return localStorage.getItem(e)}function bn(e){localStorage.removeItem(e)}function En(){Object.keys(localStorage).forEach(e=>{e.startsWith("editor-image-")&&localStorage.removeItem(e)})}function vn(){return Object.keys(localStorage).filter(e=>e.startsWith("editor-image-"))}class pt{constructor(r="Editor"){this.namespace=r}_format(r,l,t){return`[${new Date().toISOString()}] [${this.namespace}] [${r}] ${l}`}info(r,l){}warn(r,l){}error(r,l){}debug(r,l){}}const gt=new pt("Editor"),me=({currentFormat:e,onFormatText:r,onAddPageBreak:l})=>{const t=async i=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(i.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(i.size>5242880){alert("Image exceeds maximum size of 5MB");return}const a=await ft(i),d=localStorage.getItem(a);d&&(document.execCommand("insertImage",!1,d),gt.info("Image inserted",{key:a}))}catch(s){gt.error("Error uploading image",s)}};return o.jsxs("div",{className:"editor-toolbar",children:[o.jsx("button",{onClick:()=>r("undo"),title:"Undo",children:o.jsx(fn,{size:16})}),o.jsx("button",{onClick:()=>r("redo"),title:"Redo",children:o.jsx(nn,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>r("bold"),className:e.bold?"active":"",title:"Bold",children:o.jsx(Zt,{size:16})}),o.jsx("button",{onClick:()=>r("italic"),className:e.italic?"active":"",title:"Italic",children:o.jsx(Xt,{size:16})}),o.jsx("button",{onClick:()=>r("underline"),className:e.underline?"active":"",title:"Underline",children:o.jsx(dn,{size:16})}),o.jsx("button",{onClick:()=>r("strikethrough"),className:e.strikethrough?"active":"",title:"Strikethrough",children:o.jsx(on,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>r("justifyLeft"),className:e.alignLeft?"active":"",title:"Align Left",children:o.jsx(un,{size:16})}),o.jsx("button",{onClick:()=>r("justifyCenter"),className:e.alignCenter?"active":"",title:"Align Center",children:o.jsx(sn,{size:16})}),o.jsx("button",{onClick:()=>r("justifyRight"),className:e.alignRight?"active":"",title:"Align Right",children:o.jsx(cn,{size:16})}),o.jsx("button",{onClick:()=>r("justifyFull"),className:e.alignJustify?"active":"",title:"Justify",children:o.jsx(ln,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsxs("select",{onChange:i=>r("fontName",i.target.value),defaultValue:"Arial",title:"Font Family",children:[o.jsx("option",{value:"Arial",children:"Arial"}),o.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),o.jsx("option",{value:"Courier New",children:"Courier New"}),o.jsx("option",{value:"Georgia",children:"Georgia"}),o.jsx("option",{value:"Verdana",children:"Verdana"})]}),o.jsxs("select",{onChange:i=>r("fontSize",i.target.value),defaultValue:"12px",title:"Font Size",children:[o.jsx("option",{value:"10px",children:"10"}),o.jsx("option",{value:"12px",children:"12"}),o.jsx("option",{value:"14px",children:"14"}),o.jsx("option",{value:"16px",children:"16"}),o.jsx("option",{value:"18px",children:"18"}),o.jsx("option",{value:"24px",children:"24"}),o.jsx("option",{value:"32px",children:"32"})]}),o.jsxs("select",{onChange:i=>r("formatBlock",i.target.value),value:e.headingLevel||"p",title:"Heading Level",children:[o.jsx("option",{value:"p",children:"Normal"}),o.jsx("option",{value:"h1",children:"Heading 1"}),o.jsx("option",{value:"h2",children:"Heading 2"}),o.jsx("option",{value:"h3",children:"Heading 3"}),o.jsx("option",{value:"h4",children:"Heading 4"}),o.jsx("option",{value:"h5",children:"Heading 5"}),o.jsx("option",{value:"h6",children:"Heading 6"})]}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>r("insertUnorderedList"),title:"Bullet List",children:o.jsx(ut,{size:16})}),o.jsx("button",{onClick:()=>r("insertOrderedList"),title:"Numbered List",children:o.jsx(en,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>{const i=prompt("Enter URL:");i&&r("createLink",i)},title:"Insert Link",children:o.jsx(Qt,{size:16})}),o.jsx("button",{onClick:()=>r("insertHTML",'<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>'),title:"Insert Table",children:o.jsx(an,{size:16})}),l&&o.jsx("button",{onClick:l,title:"Insert Page Break",children:o.jsx(he,{size:16})}),o.jsx("input",{type:"file",accept:"image/*",onChange:i=>i.target.files[0]&&t(i.target.files[0]),style:{display:"none"},id:"image-upload"}),o.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:o.jsx(Jt,{size:16})})]})};me.propTypes={currentFormat:E.shape({bold:E.bool,italic:E.bool,underline:E.bool,strikethrough:E.bool,alignLeft:E.bool,alignCenter:E.bool,alignRight:E.bool,alignJustify:E.bool,fontFamily:E.string,fontSize:E.string,headingLevel:E.string}).isRequired,onFormatText:E.func.isRequired,onAddPageBreak:E.func},me.defaultProps={onAddPageBreak:void 0};const ye=({content:e,dimensions:r,pageSize:l,pageBoundaries:t=[],editorRef:i,onInput:s,onKeyDown:a,onClick:d,onScroll:b,zoomLevel:m=100})=>{const v={top:60,bottom:100,left:72,right:72},p=m/100,P=A=>{if(A.key==="Tab")return A.preventDefault(),document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;"),!1;const B=window.getSelection();if(!B||B.rangeCount===0)return;const C=B.getRangeAt(0),{startContainer:D,endContainer:I}=C,N=S=>S?S.nodeType===Node.ELEMENT_NODE?S.tagName==="PAGE-BREAK"||S.getAttribute("data-page-break")==="true":S.parentElement&&N(S.parentElement):!1;if((A.key==="Backspace"||A.key==="Delete")&&(N(D)||N(I)))return A.preventDefault(),!1;a&&a(A)};return o.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${r.width*p}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh",transform:`scale(${p})`,transformOrigin:"top center",transition:"transform 0.2s ease-out"},children:o.jsx("div",{ref:i,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${r.height}px`,backgroundColor:"white",padding:`${v.top}px ${v.right}px ${v.bottom}px ${v.left}px`,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:"Arial, sans-serif",fontSize:"12px",lineHeight:"1.15",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:s,onKeyDown:P,onClick:d,onScroll:b,"data-testid":"continuous-editor"})})};ye.propTypes={content:E.string.isRequired,dimensions:E.shape({width:E.number.isRequired,height:E.number.isRequired}).isRequired,pageSize:E.oneOf(["A4","Letter","Legal"]).isRequired,pageBoundaries:E.arrayOf(E.shape({id:E.string.isRequired,pageNumber:E.number.isRequired,top:E.number,height:E.number})),editorRef:E.shape({current:E.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onInput:E.func.isRequired,onKeyDown:E.func,onClick:E.func,onScroll:E.func,zoomLevel:E.number},ye.defaultProps={pageBoundaries:[],onKeyDown:void 0,onClick:void 0,onScroll:void 0,zoomLevel:100};const ze=({pageBoundaries:e=[{id:"page-0",pageNumber:1}],activePage:r=0,pageSize:l="A4",zoomLevel:t=100,canZoomIn:i=!0,canZoomOut:s=!0,onNavigate:a,onAddPage:d,onDeletePage:b,onPageSizeChange:m,onZoomIn:v,onZoomOut:p,onZoomReset:P}={})=>{const A=Math.max(e?.length||0,1),B=N=>{a&&a(N)},C=()=>{d&&d()},D=N=>{if(A<=1){console.warn("[PageManager] Cannot delete the only page");return}b&&b(N)},I=N=>{m&&m(N)};return o.jsxs("div",{className:"page-manager",children:[o.jsxs("div",{className:"page-size-controls",children:[o.jsxs("label",{htmlFor:"page-size-selector",children:[o.jsx(rn,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Size:"]}),o.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:l,onChange:N=>I(N.target.value),children:[o.jsx("option",{value:"A4",children:"A4"}),o.jsx("option",{value:"Letter",children:"Letter"}),o.jsx("option",{value:"Legal",children:"Legal"})]})]}),o.jsxs("div",{className:"zoom-controls",children:[o.jsx("button",{type:"button",className:"zoom-button",onClick:p,disabled:!s,"aria-label":"Zoom out",title:"Zoom out (Ctrl + -)",children:o.jsx(hn,{size:14})}),o.jsxs("button",{type:"button",className:"zoom-reset-button",onClick:P,"aria-label":"Reset zoom",title:"Reset zoom to 100% (Ctrl + 0)",children:[t,"%"]}),o.jsx("button",{type:"button",className:"zoom-button",onClick:v,disabled:!i,"aria-label":"Zoom in",title:"Zoom in (Ctrl + +)",children:o.jsx(gn,{size:14})})]}),o.jsx("div",{className:"page-list",children:(e&&e.length>0?e:[{id:"page-0",pageNumber:1}]).map((N,S)=>o.jsxs("div",{className:"page-item",children:[o.jsxs("button",{type:"button",className:`page-button ${S===r?"active":""}`,onClick:()=>B(S),"aria-label":`Go to page ${S+1}`,"aria-current":S===r?"page":void 0,children:[o.jsx(he,{size:14}),o.jsxs("span",{children:["Page ",S+1]})]}),A>1&&o.jsx("button",{type:"button",className:"delete-page-button",onClick:y=>{y.stopPropagation(),D(S)},"aria-label":`Delete page ${S+1}`,title:"Delete this page and its content",children:o.jsx(pn,{size:14})})]},N.id||`page-${S}`))}),o.jsxs("button",{type:"button",className:"add-page-button",onClick:C,"aria-label":"Add new page",title:"Add new page at end",children:[o.jsx(tn,{size:16}),o.jsx("span",{children:"Add Page"})]})]})};ze.propTypes={pageBoundaries:E.arrayOf(E.shape({id:E.string.isRequired,pageNumber:E.number.isRequired,top:E.number,height:E.number})),activePage:E.number,pageSize:E.oneOf(["A4","Letter","Legal"]),zoomLevel:E.number,canZoomIn:E.bool,canZoomOut:E.bool,onNavigate:E.func,onAddPage:E.func,onDeletePage:E.func,onPageSizeChange:E.func,onZoomIn:E.func,onZoomOut:E.func,onZoomReset:E.func},ze.defaultProps={pageBoundaries:[{id:"page-0",pageNumber:1}],activePage:0,pageSize:"A4",zoomLevel:100,canZoomIn:!0,canZoomOut:!0,onNavigate:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onZoomIn:void 0,onZoomOut:void 0,onZoomReset:void 0};const ht=h.memo(ze),mt={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},_n=50,xn=50,Tn=50,An=100,kn=500,be=h.forwardRef(({pageManagerComponent:e=null,onNavigatePage:r,onAddPage:l,onDeletePage:t,onPageSizeChange:i,onChange:s,showSidebar:a=!0,showToolbar:d=!0,showPageManager:b=!0},m)=>{const v=Oe(),p=we(),{pageSize:P,continuousContent:A,pageBoundaries:B,activePage:C,zoomLevel:D}=v,I=h.useRef(null),N=h.useRef(null),{currentFormat:S,formatText:y}=at(),{checkAndUpdateBoundaries:c,getCurrentPage:O,scrollToPage:k,positionCursorAtPage:$,updateBoundaries:M,triggerAutoReflow:U,removePageAndContent:W}=st(P,N,D),ne=h.useMemo(()=>mt[P]||mt.A4,[P]),[X,H]=h.useState(!1),G=h.useRef(null),R=h.useRef(!1),Q=h.useRef(!1),te=h.useRef(!1),re=h.useRef(A);h.useEffect(()=>{if(N.current){if(!te.current){N.current.innerHTML=A,te.current=!0,re.current=A;const u=setTimeout(()=>{M()},_n);return()=>clearTimeout(u)}if(re.current!==A){if(N.current.innerHTML!==A){N.current.innerHTML=A;const J=setTimeout(()=>{if(M(),R.current){R.current=!1;const oe=Math.max(0,B.length-1);p.setActivePage(oe),setTimeout(()=>{k(oe,I)},Tn)}},xn);return re.current=A,()=>clearTimeout(J)}re.current=A}}},[A,M,B.length,p,k]),h.useEffect(()=>{s&&te.current&&s(A)},[A,s]),h.useImperativeHandle(m,()=>({getHTMLContent:()=>A,getPlainText:()=>A.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),setContent:u=>{p.updateContinuousContent(u),N.current&&(N.current.innerHTML=u,setTimeout(()=>{M()},50))}}),[A,p,M]),h.useEffect(()=>{const u=setTimeout(()=>{N.current&&N.current.focus()},200);return()=>clearTimeout(u)},[]);const f=h.useCallback(u=>{const J=u.currentTarget.innerHTML;p.updateContinuousContent(J),c(),U();const oe=O(I);oe!==C&&p.setActivePage(oe)},[c,p,O,C,U,I]),n=h.useCallback(u=>{p.updatePageSize(u),M({pageSize:u}),i&&i(u)},[p,M,i]),g=h.useCallback(u=>{u<0||u>=B.length||(Q.current=!0,p.setActivePage(u),k(u,I),setTimeout(()=>{Q.current=!1},kn),r&&r(u))},[p,k,r,B.length]),_=h.useCallback(()=>{R.current=!0,p.addPageBreak({position:"end"}),l&&l()},[p,l]),x=h.useCallback(()=>{const u=window.getSelection();if(u&&u.rangeCount>0){if(!N?.current)return;const Ee=`<page-break data-page-break="true" contenteditable="false" data-page-number="${N.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,Ee),setTimeout(()=>{M();const Cn=O(I);p.setActivePage(Cn)},150)}},[M,O,p,I]),L=h.useCallback(u=>{if(B.length<=1){console.warn("Cannot delete the only page");return}W(u)&&(p.setActivePage(0),t&&t(u))},[B.length,W,p,t]),w=h.useCallback(()=>{p.zoomIn(),setTimeout(()=>{c({delay:100}),U(500)},100)},[p,c,U]),T=h.useCallback(()=>{p.zoomOut(),setTimeout(()=>{c({delay:100}),U(500)},100)},[p,c,U]),j=h.useCallback(()=>{p.resetZoom(),setTimeout(()=>{c({delay:100}),U(500)},100)},[p,c,U]);h.useEffect(()=>{const u=J=>{if(!(!N.current&&!I.current)&&(J.ctrlKey||J.metaKey))switch(J.key){case"+":case"=":J.preventDefault(),w();break;case"-":case"_":J.preventDefault(),T();break;case"0":J.preventDefault(),j();break}};return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[w,T,j]);const Z=h.useCallback(()=>{!I.current||!N.current||Q.current||(G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{if(Q.current){G.current=null;return}const u=O(I);u!==C&&u>=0&&p.setActivePage(u),G.current=null},An))},[O,C,p]),q=h.useMemo(()=>{if(!A)return 0;const J=A.replace(/<[^>]*>/g," ").match(/\b\w+\b/g);return J?J.length:0},[A]),ee=B.length||1;return h.useEffect(()=>()=>{G.current&&clearTimeout(G.current)},[]),o.jsxs("div",{className:"multi-page-editor",children:[d&&o.jsx(me,{currentFormat:S,onFormatText:y,onAddPageBreak:x}),o.jsxs("div",{className:"editor-container",children:[a&&o.jsx(dt,{editorView:null,isCollapsed:X,onToggle:()=>H(u=>!u),wordCount:q,pageCount:ee}),o.jsx("div",{className:"editor-viewport continuous-scroll",ref:I,onScroll:Z,children:o.jsx(ye,{content:A,dimensions:ne,pageSize:P,pageBoundaries:B,editorRef:N,onInput:f,onClick:()=>N.current?.focus(),zoomLevel:D})}),b&&o.jsx("div",{className:"page-manager-sidebar",children:e?h.cloneElement(e,{onNavigate:g,onAddPage:_,onDeletePage:L,onPageSizeChange:n,zoomLevel:D,canZoomIn:Ae(D),canZoomOut:ke(D),onZoomIn:w,onZoomOut:T,onZoomReset:j}):o.jsx(ht,{pageBoundaries:B,activePage:C,pageSize:P,zoomLevel:D,canZoomIn:Ae(D),canZoomOut:ke(D),onNavigate:g,onAddPage:_,onDeletePage:L,onPageSizeChange:n,onZoomIn:w,onZoomOut:T,onZoomReset:j})})]})]})});be.displayName="HtmlEditor",be.propTypes={pageManagerComponent:E.element,onNavigatePage:E.func,onAddPage:E.func,onDeletePage:E.func,onPageSizeChange:E.func,onChange:E.func,showSidebar:E.bool,showToolbar:E.bool,showPageManager:E.bool},be.defaultProps={pageManagerComponent:null,onNavigatePage:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onChange:void 0,showSidebar:!0,showToolbar:!0,showPageManager:!0};class $e extends h.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,l){console.error("[ErrorBoundary] Caught error:",r),console.error("[ErrorBoundary] Error info:",l),this.setState({error:r,errorInfo:l}),this.props.onError&&this.props.onError(r,l)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:o.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #f44336",borderRadius:"4px",backgroundColor:"#ffebee",color:"#c62828"},children:[o.jsx("h2",{style:{marginTop:0},children:"⚠️ Something went wrong"}),o.jsx("p",{children:"The editor encountered an unexpected error and couldn't continue."}),this.props.showDetails&&this.state.error&&o.jsxs("details",{style:{marginTop:"10px",padding:"10px",backgroundColor:"white",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[o.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),o.jsxs("pre",{style:{marginTop:"10px",overflow:"auto",maxHeight:"200px"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),o.jsx("button",{onClick:this.handleReset,style:{marginTop:"15px",padding:"8px 16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Try Again"})]}):this.props.children}}$e.propTypes={children:E.node.isRequired,fallback:E.node,onError:E.func,onReset:E.func,showDetails:E.bool},$e.defaultProps={fallback:null,onError:void 0,onReset:void 0,showDetails:process.env.NODE_ENV==="development"};const Pn={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}};K.DocumentProvider=At,K.EditorToolbar=me,K.ErrorBoundary=$e,K.HtmlEditor=be,K.PAGE_DIMENSIONS=Pn,K.PageManager=ht,K.PageView=ye,K.Sidebar=dt,K.clearImages=En,K.deleteImage=bn,K.getAllImageKeys=vn,K.getImage=yn,K.logger=pt,K.saveImage=ft,K.useContinuousReflow=st,K.useDocument=Se,K.useDocumentActions=we,K.useDocumentState=Oe,K.useFormatting=at,Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
