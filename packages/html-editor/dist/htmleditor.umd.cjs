(function(q,b){typeof exports=="object"&&typeof module<"u"?b(exports,require("react"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","react","uuid"],b):(q=typeof globalThis<"u"?globalThis:q||self,b(q.HTMLEditor={},q.React,q.uuid))})(this,(function(q,b,ve){"use strict";function At(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var de={exports:{}},se={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Be;function Pt(){if(Be)return se;Be=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(t,r,s){var i=null;if(s!==void 0&&(i=""+s),r.key!==void 0&&(i=""+r.key),"key"in r){s={};for(var l in r)l!=="key"&&(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:e,type:t,key:i,ref:r!==void 0?r:null,props:s}}return se.Fragment=n,se.jsx=a,se.jsxs=a,se}var ce={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ue;function kt(){return Ue||(Ue=1,process.env.NODE_ENV!=="production"&&(function(){function e(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ne?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case O:return"Fragment";case S:return"Profiler";case _:return"StrictMode";case U:return"Suspense";case Z:return"SuspenseList";case X:return"Activity"}if(typeof o=="object")switch(typeof o.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),o.$$typeof){case k:return"Portal";case N:return o.displayName||"Context";case E:return(o._context.displayName||"Context")+".Consumer";case g:var y=o.render;return o=o.displayName,o||(o=y.displayName||y.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Y:return y=o.displayName||null,y!==null?y:e(o.type)||"Memo";case J:y=o._payload,o=o._init;try{return e(o(y))}catch{}}return null}function n(o){return""+o}function a(o){try{n(o);var y=!1}catch{y=!0}if(y){y=console;var A=y.error,P=typeof Symbol=="function"&&Symbol.toStringTag&&o[Symbol.toStringTag]||o.constructor.name||"Object";return A.call(y,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",P),n(o)}}function t(o){if(o===O)return"<>";if(typeof o=="object"&&o!==null&&o.$$typeof===J)return"<...>";try{var y=e(o);return y?"<"+y+">":"<...>"}catch{return"<...>"}}function r(){var o=re.A;return o===null?null:o.getOwner()}function s(){return Error("react-stack-top-frame")}function i(o){if(oe.call(o,"key")){var y=Object.getOwnPropertyDescriptor(o,"key").get;if(y&&y.isReactWarning)return!1}return o.key!==void 0}function l(o,y){function A(){G||(G=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",y))}A.isReactWarning=!0,Object.defineProperty(o,"key",{get:A,configurable:!0})}function m(){var o=e(this.type);return W[o]||(W[o]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),o=this.props.ref,o!==void 0?o:null}function p(o,y,A,P,R,j){var C=A.ref;return o={$$typeof:w,type:o,key:y,props:A,_owner:P},(C!==void 0?C:null)!==null?Object.defineProperty(o,"ref",{enumerable:!1,get:m}):Object.defineProperty(o,"ref",{enumerable:!1,value:null}),o._store={},Object.defineProperty(o._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(o,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(o,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:R}),Object.defineProperty(o,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:j}),Object.freeze&&(Object.freeze(o.props),Object.freeze(o)),o}function h(o,y,A,P,R,j){var C=y.children;if(C!==void 0)if(P)if(te(C)){for(P=0;P<C.length;P++)d(C[P]);Object.freeze&&Object.freeze(C)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else d(C);if(oe.call(y,"key")){C=e(o);var M=Object.keys(y).filter(function(D){return D!=="key"});P=0<M.length?"{key: someKey, "+M.join(": ..., ")+": ...}":"{key: someKey}",f[C+P]||(M=0<M.length?"{"+M.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,P,C,M,C),f[C+P]=!0)}if(C=null,A!==void 0&&(a(A),C=""+A),i(y)&&(a(y.key),C=""+y.key),"key"in y){A={};for(var L in y)L!=="key"&&(A[L]=y[L])}else A=y;return C&&l(A,typeof o=="function"?o.displayName||o.name||"Unknown":o),p(o,C,A,r(),R,j)}function d(o){T(o)?o._store&&(o._store.validated=1):typeof o=="object"&&o!==null&&o.$$typeof===J&&(o._payload.status==="fulfilled"?T(o._payload.value)&&o._payload.value._store&&(o._payload.value._store.validated=1):o._store&&(o._store.validated=1))}function T(o){return typeof o=="object"&&o!==null&&o.$$typeof===w}var v=b,w=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),N=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),ne=Symbol.for("react.client.reference"),re=v.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=Object.prototype.hasOwnProperty,te=Array.isArray,V=console.createTask?console.createTask:function(){return null};v={react_stack_bottom_frame:function(o){return o()}};var G,W={},Q=v.react_stack_bottom_frame.bind(v,s)(),ee=V(t(s)),f={};ce.Fragment=O,ce.jsx=function(o,y,A){var P=1e4>re.recentlyCreatedOwnerStacks++;return h(o,y,A,!1,P?Error("react-stack-top-frame"):Q,P?V(t(o)):ee)},ce.jsxs=function(o,y,A){var P=1e4>re.recentlyCreatedOwnerStacks++;return h(o,y,A,!0,P?Error("react-stack-top-frame"):Q,P?V(t(o)):ee)}})()),ce}var He;function Ct(){return He||(He=1,process.env.NODE_ENV==="production"?de.exports=Pt():de.exports=kt()),de.exports}var c=Ct();const _e=100,Te=50,xe=200,qe=5,Ae=e=>e<xe,Pe=e=>e>Te,le="A4",ae="<p><br></p>",St="continuous",ke={A4:{width:595,height:842},Letter:{width:612,height:792},Legal:{width:612,height:1008}},ue=(e,n=le)=>({id:ve.v4(),index:e,size:n,content:ae,images:[],isBreakPoint:!1}),fe=e=>typeof e!="string"||e.trim()===""?ae:e,Ze=(e,n=le)=>(e.length>0?e:[ue(0,n)]).map((t,r)=>({id:t.id||ve.v4(),index:r,size:t.size||n,content:fe(t.content),images:t.images||[],isBreakPoint:!!t.isBreakPoint})),wt=(e=le)=>[{id:"page-0",pageNumber:1,top:0,height:(ke[e]||ke.A4).height}],Ce=(e={})=>{const n=new Date().toISOString(),a=e.pageSize||le,t=Ze(e.pages||[ue(0,a)],a);return{id:ve.v4(),title:e.title||"Untitled Document",createdAt:n,updatedAt:n,pageSize:a,pages:t,activePage:e.activePage&&e.activePage<t.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:t.length,editorMode:e.editorMode||St,continuousContent:e.continuousContent||ae,pageBoundaries:e.pageBoundaries||wt(a),zoomLevel:e.zoomLevel||_e}},I={INITIALIZE_DOCUMENT:"INITIALIZE_DOCUMENT",UPDATE_TITLE:"UPDATE_TITLE",UPDATE_PAGE_CONTENT:"UPDATE_PAGE_CONTENT",UPDATE_PAGES:"UPDATE_PAGES",ADD_PAGE:"ADD_PAGE",DELETE_PAGE:"DELETE_PAGE",SET_ACTIVE_PAGE:"SET_ACTIVE_PAGE",UPDATE_PAGE_SIZE:"UPDATE_PAGE_SIZE",RESET_DOCUMENT:"RESET_DOCUMENT",UPDATE_CONTINUOUS_CONTENT:"UPDATE_CONTINUOUS_CONTENT",UPDATE_PAGE_BOUNDARIES:"UPDATE_PAGE_BOUNDARIES",ADD_PAGE_BREAK:"ADD_PAGE_BREAK",REMOVE_PAGE_BREAK:"REMOVE_PAGE_BREAK",SET_EDITOR_MODE:"SET_EDITOR_MODE",INSERT_PAGE_AT:"INSERT_PAGE_AT",MOVE_PAGE_TO:"MOVE_PAGE_TO",DUPLICATE_PAGE:"DUPLICATE_PAGE",SET_ZOOM_LEVEL:"SET_ZOOM_LEVEL",ZOOM_IN:"ZOOM_IN",ZOOM_OUT:"ZOOM_OUT",RESET_ZOOM:"RESET_ZOOM"},Ot=(e,n)=>{const a=new Date().toISOString();switch(n.type){case I.INITIALIZE_DOCUMENT:{const{initialContent:t=ae,pageSize:r=le}=n.payload||{},s={...ue(0,r),content:fe(t)};return Ce({title:e.title,pageSize:r,pages:[s]})}case I.UPDATE_TITLE:return{...e,title:n.payload,updatedAt:a};case I.UPDATE_PAGE_CONTENT:{const{pageIndex:t,content:r}=n.payload;if(t<0||t>=e.pages.length)return e;const s=[...e.pages];return s[t]={...s[t],content:fe(r)},{...e,pages:s,updatedAt:a}}case I.UPDATE_PAGES:{const t=Array.isArray(n.payload)?{pages:n.payload}:n.payload||{},r=Ze(t.pages||[],e.pageSize),s=Array.isArray(t.pageBreaks)?t.pageBreaks:r.slice(0,-1).map((i,l)=>({id:`auto-break-${l}`,pageNumber:l+1}));return{...e,pages:r,activePage:Math.min(e.activePage,r.length-1),pageBreaks:s,totalPages:r.length,updatedAt:a}}case I.ADD_PAGE:{const t=typeof n.payload?.index=="number"?Math.min(Math.max(n.payload.index,0),e.pages.length):e.pages.length,r=[...e.pages];r.splice(t,0,ue(t,e.pageSize));const s=r.map((l,m)=>({...l,index:m,size:e.pageSize})),i=s.slice(0,-1).map((l,m)=>({id:`auto-break-${m}`,pageNumber:m+1}));return{...e,pages:s,activePage:t,pageBreaks:i,totalPages:s.length,updatedAt:a}}case I.DELETE_PAGE:{const t=n.payload;if(e.pages.length<=1)return e;const r=[...e.pages];r.splice(t,1);const s=r.map((m,p)=>({...m,index:p,size:e.pageSize}));let i=e.activePage;i>=s.length?i=s.length-1:t<=i&&i>0&&(i-=1);const l=s.slice(0,-1).map((m,p)=>({id:`auto-break-${p}`,pageNumber:p+1}));return{...e,pages:s,activePage:i,pageBreaks:l,totalPages:s.length,updatedAt:a}}case I.SET_ACTIVE_PAGE:{const t=n.payload;if(t===e.activePage)return e;const r=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;return t<0||t>=r?e:{...e,activePage:t,updatedAt:a}}case I.UPDATE_PAGE_SIZE:{const t=n.payload;if(t===e.pageSize)return e;if(!ke[t])return console.warn(`Invalid page size: ${t}`),e;const r=e.pages.map((i,l)=>({...i,index:l,size:t})),s=r.slice(0,-1).map((i,l)=>({id:`auto-break-${l}`,pageNumber:l+1}));return{...e,pageSize:t,pages:r,pageBreaks:s,updatedAt:a}}case I.RESET_DOCUMENT:return Ce();case I.UPDATE_CONTINUOUS_CONTENT:{const t=fe(n.payload);return t===e.continuousContent?e:{...e,continuousContent:t,updatedAt:a}}case I.UPDATE_PAGE_BOUNDARIES:{const t=Array.isArray(n.payload)?n.payload:[];if(t.length===e.pageBoundaries.length&&t.length>0&&t[0].id===e.pageBoundaries[0]?.id&&t[t.length-1].id===e.pageBoundaries[t.length-1]?.id)return e;const r=e.activePage>=t.length?Math.max(0,t.length-1):e.activePage;return{...e,pageBoundaries:t,totalPages:t.length,activePage:r,updatedAt:a}}case I.ADD_PAGE_BREAK:{const{position:t="end",pageIndex:r}=n.payload||{},s='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';let i=e.continuousContent;if(t==="end")i=i+s+"<p><br></p>";else if(typeof t=="number"){const l=i.substring(0,t),m=i.substring(t);i=l+s+m}else if(typeof r=="number"&&typeof document<"u"){const l=document.createElement("div");l.innerHTML=i;const m=l.querySelectorAll('page-break, [data-page-break="true"]');if(r===0&&m.length===0)i=i+s+"<p><br></p>";else if(r<m.length){const p=m[r],h=document.createElement("page-break");h.setAttribute("data-page-break","true"),h.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const d=document.createElement("p");d.innerHTML="<br>",p.parentNode.insertBefore(h,p.nextSibling),h.parentNode.insertBefore(d,h.nextSibling),i=l.innerHTML}else i=i+s+"<p><br></p>"}return{...e,continuousContent:i,updatedAt:a}}case I.REMOVE_PAGE_BREAK:{const{pageIndex:t}=n.payload||{};if(typeof t!="number"||typeof document>"u")return e;const r=document.createElement("div");r.innerHTML=e.continuousContent;const s=r.querySelectorAll('page-break, [data-page-break="true"]');return s[t]&&s[t].remove(),r.querySelectorAll('page-break, [data-page-break="true"]').forEach((l,m)=>{l.setAttribute("data-page-number",String(m+2))}),{...e,continuousContent:r.innerHTML,updatedAt:a}}case I.SET_EDITOR_MODE:{const t=n.payload;if(t===e.editorMode)return e;let r=e.continuousContent,s=e.pages;return t==="continuous"?r=e.pages.map(l=>l.content).filter(l=>l&&l!==ae).join(`
`)||ae:e.continuousContent&&e.continuousContent!==ae&&(s=[{...ue(0,e.pageSize),content:e.continuousContent}]),{...e,editorMode:t,continuousContent:r,pages:s,updatedAt:a}}case I.SET_ZOOM_LEVEL:{const t=n.payload;return t<Te||t>xe?(console.warn(`Invalid zoom level: ${t}. Must be between ${Te} and ${xe}.`),e):t===e.zoomLevel?e:{...e,zoomLevel:t,updatedAt:a}}case I.ZOOM_IN:{if(!Ae(e.zoomLevel))return e;const t=e.zoomLevel+qe;return{...e,zoomLevel:t,updatedAt:a}}case I.ZOOM_OUT:{if(!Pe(e.zoomLevel))return e;const t=e.zoomLevel-qe;return{...e,zoomLevel:t,updatedAt:a}}case I.RESET_ZOOM:return e.zoomLevel===_e?e:{...e,zoomLevel:_e,updatedAt:a};default:return e}},Ge=b.createContext(null),Nt=({children:e,initialState:n={}})=>{const[a,t]=b.useReducer(Ot,Ce(n)),r=b.useMemo(()=>({initializeDocument:i=>t({type:I.INITIALIZE_DOCUMENT,payload:i}),updateTitle:i=>t({type:I.UPDATE_TITLE,payload:i}),updatePageContent:i=>t({type:I.UPDATE_PAGE_CONTENT,payload:i}),updatePages:i=>t({type:I.UPDATE_PAGES,payload:i}),addPage:i=>t({type:I.ADD_PAGE,payload:i}),deletePage:i=>t({type:I.DELETE_PAGE,payload:i}),setActivePage:i=>t({type:I.SET_ACTIVE_PAGE,payload:i}),updatePageSize:i=>t({type:I.UPDATE_PAGE_SIZE,payload:i}),resetDocument:()=>t({type:I.RESET_DOCUMENT}),updateContinuousContent:i=>t({type:I.UPDATE_CONTINUOUS_CONTENT,payload:i}),updatePageBoundaries:i=>t({type:I.UPDATE_PAGE_BOUNDARIES,payload:i}),addPageBreak:i=>t({type:I.ADD_PAGE_BREAK,payload:i}),removePageBreak:i=>t({type:I.REMOVE_PAGE_BREAK,payload:i}),setEditorMode:i=>t({type:I.SET_EDITOR_MODE,payload:i}),insertPageAt:i=>t({type:I.INSERT_PAGE_AT,payload:i}),movePageTo:i=>t({type:I.MOVE_PAGE_TO,payload:i}),duplicatePage:i=>t({type:I.DUPLICATE_PAGE,payload:i}),setZoomLevel:i=>t({type:I.SET_ZOOM_LEVEL,payload:i}),zoomIn:()=>t({type:I.ZOOM_IN}),zoomOut:()=>t({type:I.ZOOM_OUT}),resetZoom:()=>t({type:I.RESET_ZOOM})}),[]),s=b.useMemo(()=>({state:a,actions:r,dispatch:t}),[a,r]);return c.jsx(Ge.Provider,{value:s,children:e})},Se=()=>{const e=b.useContext(Ge);if(!e)throw new Error("useDocument must be used within a DocumentProvider");return e},we=()=>{const{state:e}=Se();return e},Oe=()=>{const{actions:e}=Se();return e};var pe={exports:{}},ge={exports:{}},z={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ye;function jt(){if(Ye)return z;Ye=1;var e=typeof Symbol=="function"&&Symbol.for,n=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,t=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,m=e?Symbol.for("react.async_mode"):60111,p=e?Symbol.for("react.concurrent_mode"):60111,h=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,T=e?Symbol.for("react.suspense_list"):60120,v=e?Symbol.for("react.memo"):60115,w=e?Symbol.for("react.lazy"):60116,k=e?Symbol.for("react.block"):60121,O=e?Symbol.for("react.fundamental"):60117,_=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function E(g){if(typeof g=="object"&&g!==null){var U=g.$$typeof;switch(U){case n:switch(g=g.type,g){case m:case p:case t:case s:case r:case d:return g;default:switch(g=g&&g.$$typeof,g){case l:case h:case w:case v:case i:return g;default:return U}}case a:return U}}}function N(g){return E(g)===p}return z.AsyncMode=m,z.ConcurrentMode=p,z.ContextConsumer=l,z.ContextProvider=i,z.Element=n,z.ForwardRef=h,z.Fragment=t,z.Lazy=w,z.Memo=v,z.Portal=a,z.Profiler=s,z.StrictMode=r,z.Suspense=d,z.isAsyncMode=function(g){return N(g)||E(g)===m},z.isConcurrentMode=N,z.isContextConsumer=function(g){return E(g)===l},z.isContextProvider=function(g){return E(g)===i},z.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===n},z.isForwardRef=function(g){return E(g)===h},z.isFragment=function(g){return E(g)===t},z.isLazy=function(g){return E(g)===w},z.isMemo=function(g){return E(g)===v},z.isPortal=function(g){return E(g)===a},z.isProfiler=function(g){return E(g)===s},z.isStrictMode=function(g){return E(g)===r},z.isSuspense=function(g){return E(g)===d},z.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===t||g===p||g===s||g===r||g===d||g===T||typeof g=="object"&&g!==null&&(g.$$typeof===w||g.$$typeof===v||g.$$typeof===i||g.$$typeof===l||g.$$typeof===h||g.$$typeof===O||g.$$typeof===_||g.$$typeof===S||g.$$typeof===k)},z.typeOf=E,z}var $={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fe;function Mt(){return Fe||(Fe=1,process.env.NODE_ENV!=="production"&&(function(){var e=typeof Symbol=="function"&&Symbol.for,n=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,t=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,m=e?Symbol.for("react.async_mode"):60111,p=e?Symbol.for("react.concurrent_mode"):60111,h=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,T=e?Symbol.for("react.suspense_list"):60120,v=e?Symbol.for("react.memo"):60115,w=e?Symbol.for("react.lazy"):60116,k=e?Symbol.for("react.block"):60121,O=e?Symbol.for("react.fundamental"):60117,_=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function E(u){return typeof u=="string"||typeof u=="function"||u===t||u===p||u===s||u===r||u===d||u===T||typeof u=="object"&&u!==null&&(u.$$typeof===w||u.$$typeof===v||u.$$typeof===i||u.$$typeof===l||u.$$typeof===h||u.$$typeof===O||u.$$typeof===_||u.$$typeof===S||u.$$typeof===k)}function N(u){if(typeof u=="object"&&u!==null){var H=u.$$typeof;switch(H){case n:var K=u.type;switch(K){case m:case p:case t:case s:case r:case d:return K;default:var be=K&&K.$$typeof;switch(be){case l:case h:case w:case v:case i:return be;default:return H}}case a:return H}}}var g=m,U=p,Z=l,Y=i,J=n,X=h,ne=t,re=w,oe=v,te=a,V=s,G=r,W=d,Q=!1;function ee(u){return Q||(Q=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),f(u)||N(u)===m}function f(u){return N(u)===p}function o(u){return N(u)===l}function y(u){return N(u)===i}function A(u){return typeof u=="object"&&u!==null&&u.$$typeof===n}function P(u){return N(u)===h}function R(u){return N(u)===t}function j(u){return N(u)===w}function C(u){return N(u)===v}function M(u){return N(u)===a}function L(u){return N(u)===s}function D(u){return N(u)===r}function F(u){return N(u)===d}$.AsyncMode=g,$.ConcurrentMode=U,$.ContextConsumer=Z,$.ContextProvider=Y,$.Element=J,$.ForwardRef=X,$.Fragment=ne,$.Lazy=re,$.Memo=oe,$.Portal=te,$.Profiler=V,$.StrictMode=G,$.Suspense=W,$.isAsyncMode=ee,$.isConcurrentMode=f,$.isContextConsumer=o,$.isContextProvider=y,$.isElement=A,$.isForwardRef=P,$.isFragment=R,$.isLazy=j,$.isMemo=C,$.isPortal=M,$.isProfiler=L,$.isStrictMode=D,$.isSuspense=F,$.isValidElementType=E,$.typeOf=N})()),$}var Ve;function We(){return Ve||(Ve=1,process.env.NODE_ENV==="production"?ge.exports=jt():ge.exports=Mt()),ge.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ne,Ke;function Rt(){if(Ke)return Ne;Ke=1;var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function t(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function r(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var i={},l=0;l<10;l++)i["_"+String.fromCharCode(l)]=l;var m=Object.getOwnPropertyNames(i).map(function(h){return i[h]});if(m.join("")!=="0123456789")return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(h){p[h]=h}),Object.keys(Object.assign({},p)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Ne=r()?Object.assign:function(s,i){for(var l,m=t(s),p,h=1;h<arguments.length;h++){l=Object(arguments[h]);for(var d in l)n.call(l,d)&&(m[d]=l[d]);if(e){p=e(l);for(var T=0;T<p.length;T++)a.call(l,p[T])&&(m[p[T]]=l[p[T]])}}return m},Ne}var je,Je;function Me(){if(Je)return je;Je=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return je=e,je}var Re,Xe;function Qe(){return Xe||(Xe=1,Re=Function.call.bind(Object.prototype.hasOwnProperty)),Re}var Ie,et;function It(){if(et)return Ie;et=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var n=Me(),a={},t=Qe();e=function(s){var i="Warning: "+s;typeof console<"u"&&console.error(i);try{throw new Error(i)}catch{}}}function r(s,i,l,m,p){if(process.env.NODE_ENV!=="production"){for(var h in s)if(t(s,h)){var d;try{if(typeof s[h]!="function"){var T=Error((m||"React class")+": "+l+" type `"+h+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof s[h]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw T.name="Invariant Violation",T}d=s[h](i,h,m,l,null,n)}catch(w){d=w}if(d&&!(d instanceof Error)&&e((m||"React class")+": type specification of "+l+" `"+h+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof d+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),d instanceof Error&&!(d.message in a)){a[d.message]=!0;var v=p?p():"";e("Failed "+l+" type: "+d.message+(v??""))}}}}return r.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(a={})},Ie=r,Ie}var De,tt;function Dt(){if(tt)return De;tt=1;var e=We(),n=Rt(),a=Me(),t=Qe(),r=It(),s=function(){};process.env.NODE_ENV!=="production"&&(s=function(l){var m="Warning: "+l;typeof console<"u"&&console.error(m);try{throw new Error(m)}catch{}});function i(){return null}return De=function(l,m){var p=typeof Symbol=="function"&&Symbol.iterator,h="@@iterator";function d(f){var o=f&&(p&&f[p]||f[h]);if(typeof o=="function")return o}var T="<<anonymous>>",v={array:_("array"),bigint:_("bigint"),bool:_("boolean"),func:_("function"),number:_("number"),object:_("object"),string:_("string"),symbol:_("symbol"),any:S(),arrayOf:E,element:N(),elementType:g(),instanceOf:U,node:X(),objectOf:Y,oneOf:Z,oneOfType:J,shape:re,exact:oe};function w(f,o){return f===o?f!==0||1/f===1/o:f!==f&&o!==o}function k(f,o){this.message=f,this.data=o&&typeof o=="object"?o:{},this.stack=""}k.prototype=Error.prototype;function O(f){if(process.env.NODE_ENV!=="production")var o={},y=0;function A(R,j,C,M,L,D,F){if(M=M||T,D=D||C,F!==a){if(m){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var H=M+":"+C;!o[H]&&y<3&&(s("You are manually calling a React.PropTypes validation function for the `"+D+"` prop on `"+M+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),o[H]=!0,y++)}}return j[C]==null?R?j[C]===null?new k("The "+L+" `"+D+"` is marked as required "+("in `"+M+"`, but its value is `null`.")):new k("The "+L+" `"+D+"` is marked as required in "+("`"+M+"`, but its value is `undefined`.")):null:f(j,C,M,L,D)}var P=A.bind(null,!1);return P.isRequired=A.bind(null,!0),P}function _(f){function o(y,A,P,R,j,C){var M=y[A],L=G(M);if(L!==f){var D=W(M);return new k("Invalid "+R+" `"+j+"` of type "+("`"+D+"` supplied to `"+P+"`, expected ")+("`"+f+"`."),{expectedType:f})}return null}return O(o)}function S(){return O(i)}function E(f){function o(y,A,P,R,j){if(typeof f!="function")return new k("Property `"+j+"` of component `"+P+"` has invalid PropType notation inside arrayOf.");var C=y[A];if(!Array.isArray(C)){var M=G(C);return new k("Invalid "+R+" `"+j+"` of type "+("`"+M+"` supplied to `"+P+"`, expected an array."))}for(var L=0;L<C.length;L++){var D=f(C,L,P,R,j+"["+L+"]",a);if(D instanceof Error)return D}return null}return O(o)}function N(){function f(o,y,A,P,R){var j=o[y];if(!l(j)){var C=G(j);return new k("Invalid "+P+" `"+R+"` of type "+("`"+C+"` supplied to `"+A+"`, expected a single ReactElement."))}return null}return O(f)}function g(){function f(o,y,A,P,R){var j=o[y];if(!e.isValidElementType(j)){var C=G(j);return new k("Invalid "+P+" `"+R+"` of type "+("`"+C+"` supplied to `"+A+"`, expected a single ReactElement type."))}return null}return O(f)}function U(f){function o(y,A,P,R,j){if(!(y[A]instanceof f)){var C=f.name||T,M=ee(y[A]);return new k("Invalid "+R+" `"+j+"` of type "+("`"+M+"` supplied to `"+P+"`, expected ")+("instance of `"+C+"`."))}return null}return O(o)}function Z(f){if(!Array.isArray(f))return process.env.NODE_ENV!=="production"&&(arguments.length>1?s("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):s("Invalid argument supplied to oneOf, expected an array.")),i;function o(y,A,P,R,j){for(var C=y[A],M=0;M<f.length;M++)if(w(C,f[M]))return null;var L=JSON.stringify(f,function(F,u){var H=W(u);return H==="symbol"?String(u):u});return new k("Invalid "+R+" `"+j+"` of value `"+String(C)+"` "+("supplied to `"+P+"`, expected one of "+L+"."))}return O(o)}function Y(f){function o(y,A,P,R,j){if(typeof f!="function")return new k("Property `"+j+"` of component `"+P+"` has invalid PropType notation inside objectOf.");var C=y[A],M=G(C);if(M!=="object")return new k("Invalid "+R+" `"+j+"` of type "+("`"+M+"` supplied to `"+P+"`, expected an object."));for(var L in C)if(t(C,L)){var D=f(C,L,P,R,j+"."+L,a);if(D instanceof Error)return D}return null}return O(o)}function J(f){if(!Array.isArray(f))return process.env.NODE_ENV!=="production"&&s("Invalid argument supplied to oneOfType, expected an instance of array."),i;for(var o=0;o<f.length;o++){var y=f[o];if(typeof y!="function")return s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+Q(y)+" at index "+o+"."),i}function A(P,R,j,C,M){for(var L=[],D=0;D<f.length;D++){var F=f[D],u=F(P,R,j,C,M,a);if(u==null)return null;u.data&&t(u.data,"expectedType")&&L.push(u.data.expectedType)}var H=L.length>0?", expected one of type ["+L.join(", ")+"]":"";return new k("Invalid "+C+" `"+M+"` supplied to "+("`"+j+"`"+H+"."))}return O(A)}function X(){function f(o,y,A,P,R){return te(o[y])?null:new k("Invalid "+P+" `"+R+"` supplied to "+("`"+A+"`, expected a ReactNode."))}return O(f)}function ne(f,o,y,A,P){return new k((f||"React class")+": "+o+" type `"+y+"."+A+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+P+"`.")}function re(f){function o(y,A,P,R,j){var C=y[A],M=G(C);if(M!=="object")return new k("Invalid "+R+" `"+j+"` of type `"+M+"` "+("supplied to `"+P+"`, expected `object`."));for(var L in f){var D=f[L];if(typeof D!="function")return ne(P,R,j,L,W(D));var F=D(C,L,P,R,j+"."+L,a);if(F)return F}return null}return O(o)}function oe(f){function o(y,A,P,R,j){var C=y[A],M=G(C);if(M!=="object")return new k("Invalid "+R+" `"+j+"` of type `"+M+"` "+("supplied to `"+P+"`, expected `object`."));var L=n({},y[A],f);for(var D in L){var F=f[D];if(t(f,D)&&typeof F!="function")return ne(P,R,j,D,W(F));if(!F)return new k("Invalid "+R+" `"+j+"` key `"+D+"` supplied to `"+P+"`.\nBad object: "+JSON.stringify(y[A],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(f),null,"  "));var u=F(C,D,P,R,j+"."+D,a);if(u)return u}return null}return O(o)}function te(f){switch(typeof f){case"number":case"string":case"undefined":return!0;case"boolean":return!f;case"object":if(Array.isArray(f))return f.every(te);if(f===null||l(f))return!0;var o=d(f);if(o){var y=o.call(f),A;if(o!==f.entries){for(;!(A=y.next()).done;)if(!te(A.value))return!1}else for(;!(A=y.next()).done;){var P=A.value;if(P&&!te(P[1]))return!1}}else return!1;return!0;default:return!1}}function V(f,o){return f==="symbol"?!0:o?o["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&o instanceof Symbol:!1}function G(f){var o=typeof f;return Array.isArray(f)?"array":f instanceof RegExp?"object":V(o,f)?"symbol":o}function W(f){if(typeof f>"u"||f===null)return""+f;var o=G(f);if(o==="object"){if(f instanceof Date)return"date";if(f instanceof RegExp)return"regexp"}return o}function Q(f){var o=W(f);switch(o){case"array":case"object":return"an "+o;case"boolean":case"date":case"regexp":return"a "+o;default:return o}}function ee(f){return!f.constructor||!f.constructor.name?T:f.constructor.name}return v.checkPropTypes=r,v.resetWarningCache=r.resetWarningCache,v.PropTypes=v,v},De}var Le,nt;function Lt(){if(nt)return Le;nt=1;var e=Me();function n(){}function a(){}return a.resetWarningCache=n,Le=function(){function t(i,l,m,p,h,d){if(d!==e){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}t.isRequired=t;function r(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:a,resetWarningCache:n};return s.PropTypes=s,s},Le}var rt;function zt(){if(rt)return pe.exports;if(rt=1,process.env.NODE_ENV!=="production"){var e=We(),n=!0;pe.exports=Dt()(e.isElement,n)}else pe.exports=Lt()();return pe.exports}var $t=zt();const x=At($t),Bt={"10px":"1","12px":"2","14px":"3","16px":"4","18px":"5","24px":"6","32px":"7"},ot={bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:"12px",headingLevel:"p"},at=()=>{const[e,n]=b.useState(ot),a=b.useCallback(i=>{n(l=>({...l,alignLeft:i==="left",alignCenter:i==="center",alignRight:i==="right",alignJustify:i==="justify"}))},[]),t=b.useCallback(i=>{try{const l=window.getSelection();if(!l||l.rangeCount===0)return!1;const m=l.getRangeAt(0);if(!m.toString())return n(h=>({...h,fontSize:i})),!1;try{const h=document.createElement("span");h.style.fontSize=i;const d=m.extractContents();return h.appendChild(d),m.insertNode(h),m.selectNodeContents(h),l.removeAllRanges(),l.addRange(m),n(T=>({...T,fontSize:i})),!0}catch{const d=Bt[i]||"2";return document.execCommand("fontSize",!1,d),n(T=>({...T,fontSize:i})),!0}}catch(l){return console.warn("[useFormatting] Font size change failed:",l),!1}},[]),r=b.useCallback((i,l=null)=>{try{if(typeof document.execCommand!="function"){console.warn("[useFormatting] execCommand not supported");return}if(i==="fontSize"){t(l);return}switch(document.execCommand(i,!1,l)||console.warn(`[useFormatting] Command "${i}" failed`),i){case"bold":n(p=>({...p,bold:!p.bold}));break;case"italic":n(p=>({...p,italic:!p.italic}));break;case"underline":n(p=>({...p,underline:!p.underline}));break;case"strikethrough":n(p=>({...p,strikethrough:!p.strikethrough}));break;case"justifyLeft":a("left");break;case"justifyCenter":a("center");break;case"justifyRight":a("right");break;case"justifyFull":a("justify");break;case"fontName":n(p=>({...p,fontFamily:l}));break;case"formatBlock":n(p=>({...p,headingLevel:l}));break;default:break}}catch(m){console.warn(`[useFormatting] Error executing command "${i}":`,m)}},[t,a]),s=b.useCallback(()=>{n(ot)},[]);return{currentFormat:e,formatText:r,resetFormat:s}},it={A4:{name:"A4",width:595,height:842,widthMm:210,heightMm:297,widthIn:8.27,heightIn:11.69},Letter:{name:"Letter",width:612,height:792,widthMm:216,heightMm:279,widthIn:8.5,heightIn:11},Legal:{name:"Legal",width:612,height:1008,widthMm:216,heightMm:356,widthIn:8.5,heightIn:14}},st={top:40,bottom:40},ie='page-break, [data-page-break="true"]',ct=e=>it[e]||it.A4,Ut=(e,n={})=>{if(!e||typeof document>"u")return[];const a=n.pageSize||"A4",t=ct(a),r=e.querySelectorAll(ie),s=[];s.push({id:"page-0",pageNumber:1,top:0,height:t.height});const i=e.getBoundingClientRect(),l=e.scrollTop;return r.forEach((m,p)=>{const d=m.getBoundingClientRect().top-i.top+l;s.push({id:`page-${p+1}`,pageNumber:p+2,top:d,height:t.height})}),s},lt=(e,n=100)=>{const t=ct(e).height-st.top-st.bottom,r=n/100;return t/r},Ht=(e,n)=>{if(!e||!n)return 0;try{const a=n.querySelectorAll(ie);if(a.length===0)return 0;const t=e.getBoundingClientRect(),r=t.top+t.height/2;for(let s=a.length-1;s>=0;s--)if(a[s].getBoundingClientRect().top<r)return s+1;return 0}catch(a){return console.warn("[getCurrentPage] Failed to calculate page:",a),0}},ut=e=>{if(!e)return[];const n=Array.from(e.children);if(n.length===0)return[];let a=[],t=[];for(const r of n)r.tagName==="PAGE-BREAK"||r.getAttribute("data-page-break")==="true"?t.length>0&&(a.push(t),t=[]):t.push(r);return t.length>0&&a.push(t),a.length===0&&n.length>0&&a.push(n.filter(r=>!(r.tagName==="PAGE-BREAK"||r.getAttribute("data-page-break")==="true"))),a},qt=(e,n)=>{if(!e)return!1;try{const a=document.createElement("page-break");return a.setAttribute("data-page-break","true"),a.setAttribute("contenteditable","false"),a.setAttribute("data-page-number",n||"2"),e.parentNode.insertBefore(a,e),!0}catch(a){return console.warn("[insertPageBreakBefore] Failed to insert page break:",a),!1}},Zt=(e,n,a,t,r,s)=>{if(!e)return!1;try{const l=lt(a,t)*(n-1),m=Array.from(e.children);let p=0,h=null;for(let d=0;d<m.length;d++){const T=m[d];if(T.tagName==="PAGE-BREAK"||T.getAttribute("data-page-break")==="true")continue;const v=T.getBoundingClientRect().height;if(p+v>l){h=T;break}p+=v}if(h){const d=document.createElement("page-break");if(d.setAttribute("data-page-break","true"),d.setAttribute("contenteditable","false"),d.setAttribute("data-page-number",String(n)),h.parentNode.insertBefore(d,h),r){const T=e.innerHTML;r(T)}return s&&setTimeout(()=>{s()},50),!0}else{const d=document.createElement("page-break");d.setAttribute("data-page-break","true"),d.setAttribute("contenteditable","false"),d.setAttribute("data-page-number",String(n)),e.appendChild(d);const T=document.createElement("p");if(T.innerHTML="<br>",e.appendChild(T),r){const v=e.innerHTML;r(v)}return s&&setTimeout(()=>{s()},50),!0}}catch(i){return console.error("[insertPageBreakAtBoundary] Failed to insert page break:",i),!1}},Gt=(e,n,a,t,r,s,i)=>{if(!e)return!1;if(a().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const m=Array.from(e.querySelectorAll(ie));if(n>m.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const p=window.getSelection();let h=!1,d=[],T=null;if(n===0){const w=m[0];if(!w)return console.warn("[removePageAndContent] No page break found for first page"),!1;let k=e.firstChild;for(;k&&k!==w;)d.push(k),k=k.nextSibling;T=w}else{const w=m[n-1];if(!w)return console.warn("[removePageAndContent] Page break not found"),!1;const k=m[n];let O=w.nextSibling;for(;O&&O!==k;)d.push(O),O=O.nextSibling;T=w}if(p&&p.rangeCount>0){const k=p.getRangeAt(0).startContainer;for(const O of d)if(O.contains(k)||O===k){h=!0;break}}if(T&&T.parentNode&&T.remove(),d.forEach(w=>{w.parentNode&&w.remove()}),e.querySelectorAll(ie).forEach((w,k)=>{w.setAttribute("data-page-number",String(k+2))}),h&&s&&setTimeout(()=>{s(0)},50),t){const w=e.innerHTML;t(w)}return r&&setTimeout(()=>{r(),i&&setTimeout(()=>{i()},150)},100),!0}catch(m){return console.error("[removePageAndContent] Failed to remove page:",m),!1}},Yt=200,Ft=50,dt=3,Vt=20,Wt=(e,n)=>{if(!e||e.length===0)return null;let a=0,t=null;for(let r=0;r<e.length;r++){const s=e[r];if(!s||!s.getBoundingClientRect)continue;const i=s.getBoundingClientRect().height;if(i<1)continue;if(a+i>n)return t===null?r>0?{overflowIndex:r,overflowElement:s,accumulatedHeight:a}:null:{overflowIndex:r,overflowElement:s,accumulatedHeight:a};a+=i,t=s}return null},Kt=(e,n,a,t,r,s,i)=>{if(!e||s.current)return!1;try{s.current=!0;const l=lt(n,a);let m=ut(e),p=!1,h=0;for(let d=0;d<m.length&&h<dt;d++){const T=m[d],v=Wt(T,l);if(v&&v.overflowIndex>0){let w=0;for(let S=0;S<T.length;S++){const E=T[S];E&&E.getBoundingClientRect&&(w+=E.getBoundingClientRect().height)}if(w-l<Vt)continue;const O=d+2;qt(v.overflowElement,O)&&(p=!0,h++,m=ut(e))}}if(p){if(t){const d=e.innerHTML;t(d)}setTimeout(()=>{r&&r(),h>=dt&&i&&setTimeout(()=>{s.current||i()},100)},Ft)}return p}catch(l){return console.warn("[checkAndReflow] Reflow failed:",l),!1}finally{s.current=!1}},Jt=(e,n,a=Yt)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{n.current=null,e()},a)},Xt=400,ft=(e,n)=>{if(e){e.focus();try{let a=null,t=0;if(n===0)a=e.firstChild,t=0;else{const s=e.querySelectorAll(ie)[n-1];s&&s.nextSibling&&(a=s.nextSibling,t=0)}if(a){const r=document.createRange(),s=window.getSelection();a.nodeType===Node.TEXT_NODE?r.setStart(a,t):r.setStart(a,0),r.collapse(!0),s.removeAllRanges(),s.addRange(r)}}catch(a){console.warn("[positionCursorAtPage] Failed to position cursor:",a)}}},Qt=(e,n,a,t)=>{if(!e||!n){console.warn("[scrollToPage] Missing refs");return}try{let r=null;if(a===0)r=n;else{const i=n.querySelectorAll(ie)[a-1];if(i)r=i;else{console.warn("[scrollToPage] Page break not found for page",a);return}}if(r){const s=r.getBoundingClientRect(),i=e.getBoundingClientRect(),l=e.scrollTop+(s.top-i.top);console.log("[scrollToPage] Scrolling to page",a,"scrollTop:",l),e.scrollTo({top:l,behavior:"smooth"}),setTimeout(()=>{t?t(a):ft(n,a)},Xt)}}catch(r){console.error("[scrollToPage] Error:",r)}},en=(e,n,a={},t=300)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{n.current=null,e(a)},Math.max(0,t))},tn=300,pt=(e,n,a=100)=>{const t=Oe(),r=b.useRef(null),s=b.useRef(null),i=b.useRef(e),l=b.useRef(a),m=b.useRef(!1);b.useEffect(()=>{i.current=e},[e]),b.useEffect(()=>{l.current=a},[a]),b.useEffect(()=>()=>{r.current&&clearTimeout(r.current),s.current&&clearTimeout(s.current)},[]);const p=b.useCallback((E={})=>n?.current?Ut(n.current,E):[],[n]),h=b.useCallback((E={})=>{const N=p(E);return t.updatePageBoundaries(N),N},[p,t]),d=b.useCallback(async E=>{if(!n?.current)return!1;const N=i.current||"A4",g=l.current||100;return Zt(n.current,E,N,g,t.updateContinuousContent,h)},[n,t,h]),T=b.useCallback(()=>{if(!n?.current)return;const E=i.current||"A4",N=l.current||100;Kt(n.current,E,N,t.updateContinuousContent,h,m,T)},[n,t,h]),v=b.useCallback(E=>{Jt(T,s,E)},[T]),w=b.useCallback((E={})=>{const N=typeof E.delay=="number"?E.delay:tn;en(h,r,E,N)},[h]),k=b.useCallback(E=>!E?.current||!n?.current?0:Ht(E.current,n.current),[n]),O=b.useCallback(E=>{n?.current&&ft(n.current,E)},[n]),_=b.useCallback((E,N)=>{if(!N?.current||!n?.current){console.warn("[scrollToPage] Missing refs");return}Qt(N.current,n.current,E,O)},[n,O]),S=b.useCallback(E=>n?.current?Gt(n.current,E,p,t.updateContinuousContent,h,O,T):!1,[n,p,t,h,O,T]);return{calculatePageBoundaries:p,checkAndUpdateBoundaries:w,updateBoundaries:h,getCurrentPage:k,scrollToPage:_,positionCursorAtPage:O,checkAndReflow:T,triggerAutoReflow:v,removePageAndContent:S,insertPageBreakAtBoundary:d,boundaryTimeoutRef:r,reflowTimeoutRef:s}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rn=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,a,t)=>t?t.toUpperCase():a.toLowerCase()),gt=e=>{const n=rn(e);return n.charAt(0).toUpperCase()+n.slice(1)},ht=(...e)=>e.filter((n,a,t)=>!!n&&n.trim()!==""&&t.indexOf(n)===a).join(" ").trim(),on=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var an={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=b.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:t,className:r="",children:s,iconNode:i,...l},m)=>b.createElement("svg",{ref:m,...an,width:n,height:n,stroke:e,strokeWidth:t?Number(a)*24/Number(n):a,className:ht("lucide",r),...!s&&!on(l)&&{"aria-hidden":"true"},...l},[...i.map(([p,h])=>b.createElement(p,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=(e,n)=>{const a=b.forwardRef(({className:t,...r},s)=>b.createElement(sn,{ref:s,iconNode:n,className:ht(`lucide-${nn(gt(e))}`,`lucide-${e}`,t),...r}));return a.displayName=gt(e),a};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=B("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=B("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=B("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=B("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=B("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=B("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=B("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=B("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=B("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=B("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=B("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=B("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=B("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=B("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=B("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=B("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=B("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=B("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=B("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=B("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=B("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=B("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=B("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=B("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=B("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=B("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=B("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=B("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),yt=({editorView:e,isCollapsed:n,onToggle:a,wordCount:t,pageCount:r})=>{const s=we(),{pages:i,activePage:l,continuousContent:m,editorMode:p}=s,[h,d]=b.useState(0),[T,v]=b.useState([]);b.useEffect(()=>{if(t!==void 0&&r!==void 0){if(d(t),m){const _=document.createElement("div");_.innerHTML=m;const S=_.querySelectorAll("h1, h2, h3, h4, h5, h6"),E=Array.from(S).map((N,g)=>{const U=parseInt(N.tagName.charAt(1)),Z=N.textContent.trim();return Z?{id:`heading-${g}`,level:U,text:Z,page:1}:null}).filter(Boolean);v(E)}return}let k=0;const O=[];i.forEach((_,S)=>{if(_.content){const E=document.createElement("div");E.innerHTML=_.content;const g=(E.textContent||E.innerText||"").trim().split(/\s+/).filter(Z=>Z.length>0);k+=g.length,E.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((Z,Y)=>{const J=parseInt(Z.tagName.charAt(1)),X=Z.textContent.trim();X&&O.push({id:`heading-${S}-${Y}`,level:J,text:X,page:S+1})})}}),d(k),v(O)},[i,t,r,m]);const w=r!==void 0?r:i.length;return c.jsxs("aside",{className:`sidebar ${n?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsxs("div",{className:"sidebar-title",children:[c.jsx(he,{size:18}),c.jsx("h2",{children:"Document Info"})]}),c.jsx("button",{className:"sidebar-toggle",onClick:a,"aria-label":n?"Expand sidebar":"Collapse sidebar",title:n?"Expand sidebar":"Collapse sidebar",children:n?c.jsx(un,{size:16}):c.jsx(ln,{size:16})})]}),!n&&c.jsxs("div",{className:"sidebar-content",children:[c.jsxs("div",{className:"sidebar-section",children:[c.jsx("h3",{children:"Statistics"}),c.jsxs("div",{className:"stat-item",children:[c.jsxs("div",{className:"stat-label",children:[c.jsx(dn,{size:14}),c.jsx("span",{children:"Pages:"})]}),c.jsx("span",{className:"stat-value",children:w})]}),c.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[c.jsxs("div",{className:"stat-label",children:[c.jsx(fn,{size:14}),c.jsx("span",{children:"Words:"})]}),c.jsx("span",{className:"stat-value",children:h.toLocaleString()})]}),c.jsxs("div",{className:"stat-item",children:[c.jsxs("div",{className:"stat-label",children:[c.jsx(he,{size:14}),c.jsx("span",{children:"Active Page:"})]}),c.jsx("span",{className:"stat-value",children:l+1})]})]}),T.length>0&&c.jsxs("div",{className:"sidebar-section",children:[c.jsxs("h3",{children:[c.jsx(mt,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),c.jsx("div",{className:"document-outline","data-testid":"outline",children:T.map(k=>{const O=k.level===1?pn:k.level===2?gn:hn;return c.jsxs("div",{className:`outline-item outline-level-${k.level}`,style:{marginLeft:`${(k.level-1)*12}px`},children:[c.jsx(O,{size:12,className:"outline-icon"}),c.jsx("span",{className:"outline-text",children:k.text}),c.jsxs("span",{className:"outline-page",children:["p.",k.page]})]},k.id)})})]}),c.jsxs("div",{className:"sidebar-section",children:[c.jsx("h3",{children:"Document"}),c.jsx("p",{children:"HTML Editor"}),c.jsx("p",{children:"Multi-page support"})]})]})]})};function Rn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})}function Et(e){return new Promise((n,a)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){a(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){a(new Error("Image exceeds maximum size of 5MB"));return}const r=new FileReader;r.onload=s=>{const i=s.target.result;if(i.split(",")[1].length*3/4>5*1024*1024){a(new Error("Image exceeds maximum size of 5MB"));return}try{const p=`editor-image-${Rn()}`;localStorage.setItem(p,i),n(p)}catch(p){p.name==="QuotaExceededError"?a(new Error("Storage quota exceeded")):a(p)}},r.onerror=()=>{a(new Error("Error reading image file"))},r.readAsDataURL(e)})}function In(e){return localStorage.getItem(e)}function Dn(e){localStorage.removeItem(e)}function Ln(){Object.keys(localStorage).forEach(e=>{e.startsWith("editor-image-")&&localStorage.removeItem(e)})}function zn(){return Object.keys(localStorage).filter(e=>e.startsWith("editor-image-"))}class bt{constructor(n="Editor"){this.namespace=n}_format(n,a,t){return`[${new Date().toISOString()}] [${this.namespace}] [${n}] ${a}`}info(n,a){}warn(n,a){}error(n,a){}debug(n,a){}}const vt=new bt("Editor"),me=({currentFormat:e,onFormatText:n,onAddPageBreak:a})=>{const t=async r=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(r.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(r.size>5242880){alert("Image exceeds maximum size of 5MB");return}const i=await Et(r),l=localStorage.getItem(i);l&&(document.execCommand("insertImage",!1,l),vt.info("Image inserted",{key:i}))}catch(s){vt.error("Error uploading image",s)}};return c.jsxs("div",{className:"editor-toolbar",children:[c.jsx("button",{onClick:()=>n("undo"),title:"Undo",children:c.jsx(On,{size:16})}),c.jsx("button",{onClick:()=>n("redo"),title:"Redo",children:c.jsx(_n,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("button",{onClick:()=>n("bold"),className:e.bold?"active":"",title:"Bold",children:c.jsx(cn,{size:16})}),c.jsx("button",{onClick:()=>n("italic"),className:e.italic?"active":"",title:"Italic",children:c.jsx(yn,{size:16})}),c.jsx("button",{onClick:()=>n("underline"),className:e.underline?"active":"",title:"Underline",children:c.jsx(wn,{size:16})}),c.jsx("button",{onClick:()=>n("strikethrough"),className:e.strikethrough?"active":"",title:"Strikethrough",children:c.jsx(xn,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("button",{onClick:()=>n("justifyLeft"),className:e.alignLeft?"active":"",title:"Align Left",children:c.jsx(Sn,{size:16})}),c.jsx("button",{onClick:()=>n("justifyCenter"),className:e.alignCenter?"active":"",title:"Align Center",children:c.jsx(Pn,{size:16})}),c.jsx("button",{onClick:()=>n("justifyRight"),className:e.alignRight?"active":"",title:"Align Right",children:c.jsx(kn,{size:16})}),c.jsx("button",{onClick:()=>n("justifyFull"),className:e.alignJustify?"active":"",title:"Justify",children:c.jsx(Cn,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsxs("select",{onChange:r=>n("fontName",r.target.value),defaultValue:"Arial",title:"Font Family",children:[c.jsx("option",{value:"Arial",children:"Arial"}),c.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),c.jsx("option",{value:"Courier New",children:"Courier New"}),c.jsx("option",{value:"Georgia",children:"Georgia"}),c.jsx("option",{value:"Verdana",children:"Verdana"})]}),c.jsxs("select",{onChange:r=>n("fontSize",r.target.value),defaultValue:"12px",title:"Font Size",children:[c.jsx("option",{value:"10px",children:"10"}),c.jsx("option",{value:"12px",children:"12"}),c.jsx("option",{value:"14px",children:"14"}),c.jsx("option",{value:"16px",children:"16"}),c.jsx("option",{value:"18px",children:"18"}),c.jsx("option",{value:"24px",children:"24"}),c.jsx("option",{value:"32px",children:"32"})]}),c.jsxs("select",{onChange:r=>n("formatBlock",r.target.value),value:e.headingLevel||"p",title:"Heading Level",children:[c.jsx("option",{value:"p",children:"Normal"}),c.jsx("option",{value:"h1",children:"Heading 1"}),c.jsx("option",{value:"h2",children:"Heading 2"}),c.jsx("option",{value:"h3",children:"Heading 3"}),c.jsx("option",{value:"h4",children:"Heading 4"}),c.jsx("option",{value:"h5",children:"Heading 5"}),c.jsx("option",{value:"h6",children:"Heading 6"})]}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("button",{onClick:()=>n("insertUnorderedList"),title:"Bullet List",children:c.jsx(mt,{size:16})}),c.jsx("button",{onClick:()=>n("insertOrderedList"),title:"Numbered List",children:c.jsx(bn,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("button",{onClick:()=>{const r=prompt("Enter URL:");r&&n("createLink",r)},title:"Insert Link",children:c.jsx(En,{size:16})}),c.jsx("button",{onClick:()=>n("insertHTML",'<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>'),title:"Insert Table",children:c.jsx(An,{size:16})}),a&&c.jsx("button",{onClick:a,title:"Insert Page Break",children:c.jsx(he,{size:16})}),c.jsx("input",{type:"file",accept:"image/*",onChange:r=>r.target.files[0]&&t(r.target.files[0]),style:{display:"none"},id:"image-upload"}),c.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:c.jsx(mn,{size:16})})]})};me.propTypes={currentFormat:x.shape({bold:x.bool,italic:x.bool,underline:x.bool,strikethrough:x.bool,alignLeft:x.bool,alignCenter:x.bool,alignRight:x.bool,alignJustify:x.bool,fontFamily:x.string,fontSize:x.string,headingLevel:x.string}).isRequired,onFormatText:x.func.isRequired,onAddPageBreak:x.func},me.defaultProps={onAddPageBreak:void 0};const ye=({content:e,dimensions:n,pageSize:a,pageBoundaries:t=[],editorRef:r,onInput:s,onKeyDown:i,onClick:l,onScroll:m,zoomLevel:p=100})=>{const h={top:40,bottom:40,left:40,right:40},d=p/100,T=(_,S)=>{if(!_)return!1;const E=_.getBoundingClientRect(),N=S-E.top;return N<h.top||N>E.height-h.bottom},v=_=>_?_.nodeType===Node.ELEMENT_NODE?_.tagName==="PAGE-BREAK"||_.getAttribute("data-page-break")==="true":_.parentElement&&v(_.parentElement):!1,w=_=>{const S=window.getSelection();if(!S||S.rangeCount===0)return;const E=S.getRangeAt(0),{startContainer:N,endContainer:g}=E;if((v(N)||v(g))&&(_.key.length===1||_.key==="Enter"||_.key===" "))return _.preventDefault(),!1;if(_.key==="Tab")return _.preventDefault(),document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;"),!1;if((_.key==="Backspace"||_.key==="Delete")&&(v(N)||v(g)))return _.preventDefault(),!1;i&&i(_)},k=_=>{if(!r.current)return;const S=_.target;if(v(S)){_.preventDefault();return}if(T(r.current,_.clientY)){_.preventDefault();const E=r.current.getBoundingClientRect();if(_.clientY-E.top<h.top){const g=r.current.firstElementChild;if(g&&g.tagName!=="PAGE-BREAK"){const U=document.createRange(),Z=window.getSelection();U.setStart(g,0),U.collapse(!0),Z.removeAllRanges(),Z.addRange(U)}}else{const g=r.current.lastElementChild;if(g&&g.tagName!=="PAGE-BREAK"){const U=document.createRange(),Z=window.getSelection();U.selectNodeContents(g),U.collapse(!1),Z.removeAllRanges(),Z.addRange(U)}}return}l&&l(_)},O=_=>{const S=window.getSelection();if(!S||S.rangeCount===0)return;const E=S.getRangeAt(0),{startContainer:N}=E;if(v(N))return _.preventDefault(),!1};return c.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${n.width}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh",transform:`scale(${d})`,transformOrigin:"top center",transition:"transform 0.2s ease-out"},children:c.jsx("div",{ref:r,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${n.height}px`,width:`${n.width}px`,backgroundColor:"white",padding:`${h.top}px ${h.right}px ${h.bottom}px ${h.left}px`,boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:"Arial, sans-serif",fontSize:"12px",lineHeight:"1.15",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:s,onKeyDown:w,onBeforeInput:O,onClick:k,onScroll:m,"data-testid":"continuous-editor"})})};ye.propTypes={content:x.string.isRequired,dimensions:x.shape({width:x.number.isRequired,height:x.number.isRequired}).isRequired,pageSize:x.oneOf(["A4","Letter","Legal"]).isRequired,pageBoundaries:x.arrayOf(x.shape({id:x.string.isRequired,pageNumber:x.number.isRequired,top:x.number,height:x.number})),editorRef:x.shape({current:x.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onInput:x.func.isRequired,onKeyDown:x.func,onClick:x.func,onScroll:x.func,zoomLevel:x.number},ye.defaultProps={pageBoundaries:[],onKeyDown:void 0,onClick:void 0,onScroll:void 0,zoomLevel:100};const ze=({pageBoundaries:e=[{id:"page-0",pageNumber:1}],activePage:n=0,pageSize:a="A4",zoomLevel:t=100,canZoomIn:r=!0,canZoomOut:s=!0,onNavigate:i,onAddPage:l,onDeletePage:m,onPageSizeChange:p,onZoomIn:h,onZoomOut:d,onZoomReset:T}={})=>{const v=Math.max(e?.length||0,1),w=S=>{i&&i(S)},k=()=>{l&&l()},O=S=>{if(v<=1){console.warn("[PageManager] Cannot delete the only page");return}m&&m(S)},_=S=>{p&&p(S)};return c.jsxs("div",{className:"page-manager",children:[c.jsxs("div",{className:"page-size-controls",children:[c.jsxs("label",{htmlFor:"page-size-selector",children:[c.jsx(Tn,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Size:"]}),c.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:a,onChange:S=>_(S.target.value),children:[c.jsx("option",{value:"A4",children:"A4"}),c.jsx("option",{value:"Letter",children:"Letter"}),c.jsx("option",{value:"Legal",children:"Legal"})]})]}),c.jsxs("div",{className:"zoom-controls",children:[c.jsx("button",{type:"button",className:"zoom-button",onClick:d,disabled:!s,"aria-label":"Zoom out",title:"Zoom out (Ctrl + -)",children:c.jsx(Mn,{size:14})}),c.jsxs("button",{type:"button",className:"zoom-reset-button",onClick:T,"aria-label":"Reset zoom",title:"Reset zoom to 100% (Ctrl + 0)",children:[t,"%"]}),c.jsx("button",{type:"button",className:"zoom-button",onClick:h,disabled:!r,"aria-label":"Zoom in",title:"Zoom in (Ctrl + +)",children:c.jsx(jn,{size:14})})]}),c.jsx("div",{className:"page-list",children:(e&&e.length>0?e:[{id:"page-0",pageNumber:1}]).map((S,E)=>c.jsxs("div",{className:"page-item",children:[c.jsxs("button",{type:"button",className:`page-button ${E===n?"active":""}`,onClick:()=>w(E),"aria-label":`Go to page ${E+1}`,"aria-current":E===n?"page":void 0,children:[c.jsx(he,{size:14}),c.jsxs("span",{children:["Page ",E+1]})]}),v>1&&c.jsx("button",{type:"button",className:"delete-page-button",onClick:N=>{N.stopPropagation(),O(E)},"aria-label":`Delete page ${E+1}`,title:"Delete this page and its content",children:c.jsx(Nn,{size:14})})]},S.id||`page-${E}`))}),c.jsxs("button",{type:"button",className:"add-page-button",onClick:k,"aria-label":"Add new page",title:"Add new page at end",children:[c.jsx(vn,{size:16}),c.jsx("span",{children:"Add Page"})]})]})};ze.propTypes={pageBoundaries:x.arrayOf(x.shape({id:x.string.isRequired,pageNumber:x.number.isRequired,top:x.number,height:x.number})),activePage:x.number,pageSize:x.oneOf(["A4","Letter","Legal"]),zoomLevel:x.number,canZoomIn:x.bool,canZoomOut:x.bool,onNavigate:x.func,onAddPage:x.func,onDeletePage:x.func,onPageSizeChange:x.func,onZoomIn:x.func,onZoomOut:x.func,onZoomReset:x.func},ze.defaultProps={pageBoundaries:[{id:"page-0",pageNumber:1}],activePage:0,pageSize:"A4",zoomLevel:100,canZoomIn:!0,canZoomOut:!0,onNavigate:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onZoomIn:void 0,onZoomOut:void 0,onZoomReset:void 0};const _t=b.memo(ze),Tt={A4:{width:595,height:842},Letter:{width:612,height:792},Legal:{width:612,height:1008}},$n=50,Bn=50,xt=50,Un=100,Hn=500,Ee=b.forwardRef(({pageManagerComponent:e=null,onNavigatePage:n,onAddPage:a,onDeletePage:t,onPageSizeChange:r,onChange:s,showSidebar:i=!0,showToolbar:l=!0,showPageManager:m=!0},p)=>{const h=we(),d=Oe(),{pageSize:T,continuousContent:v,pageBoundaries:w,activePage:k,zoomLevel:O}=h,_=b.useRef(null),S=b.useRef(null),{currentFormat:E,formatText:N}=at(),{checkAndUpdateBoundaries:g,getCurrentPage:U,scrollToPage:Z,updateBoundaries:Y,triggerAutoReflow:J,removePageAndContent:X,insertPageBreakAtBoundary:ne}=pt(T,S,O),re=b.useMemo(()=>Tt[T]||Tt.A4,[T]),[oe,te]=b.useState(!1),V=b.useRef(null),G=b.useRef(!1),W=b.useRef(!1),Q=b.useRef(!1),ee=b.useRef(v);b.useEffect(()=>{if(S.current){if(!Q.current){S.current.innerHTML=v,Q.current=!0,ee.current=v;const u=setTimeout(()=>{Y()},$n);return()=>clearTimeout(u)}if(ee.current!==v){if(S.current.innerHTML!==v){S.current.innerHTML=v;const H=setTimeout(()=>{if(Y(),G.current){G.current=!1;const K=Math.max(0,w.length-1);d.setActivePage(K),setTimeout(()=>{Z(K,_)},xt)}},Bn);return ee.current=v,()=>clearTimeout(H)}ee.current=v}}},[v,Y,w.length,d,Z]),b.useEffect(()=>{s&&Q.current&&s(v)},[v,s]),b.useImperativeHandle(p,()=>({getHTMLContent:()=>v,getPlainText:()=>v.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),setContent:u=>{d.updateContinuousContent(u),S.current&&(S.current.innerHTML=u,setTimeout(()=>{Y()},50))}}),[v,d,Y]),b.useEffect(()=>{const u=setTimeout(()=>{S.current&&S.current.focus()},200);return()=>clearTimeout(u)},[]);const f=b.useCallback(u=>{const H=u.currentTarget.innerHTML;d.updateContinuousContent(H),g(),J(200);const K=U(_);K!==k&&d.setActivePage(K)},[g,d,U,k,J,_]),o=b.useCallback(u=>{d.updatePageSize(u),Y({pageSize:u}),r&&r(u)},[d,Y,r]),y=b.useCallback(u=>{u<0||u>=w.length||(W.current=!0,d.setActivePage(u),Z(u,_),setTimeout(()=>{W.current=!1},Hn),n&&n(u))},[d,Z,n,w.length]),A=b.useCallback(()=>{const u=w.length+1;ne(u)&&(G.current=!0,setTimeout(()=>{if(G.current){G.current=!1;const K=Math.max(0,w.length-1);d.setActivePage(K),setTimeout(()=>{Z(K,_)},xt)}},100)),a&&a()},[w.length,ne,d,Z,a]),P=b.useCallback(()=>{const u=window.getSelection();if(u&&u.rangeCount>0){if(!S?.current)return;const be=`<page-break data-page-break="true" contenteditable="false" data-page-number="${S.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,be),setTimeout(()=>{Y();const Zn=U(_);d.setActivePage(Zn)},150)}},[Y,U,d,_]),R=b.useCallback(u=>{if(w.length<=1){console.warn("Cannot delete the only page");return}X(u)&&(d.setActivePage(0),t&&t(u))},[w.length,X,d,t]),j=b.useCallback(()=>{d.zoomIn()},[d]),C=b.useCallback(()=>{d.zoomOut()},[d]),M=b.useCallback(()=>{d.resetZoom()},[d]);b.useEffect(()=>{const u=H=>{if(!(!S.current&&!_.current)&&(H.ctrlKey||H.metaKey))switch(H.key){case"+":case"=":H.preventDefault(),j();break;case"-":case"_":H.preventDefault(),C();break;case"0":H.preventDefault(),M();break}};return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[j,C,M]);const L=b.useCallback(()=>{!_.current||!S.current||W.current||(V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{if(W.current){V.current=null;return}const u=U(_);u!==k&&u>=0&&d.setActivePage(u),V.current=null},Un))},[U,k,d]),D=b.useMemo(()=>{if(!v)return 0;const H=v.replace(/<[^>]*>/g," ").match(/\b\w+\b/g);return H?H.length:0},[v]),F=w.length||1;return b.useEffect(()=>()=>{V.current&&clearTimeout(V.current)},[]),c.jsxs("div",{className:"multi-page-editor",children:[l&&c.jsx(me,{currentFormat:E,onFormatText:N,onAddPageBreak:P}),c.jsxs("div",{className:"editor-container",children:[i&&c.jsx(yt,{editorView:null,isCollapsed:oe,onToggle:()=>te(u=>!u),wordCount:D,pageCount:F}),c.jsx("div",{className:"editor-viewport continuous-scroll",ref:_,onScroll:L,children:c.jsx(ye,{content:v,dimensions:re,pageSize:T,pageBoundaries:w,editorRef:S,onInput:f,onClick:()=>S.current?.focus(),zoomLevel:O})}),m&&c.jsx("div",{className:"page-manager-sidebar",children:e?b.cloneElement(e,{onNavigate:y,onAddPage:A,onDeletePage:R,onPageSizeChange:o,zoomLevel:O,canZoomIn:Ae(O),canZoomOut:Pe(O),onZoomIn:j,onZoomOut:C,onZoomReset:M}):c.jsx(_t,{pageBoundaries:w,activePage:k,pageSize:T,zoomLevel:O,canZoomIn:Ae(O),canZoomOut:Pe(O),onNavigate:y,onAddPage:A,onDeletePage:R,onPageSizeChange:o,onZoomIn:j,onZoomOut:C,onZoomReset:M})})]})]})});Ee.displayName="HtmlEditor",Ee.propTypes={pageManagerComponent:x.element,onNavigatePage:x.func,onAddPage:x.func,onDeletePage:x.func,onPageSizeChange:x.func,onChange:x.func,showSidebar:x.bool,showToolbar:x.bool,showPageManager:x.bool},Ee.defaultProps={pageManagerComponent:null,onNavigatePage:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onChange:void 0,showSidebar:!0,showToolbar:!0,showPageManager:!0};class $e extends b.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,a){console.error("[ErrorBoundary] Caught error:",n),console.error("[ErrorBoundary] Error info:",a),this.setState({error:n,errorInfo:a}),this.props.onError&&this.props.onError(n,a)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:c.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #f44336",borderRadius:"4px",backgroundColor:"#ffebee",color:"#c62828"},children:[c.jsx("h2",{style:{marginTop:0},children:" Something went wrong"}),c.jsx("p",{children:"The editor encountered an unexpected error and couldn't continue."}),this.props.showDetails&&this.state.error&&c.jsxs("details",{style:{marginTop:"10px",padding:"10px",backgroundColor:"white",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[c.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),c.jsxs("pre",{style:{marginTop:"10px",overflow:"auto",maxHeight:"200px"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),c.jsx("button",{onClick:this.handleReset,style:{marginTop:"15px",padding:"8px 16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Try Again"})]}):this.props.children}}$e.propTypes={children:x.node.isRequired,fallback:x.node,onError:x.func,onReset:x.func,showDetails:x.bool},$e.defaultProps={fallback:null,onError:void 0,onReset:void 0,showDetails:process.env.NODE_ENV==="development"};const qn={A4:{width:595,height:842},Letter:{width:612,height:792},Legal:{width:612,height:1008}};q.DocumentProvider=Nt,q.EditorToolbar=me,q.ErrorBoundary=$e,q.HtmlEditor=Ee,q.PAGE_DIMENSIONS=qn,q.PageManager=_t,q.PageView=ye,q.Sidebar=yt,q.clearImages=Ln,q.deleteImage=Dn,q.getAllImageKeys=zn,q.getImage=In,q.logger=bt,q.saveImage=Et,q.useContinuousReflow=pt,q.useDocument=Se,q.useDocumentActions=Oe,q.useDocumentState=we,q.useFormatting=at,Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
