(function(L,b){typeof exports=="object"&&typeof module<"u"?b(exports,require("react"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","react","uuid"],b):(L=typeof globalThis<"u"?globalThis:L||self,b(L.HTMLEditor={},L.React,L.uuid))})(this,(function(L,b,Ne){"use strict";function Bt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var be={exports:{}},ge={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qe;function Ut(){if(Qe)return ge;Qe=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(n,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var u in r)u!=="key"&&(s[u]=r[u])}else s=r;return r=s.ref,{$$typeof:e,type:n,key:a,ref:r!==void 0?r:null,props:s}}return ge.Fragment=t,ge.jsx=o,ge.jsxs=o,ge}var pe={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var et;function Ht(){return et||(et=1,process.env.NODE_ENV!=="production"&&(function(){function e(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===se?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case P:return"Profiler";case B:return"StrictMode";case O:return"Suspense";case Z:return"SuspenseList";case F:return"Activity"}if(typeof i=="object")switch(typeof i.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),i.$$typeof){case h:return"Portal";case C:return i.displayName||"Context";case k:return(i._context.displayName||"Context")+".Consumer";case l:var y=i.render;return i=i.displayName,i||(i=y.displayName||y.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case G:return y=i.displayName||null,y!==null?y:e(i.type)||"Memo";case W:y=i._payload,i=i._init;try{return e(i(y))}catch{}}return null}function t(i){return""+i}function o(i){try{t(i);var y=!1}catch{y=!0}if(y){y=console;var A=y.error,T=typeof Symbol=="function"&&Symbol.toStringTag&&i[Symbol.toStringTag]||i.constructor.name||"Object";return A.call(y,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",T),t(i)}}function n(i){if(i===N)return"<>";if(typeof i=="object"&&i!==null&&i.$$typeof===W)return"<...>";try{var y=e(i);return y?"<"+y+">":"<...>"}catch{return"<...>"}}function r(){var i=oe.A;return i===null?null:i.getOwner()}function s(){return Error("react-stack-top-frame")}function a(i){if(ce.call(i,"key")){var y=Object.getOwnPropertyDescriptor(i,"key").get;if(y&&y.isReactWarning)return!1}return i.key!==void 0}function u(i,y){function A(){K||(K=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",y))}A.isReactWarning=!0,Object.defineProperty(i,"key",{get:A,configurable:!0})}function p(){var i=e(this.type);return V[i]||(V[i]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),i=this.props.ref,i!==void 0?i:null}function g(i,y,A,T,D,M){var S=A.ref;return i={$$typeof:x,type:i,key:y,props:A,_owner:T},(S!==void 0?S:null)!==null?Object.defineProperty(i,"ref",{enumerable:!1,get:p}):Object.defineProperty(i,"ref",{enumerable:!1,value:null}),i._store={},Object.defineProperty(i._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(i,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(i,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:D}),Object.defineProperty(i,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:M}),Object.freeze&&(Object.freeze(i.props),Object.freeze(i)),i}function E(i,y,A,T,D,M){var S=y.children;if(S!==void 0)if(T)if(ae(S)){for(T=0;T<S.length;T++)m(S[T]);Object.freeze&&Object.freeze(S)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else m(S);if(ce.call(y,"key")){S=e(i);var R=Object.keys(y).filter(function(z){return z!=="key"});T=0<R.length?"{key: someKey, "+R.join(": ..., ")+": ...}":"{key: someKey}",f[S+T]||(R=0<R.length?"{"+R.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,T,S,R,S),f[S+T]=!0)}if(S=null,A!==void 0&&(o(A),S=""+A),a(y)&&(o(y.key),S=""+y.key),"key"in y){A={};for(var $ in y)$!=="key"&&(A[$]=y[$])}else A=y;return S&&u(A,typeof i=="function"?i.displayName||i.name||"Unknown":i),g(i,S,A,r(),D,M)}function m(i){d(i)?i._store&&(i._store.validated=1):typeof i=="object"&&i!==null&&i.$$typeof===W&&(i._payload.status==="fulfilled"?d(i._payload.value)&&i._payload.value._store&&(i._payload.value._store.validated=1):i._store&&(i._store.validated=1))}function d(i){return typeof i=="object"&&i!==null&&i.$$typeof===x}var w=b,x=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),C=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),se=Symbol.for("react.client.reference"),oe=w.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=Object.prototype.hasOwnProperty,ae=Array.isArray,le=console.createTask?console.createTask:function(){return null};w={react_stack_bottom_frame:function(i){return i()}};var K,V={},Q=w.react_stack_bottom_frame.bind(w,s)(),ne=le(n(s)),f={};pe.Fragment=N,pe.jsx=function(i,y,A){var T=1e4>oe.recentlyCreatedOwnerStacks++;return E(i,y,A,!1,T?Error("react-stack-top-frame"):Q,T?le(n(i)):ne)},pe.jsxs=function(i,y,A){var T=1e4>oe.recentlyCreatedOwnerStacks++;return E(i,y,A,!0,T?Error("react-stack-top-frame"):Q,T?le(n(i)):ne)}})()),pe}var tt;function Zt(){return tt||(tt=1,process.env.NODE_ENV==="production"?be.exports=Ut():be.exports=Ht()),be.exports}var c=Zt();const Oe=100,Me=50,je=200,nt=5,Re=e=>e<je,Ie=e=>e>Me,qt=96,Ee=e=>Math.round(e*qt),ve={NORMAL:{name:"Normal",label:'Normal (1")',top:1,bottom:1,left:1,right:1},NARROW:{name:"Narrow",label:'Narrow (0.5")',top:.5,bottom:.5,left:.5,right:.5},MODERATE:{name:"Moderate",label:'Moderate (1" / 0.75")',top:1,bottom:1,left:.75,right:.75},WIDE:{name:"Wide",label:'Wide (1" / 2")',top:1,bottom:1,left:2,right:2},OFFICE_2003:{name:"Office 2003",label:'Office 2003 (1" / 1.25")',top:1,bottom:1,left:1.25,right:1.25}},ie="NORMAL",rt=(e=ie)=>{const t=ve[e]||ve[ie];return{top:Ee(t.top),bottom:Ee(t.bottom),left:Ee(t.left),right:Ee(t.right)}},Gt=(e=ie)=>{const t=rt(e);return t.top+t.bottom},Ft=()=>Object.keys(ve),Yt=e=>{const t=ve[e];return t?t.label:"Unknown"},X={A4:{name:"A4",width:794,height:1123,widthMm:210,heightMm:297,widthIn:8.27,heightIn:11.69},Letter:{name:"Letter",width:816,height:1056,widthMm:216,heightMm:279,widthIn:8.5,heightIn:11},Legal:{name:"Legal",width:816,height:1344,widthMm:216,heightMm:356,widthIn:8.5,heightIn:14}},De="A4",_e=e=>{const t=X[e]||X[De];return{width:t.width,height:t.height}},Vt=e=>Object.keys(X).includes(e),Wt=()=>Object.keys(X),he=De,ue="<p><br></p>",Kt="continuous",me=(e,t=he)=>({id:Ne.v4(),index:e,size:t,content:ue,images:[],isBreakPoint:!1}),xe=e=>typeof e!="string"||e.trim()===""?ue:e,ot=(e,t=he)=>(e.length>0?e:[me(0,t)]).map((n,r)=>({id:n.id||Ne.v4(),index:r,size:n.size||t,content:xe(n.content),images:n.images||[],isBreakPoint:!!n.isBreakPoint})),Jt=(e=he)=>[{id:"page-0",pageNumber:1,top:0,height:_e(e).height}],Le=(e={})=>{const t=new Date().toISOString(),o=e.pageSize||he,n=ot(e.pages||[me(0,o)],o);return{id:Ne.v4(),title:e.title||"Untitled Document",createdAt:t,updatedAt:t,pageSize:o,pages:n,activePage:e.activePage&&e.activePage<n.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:n.length,editorMode:e.editorMode||Kt,continuousContent:e.continuousContent||ue,pageBoundaries:e.pageBoundaries||Jt(o),zoomLevel:e.zoomLevel||Oe,pageMargins:e.pageMargins||ie}},I={INITIALIZE_DOCUMENT:"INITIALIZE_DOCUMENT",UPDATE_TITLE:"UPDATE_TITLE",UPDATE_PAGE_CONTENT:"UPDATE_PAGE_CONTENT",UPDATE_PAGES:"UPDATE_PAGES",ADD_PAGE:"ADD_PAGE",DELETE_PAGE:"DELETE_PAGE",SET_ACTIVE_PAGE:"SET_ACTIVE_PAGE",UPDATE_PAGE_SIZE:"UPDATE_PAGE_SIZE",RESET_DOCUMENT:"RESET_DOCUMENT",UPDATE_CONTINUOUS_CONTENT:"UPDATE_CONTINUOUS_CONTENT",UPDATE_PAGE_BOUNDARIES:"UPDATE_PAGE_BOUNDARIES",ADD_PAGE_BREAK:"ADD_PAGE_BREAK",REMOVE_PAGE_BREAK:"REMOVE_PAGE_BREAK",SET_EDITOR_MODE:"SET_EDITOR_MODE",INSERT_PAGE_AT:"INSERT_PAGE_AT",MOVE_PAGE_TO:"MOVE_PAGE_TO",DUPLICATE_PAGE:"DUPLICATE_PAGE",SET_ZOOM_LEVEL:"SET_ZOOM_LEVEL",ZOOM_IN:"ZOOM_IN",ZOOM_OUT:"ZOOM_OUT",RESET_ZOOM:"RESET_ZOOM",UPDATE_PAGE_MARGINS:"UPDATE_PAGE_MARGINS"},Xt=(e,t)=>{const o=new Date().toISOString();switch(t.type){case I.INITIALIZE_DOCUMENT:{const{initialContent:n=ue,pageSize:r=he}=t.payload||{},s={...me(0,r),content:xe(n)};return Le({title:e.title,pageSize:r,pages:[s]})}case I.UPDATE_TITLE:return{...e,title:t.payload,updatedAt:o};case I.UPDATE_PAGE_CONTENT:{const{pageIndex:n,content:r}=t.payload;if(n<0||n>=e.pages.length)return e;const s=[...e.pages];return s[n]={...s[n],content:xe(r)},{...e,pages:s,updatedAt:o}}case I.UPDATE_PAGES:{const n=Array.isArray(t.payload)?{pages:t.payload}:t.payload||{},r=ot(n.pages||[],e.pageSize),s=Array.isArray(n.pageBreaks)?n.pageBreaks:r.slice(0,-1).map((a,u)=>({id:`auto-break-${u}`,pageNumber:u+1}));return{...e,pages:r,activePage:Math.min(e.activePage,r.length-1),pageBreaks:s,totalPages:r.length,updatedAt:o}}case I.ADD_PAGE:{const n=typeof t.payload?.index=="number"?Math.min(Math.max(t.payload.index,0),e.pages.length):e.pages.length,r=[...e.pages];r.splice(n,0,me(n,e.pageSize));const s=r.map((u,p)=>({...u,index:p,size:e.pageSize})),a=s.slice(0,-1).map((u,p)=>({id:`auto-break-${p}`,pageNumber:p+1}));return{...e,pages:s,activePage:n,pageBreaks:a,totalPages:s.length,updatedAt:o}}case I.DELETE_PAGE:{const n=t.payload;if(e.pages.length<=1)return e;const r=[...e.pages];r.splice(n,1);const s=r.map((p,g)=>({...p,index:g,size:e.pageSize}));let a=e.activePage;a>=s.length?a=s.length-1:n<=a&&a>0&&(a-=1);const u=s.slice(0,-1).map((p,g)=>({id:`auto-break-${g}`,pageNumber:g+1}));return{...e,pages:s,activePage:a,pageBreaks:u,totalPages:s.length,updatedAt:o}}case I.SET_ACTIVE_PAGE:{const n=t.payload;if(n===e.activePage)return e;const r=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;return n<0||n>=r?e:{...e,activePage:n,updatedAt:o}}case I.UPDATE_PAGE_SIZE:{const n=t.payload;if(n===e.pageSize)return e;try{_e(n)}catch{return console.warn(`Invalid page size: ${n}`),e}const r=e.pages.map((a,u)=>({...a,index:u,size:n})),s=r.slice(0,-1).map((a,u)=>({id:`auto-break-${u}`,pageNumber:u+1}));return{...e,pageSize:n,pages:r,pageBreaks:s,updatedAt:o}}case I.RESET_DOCUMENT:return Le();case I.UPDATE_CONTINUOUS_CONTENT:{const n=xe(t.payload);return n===e.continuousContent?e:{...e,continuousContent:n,updatedAt:o}}case I.UPDATE_PAGE_BOUNDARIES:{const n=Array.isArray(t.payload)?t.payload:[];if(n.length===e.pageBoundaries.length&&n.length>0&&n[0].id===e.pageBoundaries[0]?.id&&n[n.length-1].id===e.pageBoundaries[n.length-1]?.id)return e;const r=e.activePage>=n.length?Math.max(0,n.length-1):e.activePage;return{...e,pageBoundaries:n,totalPages:n.length,activePage:r,updatedAt:o}}case I.ADD_PAGE_BREAK:{const{position:n="end",pageIndex:r}=t.payload||{},s='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';let a=e.continuousContent;if(n==="end")a=a+s+"<p><br></p>";else if(typeof n=="number"){const u=a.substring(0,n),p=a.substring(n);a=u+s+p}else if(typeof r=="number"&&typeof document<"u"){const u=document.createElement("div");u.innerHTML=a;const p=u.querySelectorAll('page-break, [data-page-break="true"]');if(r===0&&p.length===0)a=a+s+"<p><br></p>";else if(r<p.length){const g=p[r],E=document.createElement("page-break");E.setAttribute("data-page-break","true"),E.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const m=document.createElement("p");m.innerHTML="<br>",g.parentNode.insertBefore(E,g.nextSibling),E.parentNode.insertBefore(m,E.nextSibling),a=u.innerHTML}else a=a+s+"<p><br></p>"}return{...e,continuousContent:a,updatedAt:o}}case I.REMOVE_PAGE_BREAK:{const{pageIndex:n}=t.payload||{};if(typeof n!="number"||typeof document>"u")return e;const r=document.createElement("div");r.innerHTML=e.continuousContent;const s=r.querySelectorAll('page-break, [data-page-break="true"]');return s[n]&&s[n].remove(),r.querySelectorAll('page-break, [data-page-break="true"]').forEach((u,p)=>{u.setAttribute("data-page-number",String(p+2))}),{...e,continuousContent:r.innerHTML,updatedAt:o}}case I.SET_EDITOR_MODE:{const n=t.payload;if(n===e.editorMode)return e;let r=e.continuousContent,s=e.pages;return n==="continuous"?r=e.pages.map(u=>u.content).filter(u=>u&&u!==ue).join(`
`)||ue:e.continuousContent&&e.continuousContent!==ue&&(s=[{...me(0,e.pageSize),content:e.continuousContent}]),{...e,editorMode:n,continuousContent:r,pages:s,updatedAt:o}}case I.SET_ZOOM_LEVEL:{const n=t.payload;return n<Me||n>je?(console.warn(`Invalid zoom level: ${n}. Must be between ${Me} and ${je}.`),e):n===e.zoomLevel?e:{...e,zoomLevel:n,updatedAt:o}}case I.ZOOM_IN:{if(!Re(e.zoomLevel))return e;const n=e.zoomLevel+nt;return{...e,zoomLevel:n,updatedAt:o}}case I.ZOOM_OUT:{if(!Ie(e.zoomLevel))return e;const n=e.zoomLevel-nt;return{...e,zoomLevel:n,updatedAt:o}}case I.RESET_ZOOM:return e.zoomLevel===Oe?e:{...e,zoomLevel:Oe,updatedAt:o};case I.UPDATE_PAGE_MARGINS:{const n=t.payload;return n===e.pageMargins?e:{...e,pageMargins:n,updatedAt:o}}default:return e}},at=b.createContext(null),Qt=({children:e,initialState:t={}})=>{const[o,n]=b.useReducer(Xt,Le(t)),r=b.useMemo(()=>({initializeDocument:a=>n({type:I.INITIALIZE_DOCUMENT,payload:a}),updateTitle:a=>n({type:I.UPDATE_TITLE,payload:a}),updatePageContent:a=>n({type:I.UPDATE_PAGE_CONTENT,payload:a}),updatePages:a=>n({type:I.UPDATE_PAGES,payload:a}),addPage:a=>n({type:I.ADD_PAGE,payload:a}),deletePage:a=>n({type:I.DELETE_PAGE,payload:a}),setActivePage:a=>n({type:I.SET_ACTIVE_PAGE,payload:a}),updatePageSize:a=>n({type:I.UPDATE_PAGE_SIZE,payload:a}),resetDocument:()=>n({type:I.RESET_DOCUMENT}),updateContinuousContent:a=>n({type:I.UPDATE_CONTINUOUS_CONTENT,payload:a}),updatePageBoundaries:a=>n({type:I.UPDATE_PAGE_BOUNDARIES,payload:a}),addPageBreak:a=>n({type:I.ADD_PAGE_BREAK,payload:a}),removePageBreak:a=>n({type:I.REMOVE_PAGE_BREAK,payload:a}),setEditorMode:a=>n({type:I.SET_EDITOR_MODE,payload:a}),insertPageAt:a=>n({type:I.INSERT_PAGE_AT,payload:a}),movePageTo:a=>n({type:I.MOVE_PAGE_TO,payload:a}),duplicatePage:a=>n({type:I.DUPLICATE_PAGE,payload:a}),setZoomLevel:a=>n({type:I.SET_ZOOM_LEVEL,payload:a}),zoomIn:()=>n({type:I.ZOOM_IN}),zoomOut:()=>n({type:I.ZOOM_OUT}),resetZoom:()=>n({type:I.RESET_ZOOM}),updatePageMargins:a=>n({type:I.UPDATE_PAGE_MARGINS,payload:a})}),[]),s=b.useMemo(()=>({state:o,actions:r,dispatch:n}),[o,r]);return c.jsx(at.Provider,{value:s,children:e})},ze=()=>{const e=b.useContext(at);if(!e)throw new Error("useDocument must be used within a DocumentProvider");return e},$e=()=>{const{state:e}=ze();return e},Be=()=>{const{actions:e}=ze();return e};var Te={exports:{}},Ae={exports:{}},U={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it;function en(){if(it)return U;it=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,g=e?Symbol.for("react.concurrent_mode"):60111,E=e?Symbol.for("react.forward_ref"):60112,m=e?Symbol.for("react.suspense"):60113,d=e?Symbol.for("react.suspense_list"):60120,w=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,h=e?Symbol.for("react.block"):60121,N=e?Symbol.for("react.fundamental"):60117,B=e?Symbol.for("react.responder"):60118,P=e?Symbol.for("react.scope"):60119;function k(l){if(typeof l=="object"&&l!==null){var O=l.$$typeof;switch(O){case t:switch(l=l.type,l){case p:case g:case n:case s:case r:case m:return l;default:switch(l=l&&l.$$typeof,l){case u:case E:case x:case w:case a:return l;default:return O}}case o:return O}}}function C(l){return k(l)===g}return U.AsyncMode=p,U.ConcurrentMode=g,U.ContextConsumer=u,U.ContextProvider=a,U.Element=t,U.ForwardRef=E,U.Fragment=n,U.Lazy=x,U.Memo=w,U.Portal=o,U.Profiler=s,U.StrictMode=r,U.Suspense=m,U.isAsyncMode=function(l){return C(l)||k(l)===p},U.isConcurrentMode=C,U.isContextConsumer=function(l){return k(l)===u},U.isContextProvider=function(l){return k(l)===a},U.isElement=function(l){return typeof l=="object"&&l!==null&&l.$$typeof===t},U.isForwardRef=function(l){return k(l)===E},U.isFragment=function(l){return k(l)===n},U.isLazy=function(l){return k(l)===x},U.isMemo=function(l){return k(l)===w},U.isPortal=function(l){return k(l)===o},U.isProfiler=function(l){return k(l)===s},U.isStrictMode=function(l){return k(l)===r},U.isSuspense=function(l){return k(l)===m},U.isValidElementType=function(l){return typeof l=="string"||typeof l=="function"||l===n||l===g||l===s||l===r||l===m||l===d||typeof l=="object"&&l!==null&&(l.$$typeof===x||l.$$typeof===w||l.$$typeof===a||l.$$typeof===u||l.$$typeof===E||l.$$typeof===N||l.$$typeof===B||l.$$typeof===P||l.$$typeof===h)},U.typeOf=k,U}var H={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var st;function tn(){return st||(st=1,process.env.NODE_ENV!=="production"&&(function(){var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,g=e?Symbol.for("react.concurrent_mode"):60111,E=e?Symbol.for("react.forward_ref"):60112,m=e?Symbol.for("react.suspense"):60113,d=e?Symbol.for("react.suspense_list"):60120,w=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,h=e?Symbol.for("react.block"):60121,N=e?Symbol.for("react.fundamental"):60117,B=e?Symbol.for("react.responder"):60118,P=e?Symbol.for("react.scope"):60119;function k(v){return typeof v=="string"||typeof v=="function"||v===n||v===g||v===s||v===r||v===m||v===d||typeof v=="object"&&v!==null&&(v.$$typeof===x||v.$$typeof===w||v.$$typeof===a||v.$$typeof===u||v.$$typeof===E||v.$$typeof===N||v.$$typeof===B||v.$$typeof===P||v.$$typeof===h)}function C(v){if(typeof v=="object"&&v!==null){var te=v.$$typeof;switch(te){case t:var fe=v.type;switch(fe){case p:case g:case n:case s:case r:case m:return fe;default:var j=fe&&fe.$$typeof;switch(j){case u:case E:case x:case w:case a:return j;default:return te}}case o:return te}}}var l=p,O=g,Z=u,G=a,W=t,F=E,se=n,oe=x,ce=w,ae=o,le=s,K=r,V=m,Q=!1;function ne(v){return Q||(Q=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),f(v)||C(v)===p}function f(v){return C(v)===g}function i(v){return C(v)===u}function y(v){return C(v)===a}function A(v){return typeof v=="object"&&v!==null&&v.$$typeof===t}function T(v){return C(v)===E}function D(v){return C(v)===n}function M(v){return C(v)===x}function S(v){return C(v)===w}function R(v){return C(v)===o}function $(v){return C(v)===s}function z(v){return C(v)===r}function Y(v){return C(v)===m}H.AsyncMode=l,H.ConcurrentMode=O,H.ContextConsumer=Z,H.ContextProvider=G,H.Element=W,H.ForwardRef=F,H.Fragment=se,H.Lazy=oe,H.Memo=ce,H.Portal=ae,H.Profiler=le,H.StrictMode=K,H.Suspense=V,H.isAsyncMode=ne,H.isConcurrentMode=f,H.isContextConsumer=i,H.isContextProvider=y,H.isElement=A,H.isForwardRef=T,H.isFragment=D,H.isLazy=M,H.isMemo=S,H.isPortal=R,H.isProfiler=$,H.isStrictMode=z,H.isSuspense=Y,H.isValidElementType=k,H.typeOf=C})()),H}var ct;function lt(){return ct||(ct=1,process.env.NODE_ENV==="production"?Ae.exports=en():Ae.exports=tn()),Ae.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ue,ut;function nn(){if(ut)return Ue;ut=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function n(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function r(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var a={},u=0;u<10;u++)a["_"+String.fromCharCode(u)]=u;var p=Object.getOwnPropertyNames(a).map(function(E){return a[E]});if(p.join("")!=="0123456789")return!1;var g={};return"abcdefghijklmnopqrst".split("").forEach(function(E){g[E]=E}),Object.keys(Object.assign({},g)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Ue=r()?Object.assign:function(s,a){for(var u,p=n(s),g,E=1;E<arguments.length;E++){u=Object(arguments[E]);for(var m in u)t.call(u,m)&&(p[m]=u[m]);if(e){g=e(u);for(var d=0;d<g.length;d++)o.call(u,g[d])&&(p[g[d]]=u[g[d]])}}return p},Ue}var He,dt;function Ze(){if(dt)return He;dt=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return He=e,He}var qe,ft;function gt(){return ft||(ft=1,qe=Function.call.bind(Object.prototype.hasOwnProperty)),qe}var Ge,pt;function rn(){if(pt)return Ge;pt=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var t=Ze(),o={},n=gt();e=function(s){var a="Warning: "+s;typeof console<"u"&&console.error(a);try{throw new Error(a)}catch{}}}function r(s,a,u,p,g){if(process.env.NODE_ENV!=="production"){for(var E in s)if(n(s,E)){var m;try{if(typeof s[E]!="function"){var d=Error((p||"React class")+": "+u+" type `"+E+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof s[E]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw d.name="Invariant Violation",d}m=s[E](a,E,p,u,null,t)}catch(x){m=x}if(m&&!(m instanceof Error)&&e((p||"React class")+": type specification of "+u+" `"+E+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof m+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),m instanceof Error&&!(m.message in o)){o[m.message]=!0;var w=g?g():"";e("Failed "+u+" type: "+m.message+(w??""))}}}}return r.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(o={})},Ge=r,Ge}var Fe,ht;function on(){if(ht)return Fe;ht=1;var e=lt(),t=nn(),o=Ze(),n=gt(),r=rn(),s=function(){};process.env.NODE_ENV!=="production"&&(s=function(u){var p="Warning: "+u;typeof console<"u"&&console.error(p);try{throw new Error(p)}catch{}});function a(){return null}return Fe=function(u,p){var g=typeof Symbol=="function"&&Symbol.iterator,E="@@iterator";function m(f){var i=f&&(g&&f[g]||f[E]);if(typeof i=="function")return i}var d="<<anonymous>>",w={array:B("array"),bigint:B("bigint"),bool:B("boolean"),func:B("function"),number:B("number"),object:B("object"),string:B("string"),symbol:B("symbol"),any:P(),arrayOf:k,element:C(),elementType:l(),instanceOf:O,node:F(),objectOf:G,oneOf:Z,oneOfType:W,shape:oe,exact:ce};function x(f,i){return f===i?f!==0||1/f===1/i:f!==f&&i!==i}function h(f,i){this.message=f,this.data=i&&typeof i=="object"?i:{},this.stack=""}h.prototype=Error.prototype;function N(f){if(process.env.NODE_ENV!=="production")var i={},y=0;function A(D,M,S,R,$,z,Y){if(R=R||d,z=z||S,Y!==o){if(p){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var te=R+":"+S;!i[te]&&y<3&&(s("You are manually calling a React.PropTypes validation function for the `"+z+"` prop on `"+R+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),i[te]=!0,y++)}}return M[S]==null?D?M[S]===null?new h("The "+$+" `"+z+"` is marked as required "+("in `"+R+"`, but its value is `null`.")):new h("The "+$+" `"+z+"` is marked as required in "+("`"+R+"`, but its value is `undefined`.")):null:f(M,S,R,$,z)}var T=A.bind(null,!1);return T.isRequired=A.bind(null,!0),T}function B(f){function i(y,A,T,D,M,S){var R=y[A],$=K(R);if($!==f){var z=V(R);return new h("Invalid "+D+" `"+M+"` of type "+("`"+z+"` supplied to `"+T+"`, expected ")+("`"+f+"`."),{expectedType:f})}return null}return N(i)}function P(){return N(a)}function k(f){function i(y,A,T,D,M){if(typeof f!="function")return new h("Property `"+M+"` of component `"+T+"` has invalid PropType notation inside arrayOf.");var S=y[A];if(!Array.isArray(S)){var R=K(S);return new h("Invalid "+D+" `"+M+"` of type "+("`"+R+"` supplied to `"+T+"`, expected an array."))}for(var $=0;$<S.length;$++){var z=f(S,$,T,D,M+"["+$+"]",o);if(z instanceof Error)return z}return null}return N(i)}function C(){function f(i,y,A,T,D){var M=i[y];if(!u(M)){var S=K(M);return new h("Invalid "+T+" `"+D+"` of type "+("`"+S+"` supplied to `"+A+"`, expected a single ReactElement."))}return null}return N(f)}function l(){function f(i,y,A,T,D){var M=i[y];if(!e.isValidElementType(M)){var S=K(M);return new h("Invalid "+T+" `"+D+"` of type "+("`"+S+"` supplied to `"+A+"`, expected a single ReactElement type."))}return null}return N(f)}function O(f){function i(y,A,T,D,M){if(!(y[A]instanceof f)){var S=f.name||d,R=ne(y[A]);return new h("Invalid "+D+" `"+M+"` of type "+("`"+R+"` supplied to `"+T+"`, expected ")+("instance of `"+S+"`."))}return null}return N(i)}function Z(f){if(!Array.isArray(f))return process.env.NODE_ENV!=="production"&&(arguments.length>1?s("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):s("Invalid argument supplied to oneOf, expected an array.")),a;function i(y,A,T,D,M){for(var S=y[A],R=0;R<f.length;R++)if(x(S,f[R]))return null;var $=JSON.stringify(f,function(Y,v){var te=V(v);return te==="symbol"?String(v):v});return new h("Invalid "+D+" `"+M+"` of value `"+String(S)+"` "+("supplied to `"+T+"`, expected one of "+$+"."))}return N(i)}function G(f){function i(y,A,T,D,M){if(typeof f!="function")return new h("Property `"+M+"` of component `"+T+"` has invalid PropType notation inside objectOf.");var S=y[A],R=K(S);if(R!=="object")return new h("Invalid "+D+" `"+M+"` of type "+("`"+R+"` supplied to `"+T+"`, expected an object."));for(var $ in S)if(n(S,$)){var z=f(S,$,T,D,M+"."+$,o);if(z instanceof Error)return z}return null}return N(i)}function W(f){if(!Array.isArray(f))return process.env.NODE_ENV!=="production"&&s("Invalid argument supplied to oneOfType, expected an instance of array."),a;for(var i=0;i<f.length;i++){var y=f[i];if(typeof y!="function")return s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+Q(y)+" at index "+i+"."),a}function A(T,D,M,S,R){for(var $=[],z=0;z<f.length;z++){var Y=f[z],v=Y(T,D,M,S,R,o);if(v==null)return null;v.data&&n(v.data,"expectedType")&&$.push(v.data.expectedType)}var te=$.length>0?", expected one of type ["+$.join(", ")+"]":"";return new h("Invalid "+S+" `"+R+"` supplied to "+("`"+M+"`"+te+"."))}return N(A)}function F(){function f(i,y,A,T,D){return ae(i[y])?null:new h("Invalid "+T+" `"+D+"` supplied to "+("`"+A+"`, expected a ReactNode."))}return N(f)}function se(f,i,y,A,T){return new h((f||"React class")+": "+i+" type `"+y+"."+A+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+T+"`.")}function oe(f){function i(y,A,T,D,M){var S=y[A],R=K(S);if(R!=="object")return new h("Invalid "+D+" `"+M+"` of type `"+R+"` "+("supplied to `"+T+"`, expected `object`."));for(var $ in f){var z=f[$];if(typeof z!="function")return se(T,D,M,$,V(z));var Y=z(S,$,T,D,M+"."+$,o);if(Y)return Y}return null}return N(i)}function ce(f){function i(y,A,T,D,M){var S=y[A],R=K(S);if(R!=="object")return new h("Invalid "+D+" `"+M+"` of type `"+R+"` "+("supplied to `"+T+"`, expected `object`."));var $=t({},y[A],f);for(var z in $){var Y=f[z];if(n(f,z)&&typeof Y!="function")return se(T,D,M,z,V(Y));if(!Y)return new h("Invalid "+D+" `"+M+"` key `"+z+"` supplied to `"+T+"`.\nBad object: "+JSON.stringify(y[A],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(f),null,"  "));var v=Y(S,z,T,D,M+"."+z,o);if(v)return v}return null}return N(i)}function ae(f){switch(typeof f){case"number":case"string":case"undefined":return!0;case"boolean":return!f;case"object":if(Array.isArray(f))return f.every(ae);if(f===null||u(f))return!0;var i=m(f);if(i){var y=i.call(f),A;if(i!==f.entries){for(;!(A=y.next()).done;)if(!ae(A.value))return!1}else for(;!(A=y.next()).done;){var T=A.value;if(T&&!ae(T[1]))return!1}}else return!1;return!0;default:return!1}}function le(f,i){return f==="symbol"?!0:i?i["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&i instanceof Symbol:!1}function K(f){var i=typeof f;return Array.isArray(f)?"array":f instanceof RegExp?"object":le(i,f)?"symbol":i}function V(f){if(typeof f>"u"||f===null)return""+f;var i=K(f);if(i==="object"){if(f instanceof Date)return"date";if(f instanceof RegExp)return"regexp"}return i}function Q(f){var i=V(f);switch(i){case"array":case"object":return"an "+i;case"boolean":case"date":case"regexp":return"a "+i;default:return i}}function ne(f){return!f.constructor||!f.constructor.name?d:f.constructor.name}return w.checkPropTypes=r,w.resetWarningCache=r.resetWarningCache,w.PropTypes=w,w},Fe}var Ye,mt;function an(){if(mt)return Ye;mt=1;var e=Ze();function t(){}function o(){}return o.resetWarningCache=t,Ye=function(){function n(a,u,p,g,E,m){if(m!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}n.isRequired=n;function r(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:r,element:n,elementType:n,instanceOf:r,node:n,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:o,resetWarningCache:t};return s.PropTypes=s,s},Ye}var yt;function sn(){if(yt)return Te.exports;if(yt=1,process.env.NODE_ENV!=="production"){var e=lt(),t=!0;Te.exports=on()(e.isElement,t)}else Te.exports=an()();return Te.exports}var cn=sn();const _=Bt(cn),Ve={"7.5pt":{pt:7.5,px:10,label:"7.5"},"9pt":{pt:9,px:12,label:"9"},"10pt":{pt:10,px:13,label:"10"},"11pt":{pt:11,px:15,label:"11"},"12pt":{pt:12,px:16,label:"12"},"14pt":{pt:14,px:19,label:"14"},"16pt":{pt:16,px:21,label:"16"},"18pt":{pt:18,px:24,label:"18"},"20pt":{pt:20,px:27,label:"20"},"22pt":{pt:22,px:29,label:"22"},"24pt":{pt:24,px:32,label:"24"},"26pt":{pt:26,px:35,label:"26"},"28pt":{pt:28,px:37,label:"28"},"36pt":{pt:36,px:48,label:"36"},"48pt":{pt:48,px:64,label:"48"},"72pt":{pt:72,px:96,label:"72"}},bt=[{value:"10px",label:"7.5",pt:7.5},{value:"12px",label:"9",pt:9},{value:"13px",label:"10",pt:10},{value:"15px",label:"11",pt:11},{value:"16px",label:"12",pt:12},{value:"19px",label:"14",pt:14},{value:"21px",label:"16",pt:16},{value:"24px",label:"18",pt:18},{value:"27px",label:"20",pt:20},{value:"32px",label:"24",pt:24},{value:"37px",label:"28",pt:28},{value:"48px",label:"36",pt:36},{value:"64px",label:"48",pt:48},{value:"96px",label:"72",pt:72}],Pe="16px",Et=e=>Math.round(e*96/72),vt=e=>Math.round(e*72/96*2)/2,ln=e=>{const t=Object.values(Ve).find(o=>o.pt===e);return t?`${t.px}px`:`${Et(e)}px`},un=e=>{const t=parseInt(e),o=Object.values(Ve).find(n=>n.px===t);return o?o.pt:vt(t)},dn=e=>{if(!e)return!1;if(e.endsWith("px")){const t=parseInt(e);return t>=8&&t<=144}if(e.endsWith("pt")){const t=parseFloat(e);return t>=6&&t<=108}return!1},fn={"10px":"1","12px":"2","13px":"2","15px":"3","16px":"3","19px":"4","21px":"4","24px":"5","27px":"5","32px":"6","37px":"6","48px":"6","64px":"7","96px":"7"},_t={bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:Pe,headingLevel:"p"},xt=()=>{const[e,t]=b.useState(_t),o=b.useCallback(a=>{t(u=>({...u,alignLeft:a==="left",alignCenter:a==="center",alignRight:a==="right",alignJustify:a==="justify"}))},[]),n=b.useCallback(a=>{try{const u=window.getSelection();if(!u||u.rangeCount===0)return!1;const p=u.getRangeAt(0);if(!p.toString())return t(E=>({...E,fontSize:a})),!1;try{const E=document.createElement("span");E.style.fontSize=a;const m=p.extractContents();return E.appendChild(m),p.insertNode(E),p.selectNodeContents(E),u.removeAllRanges(),u.addRange(p),t(d=>({...d,fontSize:a})),!0}catch{const m=fn[a]||"2";return document.execCommand("fontSize",!1,m),t(d=>({...d,fontSize:a})),!0}}catch(u){return console.warn("[useFormatting] Font size change failed:",u),!1}},[]),r=b.useCallback((a,u=null)=>{try{if(typeof document.execCommand!="function"){console.warn("[useFormatting] execCommand not supported");return}if(a==="fontSize"){n(u);return}switch(document.execCommand(a,!1,u)||console.warn(`[useFormatting] Command "${a}" failed`),a){case"bold":t(g=>({...g,bold:!g.bold}));break;case"italic":t(g=>({...g,italic:!g.italic}));break;case"underline":t(g=>({...g,underline:!g.underline}));break;case"strikethrough":t(g=>({...g,strikethrough:!g.strikethrough}));break;case"justifyLeft":o("left");break;case"justifyCenter":o("center");break;case"justifyRight":o("right");break;case"justifyFull":o("justify");break;case"fontName":t(g=>({...g,fontFamily:u}));break;case"formatBlock":t(g=>({...g,headingLevel:u}));break;default:break}}catch(p){console.warn(`[useFormatting] Error executing command "${a}":`,p)}},[n,o]),s=b.useCallback(()=>{t(_t)},[]);return{currentFormat:e,formatText:r,resetFormat:s}},de='page-break, [data-page-break="true"]',Tt=e=>X[e]||X.A4,gn=(e,t={})=>{if(!e||typeof document>"u")return[];const o=t.pageSize||"A4",n=Tt(o),r=e.querySelectorAll(de),s=[];s.push({id:"page-0",pageNumber:1,top:0,height:n.height});const a=e.getBoundingClientRect(),u=e.scrollTop;return r.forEach((p,g)=>{const m=p.getBoundingClientRect().top-a.top+u;s.push({id:`page-${g+1}`,pageNumber:g+2,top:m,height:n.height})}),s},At=(e,t=100,o=ie)=>{const n=Tt(e),r=Gt(o),s=n.height-r,a=t/100;return s/a},pn=(e,t)=>{if(!e||!t)return 0;try{const o=t.querySelectorAll(de);if(o.length===0)return 0;const n=e.getBoundingClientRect(),r=n.top+n.height/2;for(let s=o.length-1;s>=0;s--)if(o[s].getBoundingClientRect().top<r)return s+1;return 0}catch(o){return console.warn("[getCurrentPage] Failed to calculate page:",o),0}},Pt=e=>{if(!e)return[];const t=Array.from(e.children);if(t.length===0)return[];let o=[],n=[];for(const r of t)r.tagName==="PAGE-BREAK"||r.getAttribute("data-page-break")==="true"?n.length>0&&(o.push(n),n=[]):n.push(r);return n.length>0&&o.push(n),o.length===0&&t.length>0&&o.push(t.filter(r=>!(r.tagName==="PAGE-BREAK"||r.getAttribute("data-page-break")==="true"))),o},hn=e=>{if(!e||!e.getBoundingClientRect)return 0;const t=e.getBoundingClientRect();return e.tagName==="P"?t.height+16:e.tagName==="H1"||e.tagName==="H2"||e.tagName==="H3"||e.tagName==="H4"||e.tagName==="H5"||e.tagName==="H6"?t.height+20:e.tagName==="UL"||e.tagName==="OL"?t.height+16:t.height},mn=(e,t)=>{if(!e)return!1;try{const o=document.createElement("page-break");return o.setAttribute("data-page-break","true"),o.setAttribute("contenteditable","false"),o.setAttribute("data-page-number",t||"2"),e.parentNode.insertBefore(o,e),!0}catch(o){return console.warn("[insertPageBreakBefore] Failed to insert page break:",o),!1}},yn=(e,t,o,n,r,s,a)=>{if(!e)return!1;try{const p=At(o,n,r)*(t-1),g=Array.from(e.children);let E=0,m=null;for(let d=0;d<g.length;d++){const w=g[d];if(w.tagName==="PAGE-BREAK"||w.getAttribute("data-page-break")==="true")continue;const x=hn(w);if(E+x>p){m=w;break}E+=x}if(m){const d=document.createElement("page-break");if(d.setAttribute("data-page-break","true"),d.setAttribute("contenteditable","false"),d.setAttribute("data-page-number",String(t)),m.parentNode.insertBefore(d,m),s){const w=e.innerHTML;s(w)}return a&&setTimeout(()=>{a()},50),!0}else{const d=document.createElement("page-break");d.setAttribute("data-page-break","true"),d.setAttribute("contenteditable","false"),d.setAttribute("data-page-number",String(t)),e.appendChild(d);const w=document.createElement("p");if(w.innerHTML="<br>",e.appendChild(w),s){const x=e.innerHTML;s(x)}return a&&setTimeout(()=>{a()},50),!0}}catch(u){return console.error("[insertPageBreakAtBoundary] Failed to insert page break:",u),!1}},bn=(e,t,o,n,r,s,a)=>{if(!e)return!1;if(o().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const p=Array.from(e.querySelectorAll(de));if(t>p.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const g=window.getSelection();let E=!1,m=[],d=null;if(t===0){const x=p[0];if(!x)return console.warn("[removePageAndContent] No page break found for first page"),!1;let h=e.firstChild;for(;h&&h!==x;)m.push(h),h=h.nextSibling;d=x}else{const x=p[t-1];if(!x)return console.warn("[removePageAndContent] Page break not found"),!1;const h=p[t];let N=x.nextSibling;for(;N&&N!==h;)m.push(N),N=N.nextSibling;d=x}if(g&&g.rangeCount>0){const h=g.getRangeAt(0).startContainer;for(const N of m)if(N.contains(h)||N===h){E=!0;break}}if(d&&d.parentNode&&d.remove(),m.forEach(x=>{x.parentNode&&x.remove()}),e.querySelectorAll(de).forEach((x,h)=>{x.setAttribute("data-page-number",String(h+2))}),E&&s&&setTimeout(()=>{s(0)},50),n){const x=e.innerHTML;n(x)}return r&&setTimeout(()=>{r(),a&&setTimeout(()=>{a()},150)},100),!0}catch(p){return console.error("[removePageAndContent] Failed to remove page:",p),!1}},En=200,vn=50,kt=3,_n=20,St=e=>{if(!e||!e.getBoundingClientRect)return 0;const t=e.getBoundingClientRect();return e.tagName==="P"?t.height+16:e.tagName==="H1"||e.tagName==="H2"||e.tagName==="H3"||e.tagName==="H4"||e.tagName==="H5"||e.tagName==="H6"?t.height+20:e.tagName==="UL"||e.tagName==="OL"?t.height+16:t.height},xn=(e,t)=>{if(!e||e.length===0)return null;let o=0,n=null;for(let r=0;r<e.length;r++){const s=e[r];if(!s||!s.getBoundingClientRect)continue;const a=St(s);if(a<1)continue;if(o+a>t)return n===null?r>0?{overflowIndex:r,overflowElement:s,accumulatedHeight:o}:null:{overflowIndex:r,overflowElement:s,accumulatedHeight:o};o+=a,n=s}return null},Tn=(e,t,o,n,r,s,a,u)=>{if(!e||a.current)return!1;try{a.current=!0;const p=At(t,o,n);let g=Pt(e),E=!1,m=0;for(let d=0;d<g.length&&m<kt;d++){const w=g[d],x=xn(w,p);if(x&&x.overflowIndex>0){let h=0;for(let k=0;k<w.length;k++){const C=w[k];C&&C.getBoundingClientRect&&(h+=St(C))}if(h-p<_n)continue;const B=d+2;mn(x.overflowElement,B)&&(E=!0,m++,g=Pt(e))}}if(E){if(r){const d=e.innerHTML;r(d)}setTimeout(()=>{s&&s(),m>=kt&&u&&setTimeout(()=>{a.current||u()},100)},vn)}return E}catch(p){return console.warn("[checkAndReflow] Reflow failed:",p),!1}finally{a.current=!1}},An=(e,t,o=En)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{t.current=null,e()},o)},Pn=400,Ct=(e,t)=>{if(e){e.focus();try{let o=null,n=0;if(t===0)o=e.firstChild,n=0;else{const s=e.querySelectorAll(de)[t-1];s&&s.nextSibling&&(o=s.nextSibling,n=0)}if(o){const r=document.createRange(),s=window.getSelection();o.nodeType===Node.TEXT_NODE?r.setStart(o,n):r.setStart(o,0),r.collapse(!0),s.removeAllRanges(),s.addRange(r)}}catch(o){console.warn("[positionCursorAtPage] Failed to position cursor:",o)}}},kn=(e,t,o,n)=>{if(!e||!t){console.warn("[scrollToPage] Missing refs");return}try{let r=null;if(o===0)r=t;else{const a=t.querySelectorAll(de)[o-1];if(a)r=a;else{console.warn("[scrollToPage] Page break not found for page",o);return}}if(r){const s=r.getBoundingClientRect(),a=e.getBoundingClientRect(),u=e.scrollTop+(s.top-a.top);console.log("[scrollToPage] Scrolling to page",o,"scrollTop:",u),e.scrollTo({top:u,behavior:"smooth"}),setTimeout(()=>{n?n(o):Ct(t,o)},Pn)}}catch(r){console.error("[scrollToPage] Error:",r)}},Sn=(e,t,o={},n=300)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{t.current=null,e(o)},Math.max(0,n))},Cn=300,wt=(e,t,o=100,n="NARROW")=>{const r=Be(),s=b.useRef(null),a=b.useRef(null),u=b.useRef(e),p=b.useRef(o),g=b.useRef(n),E=b.useRef(!1);b.useEffect(()=>{u.current=e},[e]),b.useEffect(()=>{p.current=o},[o]),b.useEffect(()=>{g.current=n},[n]),b.useEffect(()=>()=>{s.current&&clearTimeout(s.current),a.current&&clearTimeout(a.current)},[]);const m=b.useCallback((l={})=>t?.current?gn(t.current,l):[],[t]),d=b.useCallback((l={})=>{const O=m(l);return r.updatePageBoundaries(O),O},[m,r]),w=b.useCallback(async l=>{if(!t?.current)return!1;const O=u.current||"A4",Z=p.current||100,G=g.current||"NARROW";return yn(t.current,l,O,Z,G,r.updateContinuousContent,d)},[t,r,d]),x=b.useCallback(()=>{if(!t?.current)return;const l=u.current||"A4",O=p.current||100,Z=g.current||"NARROW";Tn(t.current,l,O,Z,r.updateContinuousContent,d,E,x)},[t,r,d]),h=b.useCallback(l=>{An(x,a,l)},[x]),N=b.useCallback((l={})=>{const O=typeof l.delay=="number"?l.delay:Cn;Sn(d,s,l,O)},[d]),B=b.useCallback(l=>!l?.current||!t?.current?0:pn(l.current,t.current),[t]),P=b.useCallback(l=>{t?.current&&Ct(t.current,l)},[t]),k=b.useCallback((l,O)=>{if(!O?.current||!t?.current){console.warn("[scrollToPage] Missing refs");return}kn(O.current,t.current,l,P)},[t,P]),C=b.useCallback(l=>t?.current?bn(t.current,l,m,r.updateContinuousContent,d,P,x):!1,[t,m,r,d,P,x]);return{calculatePageBoundaries:m,checkAndUpdateBoundaries:N,updateBoundaries:d,getCurrentPage:B,scrollToPage:k,positionCursorAtPage:P,checkAndReflow:x,triggerAutoReflow:h,removePageAndContent:C,insertPageBreakAtBoundary:w,boundaryTimeoutRef:s,reflowTimeoutRef:a}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nn=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,n)=>n?n.toUpperCase():o.toLowerCase()),Nt=e=>{const t=Nn(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ot=(...e)=>e.filter((t,o,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===o).join(" ").trim(),On=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:n,className:r="",children:s,iconNode:a,...u},p)=>b.createElement("svg",{ref:p,...Mn,width:t,height:t,stroke:e,strokeWidth:n?Number(o)*24/Number(t):o,className:Ot("lucide",r),...!s&&!On(u)&&{"aria-hidden":"true"},...u},[...a.map(([g,E])=>b.createElement(g,E)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=(e,t)=>{const o=b.forwardRef(({className:n,...r},s)=>b.createElement(jn,{ref:s,iconNode:t,className:Ot(`lucide-${wn(Nt(e))}`,`lucide-${e}`,n),...r}));return o.displayName=Nt(e),o};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=q("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=q("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=q("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=q("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=q("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=q("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=q("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=q("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=q("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=q("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=q("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=q("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=q("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=q("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=q("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=q("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=q("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=q("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=q("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=q("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=q("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=q("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=q("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=q("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=q("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=q("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=q("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=q("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),jt=({editorView:e,isCollapsed:t,onToggle:o,wordCount:n,pageCount:r})=>{const s=$e(),{pages:a,activePage:u,continuousContent:p,editorMode:g}=s,[E,m]=b.useState(0),[d,w]=b.useState([]);b.useEffect(()=>{if(n!==void 0&&r!==void 0){if(m(n),p){const B=document.createElement("div");B.innerHTML=p;const P=B.querySelectorAll("h1, h2, h3, h4, h5, h6"),k=Array.from(P).map((C,l)=>{const O=parseInt(C.tagName.charAt(1)),Z=C.textContent.trim();return Z?{id:`heading-${l}`,level:O,text:Z,page:1}:null}).filter(Boolean);w(k)}return}let h=0;const N=[];a.forEach((B,P)=>{if(B.content){const k=document.createElement("div");k.innerHTML=B.content;const l=(k.textContent||k.innerText||"").trim().split(/\s+/).filter(Z=>Z.length>0);h+=l.length,k.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((Z,G)=>{const W=parseInt(Z.tagName.charAt(1)),F=Z.textContent.trim();F&&N.push({id:`heading-${P}-${G}`,level:W,text:F,page:P+1})})}}),m(h),w(N)},[a,n,r,p]);const x=r!==void 0?r:a.length;return c.jsxs("aside",{className:`sidebar ${t?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsxs("div",{className:"sidebar-title",children:[c.jsx(ke,{size:18}),c.jsx("h2",{children:"Document Info"})]}),c.jsx("button",{className:"sidebar-toggle",onClick:o,"aria-label":t?"Expand sidebar":"Collapse sidebar",title:t?"Expand sidebar":"Collapse sidebar",children:t?c.jsx(Dn,{size:16}):c.jsx(In,{size:16})})]}),!t&&c.jsxs("div",{className:"sidebar-content",children:[c.jsxs("div",{className:"sidebar-section",children:[c.jsx("h3",{children:"Statistics"}),c.jsxs("div",{className:"stat-item",children:[c.jsxs("div",{className:"stat-label",children:[c.jsx(Ln,{size:14}),c.jsx("span",{children:"Pages:"})]}),c.jsx("span",{className:"stat-value",children:x})]}),c.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[c.jsxs("div",{className:"stat-label",children:[c.jsx(zn,{size:14}),c.jsx("span",{children:"Words:"})]}),c.jsx("span",{className:"stat-value",children:E.toLocaleString()})]}),c.jsxs("div",{className:"stat-item",children:[c.jsxs("div",{className:"stat-label",children:[c.jsx(ke,{size:14}),c.jsx("span",{children:"Active Page:"})]}),c.jsx("span",{className:"stat-value",children:u+1})]})]}),d.length>0&&c.jsxs("div",{className:"sidebar-section",children:[c.jsxs("h3",{children:[c.jsx(Mt,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),c.jsx("div",{className:"document-outline","data-testid":"outline",children:d.map(h=>{const N=h.level===1?$n:h.level===2?Bn:Un;return c.jsxs("div",{className:`outline-item outline-level-${h.level}`,style:{marginLeft:`${(h.level-1)*12}px`},children:[c.jsx(N,{size:12,className:"outline-icon"}),c.jsx("span",{className:"outline-text",children:h.text}),c.jsxs("span",{className:"outline-page",children:["p.",h.page]})]},h.id)})})]}),c.jsxs("div",{className:"sidebar-section",children:[c.jsx("h3",{children:"Document"}),c.jsx("p",{children:"HTML Editor"}),c.jsx("p",{children:"Multi-page support"})]})]})]})},ir="html-editor-storage",sr=1,ee="images";function cr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function ye(){return new Promise((e,t)=>{const o=indexedDB.open(ir,sr);o.onerror=()=>{t(new Error("Failed to open IndexedDB database"))},o.onsuccess=()=>{e(o.result)},o.onupgradeneeded=n=>{const r=n.target.result;r.objectStoreNames.contains(ee)||r.createObjectStore(ee,{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1})}})}function Rt(e){return new Promise((t,o)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){o(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){o(new Error("Image exceeds maximum size of 5MB"));return}const r=new FileReader;r.onload=async s=>{const a=s.target.result,p=a.split(",")[1].length*3/4;if(p>5*1024*1024){o(new Error("Image exceeds maximum size of 5MB"));return}try{const g=await ye(),E=`editor-image-${cr()}`,d=g.transaction([ee],"readwrite").objectStore(ee),w={key:E,dataUrl:a,size:p,type:e.type,timestamp:Date.now()},x=d.add(w);x.onsuccess=()=>{g.close(),t(E)},x.onerror=()=>{g.close(),o(new Error("Failed to save image to IndexedDB"))}}catch(g){o(g)}},r.onerror=()=>{o(new Error("Error reading image file"))},r.readAsDataURL(e)})}async function It(e){try{const t=await ye();return new Promise((o,n)=>{const a=t.transaction([ee],"readonly").objectStore(ee).get(e);a.onsuccess=()=>{t.close();const u=a.result;o(u?u.dataUrl:null)},a.onerror=()=>{t.close(),n(new Error("Failed to retrieve image from IndexedDB"))}})}catch(t){return console.error("Error getting image:",t),null}}async function lr(e){try{const t=await ye();return new Promise((o,n)=>{const a=t.transaction([ee],"readwrite").objectStore(ee).delete(e);a.onsuccess=()=>{t.close(),o()},a.onerror=()=>{t.close(),n(new Error("Failed to delete image from IndexedDB"))}})}catch(t){console.error("Error deleting image:",t)}}async function ur(){try{const e=await ye();return new Promise((t,o)=>{const s=e.transaction([ee],"readwrite").objectStore(ee).clear();s.onsuccess=()=>{e.close(),t()},s.onerror=()=>{e.close(),o(new Error("Failed to clear images from IndexedDB"))}})}catch(e){console.error("Error clearing images:",e)}}async function dr(){try{const e=await ye();return new Promise((t,o)=>{const s=e.transaction([ee],"readonly").objectStore(ee).getAllKeys();s.onsuccess=()=>{e.close(),t(s.result||[])},s.onerror=()=>{e.close(),o(new Error("Failed to get image keys from IndexedDB"))}})}catch(e){return console.error("Error getting image keys:",e),[]}}class Dt{constructor(t="Editor"){this.namespace=t}_format(t,o,n){return`[${new Date().toISOString()}] [${this.namespace}] [${t}] ${o}`}info(t,o){}warn(t,o){}error(t,o){}debug(t,o){}}const Lt=new Dt("Editor"),Se=({currentFormat:e,onFormatText:t,onAddPageBreak:o})=>{const n=async r=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(r.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(r.size>5242880){alert("Image exceeds maximum size of 5MB");return}const a=await Rt(r),u=await It(a);u&&(document.execCommand("insertImage",!1,u),Lt.info("Image inserted",{key:a}))}catch(s){Lt.error("Error uploading image",s)}};return c.jsxs("div",{className:"editor-toolbar",children:[c.jsx("button",{onClick:()=>t("undo"),title:"Undo",children:c.jsx(nr,{size:16})}),c.jsx("button",{onClick:()=>t("redo"),title:"Redo",children:c.jsx(Yn,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("button",{onClick:()=>t("bold"),className:e.bold?"active":"",title:"Bold",children:c.jsx(Rn,{size:16})}),c.jsx("button",{onClick:()=>t("italic"),className:e.italic?"active":"",title:"Italic",children:c.jsx(Zn,{size:16})}),c.jsx("button",{onClick:()=>t("underline"),className:e.underline?"active":"",title:"Underline",children:c.jsx(tr,{size:16})}),c.jsx("button",{onClick:()=>t("strikethrough"),className:e.strikethrough?"active":"",title:"Strikethrough",children:c.jsx(Wn,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("button",{onClick:()=>t("justifyLeft"),className:e.alignLeft?"active":"",title:"Align Left",children:c.jsx(er,{size:16})}),c.jsx("button",{onClick:()=>t("justifyCenter"),className:e.alignCenter?"active":"",title:"Align Center",children:c.jsx(Jn,{size:16})}),c.jsx("button",{onClick:()=>t("justifyRight"),className:e.alignRight?"active":"",title:"Align Right",children:c.jsx(Xn,{size:16})}),c.jsx("button",{onClick:()=>t("justifyFull"),className:e.alignJustify?"active":"",title:"Justify",children:c.jsx(Qn,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsxs("select",{onChange:r=>t("fontName",r.target.value),defaultValue:"Arial",title:"Font Family",children:[c.jsx("option",{value:"Arial",children:"Arial"}),c.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),c.jsx("option",{value:"Courier New",children:"Courier New"}),c.jsx("option",{value:"Georgia",children:"Georgia"}),c.jsx("option",{value:"Verdana",children:"Verdana"})]}),c.jsx("select",{onChange:r=>t("fontSize",r.target.value),defaultValue:Pe,title:"Font Size",children:bt.map(({value:r,label:s,pt:a})=>c.jsx("option",{value:r,children:s},r))}),c.jsxs("select",{onChange:r=>t("formatBlock",r.target.value),value:e.headingLevel||"p",title:"Heading Level",children:[c.jsx("option",{value:"p",children:"Normal"}),c.jsx("option",{value:"h1",children:"Heading 1"}),c.jsx("option",{value:"h2",children:"Heading 2"}),c.jsx("option",{value:"h3",children:"Heading 3"}),c.jsx("option",{value:"h4",children:"Heading 4"}),c.jsx("option",{value:"h5",children:"Heading 5"}),c.jsx("option",{value:"h6",children:"Heading 6"})]}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("button",{onClick:()=>t("insertUnorderedList"),title:"Bullet List",children:c.jsx(Mt,{size:16})}),c.jsx("button",{onClick:()=>t("insertOrderedList"),title:"Numbered List",children:c.jsx(Gn,{size:16})}),c.jsx("div",{className:"toolbar-separator"}),c.jsx("button",{onClick:()=>{const r=prompt("Enter URL:");r&&t("createLink",r)},title:"Insert Link",children:c.jsx(qn,{size:16})}),c.jsx("button",{onClick:()=>t("insertHTML",'<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>'),title:"Insert Table",children:c.jsx(Kn,{size:16})}),o&&c.jsx("button",{onClick:o,title:"Insert Page Break",children:c.jsx(ke,{size:16})}),c.jsx("input",{type:"file",accept:"image/*",onChange:r=>r.target.files[0]&&n(r.target.files[0]),style:{display:"none"},id:"image-upload"}),c.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:c.jsx(Hn,{size:16})})]})};Se.propTypes={currentFormat:_.shape({bold:_.bool,italic:_.bool,underline:_.bool,strikethrough:_.bool,alignLeft:_.bool,alignCenter:_.bool,alignRight:_.bool,alignJustify:_.bool,fontFamily:_.string,fontSize:_.string,headingLevel:_.string}).isRequired,onFormatText:_.func.isRequired,onAddPageBreak:_.func},Se.defaultProps={onAddPageBreak:void 0};const Ce=({content:e,dimensions:t,pageSize:o,pageBoundaries:n=[],editorRef:r,onInput:s,onKeyDown:a,onClick:u,onScroll:p,zoomLevel:g=100,pageMargins:E=ie})=>{const m=rt(E),d=g/100,w=(P,k)=>{if(!P)return!1;const C=P.getBoundingClientRect(),l=k-C.top;return l<m.top||l>C.height-m.bottom},x=P=>P?P.nodeType===Node.ELEMENT_NODE?P.tagName==="PAGE-BREAK"||P.getAttribute("data-page-break")==="true":P.parentElement&&x(P.parentElement):!1,h=P=>{const k=window.getSelection();if(!k||k.rangeCount===0)return;const C=k.getRangeAt(0),{startContainer:l,endContainer:O}=C;if((x(l)||x(O))&&(P.key.length===1||P.key==="Enter"||P.key===" "))return P.preventDefault(),!1;if(P.key==="Tab")return P.preventDefault(),document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;"),!1;if((P.key==="Backspace"||P.key==="Delete")&&(x(l)||x(O)))return P.preventDefault(),!1;a&&a(P)},N=P=>{if(!r.current)return;const k=P.target;if(x(k)){P.preventDefault();return}if(w(r.current,P.clientY)){P.preventDefault();const C=r.current.getBoundingClientRect();if(P.clientY-C.top<m.top){const O=r.current.firstElementChild;if(O&&O.tagName!=="PAGE-BREAK"){const Z=document.createRange(),G=window.getSelection();Z.setStart(O,0),Z.collapse(!0),G.removeAllRanges(),G.addRange(Z)}}else{const O=r.current.lastElementChild;if(O&&O.tagName!=="PAGE-BREAK"){const Z=document.createRange(),G=window.getSelection();Z.selectNodeContents(O),Z.collapse(!1),G.removeAllRanges(),G.addRange(Z)}}return}u&&u(P)},B=P=>{const k=window.getSelection();if(!k||k.rangeCount===0)return;const C=k.getRangeAt(0),{startContainer:l}=C;if(x(l))return P.preventDefault(),!1};return c.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${t.width}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh",transform:`scale(${d})`,transformOrigin:"top center",transition:"transform 0.2s ease-out"},children:c.jsx("div",{ref:r,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${t.height}px`,width:`${t.width}px`,backgroundColor:"white",padding:`${m.top}px ${m.right}px ${m.bottom}px ${m.left}px`,boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:"Arial, sans-serif",fontSize:Pe,lineHeight:"1.3",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:s,onKeyDown:h,onBeforeInput:B,onClick:N,onScroll:p,"data-testid":"continuous-editor"})})};Ce.propTypes={content:_.string.isRequired,dimensions:_.shape({width:_.number.isRequired,height:_.number.isRequired}).isRequired,pageSize:_.oneOf(["A4","Letter","Legal"]).isRequired,pageBoundaries:_.arrayOf(_.shape({id:_.string.isRequired,pageNumber:_.number.isRequired,top:_.number,height:_.number})),editorRef:_.shape({current:_.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onInput:_.func.isRequired,onKeyDown:_.func,onClick:_.func,onScroll:_.func,zoomLevel:_.number,pageMargins:_.string},Ce.defaultProps={pageBoundaries:[],onKeyDown:void 0,onClick:void 0,onScroll:void 0,zoomLevel:100,pageMargins:ie};const We=({pageBoundaries:e=[{id:"page-0",pageNumber:1}],activePage:t=0,pageSize:o="A4",pageMargins:n=ie,zoomLevel:r=100,canZoomIn:s=!0,canZoomOut:a=!0,onNavigate:u,onAddPage:p,onDeletePage:g,onPageSizeChange:E,onPageMarginsChange:m,onZoomIn:d,onZoomOut:w,onZoomReset:x}={})=>{const h=Math.max(e?.length||0,1),N=l=>{u&&u(l)},B=()=>{p&&p()},P=l=>{if(h<=1){console.warn("[PageManager] Cannot delete the only page");return}g&&g(l)},k=l=>{E&&E(l)},C=l=>{m&&m(l)};return c.jsxs("div",{className:"page-manager",children:[c.jsxs("div",{className:"page-settings-group",children:[c.jsxs("div",{className:"page-settings-header",children:[c.jsx(Vn,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Settings"]}),c.jsxs("div",{className:"page-settings-controls",children:[c.jsxs("div",{className:"page-setting-item",children:[c.jsx("label",{htmlFor:"page-size-selector",children:"Size:"}),c.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:o,onChange:l=>k(l.target.value),children:[c.jsx("option",{value:"A4",children:"A4"}),c.jsx("option",{value:"Letter",children:"Letter"}),c.jsx("option",{value:"Legal",children:"Legal"})]})]}),c.jsxs("div",{className:"page-setting-item",children:[c.jsx("label",{htmlFor:"page-margins-selector",children:"Margins:"}),c.jsx("select",{id:"page-margins-selector",role:"combobox","aria-label":"Page margins selector",value:n,onChange:l=>C(l.target.value),children:Ft().map(l=>c.jsx("option",{value:l,children:Yt(l)},l))})]})]})]}),c.jsxs("div",{className:"zoom-controls-compact",children:[c.jsx("button",{type:"button",className:"zoom-button-compact",onClick:w,disabled:!a,"aria-label":"Zoom out",title:"Zoom out (Ctrl + -)",children:c.jsx(ar,{size:12})}),c.jsxs("span",{className:"zoom-level-display",children:[r,"%"]}),c.jsx("button",{type:"button",className:"zoom-button-compact",onClick:d,disabled:!s,"aria-label":"Zoom in",title:"Zoom in (Ctrl + +)",children:c.jsx(or,{size:12})}),c.jsx("button",{type:"button",className:"zoom-reset-compact",onClick:x,"aria-label":"Reset zoom",title:"Reset zoom to 100% (Ctrl + 0)",children:"Reset"})]}),c.jsx("div",{className:"page-list",children:(e&&e.length>0?e:[{id:"page-0",pageNumber:1}]).map((l,O)=>c.jsxs("div",{className:"page-item",children:[c.jsxs("button",{type:"button",className:`page-button ${O===t?"active":""}`,onClick:()=>N(O),"aria-label":`Go to page ${O+1}`,"aria-current":O===t?"page":void 0,children:[c.jsx(ke,{size:14}),c.jsxs("span",{children:["Page ",O+1]})]}),h>1&&c.jsx("button",{type:"button",className:"delete-page-button",onClick:Z=>{Z.stopPropagation(),P(O)},"aria-label":`Delete page ${O+1}`,title:"Delete this page and its content",children:c.jsx(rr,{size:14})})]},l.id||`page-${O}`))}),c.jsxs("button",{type:"button",className:"add-page-button",onClick:B,"aria-label":"Add new page",title:"Add new page at end",children:[c.jsx(Fn,{size:16}),c.jsx("span",{children:"Add Page"})]})]})};We.propTypes={pageBoundaries:_.arrayOf(_.shape({id:_.string.isRequired,pageNumber:_.number.isRequired,top:_.number,height:_.number})),activePage:_.number,pageSize:_.oneOf(["A4","Letter","Legal"]),pageMargins:_.string,zoomLevel:_.number,canZoomIn:_.bool,canZoomOut:_.bool,onNavigate:_.func,onAddPage:_.func,onDeletePage:_.func,onPageSizeChange:_.func,onPageMarginsChange:_.func,onZoomIn:_.func,onZoomOut:_.func,onZoomReset:_.func},We.defaultProps={pageBoundaries:[{id:"page-0",pageNumber:1}],activePage:0,pageSize:"A4",pageMargins:ie,zoomLevel:100,canZoomIn:!0,canZoomOut:!0,onNavigate:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onPageMarginsChange:void 0,onZoomIn:void 0,onZoomOut:void 0,onZoomReset:void 0};const zt=b.memo(We),fr=50,gr=50,$t=50,pr=100,hr=500,we=b.forwardRef(({pageManagerComponent:e=null,onNavigatePage:t,onAddPage:o,onDeletePage:n,onPageSizeChange:r,onPageMarginsChange:s,onChange:a,showSidebar:u=!0,showToolbar:p=!0,showPageManager:g=!0},E)=>{const m=$e(),d=Be(),{pageSize:w,pageMargins:x,continuousContent:h,pageBoundaries:N,activePage:B,zoomLevel:P}=m,k=b.useRef(null),C=b.useRef(null),{currentFormat:l,formatText:O}=xt(),{checkAndUpdateBoundaries:Z,getCurrentPage:G,scrollToPage:W,updateBoundaries:F,triggerAutoReflow:se,removePageAndContent:oe,insertPageBreakAtBoundary:ce}=wt(w,C,P,x),ae=b.useMemo(()=>_e(w),[w]),[le,K]=b.useState(!1),V=b.useRef(null),Q=b.useRef(!1),ne=b.useRef(!1),f=b.useRef(!1),i=b.useRef(h);b.useEffect(()=>{if(C.current){if(!f.current){C.current.innerHTML=h,f.current=!0,i.current=h;const j=setTimeout(()=>{F()},fr);return()=>clearTimeout(j)}if(i.current!==h){if(C.current.innerHTML!==h){C.current.innerHTML=h;const J=setTimeout(()=>{if(F(),Q.current){Q.current=!1;const re=Math.max(0,N.length-1);d.setActivePage(re),setTimeout(()=>{W(re,k)},$t)}},gr);return i.current=h,()=>clearTimeout(J)}i.current=h}}},[h,F,N.length,d,W]),b.useEffect(()=>{a&&f.current&&a(h)},[h,a]),b.useImperativeHandle(E,()=>({getHTMLContent:()=>h,getPlainText:()=>h.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),setContent:j=>{d.updateContinuousContent(j),C.current&&(C.current.innerHTML=j,setTimeout(()=>{F()},50))}}),[h,d,F]),b.useEffect(()=>{const j=setTimeout(()=>{C.current&&C.current.focus()},200);return()=>clearTimeout(j)},[]);const y=b.useCallback(j=>{const J=j.currentTarget.innerHTML;d.updateContinuousContent(J),Z(),se(200);const re=G(k);re!==B&&d.setActivePage(re)},[Z,d,G,B,se,k]),A=b.useCallback(j=>{d.updatePageSize(j),F({pageSize:j}),r&&r(j)},[d,F,r]),T=b.useCallback(j=>{d.updatePageMargins(j),F({pageMargins:j}),s&&s(j)},[d,F,s]),D=b.useCallback(j=>{j<0||j>=N.length||(ne.current=!0,d.setActivePage(j),W(j,k),setTimeout(()=>{ne.current=!1},hr),t&&t(j))},[d,W,t,N.length]),M=b.useCallback(()=>{const j=N.length+1;ce(j)&&(Q.current=!0,setTimeout(()=>{if(Q.current){Q.current=!1;const re=Math.max(0,N.length-1);d.setActivePage(re),setTimeout(()=>{W(re,k)},$t)}},100)),o&&o()},[N.length,ce,d,W,o]),S=b.useCallback(()=>{const j=window.getSelection();if(j&&j.rangeCount>0){if(!C?.current)return;const Je=`<page-break data-page-break="true" contenteditable="false" data-page-number="${C.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,Je),setTimeout(()=>{F();const Xe=G(k);d.setActivePage(Xe)},150)}},[F,G,d,k]),R=b.useCallback(j=>{if(N.length<=1){console.warn("Cannot delete the only page");return}oe(j)&&(d.setActivePage(0),n&&n(j))},[N.length,oe,d,n]),$=b.useCallback(()=>{d.zoomIn()},[d]),z=b.useCallback(()=>{d.zoomOut()},[d]),Y=b.useCallback(()=>{d.resetZoom()},[d]);b.useEffect(()=>{const j=J=>{if(J.ctrlKey||J.metaKey){["+","=","-","_","0"].includes(J.key)&&J.preventDefault();const re=document.activeElement===C.current,Je=document.activeElement===k.current,Xe=document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA"||document.activeElement?.isContentEditable===!1;if(re||Je||!Xe)switch(J.key){case"+":case"=":$();break;case"-":case"_":z();break;case"0":Y();break}}};return window.addEventListener("keydown",j),()=>{window.removeEventListener("keydown",j)}},[$,z,Y]);const v=b.useCallback(()=>{!k.current||!C.current||ne.current||(V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{if(ne.current){V.current=null;return}const j=G(k);j!==B&&j>=0&&d.setActivePage(j),V.current=null},pr))},[G,B,d]),te=b.useMemo(()=>{if(!h)return 0;const J=h.replace(/<[^>]*>/g," ").match(/\b\w+\b/g);return J?J.length:0},[h]),fe=N.length||1;return b.useEffect(()=>()=>{V.current&&clearTimeout(V.current)},[]),c.jsxs("div",{className:"multi-page-editor",children:[p&&c.jsx(Se,{currentFormat:l,onFormatText:O,onAddPageBreak:S}),c.jsxs("div",{className:"editor-container",children:[u&&c.jsx(jt,{editorView:null,isCollapsed:le,onToggle:()=>K(j=>!j),wordCount:te,pageCount:fe}),c.jsx("div",{className:"editor-viewport continuous-scroll",ref:k,onScroll:v,children:c.jsx(Ce,{content:h,dimensions:ae,pageSize:w,pageMargins:x,pageBoundaries:N,editorRef:C,onInput:y,onClick:()=>C.current?.focus(),zoomLevel:P})}),g&&c.jsx("div",{className:"page-manager-sidebar",children:e?b.cloneElement(e,{onNavigate:D,onAddPage:M,onDeletePage:R,onPageSizeChange:A,onPageMarginsChange:T,zoomLevel:P,canZoomIn:Re(P),canZoomOut:Ie(P),onZoomIn:$,onZoomOut:z,onZoomReset:Y}):c.jsx(zt,{pageBoundaries:N,activePage:B,pageSize:w,pageMargins:x,zoomLevel:P,canZoomIn:Re(P),canZoomOut:Ie(P),onNavigate:D,onAddPage:M,onDeletePage:R,onPageSizeChange:A,onPageMarginsChange:T,onZoomIn:$,onZoomOut:z,onZoomReset:Y})})]})]})});we.displayName="HtmlEditor",we.propTypes={pageManagerComponent:_.element,onNavigatePage:_.func,onAddPage:_.func,onDeletePage:_.func,onPageSizeChange:_.func,onPageMarginsChange:_.func,onChange:_.func,showSidebar:_.bool,showToolbar:_.bool,showPageManager:_.bool},we.defaultProps={pageManagerComponent:null,onNavigatePage:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onPageMarginsChange:void 0,onChange:void 0,showSidebar:!0,showToolbar:!0,showPageManager:!0};class Ke extends b.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,o){console.error("[ErrorBoundary] Caught error:",t),console.error("[ErrorBoundary] Error info:",o),this.setState({error:t,errorInfo:o}),this.props.onError&&this.props.onError(t,o)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:c.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #f44336",borderRadius:"4px",backgroundColor:"#ffebee",color:"#c62828"},children:[c.jsx("h2",{style:{marginTop:0},children:"⚠️ Something went wrong"}),c.jsx("p",{children:"The editor encountered an unexpected error and couldn't continue."}),this.props.showDetails&&this.state.error&&c.jsxs("details",{style:{marginTop:"10px",padding:"10px",backgroundColor:"white",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[c.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),c.jsxs("pre",{style:{marginTop:"10px",overflow:"auto",maxHeight:"200px"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),c.jsx("button",{onClick:this.handleReset,style:{marginTop:"15px",padding:"8px 16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Try Again"})]}):this.props.children}}Ke.propTypes={children:_.node.isRequired,fallback:_.node,onError:_.func,onReset:_.func,showDetails:_.bool},Ke.defaultProps={fallback:null,onError:void 0,onReset:void 0,showDetails:process.env.NODE_ENV==="development"};const mr={A4:{width:X.A4.width,height:X.A4.height},Letter:{width:X.Letter.width,height:X.Letter.height},Legal:{width:X.Legal.width,height:X.Legal.height}};L.COMMON_FONT_SIZES=bt,L.DEFAULT_FONT_SIZE=Pe,L.DEFAULT_PAGE_SIZE=De,L.DocumentProvider=Qt,L.EditorToolbar=Se,L.ErrorBoundary=Ke,L.FONT_SIZE_MAP=Ve,L.HtmlEditor=we,L.PAGE_DIMENSIONS=mr,L.PAGE_SIZES=X,L.PageManager=zt,L.PageView=Ce,L.Sidebar=jt,L.clearImages=ur,L.deleteImage=lr,L.getAllImageKeys=dr,L.getAvailablePageSizes=Wt,L.getImage=It,L.getPageDimensions=_e,L.getPixelValue=ln,L.getPointValue=un,L.isValidFontSize=dn,L.isValidPageSize=Vt,L.logger=Dt,L.pixelsToPoints=vt,L.pointsToPixels=Et,L.saveImage=Rt,L.useContinuousReflow=wt,L.useDocument=ze,L.useDocumentActions=Be,L.useDocumentState=$e,L.useFormatting=xt,Object.defineProperty(L,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
