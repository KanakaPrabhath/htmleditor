(function($,m){typeof exports=="object"&&typeof module<"u"?m(exports,require("react"),require("uuid"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","uuid","react-dom"],m):($=typeof globalThis<"u"?globalThis:$||self,m($.HTMLEditor={},$.React,$.uuid,$.ReactDOM))})(this,(function($,m,Ue,yn){"use strict";function bn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ke={exports:{}},be={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yt;function En(){if(yt)return be;yt=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(n,s,a){var r=null;if(a!==void 0&&(r=""+a),s.key!==void 0&&(r=""+s.key),"key"in s){a={};for(var i in s)i!=="key"&&(a[i]=s[i])}else a=s;return s=a.ref,{$$typeof:e,type:n,key:r,ref:s!==void 0?s:null,props:a}}return be.Fragment=t,be.jsx=o,be.jsxs=o,be}var Ee={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bt;function vn(){return bt||(bt=1,process.env.NODE_ENV!=="production"&&(function(){function e(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===H?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case E:return"Fragment";case z:return"Profiler";case N:return"StrictMode";case T:return"Suspense";case y:return"SuspenseList";case _:return"Activity"}if(typeof c=="object")switch(typeof c.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),c.$$typeof){case d:return"Portal";case D:return c.displayName||"Context";case P:return(c._context.displayName||"Context")+".Consumer";case l:var k=c.render;return c=c.displayName,c||(c=k.displayName||k.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case S:return k=c.displayName||null,k!==null?k:e(c.type)||"Memo";case I:k=c._payload,c=c._init;try{return e(c(k))}catch{}}return null}function t(c){return""+c}function o(c){try{t(c);var k=!1}catch{k=!0}if(k){k=console;var R=k.error,M=typeof Symbol=="function"&&Symbol.toStringTag&&c[Symbol.toStringTag]||c.constructor.name||"Object";return R.call(k,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",M),t(c)}}function n(c){if(c===E)return"<>";if(typeof c=="object"&&c!==null&&c.$$typeof===I)return"<...>";try{var k=e(c);return k?"<"+k+">":"<...>"}catch{return"<...>"}}function s(){var c=W.A;return c===null?null:c.getOwner()}function a(){return Error("react-stack-top-frame")}function r(c){if(J.call(c,"key")){var k=Object.getOwnPropertyDescriptor(c,"key").get;if(k&&k.isReactWarning)return!1}return c.key!==void 0}function i(c,k){function R(){te||(te=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",k))}R.isReactWarning=!0,Object.defineProperty(c,"key",{get:R,configurable:!0})}function g(){var c=e(this.type);return F[c]||(F[c]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),c=this.props.ref,c!==void 0?c:null}function b(c,k,R,M,Y,G){var L=R.ref;return c={$$typeof:O,type:c,key:k,props:R,_owner:M},(L!==void 0?L:null)!==null?Object.defineProperty(c,"ref",{enumerable:!1,get:g}):Object.defineProperty(c,"ref",{enumerable:!1,value:null}),c._store={},Object.defineProperty(c._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(c,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(c,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:Y}),Object.defineProperty(c,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:G}),Object.freeze&&(Object.freeze(c.props),Object.freeze(c)),c}function f(c,k,R,M,Y,G){var L=k.children;if(L!==void 0)if(M)if(U(L)){for(M=0;M<L.length;M++)h(L[M]);Object.freeze&&Object.freeze(L)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else h(L);if(J.call(k,"key")){L=e(c);var q=Object.keys(k).filter(function(V){return V!=="key"});M=0<q.length?"{key: someKey, "+q.join(": ..., ")+": ...}":"{key: someKey}",v[L+M]||(q=0<q.length?"{"+q.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,M,L,q,L),v[L+M]=!0)}if(L=null,R!==void 0&&(o(R),L=""+R),r(k)&&(o(k.key),L=""+k.key),"key"in k){R={};for(var K in k)K!=="key"&&(R[K]=k[K])}else R=k;return L&&i(R,typeof c=="function"?c.displayName||c.name||"Unknown":c),b(c,L,R,s(),Y,G)}function h(c){p(c)?c._store&&(c._store.validated=1):typeof c=="object"&&c!==null&&c.$$typeof===I&&(c._payload.status==="fulfilled"?p(c._payload.value)&&c._payload.value._store&&(c._payload.value._store.validated=1):c._store&&(c._store.validated=1))}function p(c){return typeof c=="object"&&c!==null&&c.$$typeof===O}var w=m,O=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),D=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),H=Symbol.for("react.client.reference"),W=w.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=Object.prototype.hasOwnProperty,U=Array.isArray,oe=console.createTask?console.createTask:function(){return null};w={react_stack_bottom_frame:function(c){return c()}};var te,F={},Z=w.react_stack_bottom_frame.bind(w,a)(),ne=oe(n(a)),v={};Ee.Fragment=E,Ee.jsx=function(c,k,R){var M=1e4>W.recentlyCreatedOwnerStacks++;return f(c,k,R,!1,M?Error("react-stack-top-frame"):Z,M?oe(n(c)):ne)},Ee.jsxs=function(c,k,R){var M=1e4>W.recentlyCreatedOwnerStacks++;return f(c,k,R,!0,M?Error("react-stack-top-frame"):Z,M?oe(n(c)):ne)}})()),Ee}var Et;function Tn(){return Et||(Et=1,process.env.NODE_ENV==="production"?ke.exports=En():ke.exports=vn()),ke.exports}var u=Tn();const Fe=100,qe=50,We=200,vt=5,Ze=e=>e<We,Ye=e=>e>qe,xn=96,Se=e=>Math.round(e*xn),we={NORMAL:{name:"Normal",label:'Normal (1")',top:1,bottom:1,left:1,right:1},NARROW:{name:"Narrow",label:'Narrow (0.5")',top:.5,bottom:.5,left:.5,right:.5},MODERATE:{name:"Moderate",label:'Moderate (1" / 0.75")',top:1,bottom:1,left:.75,right:.75},WIDE:{name:"Wide",label:'Wide (1" / 2")',top:1,bottom:1,left:2,right:2},OFFICE_2003:{name:"Office 2003",label:'Office 2003 (1" / 1.25")',top:1,bottom:1,left:1.25,right:1.25}},de="NORMAL",Tt=(e=de)=>{const t=we[e]||we[de];return{top:Se(t.top),bottom:Se(t.bottom),left:Se(t.left),right:Se(t.right)}},_n=(e=de)=>{const t=Tt(e);return t.top+t.bottom},An=()=>Object.keys(we),Pn=e=>{const t=we[e];return t?t.label:"Unknown"},ie={A4:{name:"A4",width:794,height:1123,widthMm:210,heightMm:297,widthIn:8.27,heightIn:11.69},Letter:{name:"Letter",width:816,height:1056,widthMm:216,heightMm:279,widthIn:8.5,heightIn:11},Legal:{name:"Legal",width:816,height:1344,widthMm:216,heightMm:356,widthIn:8.5,heightIn:14}},Ve="A4",Oe=e=>{const t=ie[e]||ie[Ve];return{width:t.width,height:t.height}},kn=e=>Object.keys(ie).includes(e),Sn=()=>Object.keys(ie),ve=Ve,pe="<p><br></p>",wn="continuous",Te=(e,t=ve)=>({id:Ue.v4(),index:e,size:t,content:pe,images:[],isBreakPoint:!1}),Ce=e=>typeof e!="string"||e.trim()===""?pe:e,xt=(e,t=ve)=>(e.length>0?e:[Te(0,t)]).map((n,s)=>({id:n.id||Ue.v4(),index:s,size:n.size||t,content:Ce(n.content),images:n.images||[],isBreakPoint:!!n.isBreakPoint})),On=(e=ve)=>[{id:"page-0",pageNumber:1,top:0,height:Oe(e).height}],Ke=(e={})=>{const t=new Date().toISOString(),o=e.pageSize||ve,n=xt(e.pages||[Te(0,o)],o);return{id:Ue.v4(),title:e.title||"Untitled Document",createdAt:t,updatedAt:t,pageSize:o,pages:n,activePage:e.activePage&&e.activePage<n.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:n.length,editorMode:e.editorMode||wn,continuousContent:e.continuousContent||pe,pageBoundaries:e.pageBoundaries||On(o),zoomLevel:e.zoomLevel||Fe,pageMargins:e.pageMargins||de,undoStack:[],redoStack:[],canUndo:!1,canRedo:!1}},B={INITIALIZE_DOCUMENT:"INITIALIZE_DOCUMENT",UPDATE_TITLE:"UPDATE_TITLE",UPDATE_PAGE_CONTENT:"UPDATE_PAGE_CONTENT",UPDATE_PAGES:"UPDATE_PAGES",ADD_PAGE:"ADD_PAGE",DELETE_PAGE:"DELETE_PAGE",SET_ACTIVE_PAGE:"SET_ACTIVE_PAGE",UPDATE_PAGE_SIZE:"UPDATE_PAGE_SIZE",RESET_DOCUMENT:"RESET_DOCUMENT",UPDATE_CONTINUOUS_CONTENT:"UPDATE_CONTINUOUS_CONTENT",UPDATE_PAGE_BOUNDARIES:"UPDATE_PAGE_BOUNDARIES",ADD_PAGE_BREAK:"ADD_PAGE_BREAK",REMOVE_PAGE_BREAK:"REMOVE_PAGE_BREAK",SET_EDITOR_MODE:"SET_EDITOR_MODE",INSERT_PAGE_AT:"INSERT_PAGE_AT",MOVE_PAGE_TO:"MOVE_PAGE_TO",DUPLICATE_PAGE:"DUPLICATE_PAGE",SET_ZOOM_LEVEL:"SET_ZOOM_LEVEL",ZOOM_IN:"ZOOM_IN",ZOOM_OUT:"ZOOM_OUT",RESET_ZOOM:"RESET_ZOOM",UPDATE_PAGE_MARGINS:"UPDATE_PAGE_MARGINS",RECORD_OPERATION:"RECORD_OPERATION",UNDO:"UNDO",REDO:"REDO",CLEAR_UNDO_REDO:"CLEAR_UNDO_REDO"},Xe=(e,t)=>{const o=new Date().toISOString();switch(t.type){case B.INITIALIZE_DOCUMENT:{const{initialContent:n=pe,pageSize:s=ve}=t.payload||{},a={...Te(0,s),content:Ce(n)};return Ke({title:e.title,pageSize:s,pages:[a]})}case B.UPDATE_TITLE:return{...e,title:t.payload,updatedAt:o};case B.UPDATE_PAGE_CONTENT:{const{pageIndex:n,content:s}=t.payload;if(n<0||n>=e.pages.length)return e;const a=[...e.pages];return a[n]={...a[n],content:Ce(s)},{...e,pages:a,updatedAt:o}}case B.UPDATE_PAGES:{const n=Array.isArray(t.payload)?{pages:t.payload}:t.payload||{},s=xt(n.pages||[],e.pageSize),a=Array.isArray(n.pageBreaks)?n.pageBreaks:s.slice(0,-1).map((r,i)=>({id:`auto-break-${i}`,pageNumber:i+1}));return{...e,pages:s,activePage:Math.min(e.activePage,s.length-1),pageBreaks:a,totalPages:s.length,updatedAt:o}}case B.ADD_PAGE:{const n=typeof t.payload?.index=="number"?Math.min(Math.max(t.payload.index,0),e.pages.length):e.pages.length,s=[...e.pages];s.splice(n,0,Te(n,e.pageSize));const a=s.map((i,g)=>({...i,index:g,size:e.pageSize})),r=a.slice(0,-1).map((i,g)=>({id:`auto-break-${g}`,pageNumber:g+1}));return{...e,pages:a,activePage:n,pageBreaks:r,totalPages:a.length,updatedAt:o}}case B.DELETE_PAGE:{const n=t.payload;if(e.pages.length<=1)return e;const s=[...e.pages];s.splice(n,1);const a=s.map((g,b)=>({...g,index:b,size:e.pageSize}));let r=e.activePage;r>=a.length?r=a.length-1:n<=r&&r>0&&(r-=1);const i=a.slice(0,-1).map((g,b)=>({id:`auto-break-${b}`,pageNumber:b+1}));return{...e,pages:a,activePage:r,pageBreaks:i,totalPages:a.length,updatedAt:o}}case B.SET_ACTIVE_PAGE:{const n=t.payload;if(n===e.activePage)return e;const s=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;return n<0||n>=s?e:{...e,activePage:n,updatedAt:o}}case B.UPDATE_PAGE_SIZE:{const n=t.payload;if(n===e.pageSize)return e;try{Oe(n)}catch{return console.warn(`Invalid page size: ${n}`),e}const s=e.pages.map((r,i)=>({...r,index:i,size:n})),a=s.slice(0,-1).map((r,i)=>({id:`auto-break-${i}`,pageNumber:i+1}));return{...e,pageSize:n,pages:s,pageBreaks:a,updatedAt:o}}case B.RESET_DOCUMENT:return Ke();case B.UPDATE_CONTINUOUS_CONTENT:{const n=Ce(t.payload);return n===e.continuousContent?e:{...e,continuousContent:n,updatedAt:o}}case B.UPDATE_PAGE_BOUNDARIES:{const n=Array.isArray(t.payload)?t.payload:[];if(n.length===e.pageBoundaries.length&&n.length>0&&n[0].id===e.pageBoundaries[0]?.id&&n[n.length-1].id===e.pageBoundaries[n.length-1]?.id)return e;const s=e.activePage>=n.length?Math.max(0,n.length-1):e.activePage;return{...e,pageBoundaries:n,totalPages:n.length,activePage:s,updatedAt:o}}case B.ADD_PAGE_BREAK:{const{position:n="end",pageIndex:s}=t.payload||{},a='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';let r=e.continuousContent;if(n==="end")r=r+a+"<p><br></p>";else if(typeof n=="number"){const i=r.substring(0,n),g=r.substring(n);r=i+a+g}else if(typeof s=="number"&&typeof document<"u"){const i=document.createElement("div");i.innerHTML=r;const g=i.querySelectorAll('page-break, [data-page-break="true"]');if(s===0&&g.length===0)r=r+a+"<p><br></p>";else if(s<g.length){const b=g[s],f=document.createElement("page-break");f.setAttribute("data-page-break","true"),f.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const h=document.createElement("p");h.innerHTML="<br>",b.parentNode.insertBefore(f,b.nextSibling),f.parentNode.insertBefore(h,f.nextSibling),r=i.innerHTML}else r=r+a+"<p><br></p>"}return{...e,continuousContent:r,updatedAt:o}}case B.REMOVE_PAGE_BREAK:{const{pageIndex:n}=t.payload||{};if(typeof n!="number"||typeof document>"u")return e;const s=document.createElement("div");s.innerHTML=e.continuousContent;const a=s.querySelectorAll('page-break, [data-page-break="true"]');return a[n]&&a[n].remove(),s.querySelectorAll('page-break, [data-page-break="true"]').forEach((i,g)=>{i.setAttribute("data-page-number",String(g+2))}),{...e,continuousContent:s.innerHTML,updatedAt:o}}case B.SET_EDITOR_MODE:{const n=t.payload;if(n===e.editorMode)return e;let s=e.continuousContent,a=e.pages;return n==="continuous"?s=e.pages.map(i=>i.content).filter(i=>i&&i!==pe).join(`
`)||pe:e.continuousContent&&e.continuousContent!==pe&&(a=[{...Te(0,e.pageSize),content:e.continuousContent}]),{...e,editorMode:n,continuousContent:s,pages:a,updatedAt:o}}case B.SET_ZOOM_LEVEL:{const n=t.payload;return n<qe||n>We?(console.warn(`Invalid zoom level: ${n}. Must be between ${qe} and ${We}.`),e):n===e.zoomLevel?e:{...e,zoomLevel:n,updatedAt:o}}case B.ZOOM_IN:{if(!Ze(e.zoomLevel))return e;const n=e.zoomLevel+vt;return{...e,zoomLevel:n,updatedAt:o}}case B.ZOOM_OUT:{if(!Ye(e.zoomLevel))return e;const n=e.zoomLevel-vt;return{...e,zoomLevel:n,updatedAt:o}}case B.RESET_ZOOM:return e.zoomLevel===Fe?e:{...e,zoomLevel:Fe,updatedAt:o};case B.UPDATE_PAGE_MARGINS:{const n=t.payload;return n===e.pageMargins?e:{...e,pageMargins:n,updatedAt:o}}case B.RECORD_OPERATION:{const{operation:n,inverseOperation:s}=t.payload;return{...e,undoStack:[...e.undoStack,{operation:n,inverseOperation:s}],redoStack:[],canUndo:!0,canRedo:!1,updatedAt:o}}case B.UNDO:{if(e.undoStack.length===0)return e;const n=e.undoStack[e.undoStack.length-1],s=e.undoStack.slice(0,-1);let a=e;return n.inverseOperation&&(a=Xe(e,n.inverseOperation)),{...a,undoStack:s,redoStack:[...e.redoStack,n],canUndo:s.length>0,canRedo:!0,updatedAt:o}}case B.REDO:{if(e.redoStack.length===0)return e;const n=e.redoStack[e.redoStack.length-1],s=e.redoStack.slice(0,-1);let a=e;return n.operation&&(a=Xe(e,n.operation)),{...a,undoStack:[...e.undoStack,n],redoStack:s,canUndo:!0,canRedo:s.length>0,updatedAt:o}}case B.CLEAR_UNDO_REDO:return{...e,undoStack:[],redoStack:[],canUndo:!1,canRedo:!1,updatedAt:o};case"IMAGE_ALIGN":{const{element:n,state:s}=t.payload;return n&&s&&(n.style.float=s.float,n.style.margin=s.margin,n.style.display=s.display,s.width&&(n.style.width=s.width),s.height&&(n.style.height=s.height)),e}case"IMAGE_DELETE":{const{element:n}=t.payload;return n&&n.parentNode&&n.parentNode.removeChild(n),e}case"IMAGE_REINSERT":{const{state:n}=t.payload;return n&&n.parent&&n.element&&(n.nextSibling?n.parent.insertBefore(n.element,n.nextSibling):n.parent.appendChild(n.element)),e}case"IMAGE_ASPECT_RATIO":return e;case"IMAGE_RESIZE":{const{element:n,state:s}=t.payload;return n&&s&&(s.width&&(n.style.width=s.width),s.height&&(n.style.height=s.height)),e}default:return e}},_t=m.createContext(null),Cn=({children:e,initialState:t={}})=>{const[o,n]=m.useReducer(Xe,Ke(t)),s=m.useMemo(()=>({initializeDocument:r=>n({type:B.INITIALIZE_DOCUMENT,payload:r}),updateTitle:r=>n({type:B.UPDATE_TITLE,payload:r}),updatePageContent:r=>n({type:B.UPDATE_PAGE_CONTENT,payload:r}),updatePages:r=>n({type:B.UPDATE_PAGES,payload:r}),addPage:r=>n({type:B.ADD_PAGE,payload:r}),deletePage:r=>n({type:B.DELETE_PAGE,payload:r}),setActivePage:r=>n({type:B.SET_ACTIVE_PAGE,payload:r}),updatePageSize:r=>n({type:B.UPDATE_PAGE_SIZE,payload:r}),resetDocument:()=>n({type:B.RESET_DOCUMENT}),updateContinuousContent:r=>n({type:B.UPDATE_CONTINUOUS_CONTENT,payload:r}),updatePageBoundaries:r=>n({type:B.UPDATE_PAGE_BOUNDARIES,payload:r}),addPageBreak:r=>n({type:B.ADD_PAGE_BREAK,payload:r}),removePageBreak:r=>n({type:B.REMOVE_PAGE_BREAK,payload:r}),setEditorMode:r=>n({type:B.SET_EDITOR_MODE,payload:r}),insertPageAt:r=>n({type:B.INSERT_PAGE_AT,payload:r}),movePageTo:r=>n({type:B.MOVE_PAGE_TO,payload:r}),duplicatePage:r=>n({type:B.DUPLICATE_PAGE,payload:r}),setZoomLevel:r=>n({type:B.SET_ZOOM_LEVEL,payload:r}),zoomIn:()=>n({type:B.ZOOM_IN}),zoomOut:()=>n({type:B.ZOOM_OUT}),resetZoom:()=>n({type:B.RESET_ZOOM}),updatePageMargins:r=>n({type:B.UPDATE_PAGE_MARGINS,payload:r}),recordOperation:(r,i)=>n({type:B.RECORD_OPERATION,payload:{operation:r,inverseOperation:i}}),undo:()=>n({type:B.UNDO}),redo:()=>n({type:B.REDO}),clearUndoRedo:()=>n({type:B.CLEAR_UNDO_REDO})}),[]),a=m.useMemo(()=>({state:o,actions:s,dispatch:n}),[o,s]);return u.jsx(_t.Provider,{value:a,children:e})},Je=()=>{const e=m.useContext(_t);if(!e)throw new Error("useDocument must be used within a DocumentProvider");return e},Qe=()=>{const{state:e}=Je();return e},me=()=>{const{actions:e}=Je();return e};var Ne={exports:{}},Me={exports:{}},Q={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At;function Nn(){if(At)return Q;At=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,r=e?Symbol.for("react.provider"):60109,i=e?Symbol.for("react.context"):60110,g=e?Symbol.for("react.async_mode"):60111,b=e?Symbol.for("react.concurrent_mode"):60111,f=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,w=e?Symbol.for("react.memo"):60115,O=e?Symbol.for("react.lazy"):60116,d=e?Symbol.for("react.block"):60121,E=e?Symbol.for("react.fundamental"):60117,N=e?Symbol.for("react.responder"):60118,z=e?Symbol.for("react.scope"):60119;function P(l){if(typeof l=="object"&&l!==null){var T=l.$$typeof;switch(T){case t:switch(l=l.type,l){case g:case b:case n:case a:case s:case h:return l;default:switch(l=l&&l.$$typeof,l){case i:case f:case O:case w:case r:return l;default:return T}}case o:return T}}}function D(l){return P(l)===b}return Q.AsyncMode=g,Q.ConcurrentMode=b,Q.ContextConsumer=i,Q.ContextProvider=r,Q.Element=t,Q.ForwardRef=f,Q.Fragment=n,Q.Lazy=O,Q.Memo=w,Q.Portal=o,Q.Profiler=a,Q.StrictMode=s,Q.Suspense=h,Q.isAsyncMode=function(l){return D(l)||P(l)===g},Q.isConcurrentMode=D,Q.isContextConsumer=function(l){return P(l)===i},Q.isContextProvider=function(l){return P(l)===r},Q.isElement=function(l){return typeof l=="object"&&l!==null&&l.$$typeof===t},Q.isForwardRef=function(l){return P(l)===f},Q.isFragment=function(l){return P(l)===n},Q.isLazy=function(l){return P(l)===O},Q.isMemo=function(l){return P(l)===w},Q.isPortal=function(l){return P(l)===o},Q.isProfiler=function(l){return P(l)===a},Q.isStrictMode=function(l){return P(l)===s},Q.isSuspense=function(l){return P(l)===h},Q.isValidElementType=function(l){return typeof l=="string"||typeof l=="function"||l===n||l===b||l===a||l===s||l===h||l===p||typeof l=="object"&&l!==null&&(l.$$typeof===O||l.$$typeof===w||l.$$typeof===r||l.$$typeof===i||l.$$typeof===f||l.$$typeof===E||l.$$typeof===N||l.$$typeof===z||l.$$typeof===d)},Q.typeOf=P,Q}var ee={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pt;function Mn(){return Pt||(Pt=1,process.env.NODE_ENV!=="production"&&(function(){var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,r=e?Symbol.for("react.provider"):60109,i=e?Symbol.for("react.context"):60110,g=e?Symbol.for("react.async_mode"):60111,b=e?Symbol.for("react.concurrent_mode"):60111,f=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,w=e?Symbol.for("react.memo"):60115,O=e?Symbol.for("react.lazy"):60116,d=e?Symbol.for("react.block"):60121,E=e?Symbol.for("react.fundamental"):60117,N=e?Symbol.for("react.responder"):60118,z=e?Symbol.for("react.scope"):60119;function P(C){return typeof C=="string"||typeof C=="function"||C===n||C===b||C===a||C===s||C===h||C===p||typeof C=="object"&&C!==null&&(C.$$typeof===O||C.$$typeof===w||C.$$typeof===r||C.$$typeof===i||C.$$typeof===f||C.$$typeof===E||C.$$typeof===N||C.$$typeof===z||C.$$typeof===d)}function D(C){if(typeof C=="object"&&C!==null){var se=C.$$typeof;switch(se){case t:var he=C.type;switch(he){case g:case b:case n:case a:case s:case h:return he;default:var Pe=he&&he.$$typeof;switch(Pe){case i:case f:case O:case w:case r:return Pe;default:return se}}case o:return se}}}var l=g,T=b,y=i,S=r,I=t,_=f,H=n,W=O,J=w,U=o,oe=a,te=s,F=h,Z=!1;function ne(C){return Z||(Z=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),v(C)||D(C)===g}function v(C){return D(C)===b}function c(C){return D(C)===i}function k(C){return D(C)===r}function R(C){return typeof C=="object"&&C!==null&&C.$$typeof===t}function M(C){return D(C)===f}function Y(C){return D(C)===n}function G(C){return D(C)===O}function L(C){return D(C)===w}function q(C){return D(C)===o}function K(C){return D(C)===a}function V(C){return D(C)===s}function ae(C){return D(C)===h}ee.AsyncMode=l,ee.ConcurrentMode=T,ee.ContextConsumer=y,ee.ContextProvider=S,ee.Element=I,ee.ForwardRef=_,ee.Fragment=H,ee.Lazy=W,ee.Memo=J,ee.Portal=U,ee.Profiler=oe,ee.StrictMode=te,ee.Suspense=F,ee.isAsyncMode=ne,ee.isConcurrentMode=v,ee.isContextConsumer=c,ee.isContextProvider=k,ee.isElement=R,ee.isForwardRef=M,ee.isFragment=Y,ee.isLazy=G,ee.isMemo=L,ee.isPortal=q,ee.isProfiler=K,ee.isStrictMode=V,ee.isSuspense=ae,ee.isValidElementType=P,ee.typeOf=D})()),ee}var kt;function St(){return kt||(kt=1,process.env.NODE_ENV==="production"?Me.exports=Nn():Me.exports=Mn()),Me.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var et,wt;function Rn(){if(wt)return et;wt=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function n(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function s(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var r={},i=0;i<10;i++)r["_"+String.fromCharCode(i)]=i;var g=Object.getOwnPropertyNames(r).map(function(f){return r[f]});if(g.join("")!=="0123456789")return!1;var b={};return"abcdefghijklmnopqrst".split("").forEach(function(f){b[f]=f}),Object.keys(Object.assign({},b)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return et=s()?Object.assign:function(a,r){for(var i,g=n(a),b,f=1;f<arguments.length;f++){i=Object(arguments[f]);for(var h in i)t.call(i,h)&&(g[h]=i[h]);if(e){b=e(i);for(var p=0;p<b.length;p++)o.call(i,b[p])&&(g[b[p]]=i[b[p]])}}return g},et}var tt,Ot;function nt(){if(Ot)return tt;Ot=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return tt=e,tt}var rt,Ct;function Nt(){return Ct||(Ct=1,rt=Function.call.bind(Object.prototype.hasOwnProperty)),rt}var ot,Mt;function In(){if(Mt)return ot;Mt=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var t=nt(),o={},n=Nt();e=function(a){var r="Warning: "+a;typeof console<"u"&&console.error(r);try{throw new Error(r)}catch{}}}function s(a,r,i,g,b){if(process.env.NODE_ENV!=="production"){for(var f in a)if(n(a,f)){var h;try{if(typeof a[f]!="function"){var p=Error((g||"React class")+": "+i+" type `"+f+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[f]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw p.name="Invariant Violation",p}h=a[f](r,f,g,i,null,t)}catch(O){h=O}if(h&&!(h instanceof Error)&&e((g||"React class")+": type specification of "+i+" `"+f+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof h+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),h instanceof Error&&!(h.message in o)){o[h.message]=!0;var w=b?b():"";e("Failed "+i+" type: "+h.message+(w??""))}}}}return s.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(o={})},ot=s,ot}var at,Rt;function Ln(){if(Rt)return at;Rt=1;var e=St(),t=Rn(),o=nt(),n=Nt(),s=In(),a=function(){};process.env.NODE_ENV!=="production"&&(a=function(i){var g="Warning: "+i;typeof console<"u"&&console.error(g);try{throw new Error(g)}catch{}});function r(){return null}return at=function(i,g){var b=typeof Symbol=="function"&&Symbol.iterator,f="@@iterator";function h(v){var c=v&&(b&&v[b]||v[f]);if(typeof c=="function")return c}var p="<<anonymous>>",w={array:N("array"),bigint:N("bigint"),bool:N("boolean"),func:N("function"),number:N("number"),object:N("object"),string:N("string"),symbol:N("symbol"),any:z(),arrayOf:P,element:D(),elementType:l(),instanceOf:T,node:_(),objectOf:S,oneOf:y,oneOfType:I,shape:W,exact:J};function O(v,c){return v===c?v!==0||1/v===1/c:v!==v&&c!==c}function d(v,c){this.message=v,this.data=c&&typeof c=="object"?c:{},this.stack=""}d.prototype=Error.prototype;function E(v){if(process.env.NODE_ENV!=="production")var c={},k=0;function R(Y,G,L,q,K,V,ae){if(q=q||p,V=V||L,ae!==o){if(g){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var se=q+":"+L;!c[se]&&k<3&&(a("You are manually calling a React.PropTypes validation function for the `"+V+"` prop on `"+q+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),c[se]=!0,k++)}}return G[L]==null?Y?G[L]===null?new d("The "+K+" `"+V+"` is marked as required "+("in `"+q+"`, but its value is `null`.")):new d("The "+K+" `"+V+"` is marked as required in "+("`"+q+"`, but its value is `undefined`.")):null:v(G,L,q,K,V)}var M=R.bind(null,!1);return M.isRequired=R.bind(null,!0),M}function N(v){function c(k,R,M,Y,G,L){var q=k[R],K=te(q);if(K!==v){var V=F(q);return new d("Invalid "+Y+" `"+G+"` of type "+("`"+V+"` supplied to `"+M+"`, expected ")+("`"+v+"`."),{expectedType:v})}return null}return E(c)}function z(){return E(r)}function P(v){function c(k,R,M,Y,G){if(typeof v!="function")return new d("Property `"+G+"` of component `"+M+"` has invalid PropType notation inside arrayOf.");var L=k[R];if(!Array.isArray(L)){var q=te(L);return new d("Invalid "+Y+" `"+G+"` of type "+("`"+q+"` supplied to `"+M+"`, expected an array."))}for(var K=0;K<L.length;K++){var V=v(L,K,M,Y,G+"["+K+"]",o);if(V instanceof Error)return V}return null}return E(c)}function D(){function v(c,k,R,M,Y){var G=c[k];if(!i(G)){var L=te(G);return new d("Invalid "+M+" `"+Y+"` of type "+("`"+L+"` supplied to `"+R+"`, expected a single ReactElement."))}return null}return E(v)}function l(){function v(c,k,R,M,Y){var G=c[k];if(!e.isValidElementType(G)){var L=te(G);return new d("Invalid "+M+" `"+Y+"` of type "+("`"+L+"` supplied to `"+R+"`, expected a single ReactElement type."))}return null}return E(v)}function T(v){function c(k,R,M,Y,G){if(!(k[R]instanceof v)){var L=v.name||p,q=ne(k[R]);return new d("Invalid "+Y+" `"+G+"` of type "+("`"+q+"` supplied to `"+M+"`, expected ")+("instance of `"+L+"`."))}return null}return E(c)}function y(v){if(!Array.isArray(v))return process.env.NODE_ENV!=="production"&&(arguments.length>1?a("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):a("Invalid argument supplied to oneOf, expected an array.")),r;function c(k,R,M,Y,G){for(var L=k[R],q=0;q<v.length;q++)if(O(L,v[q]))return null;var K=JSON.stringify(v,function(ae,C){var se=F(C);return se==="symbol"?String(C):C});return new d("Invalid "+Y+" `"+G+"` of value `"+String(L)+"` "+("supplied to `"+M+"`, expected one of "+K+"."))}return E(c)}function S(v){function c(k,R,M,Y,G){if(typeof v!="function")return new d("Property `"+G+"` of component `"+M+"` has invalid PropType notation inside objectOf.");var L=k[R],q=te(L);if(q!=="object")return new d("Invalid "+Y+" `"+G+"` of type "+("`"+q+"` supplied to `"+M+"`, expected an object."));for(var K in L)if(n(L,K)){var V=v(L,K,M,Y,G+"."+K,o);if(V instanceof Error)return V}return null}return E(c)}function I(v){if(!Array.isArray(v))return process.env.NODE_ENV!=="production"&&a("Invalid argument supplied to oneOfType, expected an instance of array."),r;for(var c=0;c<v.length;c++){var k=v[c];if(typeof k!="function")return a("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+Z(k)+" at index "+c+"."),r}function R(M,Y,G,L,q){for(var K=[],V=0;V<v.length;V++){var ae=v[V],C=ae(M,Y,G,L,q,o);if(C==null)return null;C.data&&n(C.data,"expectedType")&&K.push(C.data.expectedType)}var se=K.length>0?", expected one of type ["+K.join(", ")+"]":"";return new d("Invalid "+L+" `"+q+"` supplied to "+("`"+G+"`"+se+"."))}return E(R)}function _(){function v(c,k,R,M,Y){return U(c[k])?null:new d("Invalid "+M+" `"+Y+"` supplied to "+("`"+R+"`, expected a ReactNode."))}return E(v)}function H(v,c,k,R,M){return new d((v||"React class")+": "+c+" type `"+k+"."+R+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+M+"`.")}function W(v){function c(k,R,M,Y,G){var L=k[R],q=te(L);if(q!=="object")return new d("Invalid "+Y+" `"+G+"` of type `"+q+"` "+("supplied to `"+M+"`, expected `object`."));for(var K in v){var V=v[K];if(typeof V!="function")return H(M,Y,G,K,F(V));var ae=V(L,K,M,Y,G+"."+K,o);if(ae)return ae}return null}return E(c)}function J(v){function c(k,R,M,Y,G){var L=k[R],q=te(L);if(q!=="object")return new d("Invalid "+Y+" `"+G+"` of type `"+q+"` "+("supplied to `"+M+"`, expected `object`."));var K=t({},k[R],v);for(var V in K){var ae=v[V];if(n(v,V)&&typeof ae!="function")return H(M,Y,G,V,F(ae));if(!ae)return new d("Invalid "+Y+" `"+G+"` key `"+V+"` supplied to `"+M+"`.\nBad object: "+JSON.stringify(k[R],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(v),null,"  "));var C=ae(L,V,M,Y,G+"."+V,o);if(C)return C}return null}return E(c)}function U(v){switch(typeof v){case"number":case"string":case"undefined":return!0;case"boolean":return!v;case"object":if(Array.isArray(v))return v.every(U);if(v===null||i(v))return!0;var c=h(v);if(c){var k=c.call(v),R;if(c!==v.entries){for(;!(R=k.next()).done;)if(!U(R.value))return!1}else for(;!(R=k.next()).done;){var M=R.value;if(M&&!U(M[1]))return!1}}else return!1;return!0;default:return!1}}function oe(v,c){return v==="symbol"?!0:c?c["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&c instanceof Symbol:!1}function te(v){var c=typeof v;return Array.isArray(v)?"array":v instanceof RegExp?"object":oe(c,v)?"symbol":c}function F(v){if(typeof v>"u"||v===null)return""+v;var c=te(v);if(c==="object"){if(v instanceof Date)return"date";if(v instanceof RegExp)return"regexp"}return c}function Z(v){var c=F(v);switch(c){case"array":case"object":return"an "+c;case"boolean":case"date":case"regexp":return"a "+c;default:return c}}function ne(v){return!v.constructor||!v.constructor.name?p:v.constructor.name}return w.checkPropTypes=s,w.resetWarningCache=s.resetWarningCache,w.PropTypes=w,w},at}var it,It;function jn(){if(It)return it;It=1;var e=nt();function t(){}function o(){}return o.resetWarningCache=t,it=function(){function n(r,i,g,b,f,h){if(h!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}n.isRequired=n;function s(){return n}var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:o,resetWarningCache:t};return a.PropTypes=a,a},it}var Lt;function Dn(){if(Lt)return Ne.exports;if(Lt=1,process.env.NODE_ENV!=="production"){var e=St(),t=!0;Ne.exports=Ln()(e.isElement,t)}else Ne.exports=jn()();return Ne.exports}var $n=Dn();const x=bn($n),st={"7.5pt":{pt:7.5,px:10,label:"7.5"},"9pt":{pt:9,px:12,label:"9"},"10pt":{pt:10,px:13,label:"10"},"11pt":{pt:11,px:15,label:"11"},"12pt":{pt:12,px:16,label:"12"},"14pt":{pt:14,px:19,label:"14"},"16pt":{pt:16,px:21,label:"16"},"18pt":{pt:18,px:24,label:"18"},"20pt":{pt:20,px:27,label:"20"},"22pt":{pt:22,px:29,label:"22"},"24pt":{pt:24,px:32,label:"24"},"26pt":{pt:26,px:35,label:"26"},"28pt":{pt:28,px:37,label:"28"},"36pt":{pt:36,px:48,label:"36"},"48pt":{pt:48,px:64,label:"48"},"72pt":{pt:72,px:96,label:"72"}},jt=[{value:"10px",label:"7.5",pt:7.5},{value:"12px",label:"9",pt:9},{value:"13px",label:"10",pt:10},{value:"15px",label:"11",pt:11},{value:"16px",label:"12",pt:12},{value:"19px",label:"14",pt:14},{value:"21px",label:"16",pt:16},{value:"24px",label:"18",pt:18},{value:"27px",label:"20",pt:20},{value:"32px",label:"24",pt:24},{value:"37px",label:"28",pt:28},{value:"48px",label:"36",pt:36},{value:"64px",label:"48",pt:48},{value:"96px",label:"72",pt:72}],xe="16px",Dt=e=>Math.round(e*96/72),$t=e=>Math.round(e*72/96*2)/2,zn=e=>{const t=Object.values(st).find(o=>o.pt===e);return t?`${t.px}px`:`${Dt(e)}px`},Hn=e=>{const t=parseInt(e),o=Object.values(st).find(n=>n.px===t);return o?o.pt:$t(t)},Bn=e=>{if(!e)return!1;if(e.endsWith("px")){const t=parseInt(e);return t>=8&&t<=144}if(e.endsWith("pt")){const t=parseFloat(e);return t>=6&&t<=108}return!1},ue={minWidth:50,minHeight:50,maxWidth:800,maxHeight:600,aspectRatio:!0,preserveAspectRatio:!0,defaultWidth:300,defaultHeight:200},A={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};function Gn({handler:e,startX:t,startY:o,currentX:n,currentY:s,startWidth:a,startHeight:r,options:i=ue}){const g=n-t,b=s-o;let f=a,h=r;switch(e){case A.TOP_LEFT:f=Math.max(i.minWidth,a-g),h=Math.max(i.minHeight,r-b);break;case A.TOP_RIGHT:f=Math.max(i.minWidth,a+g),h=Math.max(i.minHeight,r-b);break;case A.BOTTOM_LEFT:f=Math.max(i.minWidth,a-g),h=Math.max(i.minHeight,r+b);break;case A.BOTTOM_RIGHT:f=Math.max(i.minWidth,a+g),h=Math.max(i.minHeight,r+b);break;case A.TOP:h=Math.max(i.minHeight,r-b);break;case A.BOTTOM:h=Math.max(i.minHeight,r+b);break;case A.LEFT:f=Math.max(i.minWidth,a-g);break;case A.RIGHT:f=Math.max(i.minWidth,a+g);break;default:return{width:f,height:h}}if(i.preserveAspectRatio&&i.aspectRatio){const p=a/r;[A.TOP_LEFT,A.TOP_RIGHT,A.BOTTOM_LEFT,A.BOTTOM_RIGHT].includes(e)?f/p>h?h=Math.max(i.minHeight,f/p):f=Math.max(i.minWidth,h*p):[A.TOP,A.BOTTOM].includes(e)?f=h*p:[A.LEFT,A.RIGHT].includes(e)&&(h=f/p)}return i.maxWidth&&f>i.maxWidth&&(f=i.maxWidth,i.preserveAspectRatio&&i.aspectRatio&&(h=f/(a/r))),i.maxHeight&&h>i.maxHeight&&(h=i.maxHeight,i.preserveAspectRatio&&i.aspectRatio&&(f=h*(a/r))),f=Math.max(i.minWidth,f),h=Math.max(i.minHeight,h),{width:Math.round(f),height:Math.round(h)}}function le(e){return e?e.tagName==="IMG"?(console.log("Element is an IMG tag, returning true"),!0):!!(e.tagName==="DIV"&&e.style.backgroundImage&&e.style.backgroundImage!=="none"):!1}function Un(e){return le(e)?{width:e.offsetWidth,height:e.offsetHeight}:{width:0,height:0}}function Fn(e,{width:t,height:o}){le(e)&&(e.tagName==="IMG"?(e.style.width=`${t}px`,e.style.height=`${o}px`,e.width=t,e.height=o):e.tagName==="DIV"&&(e.style.width=`${t}px`,e.style.height=`${o}px`))}function ct(e,t=ue){if(!le(e))return null;const o=document.createElement("div");o.className="image-resize-overlay",o.style.position="fixed",o.style.zIndex="1000",o.style.pointerEvents="none";const n=e.getBoundingClientRect();return o.style.top=`${n.top}px`,o.style.left=`${n.left}px`,o.style.width=`${n.width}px`,o.style.height=`${n.height}px`,Object.values(A).forEach(a=>{const r=document.createElement("div");r.className=`resize-handler resize-handler-${a}`,r.dataset.handler=a,r.style.position="absolute",r.style.width="10px",r.style.height="10px",r.style.backgroundColor="#007bff",r.style.border="2px solid white",r.style.borderRadius="50%",r.style.boxShadow="0 0 3px rgba(0,0,0,0.3)",r.style.cursor=qn(a),r.style.pointerEvents="all",zt(r,a,n.width,n.height),o.appendChild(r)}),o}function qn(e){switch(e){case A.TOP_LEFT:case A.BOTTOM_RIGHT:return"nwse-resize";case A.TOP_RIGHT:case A.BOTTOM_LEFT:return"nesw-resize";case A.TOP:case A.BOTTOM:return"ns-resize";case A.LEFT:case A.RIGHT:return"ew-resize";default:return"default"}}function zt(e,t,o,n){switch(t){case A.TOP_LEFT:e.style.top="-5px",e.style.left="-5px";break;case A.TOP_RIGHT:e.style.top="-5px",e.style.right="-5px";break;case A.BOTTOM_LEFT:e.style.bottom="-5px",e.style.left="-5px";break;case A.BOTTOM_RIGHT:e.style.bottom="-5px",e.style.right="-5px";break;case A.TOP:e.style.top="-5px",e.style.left=`${o/2+-5}px`;break;case A.BOTTOM:e.style.bottom="-5px",e.style.left=`${o/2+-5}px`;break;case A.LEFT:e.style.top=`${n/2+-5}px`,e.style.left="-5px";break;case A.RIGHT:e.style.top=`${n/2+-5}px`,e.style.right="-5px";break}}function Re(e,t){if(!e||!t)return;const o=t.getBoundingClientRect();e.style.top=`${o.top}px`,e.style.left=`${o.left}px`,e.style.width=`${o.width}px`,e.style.height=`${o.height}px`,e.querySelectorAll(".resize-handler").forEach(s=>{const a=s.dataset.handler;zt(s,a,o.width,o.height)})}function ge(e){e&&e.parentNode&&e.parentNode.removeChild(e)}const Wn={"10px":"1","12px":"2","13px":"2","15px":"3","16px":"3","19px":"4","21px":"4","24px":"5","27px":"5","32px":"6","37px":"6","48px":"6","64px":"7","96px":"7"},Ht={bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:xe,headingLevel:"p",imageSelected:!1,imageResizeOptions:ue,preserveAspectRatio:!0},Bt=()=>{const[e,t]=m.useState(Ht),o=me(),n=m.useCallback(d=>{try{const E=window.getSelection();if(!E||E.rangeCount===0)return!1;const N=E.getRangeAt(0);if(!N.toString())return t(P=>({...P,fontFamily:d})),!1;try{const P=document.createElement("span");P.style.fontFamily=d;const D=N.extractContents();return P.appendChild(D),N.insertNode(P),N.selectNodeContents(P),E.removeAllRanges(),E.addRange(N),t(l=>({...l,fontFamily:d})),!0}catch{return document.execCommand("fontName",!1,d),t(D=>({...D,fontFamily:d})),!0}}catch(E){return console.warn("[useFormatting] Font family change failed:",E),!1}},[]),s=m.useCallback(d=>{try{const E=window.getSelection();if(!E||E.rangeCount===0)return!1;const N=E.getRangeAt(0);if(!N.toString())return t(P=>({...P,fontSize:d})),!1;try{const P=document.createElement("span");P.style.fontSize=d;const D=N.extractContents();return P.appendChild(D),N.insertNode(P),N.selectNodeContents(P),E.removeAllRanges(),E.addRange(N),t(l=>({...l,fontSize:d})),!0}catch{const D=Wn[d]||"3";return document.execCommand("fontSize",!1,D),t(l=>({...l,fontSize:d})),!0}}catch(E){return console.warn("[useFormatting] Font size change failed:",E),!1}},[]),a=m.useCallback((d,E=null)=>{try{if(d==="undo"){o.undo();return}if(d==="redo"){o.redo();return}if(typeof document.execCommand!="function"){console.warn("[useFormatting] execCommand not supported");return}if(d==="fontSize"){s(E);return}if(d==="fontName"){n(E);return}switch(document.execCommand(d,!1,E)||console.warn(`[useFormatting] Command "${d}" failed`),d){case"bold":case"italic":case"underline":case"strikethrough":case"justifyLeft":case"justifyCenter":case"justifyRight":case"justifyFull":case"fontName":break;case"formatBlock":t(z=>({...z,headingLevel:E}));break;default:break}}catch(N){console.warn(`[useFormatting] Error executing command "${d}":`,N)}},[s,n,o]),r=m.useRef(null),i=m.useRef(null),g=m.useRef(null),b=m.useRef(null),f=m.useRef(ue);m.useCallback(d=>{if(!le(d))return;r.current&&(ge(r.current),r.current=null),d.classList.add("selected");const E=ct(d);E&&(r.current=E,i.current=d,document.body.appendChild(E),t(N=>({...N,imageSelected:!0,preserveAspectRatio:f.current.preserveAspectRatio})))},[]);const h=m.useCallback(()=>{i.current&&(i.current.classList.remove("selected"),i.current=null),r.current&&(ge(r.current),r.current=null),g.current=null,b.current=null,t(d=>({...d,imageSelected:!1}))},[]),p=m.useCallback(()=>{const d=!f.current.preserveAspectRatio;f.current={...f.current,preserveAspectRatio:d,aspectRatio:d},t(E=>({...E,preserveAspectRatio:d}))},[]);m.useCallback((d,E,N)=>{i.current&&(g.current={x:E,y:N,width:i.current.offsetWidth,height:i.current.offsetHeight},b.current=d,document.body.classList.add("resize-in-progress"),document.body.style.cursor=Yn(d))},[]),m.useCallback((d,E)=>{if(!i.current||!g.current||!b.current)return;const{x:N,y:z,width:P,height:D}=g.current,l=b.current,T=Vn({handler:l,startX:N,startY:z,currentX:d,currentY:E,startWidth:P,startHeight:D,options:f.current});Kn(i.current,T),r.current&&Re(r.current,i.current)},[]),m.useCallback(()=>{if(g.current=null,b.current=null,document.body.classList.remove("resize-in-progress"),document.body.style.cursor="",i.current){const d=new Event("input",{bubbles:!0,cancelable:!0});i.current.dispatchEvent(d)}},[]);const w=m.useCallback(()=>{try{const d=window.getSelection();if(!d||d.rangeCount===0)return;const E=d.getRangeAt(0),N=E.toString();let z=xe,P="Arial",D="p";if(N){const T=E.startContainer,y=T.nodeType===Node.TEXT_NODE?T.parentElement:T;if(y){const S=window.getComputedStyle(y),I=S.fontSize,_=S.fontFamily;I&&I.endsWith("px")&&(z=I),_&&_!=="serif"&&(P=_.split(",")[0].replace(/['"]/g,"").trim());const H=Zn(y);if(H){const W=H.tagName?.toLowerCase();["h1","h2","h3","h4","h5","h6","p"].includes(W)&&(D=W)}}}const l={bold:document.queryCommandState("bold"),italic:document.queryCommandState("italic"),underline:document.queryCommandState("underline"),strikethrough:document.queryCommandState("strikethrough"),alignLeft:document.queryCommandState("justifyLeft"),alignCenter:document.queryCommandState("justifyCenter"),alignRight:document.queryCommandState("justifyRight"),alignJustify:document.queryCommandState("justifyFull"),fontFamily:P,fontSize:z,headingLevel:D};t(T=>({...T,...l}))}catch(d){console.warn("[useFormatting] Error updating format from selection:",d)}},[]),O=m.useCallback(()=>{h(),t(Ht)},[h]);return m.useEffect(()=>()=>{r.current&&ge(r.current)},[]),{currentFormat:e,formatText:a,resetFormat:O,updateCurrentFormatFromSelection:w,toggleAspectRatio:p}};function Zn(e){let t=e;for(;t&&t!==document.body;){const o=t.tagName?.toLowerCase();if(["h1","h2","h3","h4","h5","h6","p"].includes(o))return t;if(t.contentEditable==="true"||t.contentEditable==="")break;t=t.parentElement}return null}function Yn(e){switch(e){case A.TOP_LEFT:case A.BOTTOM_RIGHT:return"nwse-resize";case A.TOP_RIGHT:case A.BOTTOM_LEFT:return"nesw-resize";case RESIZE_HANDLRES.TOP:case A.BOTTOM:return"ns-resize";case A.LEFT:case A.RIGHT:return"ew-resize";default:return"default"}}function Vn({handler:e,startX:t,startY:o,currentX:n,currentY:s,startWidth:a,startHeight:r,options:i=ue}){const g=n-t,b=s-o;let f=a,h=r;switch(e){case A.TOP_LEFT:f=Math.max(i.minWidth,a-g),h=Math.max(i.minHeight,r-b);break;case A.TOP_RIGHT:f=Math.max(i.minWidth,a+g),h=Math.max(i.minHeight,r-b);break;case A.BOTTOM_LEFT:f=Math.max(i.minWidth,a-g),h=Math.max(i.minHeight,r+b);break;case A.BOTTOM_RIGHT:f=Math.max(i.minWidth,a+g),h=Math.max(i.minHeight,r+b);break;case A.TOP:h=Math.max(i.minHeight,r-b);break;case A.BOTTOM:h=Math.max(i.minHeight,r+b);break;case A.LEFT:f=Math.max(i.minWidth,a-g);break;case A.RIGHT:f=Math.max(i.minWidth,a+g);break;default:return{width:f,height:h}}if(i.preserveAspectRatio&&i.aspectRatio){const p=a/r;[A.TOP_LEFT,A.TOP_RIGHT,A.BOTTOM_LEFT,A.BOTTOM_RIGHT].includes(e)?f/p>h?h=Math.max(i.minHeight,f/p):f=Math.max(i.minWidth,h*p):[A.TOP,A.BOTTOM].includes(e)?f=h*p:[A.LEFT,A.RIGHT].includes(e)&&(h=f/p)}return i.maxWidth&&f>i.maxWidth&&(f=i.maxWidth,i.preserveAspectRatio&&i.aspectRatio&&(h=f/(a/r))),i.maxHeight&&h>i.maxHeight&&(h=i.maxHeight,i.preserveAspectRatio&&i.aspectRatio&&(f=h*(a/r))),f=Math.max(i.minWidth,f),h=Math.max(i.minHeight,h),{width:Math.round(f),height:Math.round(h)}}function Kn(e,{width:t,height:o}){le(e)&&(e.tagName==="IMG"?(e.style.width=`${t}px`,e.style.height=`${o}px`,e.width=t,e.height=o):e.tagName==="DIV"&&(e.style.width=`${t}px`,e.style.height=`${o}px`))}const ye='page-break, [data-page-break="true"]',Gt=e=>ie[e]||ie.A4,Xn=(e,t={})=>{if(!e||typeof document>"u")return[];const o=t.pageSize||"A4",n=Gt(o),s=e.querySelectorAll(ye),a=[];a.push({id:"page-0",pageNumber:1,top:0,height:n.height});const r=e.getBoundingClientRect(),i=e.scrollTop;return s.forEach((g,b)=>{const h=g.getBoundingClientRect().top-r.top+i;a.push({id:`page-${b+1}`,pageNumber:b+2,top:h,height:n.height})}),a},Ut=(e,t=100,o=de)=>{const n=Gt(e),s=_n(o),a=n.height-s,r=t/100;return a/r},Jn=(e,t)=>{if(!e||!t)return 0;try{const o=t.querySelectorAll(ye);if(o.length===0)return 0;const n=e.getBoundingClientRect(),s=n.top+n.height/2;for(let a=o.length-1;a>=0;a--)if(o[a].getBoundingClientRect().top<s)return a+1;return 0}catch(o){return console.warn("[getCurrentPage] Failed to calculate page:",o),0}},Ft=e=>{if(!e)return[];const t=Array.from(e.children);if(t.length===0)return[];let o=[],n=[];for(const s of t)s.tagName==="PAGE-BREAK"||s.getAttribute("data-page-break")==="true"?n.length>0&&(o.push(n),n=[]):n.push(s);return n.length>0&&o.push(n),o.length===0&&t.length>0&&o.push(t.filter(s=>!(s.tagName==="PAGE-BREAK"||s.getAttribute("data-page-break")==="true"))),o},Qn=e=>{if(!e||!e.getBoundingClientRect)return 0;const t=e.getBoundingClientRect();return e.tagName==="P"?t.height+16:e.tagName==="H1"||e.tagName==="H2"||e.tagName==="H3"||e.tagName==="H4"||e.tagName==="H5"||e.tagName==="H6"?t.height+20:e.tagName==="UL"||e.tagName==="OL"?t.height+16:t.height},er=(e,t)=>{if(!e)return!1;try{const o=document.createElement("page-break");return o.setAttribute("data-page-break","true"),o.setAttribute("contenteditable","false"),o.setAttribute("data-page-number",t||"2"),e.parentNode.insertBefore(o,e),!0}catch(o){return console.warn("[insertPageBreakBefore] Failed to insert page break:",o),!1}},tr=(e,t,o,n,s,a,r)=>{if(!e)return!1;try{const g=Ut(o,n,s)*(t-1),b=Array.from(e.children);let f=0,h=null;for(let p=0;p<b.length;p++){const w=b[p];if(w.tagName==="PAGE-BREAK"||w.getAttribute("data-page-break")==="true")continue;const O=Qn(w);if(f+O>g){h=w;break}f+=O}if(h){const p=document.createElement("page-break");if(p.setAttribute("data-page-break","true"),p.setAttribute("contenteditable","false"),p.setAttribute("data-page-number",String(t)),h.parentNode.insertBefore(p,h),a){const w=e.innerHTML;a(w)}return r&&setTimeout(()=>{r()},50),!0}else{const p=document.createElement("page-break");p.setAttribute("data-page-break","true"),p.setAttribute("contenteditable","false"),p.setAttribute("data-page-number",String(t)),e.appendChild(p);const w=document.createElement("p");if(w.innerHTML="<br>",e.appendChild(w),a){const O=e.innerHTML;a(O)}return r&&setTimeout(()=>{r()},50),!0}}catch(i){return console.error("[insertPageBreakAtBoundary] Failed to insert page break:",i),!1}},nr=(e,t,o,n,s,a,r)=>{if(!e)return!1;if(o().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const g=Array.from(e.querySelectorAll(ye));if(t>g.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const b=window.getSelection();let f=!1,h=[],p=null;if(t===0){const O=g[0];if(!O)return console.warn("[removePageAndContent] No page break found for first page"),!1;let d=e.firstChild;for(;d&&d!==O;)h.push(d),d=d.nextSibling;p=O}else{const O=g[t-1];if(!O)return console.warn("[removePageAndContent] Page break not found"),!1;const d=g[t];let E=O.nextSibling;for(;E&&E!==d;)h.push(E),E=E.nextSibling;p=O}if(b&&b.rangeCount>0){const d=b.getRangeAt(0).startContainer;for(const E of h)if(E.contains(d)||E===d){f=!0;break}}if(p&&p.parentNode&&p.remove(),h.forEach(O=>{O.parentNode&&O.remove()}),e.querySelectorAll(ye).forEach((O,d)=>{O.setAttribute("data-page-number",String(d+2))}),f&&a&&setTimeout(()=>{a(0)},50),n){const O=e.innerHTML;n(O)}return s&&setTimeout(()=>{s(),r&&setTimeout(()=>{r()},150)},100),!0}catch(g){return console.error("[removePageAndContent] Failed to remove page:",g),!1}},rr=200,or=50,qt=3,ar=20,Wt=e=>{if(!e||!e.getBoundingClientRect)return 0;const t=e.getBoundingClientRect();return e.tagName==="P"?t.height+16:e.tagName==="H1"||e.tagName==="H2"||e.tagName==="H3"||e.tagName==="H4"||e.tagName==="H5"||e.tagName==="H6"?t.height+20:e.tagName==="UL"||e.tagName==="OL"?t.height+16:t.height},ir=(e,t)=>{if(!e||e.length===0)return null;let o=0,n=null;for(let s=0;s<e.length;s++){const a=e[s];if(!a||!a.getBoundingClientRect)continue;const r=Wt(a);if(r<1)continue;if(o+r>t)return n===null?s>0?{overflowIndex:s,overflowElement:a,accumulatedHeight:o}:null:{overflowIndex:s,overflowElement:a,accumulatedHeight:o};o+=r,n=a}return null},sr=(e,t,o,n,s,a,r,i)=>{if(!e||r.current)return!1;try{r.current=!0;const g=Ut(t,o,n);let b=Ft(e),f=!1,h=0;for(let p=0;p<b.length&&h<qt;p++){const w=b[p],O=ir(w,g);if(O&&O.overflowIndex>0){let d=0;for(let P=0;P<w.length;P++){const D=w[P];D&&D.getBoundingClientRect&&(d+=Wt(D))}if(d-g<ar)continue;const N=p+2;er(O.overflowElement,N)&&(f=!0,h++,b=Ft(e))}}if(f){if(s){const p=e.innerHTML;s(p)}setTimeout(()=>{a&&a(),h>=qt&&i&&setTimeout(()=>{r.current||i()},100)},or)}return f}catch(g){return console.warn("[checkAndReflow] Reflow failed:",g),!1}finally{r.current=!1}},cr=(e,t,o=rr)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{t.current=null,e()},o)},lr=400,Zt=(e,t)=>{if(e){e.focus();try{let o=null,n=0;if(t===0)o=e.firstChild,n=0;else{const a=e.querySelectorAll(ye)[t-1];a&&a.nextSibling&&(o=a.nextSibling,n=0)}if(o){const s=document.createRange(),a=window.getSelection();o.nodeType===Node.TEXT_NODE?s.setStart(o,n):s.setStart(o,0),s.collapse(!0),a.removeAllRanges(),a.addRange(s)}}catch(o){console.warn("[positionCursorAtPage] Failed to position cursor:",o)}}},ur=(e,t,o,n)=>{if(!e||!t){console.warn("[scrollToPage] Missing refs");return}try{let s=null;if(o===0)s=t;else{const r=t.querySelectorAll(ye)[o-1];if(r)s=r;else{console.warn("[scrollToPage] Page break not found for page",o);return}}if(s){const a=s.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.scrollTop+(a.top-r.top);console.log("[scrollToPage] Scrolling to page",o,"scrollTop:",i),e.scrollTo({top:i,behavior:"smooth"}),setTimeout(()=>{n?n(o):Zt(t,o)},lr)}}catch(s){console.error("[scrollToPage] Error:",s)}},dr=(e,t,o={},n=300)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{t.current=null,e(o)},Math.max(0,n))},fr=300,Yt=(e,t,o=100,n="NARROW")=>{const s=me(),a=m.useRef(null),r=m.useRef(null),i=m.useRef(e),g=m.useRef(o),b=m.useRef(n),f=m.useRef(!1);m.useEffect(()=>{i.current=e},[e]),m.useEffect(()=>{g.current=o},[o]),m.useEffect(()=>{b.current=n},[n]),m.useEffect(()=>()=>{a.current&&clearTimeout(a.current),r.current&&clearTimeout(r.current)},[]);const h=m.useCallback((l={})=>t?.current?Xn(t.current,l):[],[t]),p=m.useCallback((l={})=>{const T=h(l);return s.updatePageBoundaries(T),T},[h,s]),w=m.useCallback(async l=>{if(!t?.current)return!1;const T=i.current||"A4",y=g.current||100,S=b.current||"NARROW";return tr(t.current,l,T,y,S,s.updateContinuousContent,p)},[t,s,p]),O=m.useCallback(()=>{if(!t?.current)return;const l=i.current||"A4",T=g.current||100,y=b.current||"NARROW";sr(t.current,l,T,y,s.updateContinuousContent,p,f,O)},[t,s,p]),d=m.useCallback(l=>{cr(O,r,l)},[O]),E=m.useCallback((l={})=>{const T=typeof l.delay=="number"?l.delay:fr;dr(p,a,l,T)},[p]),N=m.useCallback(l=>!l?.current||!t?.current?0:Jn(l.current,t.current),[t]),z=m.useCallback(l=>{t?.current&&Zt(t.current,l)},[t]),P=m.useCallback((l,T)=>{if(!T?.current||!t?.current){console.warn("[scrollToPage] Missing refs");return}ur(T.current,t.current,l,z)},[t,z]),D=m.useCallback(l=>t?.current?nr(t.current,l,h,s.updateContinuousContent,p,z,O):!1,[t,h,s,p,z,O]);return{calculatePageBoundaries:h,checkAndUpdateBoundaries:E,updateBoundaries:p,getCurrentPage:N,scrollToPage:P,positionCursorAtPage:z,checkAndReflow:O,triggerAutoReflow:d,removePageAndContent:D,insertPageBreakAtBoundary:w,boundaryTimeoutRef:a,reflowTimeoutRef:r}},pr="html-editor-storage",gr=1,ce="images";function hr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function _e(){return new Promise((e,t)=>{const o=indexedDB.open(pr,gr);o.onerror=()=>{t(new Error("Failed to open IndexedDB database"))},o.onsuccess=()=>{e(o.result)},o.onupgradeneeded=n=>{const s=n.target.result;s.objectStoreNames.contains(ce)||s.createObjectStore(ce,{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1})}})}function Vt(e){return new Promise((t,o)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){o(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){o(new Error("Image exceeds maximum size of 5MB"));return}const s=new FileReader;s.onload=async a=>{const r=a.target.result,g=r.split(",")[1].length*3/4;if(g>5*1024*1024){o(new Error("Image exceeds maximum size of 5MB"));return}try{const b=await _e(),f=`editor-image-${hr()}`,p=b.transaction([ce],"readwrite").objectStore(ce),w={key:f,dataUrl:r,size:g,type:e.type,timestamp:Date.now()},O=p.add(w);O.onsuccess=()=>{b.close(),t(f)},O.onerror=()=>{b.close(),o(new Error("Failed to save image to IndexedDB"))}}catch(b){o(b)}},s.onerror=()=>{o(new Error("Error reading image file"))},s.readAsDataURL(e)})}async function Kt(e){try{const t=await _e();return new Promise((o,n)=>{const r=t.transaction([ce],"readonly").objectStore(ce).get(e);r.onsuccess=()=>{t.close();const i=r.result;o(i?i.dataUrl:null)},r.onerror=()=>{t.close(),n(new Error("Failed to retrieve image from IndexedDB"))}})}catch(t){return console.error("Error getting image:",t),null}}async function Xt(e){try{const t=await _e();return new Promise((o,n)=>{const r=t.transaction([ce],"readwrite").objectStore(ce).delete(e);r.onsuccess=()=>{t.close(),o()},r.onerror=()=>{t.close(),n(new Error("Failed to delete image from IndexedDB"))}})}catch(t){console.error("Error deleting image:",t)}}async function mr(){try{const e=await _e();return new Promise((t,o)=>{const a=e.transaction([ce],"readwrite").objectStore(ce).clear();a.onsuccess=()=>{e.close(),t()},a.onerror=()=>{e.close(),o(new Error("Failed to clear images from IndexedDB"))}})}catch(e){console.error("Error clearing images:",e)}}async function yr(){try{const e=await _e();return new Promise((t,o)=>{const a=e.transaction([ce],"readonly").objectStore(ce).getAllKeys();a.onsuccess=()=>{e.close(),t(a.result||[])},a.onerror=()=>{e.close(),o(new Error("Failed to get image keys from IndexedDB"))}})}catch(e){return console.error("Error getting image keys:",e),[]}}function br(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function lt(e){const t=[];for(let o=0;o<e.attributes.length;o++){const n=e.attributes[o];t.push(` ${n.name}="${n.value}"`)}return t.join("")}function Er(e){if(!e||typeof e!="string")return"<p><br></p>";const t=e.trim();if(!t)return"<p><br></p>";const o=document.createElement("div");return o.innerHTML=t,Ie(o)}function vr(e){const t=e.cloneNode(!0);return t.querySelectorAll(":scope > p").forEach(n=>{for(;n.firstChild;)t.insertBefore(n.firstChild,n);n.remove()}),t.innerHTML}function Ie(e){const t=[],o=Array.from(e.childNodes);for(let n=0;n<o.length;n++){const s=o[n];if(s.nodeType===Node.TEXT_NODE){const a=s.textContent.trim();a&&t.push(`<p>${br(a)}</p>`)}else if(s.nodeType===Node.ELEMENT_NODE){const a=s;if(a.tagName==="DIV"){const r=Ie(a);r.trim()?t.push(r):t.push("<p><br></p>")}else if(a.tagName==="P")t.push(a.outerHTML);else if(["H1","H2","H3","H4","H5","H6"].includes(a.tagName)){const r=vr(a),i=a.tagName.toLowerCase(),g=lt(a);t.push(`<${i}${g}>${r}</${i}>`)}else if(a.tagName==="BR")t.push("<p><br></p>");else if(["SPAN","STRONG","EM","B","I","U","A"].includes(a.tagName)){const r=Ie(a),i=a.tagName.toLowerCase(),g=lt(a);t.push(`<${i}${g}>${r}</${i}>`)}else if(a.tagName==="PAGE-BREAK"||a.getAttribute("data-page-break")==="true")t.push(a.outerHTML);else{const r=Ie(a),i=a.tagName.toLowerCase(),g=lt(a);t.push(`<${i}${g}>${r}</${i}>`)}}}return t.length===0?"<p><br></p>":t.join("")}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xr=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,n)=>n?n.toUpperCase():o.toLowerCase()),Jt=e=>{const t=xr(e);return t.charAt(0).toUpperCase()+t.slice(1)},Qt=(...e)=>e.filter((t,o,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===o).join(" ").trim(),_r=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ar={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:r,...i},g)=>m.createElement("svg",{ref:g,...Ar,width:t,height:t,stroke:e,strokeWidth:n?Number(o)*24/Number(t):o,className:Qt("lucide",s),...!a&&!_r(i)&&{"aria-hidden":"true"},...i},[...r.map(([b,f])=>m.createElement(b,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=(e,t)=>{const o=m.forwardRef(({className:n,...s},a)=>m.createElement(Pr,{ref:a,iconNode:t,className:Qt(`lucide-${Tr(Jt(e))}`,`lucide-${e}`,n),...s}));return o.displayName=Jt(e),o};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=X("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=X("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=X("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=X("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=X("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=X("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=X("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=X("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=X("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=X("image-upscale",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M17 21h2a2 2 0 0 0 2-2",key:"130fy9"}],["path",{d:"M21 12v3",key:"1wzk3p"}],["path",{d:"m21 3-5 5",key:"1g5oa7"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2",key:"kk3yz1"}],["path",{d:"m5 21 4.144-4.144a1.21 1.21 0 0 1 1.712 0L13 19",key:"fyekpt"}],["path",{d:"M9 3h3",key:"d52fa"}],["rect",{x:"3",y:"11",width:"10",height:"10",rx:"1",key:"1wpmix"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=X("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=X("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=X("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=X("list-indent-decrease",[["path",{d:"M21 5H11",key:"us1j55"}],["path",{d:"M21 12H11",key:"wd7e0v"}],["path",{d:"M21 19H11",key:"saa85w"}],["path",{d:"m7 8-4 4 4 4",key:"o5hrat"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=X("list-indent-increase",[["path",{d:"M21 5H11",key:"us1j55"}],["path",{d:"M21 12H11",key:"wd7e0v"}],["path",{d:"M21 19H11",key:"saa85w"}],["path",{d:"m3 8 4 4-4 4",key:"1a3j6y"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=X("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=X("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=X("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=X("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=X("scaling",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M14 15H9v-5",key:"pi4jk9"}],["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M21 3 9 15",key:"15kdhq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=X("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=X("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=X("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=X("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=X("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=X("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=X("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=X("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=X("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=X("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=X("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=X("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=X("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),on=({editorView:e,isCollapsed:t,onToggle:o,wordCount:n,pageCount:s})=>{const a=Qe(),{pages:r,activePage:i,continuousContent:g,editorMode:b}=a,[f,h]=m.useState(0),[p,w]=m.useState([]);m.useEffect(()=>{if(n!==void 0&&s!==void 0){if(h(n),g){const N=document.createElement("div");N.innerHTML=g;const z=N.querySelectorAll("h1, h2, h3, h4, h5, h6"),P=Array.from(z).map((D,l)=>{const T=parseInt(D.tagName.charAt(1)),y=D.textContent.trim();return y?{id:`heading-${l}`,level:T,text:y,page:1}:null}).filter(Boolean);w(P)}return}let d=0;const E=[];r.forEach((N,z)=>{if(N.content){const P=document.createElement("div");P.innerHTML=N.content;const l=(P.textContent||P.innerText||"").trim().split(/\s+/).filter(y=>y.length>0);d+=l.length,P.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((y,S)=>{const I=parseInt(y.tagName.charAt(1)),_=y.textContent.trim();_&&E.push({id:`heading-${z}-${S}`,level:I,text:_,page:z+1})})}}),h(d),w(E)},[r,n,s,g]);const O=s!==void 0?s:r.length;return u.jsxs("aside",{className:`sidebar ${t?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[u.jsxs("div",{className:"sidebar-header",children:[u.jsxs("div",{className:"sidebar-title",children:[u.jsx(Le,{size:18}),u.jsx("h2",{children:"Document Info"})]}),u.jsx("button",{className:"sidebar-toggle",onClick:o,"aria-label":t?"Expand sidebar":"Collapse sidebar",title:t?"Expand sidebar":"Collapse sidebar",children:t?u.jsx(wr,{size:16}):u.jsx(Sr,{size:16})})]}),!t&&u.jsxs("div",{className:"sidebar-content",children:[u.jsxs("div",{className:"sidebar-section",children:[u.jsx("h3",{children:"Statistics"}),u.jsxs("div",{className:"stat-item",children:[u.jsxs("div",{className:"stat-label",children:[u.jsx(Or,{size:14}),u.jsx("span",{children:"Pages:"})]}),u.jsx("span",{className:"stat-value",children:O})]}),u.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[u.jsxs("div",{className:"stat-label",children:[u.jsx(Cr,{size:14}),u.jsx("span",{children:"Words:"})]}),u.jsx("span",{className:"stat-value",children:f.toLocaleString()})]}),u.jsxs("div",{className:"stat-item",children:[u.jsxs("div",{className:"stat-label",children:[u.jsx(Le,{size:14}),u.jsx("span",{children:"Active Page:"})]}),u.jsx("span",{className:"stat-value",children:i+1})]})]}),p.length>0&&u.jsxs("div",{className:"sidebar-section",children:[u.jsxs("h3",{children:[u.jsx(en,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),u.jsx("div",{className:"document-outline","data-testid":"outline",children:p.map(d=>{const E=d.level===1?Nr:d.level===2?Mr:Rr;return u.jsxs("div",{className:`outline-item outline-level-${d.level}`,style:{marginLeft:`${(d.level-1)*12}px`},children:[u.jsx(E,{size:12,className:"outline-icon"}),u.jsx("span",{className:"outline-text",children:d.text}),u.jsxs("span",{className:"outline-page",children:["p.",d.page]})]},d.id)})})]}),u.jsxs("div",{className:"sidebar-section",children:[u.jsx("h3",{children:"Document"}),u.jsx("p",{children:"HTML Editor"}),u.jsx("p",{children:"Multi-page support"})]})]})]})};class an{constructor(t="Editor"){this.namespace=t}_format(t,o,n){return`[${new Date().toISOString()}] [${this.namespace}] [${t}] ${o}`}info(t,o){}warn(t,o){}error(t,o){}debug(t,o){}}const sn=new an("Editor"),cn=new Set(["P","DIV","H1","H2","H3","H4","H5","H6","LI","BLOCKQUOTE","PRE","TABLE"]),ln=32;function un(e,t){if(!e)return;e.dataset||(e.dataset={}),e.style||(e.style={});const o=parseInt(e.dataset.indentLevel||"0",10),n=Math.max(0,t?o-1:o+1);n===0?(e.style.marginLeft="",delete e.dataset.indentLevel):(e.style.marginLeft=`${n*ln}px`,e.dataset.indentLevel=String(n))}function eo(e,t){un(e,t)}function to(e){let t=e;for(;t;){if(t.nodeType===1&&t.tagName&&cn.has(t.tagName.toUpperCase()))return t;t=t.parentElement||t.parentNode}return null}function no(){const e=window.getSelection();if(!e||e.rangeCount===0)return[];const t=e.getRangeAt(0),o=new Set;let n=t.commonAncestorContainer;for(n.nodeType===Node.TEXT_NODE&&(n=n.parentElement);n&&n.contentEditable!=="true";)n=n.parentElement;return n?(n.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, li, blockquote, pre, table").forEach(r=>{document.createRange().selectNodeContents(r),t.intersectsNode(r)&&o.add(r)}),o.size===0&&n.querySelectorAll("img").forEach(i=>{if(document.createRange().selectNode(i),t.intersectsNode(i)){let b=i.parentElement;for(;b&&b!==n;){if(b.tagName&&cn.has(b.tagName.toUpperCase())){o.add(b);break}b=b.parentElement}}}),Array.from(o).filter(r=>{let i=r.parentElement;for(;i;){if(o.has(i))return!1;i=i.parentElement}return!0})):[]}function ro(e){if(e.style&&e.style.marginLeft&&e.style.marginLeft!==""){const t=parseInt(e.dataset.indentLevel||"0",10),o=Math.max(0,t-1);o===0?(e.style.marginLeft="",delete e.dataset.indentLevel):(e.style.marginLeft=`${o*ln}px`,e.dataset.indentLevel=String(o));return}if(e.innerHTML.startsWith("&nbsp;&nbsp;&nbsp;&nbsp;")){e.innerHTML=e.innerHTML.replace(/^(&nbsp;){4}/,"");return}try{const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);let o=t.nextNode();for(;o;){const n=o.textContent;if(n.startsWith("")){o.textContent=n.substring(4);break}o=t.nextNode()}}catch{e.innerHTML=e.innerHTML.replace(/^(&nbsp;){4}/,"")}}function ut(e=!1){const t=window.getSelection();if(!t||t.rangeCount===0)return!1;let o=no();const n=t.getRangeAt(0);if(o.length===0){const r=to(n.startContainer);if(!r)return!1;o=[r]}const s=o[0],a=o[o.length-1];o.forEach(r=>{if((r.tagName?r.tagName.toUpperCase():"")==="LI"){eo(r,e);return}e?ro(r):un(r,!1)});try{const r=document.createRange(),i=h=>h.nodeType===Node.TEXT_NODE?h:document.createTreeWalker(h,NodeFilter.SHOW_TEXT,null).nextNode(),g=h=>{if(h.nodeType===Node.TEXT_NODE)return h;const p=document.createTreeWalker(h,NodeFilter.SHOW_TEXT,null);let w=null,O=p.nextNode();for(;O;)w=O,O=p.nextNode();return w},b=i(s);b?r.setStart(b,0):r.setStart(s,0);const f=g(a);f?r.setEnd(f,f.length):r.setEnd(a,a.childNodes.length),t.removeAllRanges(),t.addRange(r)}catch{try{const i=document.createRange();i.setStartBefore(s),i.setEndAfter(a),t.removeAllRanges(),t.addRange(i)}catch(i){console.warn("Could not restore selection after indentation:",i)}}return!0}function oo(e){if(e.key!=="Tab")return!1;e.preventDefault();const t=e.shiftKey,o=window.getSelection(),n=o&&o.rangeCount>0?o.getRangeAt(0):null;return o&&o.rangeCount>0&&n&&!n.collapsed&&ut(t)||t||document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;"),!0}const je=({currentFormat:e,onFormatText:t,onAddPageBreak:o,canUndo:n=!1,canRedo:s=!1})=>{const a=async r=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(r.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(r.size>5242880){alert("Image exceeds maximum size of 5MB");return}const g=await Vt(r),b=await Kt(g);if(b){const h=`<img src="${b}" data-key="${g}" alt="Inserted image" />`;document.execCommand("insertHTML",!1,h),sn.info("Image inserted",{key:g})}const f=document.getElementById("image-upload");f&&(f.value="")}catch(i){sn.error("Error uploading image",i)}};return u.jsxs("div",{className:"editor-toolbar",children:[u.jsx("button",{onClick:()=>t("undo"),disabled:!n,title:"Undo",style:{opacity:n?1:.5},children:u.jsx(Kr,{size:16})}),u.jsx("button",{onClick:()=>t("redo"),disabled:!s,title:"Redo",style:{opacity:s?1:.5},children:u.jsx(Gr,{size:16})}),u.jsx("div",{className:"toolbar-separator"}),u.jsx("button",{onClick:()=>t("bold"),className:e.bold?"active":"",title:"Bold",children:u.jsx(kr,{size:16})}),u.jsx("button",{onClick:()=>t("italic"),className:e.italic?"active":"",title:"Italic",children:u.jsx(jr,{size:16})}),u.jsx("button",{onClick:()=>t("underline"),className:e.underline?"active":"",title:"Underline",children:u.jsx(Vr,{size:16})}),u.jsx("button",{onClick:()=>t("strikethrough"),className:e.strikethrough?"active":"",title:"Strikethrough",children:u.jsx(qr,{size:16})}),u.jsx("div",{className:"toolbar-separator"}),u.jsx("button",{onClick:()=>t("justifyLeft"),className:e.alignLeft?"active":"",title:"Align Left",children:u.jsx(rn,{size:16})}),u.jsx("button",{onClick:()=>t("justifyCenter"),className:e.alignCenter?"active":"",title:"Align Center",children:u.jsx(tn,{size:16})}),u.jsx("button",{onClick:()=>t("justifyRight"),className:e.alignRight?"active":"",title:"Align Right",children:u.jsx(nn,{size:16})}),u.jsx("button",{onClick:()=>t("justifyFull"),className:e.alignJustify?"active":"",title:"Justify",children:u.jsx(Zr,{size:16})}),u.jsx("div",{className:"toolbar-separator"}),u.jsxs("select",{onChange:r=>t("fontName",r.target.value),value:e.fontFamily||"Segoe UI",title:"Font Family",children:[u.jsx("option",{value:"Segoe UI",children:"Segoe UI "}),u.jsx("option",{value:"Arial",children:"Arial "}),u.jsx("option",{value:"Times New Roman",children:"Times New Roman "}),u.jsx("option",{value:"Courier New",children:"Courier New "}),u.jsx("option",{value:"Georgia",children:"Georgia "}),u.jsx("option",{value:"Verdana",children:"Verdana "}),u.jsx("option",{value:"Noto Sans Sinhala",children:"Noto Sans Sinhala "}),u.jsx("option",{value:"Iskoola Pota",children:"Iskoola Pota "}),u.jsx("option",{value:"Noto Sans Tamil",children:"Noto Sans Tamil "}),u.jsx("option",{value:"Noto Sans",children:"Noto Sans "})]}),u.jsx("select",{onChange:r=>t("fontSize",r.target.value),value:e.fontSize||xe,title:"Font Size",children:jt.map(({value:r,label:i})=>u.jsx("option",{value:r,children:i},r))}),u.jsxs("select",{onChange:r=>t("formatBlock",r.target.value),value:e.headingLevel||"p",title:"Heading Level",children:[u.jsx("option",{value:"p",children:"Normal"}),u.jsx("option",{value:"h1",children:"Heading 1"}),u.jsx("option",{value:"h2",children:"Heading 2"}),u.jsx("option",{value:"h3",children:"Heading 3"}),u.jsx("option",{value:"h4",children:"Heading 4"}),u.jsx("option",{value:"h5",children:"Heading 5"}),u.jsx("option",{value:"h6",children:"Heading 6"})]}),u.jsx("div",{className:"toolbar-separator"}),u.jsx("button",{onClick:()=>t("insertUnorderedList"),title:"Bullet List",children:u.jsx(en,{size:16})}),u.jsx("button",{onClick:()=>t("insertOrderedList"),title:"Numbered List",children:u.jsx(Hr,{size:16})}),u.jsx("div",{className:"toolbar-separator"}),u.jsx("button",{onClick:()=>{ut(!1)||document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;")},title:"Increase Indent (Tab)",children:u.jsx(zr,{size:16})}),u.jsx("button",{onClick:()=>{ut(!0)},title:"Decrease Indent (Shift+Tab)",children:u.jsx($r,{size:16})}),u.jsx("div",{className:"toolbar-separator"}),u.jsx("button",{onClick:()=>{const r=prompt("Enter URL:");r&&t("createLink",r)},title:"Insert Link",children:u.jsx(Dr,{size:16})}),u.jsx("button",{onClick:()=>t("insertHTML",'<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>'),title:"Insert Table",children:u.jsx(Wr,{size:16})}),o&&u.jsx("button",{onClick:o,title:"Insert Page Break",children:u.jsx(Le,{size:16})}),u.jsx("div",{className:"toolbar-separator"}),u.jsx("input",{type:"file",accept:"image/*",onChange:r=>r.target.files[0]&&a(r.target.files[0]),style:{display:"none"},id:"image-upload"}),u.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:u.jsx(Lr,{size:16})})]})};je.propTypes={currentFormat:x.shape({bold:x.bool,italic:x.bool,underline:x.bool,strikethrough:x.bool,alignLeft:x.bool,alignCenter:x.bool,alignRight:x.bool,alignJustify:x.bool,fontFamily:x.string,fontSize:x.string,headingLevel:x.string}).isRequired,onFormatText:x.func.isRequired,onAddPageBreak:x.func,canUndo:x.bool,canRedo:x.bool},je.defaultProps={onAddPageBreak:void 0,canUndo:!1,canRedo:!1};function ao(e){if(!e||typeof e!="string")return e;const t=document.createElement("div");return t.innerHTML=e,Ae(t)}function Ae(e){const t=[],o=Array.from(e.childNodes);for(let n=0;n<o.length;n++){const s=o[n];if(s.nodeType===Node.TEXT_NODE){const a=s.textContent.trim();if(a)if(a.match(/^\s*$/)&&a.includes(`
`)){const r=a.split(`
`).filter(i=>i.trim());r.length>0?r.forEach(i=>{i.trim()&&t.push(`<p>${dt(i.trim())}</p>`)}):t.push("<p><br></p>")}else t.push(`<p>${dt(a)}</p>`)}else if(s.nodeType===Node.ELEMENT_NODE){const a=s;if(a.tagName==="DIV"){const r=Ae(a);r.trim()?t.push(`<p>${r}</p>`):t.push("<p><br></p>")}else if(a.tagName==="P"){const r=Ae(a);t.push(`<p>${r}</p>`)}else if(a.tagName==="BR")t.push("<p><br></p>");else if(["SPAN","STRONG","EM","B","I","U","A"].includes(a.tagName)){const r=Ae(a),i=a.tagName.toLowerCase(),g=dn(a);t.push(`<${i}${g}>${r}</${i}>`)}else{const r=Ae(a),i=a.tagName.toLowerCase(),g=dn(a);t.push(`<${i}${g}>${r}</${i}>`)}}}return t.join("")}function dn(e){const t=[];for(let o=0;o<e.attributes.length;o++){const n=e.attributes[o];t.push(` ${n.name}="${n.value}"`)}return t.join("")}function dt(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function io(e){e.preventDefault();const t=e.clipboardData||window.clipboardData;if(!t)return null;let o=t.getData("text/html")||t.getData("text/plain");return o?(t.getData("text/html")?o=ao(o):o=so(o),document.execCommand("insertHTML",!1,o),o):null}function so(e){if(!e)return"";const t=e.split(/\n\s*\n/).filter(o=>o.trim());return t.length===0?"<p><br></p>":t.map(o=>{const n=o.split(`
`).filter(a=>a.trim());return n.length===0?"<p><br></p>":`<p>${n.map(a=>dt(a.trim())).join("<br>")}</p>`}).join("")}const De=({content:e,dimensions:t,pageSize:o,pageBoundaries:n=[],editorRef:s,onInput:a,onContentChange:r,onKeyDown:i,onClick:g,onScroll:b,onPaste:f,zoomLevel:h=100,pageMargins:p=de})=>{const w=Tt(p),O=h/100,d=(l,T)=>{if(!l)return!1;const y=l.getBoundingClientRect(),S=T-y.top;return S<w.top||S>y.height-w.bottom},E=l=>l?l.nodeType===Node.ELEMENT_NODE?l.tagName==="PAGE-BREAK"||l.getAttribute("data-page-break")==="true":l.parentElement&&E(l.parentElement):!1,N=l=>{const T=window.getSelection();if(!T||T.rangeCount===0)return;const y=T.getRangeAt(0),{startContainer:S,endContainer:I}=y;if((E(S)||E(I))&&(l.key.length===1||l.key==="Enter"||l.key===" "))return l.preventDefault(),!1;if(oo(l))return r&&r(),!1;if((l.key==="Backspace"||l.key==="Delete")&&(E(S)||E(I)))return l.preventDefault(),!1;i&&i(l)},z=l=>{if(!s.current)return;const T=l.target;if(E(T)){l.preventDefault();return}if(d(s.current,l.clientY)){l.preventDefault();const y=s.current.getBoundingClientRect();if(l.clientY-y.top<w.top){const I=s.current.firstElementChild;if(I&&I.tagName!=="PAGE-BREAK"){const _=document.createRange(),H=window.getSelection();_.setStart(I,0),_.collapse(!0),H.removeAllRanges(),H.addRange(_)}}else{const I=s.current.lastElementChild;if(I&&I.tagName!=="PAGE-BREAK"){const _=document.createRange(),H=window.getSelection();_.selectNodeContents(I),_.collapse(!1),H.removeAllRanges(),H.addRange(_)}}return}g&&g(l)},P=l=>{const T=window.getSelection();if(!T||T.rangeCount===0)return;const y=T.getRangeAt(0),{startContainer:S}=y;if(E(S))return l.preventDefault(),!1},D=l=>{const T=io(l);f&&f(l,T)};return u.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${t.width}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh",transform:`scale(${O})`,transformOrigin:"top center",transition:"transform 0.2s ease-out"},children:u.jsx("div",{ref:s,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${t.height}px`,width:`${t.width}px`,backgroundColor:"white",padding:`${w.top}px ${w.right}px ${w.bottom}px ${w.left}px`,boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:'"Segoe UI", "Noto Sans Sinhala", "Noto Sans", "Malithi Web", "Iskoola Pota", "Kaputa Unicode", "Helvetica Neue", Arial, "Hiragino Sans GB", "WenQuanYi Micro Hei", "Microsoft YaHei", sans-serif',fontSize:xe,lineHeight:"1.3",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:a,onKeyDown:N,onBeforeInput:P,onClick:z,onScroll:b,onPaste:D,"data-testid":"continuous-editor"})})};De.propTypes={content:x.string.isRequired,dimensions:x.shape({width:x.number.isRequired,height:x.number.isRequired}).isRequired,pageSize:x.oneOf(["A4","Letter","Legal"]).isRequired,pageBoundaries:x.arrayOf(x.shape({id:x.string.isRequired,pageNumber:x.number.isRequired,top:x.number,height:x.number})),editorRef:x.shape({current:x.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onInput:x.func.isRequired,onContentChange:x.func,onKeyDown:x.func,onClick:x.func,onScroll:x.func,onPaste:x.func,zoomLevel:x.number,pageMargins:x.string},De.defaultProps={pageBoundaries:[],onContentChange:void 0,onKeyDown:void 0,onClick:void 0,onScroll:void 0,onPaste:void 0,zoomLevel:100,pageMargins:de};const ft=({pageBoundaries:e=[{id:"page-0",pageNumber:1}],activePage:t=0,pageSize:o="A4",pageMargins:n=de,zoomLevel:s=100,canZoomIn:a=!0,canZoomOut:r=!0,onNavigate:i,onAddPage:g,onDeletePage:b,onPageSizeChange:f,onPageMarginsChange:h,onZoomIn:p,onZoomOut:w,onZoomReset:O}={})=>{const d=Math.max(e?.length||0,1),E=l=>{i&&i(l)},N=()=>{g&&g()},z=l=>{if(d<=1){console.warn("[PageManager] Cannot delete the only page");return}b&&b(l)},P=l=>{f&&f(l)},D=l=>{h&&h(l)};return u.jsxs("div",{className:"page-manager",children:[u.jsxs("div",{className:"page-settings-group",children:[u.jsxs("div",{className:"page-settings-header",children:[u.jsx(Fr,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Settings"]}),u.jsxs("div",{className:"page-settings-controls",children:[u.jsxs("div",{className:"page-setting-item",children:[u.jsx("label",{htmlFor:"page-size-selector",children:"Size:"}),u.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:o,onChange:l=>P(l.target.value),children:[u.jsx("option",{value:"A4",children:"A4"}),u.jsx("option",{value:"Letter",children:"Letter"}),u.jsx("option",{value:"Legal",children:"Legal"})]})]}),u.jsxs("div",{className:"page-setting-item",children:[u.jsx("label",{htmlFor:"page-margins-selector",children:"Margins:"}),u.jsx("select",{id:"page-margins-selector",role:"combobox","aria-label":"Page margins selector",value:n,onChange:l=>D(l.target.value),children:An().map(l=>u.jsx("option",{value:l,children:Pn(l)},l))})]})]})]}),u.jsxs("div",{className:"zoom-controls-compact",children:[u.jsx("button",{type:"button",className:"zoom-button-compact",onClick:w,disabled:!r,"aria-label":"Zoom out",title:"Zoom out (Ctrl + -)",children:u.jsx(Qr,{size:12})}),u.jsxs("span",{className:"zoom-level-display",children:[s,"%"]}),u.jsx("button",{type:"button",className:"zoom-button-compact",onClick:p,disabled:!a,"aria-label":"Zoom in",title:"Zoom in (Ctrl + +)",children:u.jsx(Jr,{size:12})}),u.jsx("button",{type:"button",className:"zoom-reset-compact",onClick:O,"aria-label":"Reset zoom",title:"Reset zoom to 100% (Ctrl + 0)",children:"Reset"})]}),u.jsx("div",{className:"page-list",children:(e&&e.length>0?e:[{id:"page-0",pageNumber:1}]).map((l,T)=>u.jsxs("div",{className:"page-item",children:[u.jsxs("button",{type:"button",className:`page-button ${T===t?"active":""}`,onClick:()=>E(T),"aria-label":`Go to page ${T+1}`,"aria-current":T===t?"page":void 0,children:[u.jsx(Le,{size:14}),u.jsxs("span",{children:["Page ",T+1]})]}),d>1&&u.jsx("button",{type:"button",className:"delete-page-button",onClick:y=>{y.stopPropagation(),z(T)},"aria-label":`Delete page ${T+1}`,title:"Delete this page and its content",children:u.jsx(Xr,{size:14})})]},l.id||`page-${T}`))}),u.jsxs("button",{type:"button",className:"add-page-button",onClick:N,"aria-label":"Add new page",title:"Add new page at end",children:[u.jsx(Br,{size:16}),u.jsx("span",{children:"Add Page"})]})]})};ft.propTypes={pageBoundaries:x.arrayOf(x.shape({id:x.string.isRequired,pageNumber:x.number.isRequired,top:x.number,height:x.number})),activePage:x.number,pageSize:x.oneOf(["A4","Letter","Legal"]),pageMargins:x.string,zoomLevel:x.number,canZoomIn:x.bool,canZoomOut:x.bool,onNavigate:x.func,onAddPage:x.func,onDeletePage:x.func,onPageSizeChange:x.func,onPageMarginsChange:x.func,onZoomIn:x.func,onZoomOut:x.func,onZoomReset:x.func},ft.defaultProps={pageBoundaries:[{id:"page-0",pageNumber:1}],activePage:0,pageSize:"A4",pageMargins:de,zoomLevel:100,canZoomIn:!0,canZoomOut:!0,onNavigate:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onPageMarginsChange:void 0,onZoomIn:void 0,onZoomOut:void 0,onZoomReset:void 0};const fn=m.memo(ft),$e=({editorRef:e,onImageResize:t,onImageSelect:o,onImageDeselect:n,resizeOptions:s=ue})=>{const a=m.useRef(null),r=m.useRef(null),i=m.useRef(null),g=m.useRef(null),b=m.useRef(s),f=m.useRef(!1),h=me();m.useEffect(()=>{b.current=s},[s]);const p=m.useCallback(y=>{if(!le(y))return;a.current&&(ge(a.current),a.current=null),y.classList.add("selected");const S=ct(y,b.current);S&&(a.current=S,r.current=y,document.body.appendChild(S),S.querySelectorAll(".resize-handler").forEach(_=>{_.addEventListener("mousedown",O)}),o&&(console.log("Image selected, calling onImageSelect callback"),o(y)))},[o]),w=m.useCallback(()=>{r.current&&(r.current.classList.remove("selected"),r.current=null),a.current&&(ge(a.current),a.current=null),i.current=null,g.current=null,f.current=!1,n&&n()},[n]),O=m.useCallback(y=>{if(y.preventDefault(),y.stopPropagation(),!r.current)return;const S=y.currentTarget.dataset.handler,I=r.current.getBoundingClientRect(),_=window.pageYOffset||document.documentElement.scrollTop,H=window.pageXOffset||document.documentElement.scrollLeft;i.current={x:y.clientX,y:y.clientY,width:r.current.offsetWidth,height:r.current.offsetHeight,originalWidth:r.current.offsetWidth,originalHeight:r.current.offsetHeight,offsetX:y.clientX-I.left-H,offsetY:y.clientY-I.top-_},g.current=S,f.current=!0,document.body.classList.add("resize-in-progress"),document.body.style.cursor=D(S),document.addEventListener("mousemove",d),document.addEventListener("mouseup",E)},[]),d=m.useCallback(y=>{if(!f.current||!r.current||!i.current||!g.current)return;y.preventDefault(),y.stopPropagation();const{x:S,y:I,width:_,height:H}=i.current,W=g.current,J=y.clientX,U=y.clientY,oe=l({handler:W,startX:S,startY:I,currentX:J,currentY:U,startWidth:_,startHeight:H,options:b.current});T(r.current,oe),a.current&&Re(a.current,r.current)},[]),E=m.useCallback(y=>{if(f.current){if(y.preventDefault(),y.stopPropagation(),r.current&&i.current){const S={width:i.current.originalWidth,height:i.current.originalHeight},I={width:r.current.offsetWidth,height:r.current.offsetHeight};(S.width!==I.width||S.height!==I.height)&&h.recordOperation({type:"IMAGE_RESIZE",payload:{element:r.current,state:I}},{type:"IMAGE_RESIZE",payload:{element:r.current,state:S}})}if(i.current=null,g.current=null,f.current=!1,document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",E),document.body.classList.remove("resize-in-progress"),document.body.style.cursor="",r.current){const S=new Event("input",{bubbles:!0,cancelable:!0});r.current.dispatchEvent(S),t&&t(r.current,{width:r.current.offsetWidth,height:r.current.offsetHeight})}}},[t,h]),N=m.useCallback(y=>{a.current&&!a.current.contains(y.target)&&w();const S=y.target;if(le(S)){if(S===r.current)return;p(S)}else console.log("Clicked on non-image element")},[p,w]),z=m.useCallback(y=>{if((y.key==="Delete"||y.key==="Backspace")&&r.current&&!f.current){y.preventDefault();const S=r.current;if(S.parentNode){S.parentNode.removeChild(S),w();const I=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(I)}}if(y.key==="Escape"&&r.current&&w(),r.current&&!f.current){if((y.ctrlKey||y.metaKey)&&y.shiftKey&&y.key===">"){y.preventDefault();const S=r.current.offsetWidth,I=Math.min(b.current.maxWidth||800,S+10);T(r.current,{width:I,height:r.current.offsetHeight});const _=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(_)}if((y.ctrlKey||y.metaKey)&&y.shiftKey&&y.key==="<"){y.preventDefault();const S=r.current.offsetWidth,I=Math.max(b.current.minWidth||50,S-10);T(r.current,{width:I,height:r.current.offsetHeight});const _=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(_)}if((y.ctrlKey||y.metaKey)&&y.shiftKey&&y.key==="+"){y.preventDefault();const S=r.current.offsetHeight,I=Math.min(b.current.maxHeight||600,S+10);T(r.current,{width:r.current.offsetWidth,height:I});const _=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(_)}if((y.ctrlKey||y.metaKey)&&y.shiftKey&&y.key==="-"){y.preventDefault();const S=r.current.offsetHeight,I=Math.max(b.current.minHeight||50,S-10);T(r.current,{width:r.current.offsetWidth,height:I});const _=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(_)}if((y.ctrlKey||y.metaKey)&&y.key==="r"){y.preventDefault(),T(r.current,{width:300,height:200});const S=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(S)}}},[e,w]),P=m.useCallback(()=>{a.current&&r.current&&Re(a.current,r.current)},[]);m.useEffect(()=>{if(!e.current)return;const S=e.current.closest(".editor-viewport");return S&&(S.addEventListener("scroll",P),window.addEventListener("scroll",P)),()=>{S&&S.removeEventListener("scroll",P),window.removeEventListener("scroll",P)}},[e,P]),m.useEffect(()=>{if(!e.current)return;const y=e.current;y.addEventListener("click",N),y.addEventListener("keydown",z);const S=y.closest(".editor-viewport");return S&&S.addEventListener("scroll",P),window.addEventListener("resize",P),()=>{y.removeEventListener("click",N),y.removeEventListener("keydown",z),S&&S.removeEventListener("scroll",P),window.removeEventListener("resize",P),f.current&&(document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",E),document.body.classList.remove("resize-in-progress"),document.body.style.cursor=""),a.current&&ge(a.current)}},[e,N,z,P,d,E]),m.useEffect(()=>{if(!e.current)return;const y=new MutationObserver(S=>{S.forEach(I=>{I.type==="childList"&&(I.removedNodes.length>0&&I.removedNodes.forEach(_=>{_.nodeType===Node.ELEMENT_NODE&&le(_)&&_===r.current&&w()}),I.addedNodes.length>0&&I.addedNodes.forEach(_=>{if(_.nodeType===Node.ELEMENT_NODE)if(le(_))setTimeout(()=>{p(_)},50);else{const H=_.querySelectorAll?_.querySelectorAll("img"):[];H.length>0&&setTimeout(()=>{p(H[0])},50)}}))})});return y.observe(e.current,{childList:!0,subtree:!0}),()=>{y.disconnect()}},[e,w,p]);function D(y){switch(y){case A.TOP_LEFT:case A.BOTTOM_RIGHT:return"nwse-resize";case A.TOP_RIGHT:case A.BOTTOM_LEFT:return"nesw-resize";case A.TOP:case A.BOTTOM:return"ns-resize";case A.LEFT:case A.RIGHT:return"ew-resize";default:return"default"}}function l({handler:y,startX:S,startY:I,currentX:_,currentY:H,startWidth:W,startHeight:J,options:U=ue}){const oe=_-S,te=H-I;let F=W,Z=J;switch(y){case A.TOP_LEFT:F=Math.max(U.minWidth,W-oe),Z=Math.max(U.minHeight,J-te);break;case A.TOP_RIGHT:F=Math.max(U.minWidth,W+oe),Z=Math.max(U.minHeight,J-te);break;case A.BOTTOM_LEFT:F=Math.max(U.minWidth,W-oe),Z=Math.max(U.minHeight,J+te);break;case A.BOTTOM_RIGHT:F=Math.max(U.minWidth,W+oe),Z=Math.max(U.minHeight,J+te);break;case A.TOP:Z=Math.max(U.minHeight,J-te);break;case A.BOTTOM:Z=Math.max(U.minHeight,J+te);break;case A.LEFT:F=Math.max(U.minWidth,W-oe);break;case A.RIGHT:F=Math.max(U.minWidth,W+oe);break;default:return{width:F,height:Z}}if(U.preserveAspectRatio&&U.aspectRatio){const ne=W/J;[A.TOP_LEFT,A.TOP_RIGHT,A.BOTTOM_LEFT,A.BOTTOM_RIGHT].includes(y)?F/ne>Z?Z=Math.max(U.minHeight,F/ne):F=Math.max(U.minWidth,Z*ne):[A.TOP,A.BOTTOM].includes(y)?F=Z*ne:[A.LEFT,A.RIGHT].includes(y)&&(Z=F/ne)}return U.maxWidth&&F>U.maxWidth&&(F=U.maxWidth,U.preserveAspectRatio&&U.aspectRatio&&(Z=F/(W/J))),U.maxHeight&&Z>U.maxHeight&&(Z=U.maxHeight,U.preserveAspectRatio&&U.aspectRatio&&(F=Z*(W/J))),F=Math.max(U.minWidth,F),Z=Math.max(U.minHeight,Z),{width:Math.round(F),height:Math.round(Z)}}function T(y,{width:S,height:I}){le(y)&&(y.tagName==="IMG"?(y.style.width=`${S}px`,y.style.height=`${I}px`,y.width=S,y.height=I):y.tagName==="DIV"&&(y.style.width=`${S}px`,y.style.height=`${I}px`))}return null};$e.propTypes={editorRef:x.shape({current:x.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onImageResize:x.func,onImageSelect:x.func,onImageDeselect:x.func,resizeOptions:x.shape({minWidth:x.number,minHeight:x.number,maxWidth:x.number,maxHeight:x.number,aspectRatio:x.bool,preserveAspectRatio:x.bool,defaultWidth:x.number,defaultHeight:x.number})},$e.defaultProps={onImageResize:void 0,onImageSelect:void 0,onImageDeselect:void 0,resizeOptions:ue};const pt=({imageElement:e,onAlignChange:t,onAspectRatioToggle:o,onDelete:n,onClose:s,initialPreserveAspectRatio:a=!0})=>{const[r,i]=m.useState({top:0,left:0}),[g,b]=m.useState(!1),[f,h]=m.useState("top"),[p,w]=m.useState(a),O=m.useRef(null),d=m.useRef(null),E=me(),N=_=>{if(!_)return null;const H=window.getComputedStyle(_);return{float:H.float||"none",margin:_.style.margin||"",display:H.display||"inline",width:_.style.width||_.width||"",height:_.style.height||_.height||"",aspectRatio:p}},z=()=>{if(!e)return"left";const _=window.getComputedStyle(e);return _.float||_.display==="block"?"left":_.display==="flex"&&_.justifyContent==="center"?"center":_.float==="right"?"right":"left"},[P,D]=m.useState(z());m.useEffect(()=>()=>{console.log("ImageTooltipMenu unmounted")},[e]),m.useEffect(()=>{if(e){let _=e.closest(".editor-viewport")||e.closest(".continuous-scroll");_&&(d.current=_)}},[e]),m.useLayoutEffect(()=>{if(!e||!O.current)return;const _=()=>{const W=e.getBoundingClientRect(),J=O.current.getBoundingClientRect();d.current;const U=window.visualViewport?window.visualViewport:{width:window.innerWidth,height:window.innerHeight},oe=W.bottom>=0&&W.top<=U.height&&W.right>=0&&W.left<=U.width;let te="top",F=0,Z=0;if(oe){const R=W.top-J.height-10,M=U.height-W.bottom-J.height-10;M>R&&M>0?(te="bottom",F=W.bottom+10):(te="top",F=W.top-J.height-10)}else te="top",F=10;Z=W.left+W.width/2-J.width/2;const ne=window.innerWidth,v=window.innerHeight;let c=Z,k=F;Z<10?c=10:Z+J.width>ne-10&&(c=ne-J.width-10),F<10?k=10:F+J.height>v-10&&(k=v-J.height-10),i({top:k,left:c}),h(te),b(!0)};_();const H=()=>{_()};return d.current&&d.current.addEventListener("scroll",H),window.addEventListener("scroll",H),window.addEventListener("resize",H),()=>{d.current&&d.current.removeEventListener("scroll",H),window.removeEventListener("scroll",H),window.removeEventListener("resize",H),b(!1)}},[e]),m.useEffect(()=>{const _=H=>{O.current&&!O.current.contains(H.target)&&H.target!==e&&s()};return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[e,s]);const l=()=>{if(e){const _=N(e);e.style.float="left",e.style.margin="0 10px 10px 0",e.style.display="block",D("left");const H=N(e);E.recordOperation({type:"IMAGE_ALIGN",payload:{element:e,alignment:"left",state:H}},{type:"IMAGE_ALIGN",payload:{element:e,alignment:z(),state:_}}),t&&t("left")}},T=()=>{if(e){const _=N(e);e.style.float="none",e.style.margin="10px auto",e.style.display="block",D("center");const H=N(e);E.recordOperation({type:"IMAGE_ALIGN",payload:{element:e,alignment:"center",state:H}},{type:"IMAGE_ALIGN",payload:{element:e,alignment:z(),state:_}}),t&&t("center")}},y=()=>{if(e){const _=N(e);e.style.float="right",e.style.margin="0 0 10px 10px",e.style.display="block",D("right");const H=N(e);E.recordOperation({type:"IMAGE_ALIGN",payload:{element:e,alignment:"right",state:H}},{type:"IMAGE_ALIGN",payload:{element:e,alignment:z(),state:_}}),t&&t("right")}},S=()=>{if(e&&e.parentNode){const _={element:e,parent:e.parentNode,nextSibling:e.nextSibling};E.recordOperation({type:"IMAGE_DELETE",payload:{element:e}},{type:"IMAGE_REINSERT",payload:{state:_}}),e.parentNode.removeChild(e),n&&n(),s()}},I=()=>{const _=p,H=!p;w(H),E.recordOperation({type:"IMAGE_ASPECT_RATIO",payload:{element:e,preserveAspectRatio:H}},{type:"IMAGE_ASPECT_RATIO",payload:{element:e,preserveAspectRatio:_}}),o&&o(H)};return!e||typeof document>"u"?null:yn.createPortal(u.jsxs("div",{ref:O,className:"image-tooltip-menu","data-menu-position":f,"aria-hidden":!g,style:{position:"fixed",top:`${r.top}px`,left:`${r.left}px`,zIndex:999,background:"#fff",border:"1px solid #ddd",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",padding:"8px",display:"flex",gap:"2px",alignItems:"center",pointerEvents:g?"auto":"none",minWidth:"140px",minHeight:"32px",opacity:g?1:0,visibility:g?"visible":"hidden",transition:"opacity 0.15s ease, visibility 0.15s ease"},children:[u.jsx("button",{className:`tooltip-button aspect-ratio-toggle ${p?"":"active"}`,onClick:I,title:`Toggle aspect ratio preservation (currently ${p?"ON":"OFF"})`,children:p?u.jsx(Ur,{size:14}):u.jsx(Ir,{size:14})}),u.jsx("button",{className:`tooltip-button ${P==="left"?"active":""}`,onClick:l,title:"Align Left",style:{background:P==="left"?"#007bff":"transparent",color:P==="left"?"#fff":"#333",border:"1px solid #ccc",borderRadius:"4px",padding:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"28px",height:"28px"},children:u.jsx(rn,{size:14})}),u.jsx("button",{className:`tooltip-button ${P==="center"?"active":""}`,onClick:T,title:"Align Center",style:{background:P==="center"?"#007bff":"transparent",color:P==="center"?"#fff":"#333",border:"1px solid #ccc",borderRadius:"4px",padding:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"28px",height:"28px"},children:u.jsx(tn,{size:14})}),u.jsx("button",{className:`tooltip-button ${P==="right"?"active":""}`,onClick:y,title:"Align Right",style:{background:P==="right"?"#007bff":"transparent",color:P==="right"?"#fff":"#333",border:"1px solid #ccc",borderRadius:"4px",padding:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"28px",height:"28px"},children:u.jsx(nn,{size:14})}),u.jsx("button",{className:"tooltip-button delete-button",onClick:S,title:"Delete Image",style:{background:"transparent",color:"#dc3545",border:"1px solid #dc3545",borderRadius:"4px",padding:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"28px",height:"28px"},children:u.jsx(Yr,{size:14})})]}),document.body)};pt.propTypes={imageElement:x.instanceOf(typeof Element<"u"?Element:Object),onAlignChange:x.func,onAspectRatioToggle:x.func,onDelete:x.func,onClose:x.func.isRequired,initialPreserveAspectRatio:x.bool},pt.defaultProps={imageElement:null,onAlignChange:void 0,onAspectRatioToggle:void 0,onDelete:void 0,initialPreserveAspectRatio:!0};const co=50,lo=50,pn=50,uo=100,fo=500,ze=m.forwardRef(({pageManagerComponent:e=null,onNavigatePage:t,onAddPage:o,onDeletePage:n,onPageSizeChange:s,onPageMarginsChange:a,onChange:r,showSidebar:i=!0,showToolbar:g=!0,showPageManager:b=!0},f)=>{const h=Qe(),p=me(),{pageSize:w,pageMargins:O,continuousContent:d,pageBoundaries:E,activePage:N,zoomLevel:z,canUndo:P,canRedo:D}=h,l=m.useRef(null),T=m.useRef(null),{currentFormat:y,formatText:S,updateCurrentFormatFromSelection:I}=Bt(),[_,H]=m.useState(!1),[W,J]=m.useState(null),[U,oe]=m.useState(!0),{checkAndUpdateBoundaries:te,getCurrentPage:F,scrollToPage:Z,updateBoundaries:ne,triggerAutoReflow:v,removePageAndContent:c,insertPageBreakAtBoundary:k}=Yt(w,T,z,O),R=m.useMemo(()=>Oe(w),[w]),[M,Y]=m.useState(!1),G=m.useRef(null),L=m.useRef(!1),q=m.useRef(!1),K=m.useRef(!1),V=m.useRef(d);m.useEffect(()=>{if(T.current){if(!K.current){T.current.innerHTML=d,K.current=!0,V.current=d;const j=setTimeout(()=>{ne()},co);return()=>clearTimeout(j)}if(V.current!==d){if(T.current.innerHTML!==d){T.current.innerHTML=d;const re=setTimeout(()=>{if(ne(),L.current){L.current=!1;const fe=Math.max(0,E.length-1);p.setActivePage(fe),setTimeout(()=>{Z(fe,l)},pn)}},lo);return V.current=d,()=>clearTimeout(re)}V.current=d}}},[d,ne,E.length,p,Z]),m.useEffect(()=>{r&&K.current&&r(d)},[d,r]),m.useImperativeHandle(f,()=>({getHTMLContent:()=>T.current?T.current.innerHTML:d,getPlainText:()=>(T.current?T.current.innerHTML:d).replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim(),setContent:j=>{p.updateContinuousContent(j),T.current&&(T.current.innerHTML=j,setTimeout(()=>{ne()},50))}}),[d,p,ne,T]),m.useEffect(()=>{const j=()=>{I()};document.addEventListener("selectionchange",j);const re=()=>{setTimeout(I,10)};return T.current&&T.current.addEventListener("focus",re),()=>{document.removeEventListener("selectionchange",j),T.current&&T.current.removeEventListener("focus",re)}},[I]);const ae=m.useCallback(()=>{if(!T.current)return;let j=T.current.innerHTML;j=Er(j),j!==T.current.innerHTML&&(T.current.innerHTML=j),p.updateContinuousContent(j),te(),v(200);const re=F(l);re!==N&&p.setActivePage(re)},[p,te,F,N,v,l,T]),C=m.useCallback(j=>{ae()},[ae]),se=m.useCallback(j=>{p.updatePageSize(j),ne({pageSize:j}),s&&s(j)},[p,ne,s]),he=m.useCallback(j=>{p.updatePageMargins(j),ne({pageMargins:j}),a&&a(j)},[p,ne,a]),Pe=m.useCallback(j=>{j<0||j>=E.length||(q.current=!0,p.setActivePage(j),Z(j,l),setTimeout(()=>{q.current=!1},fo),t&&t(j))},[p,Z,t,E.length]),gn=m.useCallback(()=>{const j=E.length+1;k(j)&&(L.current=!0,setTimeout(()=>{if(L.current){L.current=!1;const fe=Math.max(0,E.length-1);p.setActivePage(fe),setTimeout(()=>{Z(fe,l)},pn)}},100)),o&&o()},[E.length,k,p,Z,o]),go=m.useCallback(()=>{const j=window.getSelection();if(j&&j.rangeCount>0){if(!T?.current)return;const ht=`<page-break data-page-break="true" contenteditable="false" data-page-number="${T.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,ht),setTimeout(()=>{ne();const mt=F(l);p.setActivePage(mt)},150)}},[ne,F,p,l]),hn=m.useCallback(j=>{if(E.length<=1){console.warn("Cannot delete the only page");return}c(j)&&(p.setActivePage(0),n&&n(j))},[E.length,c,p,n]),He=m.useCallback(()=>{p.zoomIn()},[p]),Be=m.useCallback(()=>{p.zoomOut()},[p]),Ge=m.useCallback(()=>{p.resetZoom()},[p]);m.useEffect(()=>{const j=re=>{if(re.ctrlKey||re.metaKey){["+","=","-","_","0"].includes(re.key)&&re.preventDefault();const fe=document.activeElement===T.current,ht=document.activeElement===l.current,mt=document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA"||document.activeElement?.isContentEditable===!1;if(fe||ht||!mt)switch(re.key){case"+":case"=":He();break;case"-":case"_":Be();break;case"0":Ge();break}}};return window.addEventListener("keydown",j),()=>{window.removeEventListener("keydown",j)}},[He,Be,Ge]);const ho=m.useCallback(()=>{!l.current||!T.current||q.current||(G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{if(q.current){G.current=null;return}const j=F(l);j!==N&&j>=0&&p.setActivePage(j),G.current=null},uo))},[F,N,p]),mo=m.useMemo(()=>{if(!d)return 0;const re=d.replace(/<[^>]*>/g," ").match(new RegExp("\\p{L}+","gu"));return re?re.length:0},[d]),yo=E.length||1,bo=m.useCallback(j=>{H(!0),J(j)},[]),mn=m.useCallback(()=>{H(!1),J(null)},[]),Eo=m.useCallback((j,re)=>{},[]);return m.useEffect(()=>()=>{G.current&&clearTimeout(G.current)},[]),u.jsxs("div",{className:"multi-page-editor",children:[g&&u.jsx(je,{currentFormat:{...y,imageSelected:_},onFormatText:S,onAddPageBreak:go,canUndo:P,canRedo:D}),u.jsxs("div",{className:"editor-container",children:[i&&u.jsx(on,{editorView:null,isCollapsed:M,onToggle:()=>Y(j=>!j),wordCount:mo,pageCount:yo}),u.jsx("div",{className:"editor-viewport continuous-scroll",ref:l,onScroll:ho,children:u.jsx(De,{content:d,dimensions:R,pageSize:w,pageMargins:O,pageBoundaries:E,editorRef:T,onInput:C,onContentChange:ae,onClick:()=>T.current?.focus(),zoomLevel:z})}),u.jsx($e,{editorRef:T,onImageSelect:bo,onImageDeselect:mn,onImageResize:Eo,resizeOptions:{...ue,preserveAspectRatio:U,aspectRatio:U}}),_&&W&&u.jsx(pt,{imageElement:W,initialPreserveAspectRatio:U,onAlignChange:j=>{},onAspectRatioToggle:j=>{oe(j)},onDelete:()=>{if(W){const j=W.getAttribute("data-key");j&&Xt(j).catch(re=>{console.error("Failed to delete image from IndexedDB:",re)})}},onClose:mn}),b&&u.jsx("div",{className:"page-manager-sidebar",children:e?m.cloneElement(e,{onNavigate:Pe,onAddPage:gn,onDeletePage:hn,onPageSizeChange:se,onPageMarginsChange:he,zoomLevel:z,canZoomIn:Ze(z),canZoomOut:Ye(z),onZoomIn:He,onZoomOut:Be,onZoomReset:Ge}):u.jsx(fn,{pageBoundaries:E,activePage:N,pageSize:w,pageMargins:O,zoomLevel:z,canZoomIn:Ze(z),canZoomOut:Ye(z),onNavigate:Pe,onAddPage:gn,onDeletePage:hn,onPageSizeChange:se,onPageMarginsChange:he,onZoomIn:He,onZoomOut:Be,onZoomReset:Ge})})]})]})});ze.displayName="HtmlEditor",ze.propTypes={pageManagerComponent:x.element,onNavigatePage:x.func,onAddPage:x.func,onDeletePage:x.func,onPageSizeChange:x.func,onPageMarginsChange:x.func,onChange:x.func,showSidebar:x.bool,showToolbar:x.bool,showPageManager:x.bool},ze.defaultProps={pageManagerComponent:null,onNavigatePage:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onPageMarginsChange:void 0,onChange:void 0,showSidebar:!0,showToolbar:!0,showPageManager:!0};class gt extends m.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,o){console.error("[ErrorBoundary] Caught error:",t),console.error("[ErrorBoundary] Error info:",o),this.setState({error:t,errorInfo:o}),this.props.onError&&this.props.onError(t,o)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:u.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #f44336",borderRadius:"4px",backgroundColor:"#ffebee",color:"#c62828"},children:[u.jsx("h2",{style:{marginTop:0},children:" Something went wrong"}),u.jsx("p",{children:"The editor encountered an unexpected error and couldn't continue."}),this.props.showDetails&&this.state.error&&u.jsxs("details",{style:{marginTop:"10px",padding:"10px",backgroundColor:"white",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[u.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),u.jsxs("pre",{style:{marginTop:"10px",overflow:"auto",maxHeight:"200px"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),u.jsx("button",{onClick:this.handleReset,style:{marginTop:"15px",padding:"8px 16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Try Again"})]}):this.props.children}}gt.propTypes={children:x.node.isRequired,fallback:x.node,onError:x.func,onReset:x.func,showDetails:x.bool},gt.defaultProps={fallback:null,onError:void 0,onReset:void 0,showDetails:process.env.NODE_ENV==="development"};const po={A4:{width:ie.A4.width,height:ie.A4.height},Letter:{width:ie.Letter.width,height:ie.Letter.height},Legal:{width:ie.Legal.width,height:ie.Legal.height}};$.COMMON_FONT_SIZES=jt,$.DEFAULT_FONT_SIZE=xe,$.DEFAULT_IMAGE_RESIZE_OPTIONS=ue,$.DEFAULT_PAGE_SIZE=Ve,$.DocumentProvider=Cn,$.EditorToolbar=je,$.ErrorBoundary=gt,$.FONT_SIZE_MAP=st,$.HtmlEditor=ze,$.ImageResizeHandlers=$e,$.PAGE_DIMENSIONS=po,$.PAGE_SIZES=ie,$.PageManager=fn,$.PageView=De,$.RESIZE_HANDLERS=A,$.Sidebar=on,$.applyImageDimensions=Fn,$.calculateResizeDimensions=Gn,$.clearImages=mr,$.createResizeOverlay=ct,$.deleteImage=Xt,$.getAllImageKeys=yr,$.getAvailablePageSizes=Sn,$.getImage=Kt,$.getImageDimensions=Un,$.getPageDimensions=Oe,$.getPixelValue=zn,$.getPointValue=Hn,$.isResizableImage=le,$.isValidFontSize=Bn,$.isValidPageSize=kn,$.logger=an,$.pixelsToPoints=$t,$.pointsToPixels=Dt,$.removeResizeOverlay=ge,$.saveImage=Vt,$.updateResizeOverlay=Re,$.useContinuousReflow=Yt,$.useDocument=Je,$.useDocumentActions=me,$.useDocumentState=Qe,$.useFormatting=Bt,Object.defineProperty($,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
