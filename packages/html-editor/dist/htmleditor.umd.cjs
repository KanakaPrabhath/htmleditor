(function(Q,h){typeof exports=="object"&&typeof module<"u"?h(exports,require("react"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","react","uuid"],h):(Q=typeof globalThis<"u"?globalThis:Q||self,h(Q.HTMLEditor={},Q.React,Q.uuid))})(this,(function(Q,h,_e){"use strict";function bt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var de={exports:{}},se={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ue;function Et(){if(Ue)return se;Ue=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function u(t,i,c){var a=null;if(c!==void 0&&(a=""+c),i.key!==void 0&&(a=""+i.key),"key"in i){c={};for(var d in i)d!=="key"&&(c[d]=i[d])}else c=i;return i=c.ref,{$$typeof:e,type:t,key:a,ref:i!==void 0?i:null,props:c}}return se.Fragment=r,se.jsx=u,se.jsxs=u,se}var ce={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var He;function vt(){return He||(He=1,process.env.NODE_ENV!=="production"&&(function(){function e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Y?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case C:return"Profiler";case v:return"StrictMode";case x:return"Suspense";case k:return"SuspenseList";case L:return"Activity"}if(typeof n=="object")switch(typeof n.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),n.$$typeof){case j:return"Portal";case H:return n.displayName||"Context";case N:return(n._context.displayName||"Context")+".Consumer";case s:var p=n.render;return n=n.displayName,n||(n=p.displayName||p.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case M:return p=n.displayName||null,p!==null?p:e(n.type)||"Memo";case R:p=n._payload,n=n._init;try{return e(n(p))}catch{}}return null}function r(n){return""+n}function u(n){try{r(n);var p=!1}catch{p=!0}if(p){p=console;var A=p.error,T=typeof Symbol=="function"&&Symbol.toStringTag&&n[Symbol.toStringTag]||n.constructor.name||"Object";return A.call(p,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",T),r(n)}}function t(n){if(n===B)return"<>";if(typeof n=="object"&&n!==null&&n.$$typeof===R)return"<...>";try{var p=e(n);return p?"<"+p+">":"<...>"}catch{return"<...>"}}function i(){var n=J.A;return n===null?null:n.getOwner()}function c(){return Error("react-stack-top-frame")}function a(n){if(ne.call(n,"key")){var p=Object.getOwnPropertyDescriptor(n,"key").get;if(p&&p.isReactWarning)return!1}return n.key!==void 0}function d(n,p){function A(){I||(I=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",p))}A.isReactWarning=!0,Object.defineProperty(n,"key",{get:A,configurable:!0})}function y(){var n=e(this.type);return z[n]||(z[n]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),n=this.props.ref,n!==void 0?n:null}function m(n,p,A,T,$,S){var b=A.ref;return n={$$typeof:D,type:n,key:p,props:A,_owner:T},(b!==void 0?b:null)!==null?Object.defineProperty(n,"ref",{enumerable:!1,get:y}):Object.defineProperty(n,"ref",{enumerable:!1,value:null}),n._store={},Object.defineProperty(n._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(n,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(n,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:$}),Object.defineProperty(n,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:S}),Object.freeze&&(Object.freeze(n.props),Object.freeze(n)),n}function E(n,p,A,T,$,S){var b=p.children;if(b!==void 0)if(T)if(ee(b)){for(T=0;T<b.length;T++)g(b[T]);Object.freeze&&Object.freeze(b)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else g(b);if(ne.call(p,"key")){b=e(n);var w=Object.keys(p).filter(function(Z){return Z!=="key"});T=0<w.length?"{key: someKey, "+w.join(": ..., ")+": ...}":"{key: someKey}",f[b+T]||(w=0<w.length?"{"+w.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,T,b,w,b),f[b+T]=!0)}if(b=null,A!==void 0&&(u(A),b=""+A),a(p)&&(u(p.key),b=""+p.key),"key"in p){A={};for(var q in p)q!=="key"&&(A[q]=p[q])}else A=p;return b&&d(A,typeof n=="function"?n.displayName||n.name||"Unknown":n),m(n,b,A,i(),$,S)}function g(n){O(n)?n._store&&(n._store.validated=1):typeof n=="object"&&n!==null&&n.$$typeof===R&&(n._payload.status==="fulfilled"?O(n._payload.value)&&n._payload.value._store&&(n._payload.value._store.validated=1):n._store&&(n._store.validated=1))}function O(n){return typeof n=="object"&&n!==null&&n.$$typeof===D}var P=h,D=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),H=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),Y=Symbol.for("react.client.reference"),J=P.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=Object.prototype.hasOwnProperty,ee=Array.isArray,G=console.createTask?console.createTask:function(){return null};P={react_stack_bottom_frame:function(n){return n()}};var I,z={},te=P.react_stack_bottom_frame.bind(P,c)(),W=G(t(c)),f={};ce.Fragment=B,ce.jsx=function(n,p,A){var T=1e4>J.recentlyCreatedOwnerStacks++;return E(n,p,A,!1,T?Error("react-stack-top-frame"):te,T?G(t(n)):W)},ce.jsxs=function(n,p,A){var T=1e4>J.recentlyCreatedOwnerStacks++;return E(n,p,A,!0,T?Error("react-stack-top-frame"):te,T?G(t(n)):W)}})()),ce}var qe;function _t(){return qe||(qe=1,process.env.NODE_ENV==="production"?de.exports=Et():de.exports=vt()),de.exports}var o=_t();const xe=100,Te=50,Ae=200,Ge=5,ke=e=>e<Ae,Pe=e=>e>Te,le="A4",ae="<p><br></p>",xt="continuous",Ce={A4:{width:595,height:842},Letter:{width:612,height:792},Legal:{width:612,height:1008}},ue=(e,r=le)=>({id:_e.v4(),index:e,size:r,content:ae,images:[],isBreakPoint:!1}),fe=e=>typeof e!="string"||e.trim()===""?ae:e,Ze=(e,r=le)=>(e.length>0?e:[ue(0,r)]).map((t,i)=>({id:t.id||_e.v4(),index:i,size:t.size||r,content:fe(t.content),images:t.images||[],isBreakPoint:!!t.isBreakPoint})),Tt=(e=le)=>[{id:"page-0",pageNumber:1,top:0,height:(Ce[e]||Ce.A4).height}],Se=(e={})=>{const r=new Date().toISOString(),u=e.pageSize||le,t=Ze(e.pages||[ue(0,u)],u);return{id:_e.v4(),title:e.title||"Untitled Document",createdAt:r,updatedAt:r,pageSize:u,pages:t,activePage:e.activePage&&e.activePage<t.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:t.length,editorMode:e.editorMode||xt,continuousContent:e.continuousContent||ae,pageBoundaries:e.pageBoundaries||Tt(u),zoomLevel:e.zoomLevel||xe}},U={INITIALIZE_DOCUMENT:"INITIALIZE_DOCUMENT",UPDATE_TITLE:"UPDATE_TITLE",UPDATE_PAGE_CONTENT:"UPDATE_PAGE_CONTENT",UPDATE_PAGES:"UPDATE_PAGES",ADD_PAGE:"ADD_PAGE",DELETE_PAGE:"DELETE_PAGE",SET_ACTIVE_PAGE:"SET_ACTIVE_PAGE",UPDATE_PAGE_SIZE:"UPDATE_PAGE_SIZE",RESET_DOCUMENT:"RESET_DOCUMENT",UPDATE_CONTINUOUS_CONTENT:"UPDATE_CONTINUOUS_CONTENT",UPDATE_PAGE_BOUNDARIES:"UPDATE_PAGE_BOUNDARIES",ADD_PAGE_BREAK:"ADD_PAGE_BREAK",REMOVE_PAGE_BREAK:"REMOVE_PAGE_BREAK",SET_EDITOR_MODE:"SET_EDITOR_MODE",INSERT_PAGE_AT:"INSERT_PAGE_AT",MOVE_PAGE_TO:"MOVE_PAGE_TO",DUPLICATE_PAGE:"DUPLICATE_PAGE",SET_ZOOM_LEVEL:"SET_ZOOM_LEVEL",ZOOM_IN:"ZOOM_IN",ZOOM_OUT:"ZOOM_OUT",RESET_ZOOM:"RESET_ZOOM"},At=(e,r)=>{const u=new Date().toISOString();switch(r.type){case U.INITIALIZE_DOCUMENT:{const{initialContent:t=ae,pageSize:i=le}=r.payload||{},c={...ue(0,i),content:fe(t)};return Se({title:e.title,pageSize:i,pages:[c]})}case U.UPDATE_TITLE:return{...e,title:r.payload,updatedAt:u};case U.UPDATE_PAGE_CONTENT:{const{pageIndex:t,content:i}=r.payload;if(t<0||t>=e.pages.length)return e;const c=[...e.pages];return c[t]={...c[t],content:fe(i)},{...e,pages:c,updatedAt:u}}case U.UPDATE_PAGES:{const t=Array.isArray(r.payload)?{pages:r.payload}:r.payload||{},i=Ze(t.pages||[],e.pageSize),c=Array.isArray(t.pageBreaks)?t.pageBreaks:i.slice(0,-1).map((a,d)=>({id:`auto-break-${d}`,pageNumber:d+1}));return{...e,pages:i,activePage:Math.min(e.activePage,i.length-1),pageBreaks:c,totalPages:i.length,updatedAt:u}}case U.ADD_PAGE:{const t=typeof r.payload?.index=="number"?Math.min(Math.max(r.payload.index,0),e.pages.length):e.pages.length,i=[...e.pages];i.splice(t,0,ue(t,e.pageSize));const c=i.map((d,y)=>({...d,index:y,size:e.pageSize})),a=c.slice(0,-1).map((d,y)=>({id:`auto-break-${y}`,pageNumber:y+1}));return{...e,pages:c,activePage:t,pageBreaks:a,totalPages:c.length,updatedAt:u}}case U.DELETE_PAGE:{const t=r.payload;if(e.pages.length<=1)return e;const i=[...e.pages];i.splice(t,1);const c=i.map((y,m)=>({...y,index:m,size:e.pageSize}));let a=e.activePage;a>=c.length?a=c.length-1:t<=a&&a>0&&(a-=1);const d=c.slice(0,-1).map((y,m)=>({id:`auto-break-${m}`,pageNumber:m+1}));return{...e,pages:c,activePage:a,pageBreaks:d,totalPages:c.length,updatedAt:u}}case U.SET_ACTIVE_PAGE:{const t=r.payload;if(t===e.activePage)return e;const i=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;return t<0||t>=i?e:{...e,activePage:t,updatedAt:u}}case U.UPDATE_PAGE_SIZE:{const t=r.payload;if(t===e.pageSize)return e;if(!Ce[t])return console.warn(`Invalid page size: ${t}`),e;const i=e.pages.map((a,d)=>({...a,index:d,size:t})),c=i.slice(0,-1).map((a,d)=>({id:`auto-break-${d}`,pageNumber:d+1}));return{...e,pageSize:t,pages:i,pageBreaks:c,updatedAt:u}}case U.RESET_DOCUMENT:return Se();case U.UPDATE_CONTINUOUS_CONTENT:{const t=fe(r.payload);return t===e.continuousContent?e:{...e,continuousContent:t,updatedAt:u}}case U.UPDATE_PAGE_BOUNDARIES:{const t=Array.isArray(r.payload)?r.payload:[];if(t.length===e.pageBoundaries.length&&t.length>0&&t[0].id===e.pageBoundaries[0]?.id&&t[t.length-1].id===e.pageBoundaries[t.length-1]?.id)return e;const i=e.activePage>=t.length?Math.max(0,t.length-1):e.activePage;return{...e,pageBoundaries:t,totalPages:t.length,activePage:i,updatedAt:u}}case U.ADD_PAGE_BREAK:{const{position:t="end",pageIndex:i}=r.payload||{},c='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';let a=e.continuousContent;if(t==="end")a=a+c+"<p><br></p>";else if(typeof t=="number"){const d=a.substring(0,t),y=a.substring(t);a=d+c+y}else if(typeof i=="number"&&typeof document<"u"){const d=document.createElement("div");d.innerHTML=a;const y=d.querySelectorAll('page-break, [data-page-break="true"]');if(i===0&&y.length===0)a=a+c+"<p><br></p>";else if(i<y.length){const m=y[i],E=document.createElement("page-break");E.setAttribute("data-page-break","true"),E.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const g=document.createElement("p");g.innerHTML="<br>",m.parentNode.insertBefore(E,m.nextSibling),E.parentNode.insertBefore(g,E.nextSibling),a=d.innerHTML}else a=a+c+"<p><br></p>"}return{...e,continuousContent:a,updatedAt:u}}case U.REMOVE_PAGE_BREAK:{const{pageIndex:t}=r.payload||{};if(typeof t!="number"||typeof document>"u")return e;const i=document.createElement("div");i.innerHTML=e.continuousContent;const c=i.querySelectorAll('page-break, [data-page-break="true"]');return c[t]&&c[t].remove(),i.querySelectorAll('page-break, [data-page-break="true"]').forEach((d,y)=>{d.setAttribute("data-page-number",String(y+2))}),{...e,continuousContent:i.innerHTML,updatedAt:u}}case U.SET_EDITOR_MODE:{const t=r.payload;if(t===e.editorMode)return e;let i=e.continuousContent,c=e.pages;return t==="continuous"?i=e.pages.map(d=>d.content).filter(d=>d&&d!==ae).join(`
`)||ae:e.continuousContent&&e.continuousContent!==ae&&(c=[{...ue(0,e.pageSize),content:e.continuousContent}]),{...e,editorMode:t,continuousContent:i,pages:c,updatedAt:u}}case U.SET_ZOOM_LEVEL:{const t=r.payload;return t<Te||t>Ae?(console.warn(`Invalid zoom level: ${t}. Must be between ${Te} and ${Ae}.`),e):t===e.zoomLevel?e:{...e,zoomLevel:t,updatedAt:u}}case U.ZOOM_IN:{if(!ke(e.zoomLevel))return e;const t=e.zoomLevel+Ge;return{...e,zoomLevel:t,updatedAt:u}}case U.ZOOM_OUT:{if(!Pe(e.zoomLevel))return e;const t=e.zoomLevel-Ge;return{...e,zoomLevel:t,updatedAt:u}}case U.RESET_ZOOM:return e.zoomLevel===xe?e:{...e,zoomLevel:xe,updatedAt:u};default:return e}},Ye=h.createContext(null),kt=({children:e,initialState:r={}})=>{const[u,t]=h.useReducer(At,Se(r)),i=h.useMemo(()=>({initializeDocument:a=>t({type:U.INITIALIZE_DOCUMENT,payload:a}),updateTitle:a=>t({type:U.UPDATE_TITLE,payload:a}),updatePageContent:a=>t({type:U.UPDATE_PAGE_CONTENT,payload:a}),updatePages:a=>t({type:U.UPDATE_PAGES,payload:a}),addPage:a=>t({type:U.ADD_PAGE,payload:a}),deletePage:a=>t({type:U.DELETE_PAGE,payload:a}),setActivePage:a=>t({type:U.SET_ACTIVE_PAGE,payload:a}),updatePageSize:a=>t({type:U.UPDATE_PAGE_SIZE,payload:a}),resetDocument:()=>t({type:U.RESET_DOCUMENT}),updateContinuousContent:a=>t({type:U.UPDATE_CONTINUOUS_CONTENT,payload:a}),updatePageBoundaries:a=>t({type:U.UPDATE_PAGE_BOUNDARIES,payload:a}),addPageBreak:a=>t({type:U.ADD_PAGE_BREAK,payload:a}),removePageBreak:a=>t({type:U.REMOVE_PAGE_BREAK,payload:a}),setEditorMode:a=>t({type:U.SET_EDITOR_MODE,payload:a}),insertPageAt:a=>t({type:U.INSERT_PAGE_AT,payload:a}),movePageTo:a=>t({type:U.MOVE_PAGE_TO,payload:a}),duplicatePage:a=>t({type:U.DUPLICATE_PAGE,payload:a}),setZoomLevel:a=>t({type:U.SET_ZOOM_LEVEL,payload:a}),zoomIn:()=>t({type:U.ZOOM_IN}),zoomOut:()=>t({type:U.ZOOM_OUT}),resetZoom:()=>t({type:U.RESET_ZOOM})}),[]),c=h.useMemo(()=>({state:u,actions:i,dispatch:t}),[u,i]);return o.jsx(Ye.Provider,{value:c,children:e})},we=()=>{const e=h.useContext(Ye);if(!e)throw new Error("useDocument must be used within a DocumentProvider");return e},Oe=()=>{const{state:e}=we();return e},Ne=()=>{const{actions:e}=we();return e};var pe={exports:{}},ge={exports:{}},F={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fe;function Pt(){if(Fe)return F;Fe=1;var e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,u=e?Symbol.for("react.portal"):60106,t=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,c=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,y=e?Symbol.for("react.async_mode"):60111,m=e?Symbol.for("react.concurrent_mode"):60111,E=e?Symbol.for("react.forward_ref"):60112,g=e?Symbol.for("react.suspense"):60113,O=e?Symbol.for("react.suspense_list"):60120,P=e?Symbol.for("react.memo"):60115,D=e?Symbol.for("react.lazy"):60116,j=e?Symbol.for("react.block"):60121,B=e?Symbol.for("react.fundamental"):60117,v=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function N(s){if(typeof s=="object"&&s!==null){var x=s.$$typeof;switch(x){case r:switch(s=s.type,s){case y:case m:case t:case c:case i:case g:return s;default:switch(s=s&&s.$$typeof,s){case d:case E:case D:case P:case a:return s;default:return x}}case u:return x}}}function H(s){return N(s)===m}return F.AsyncMode=y,F.ConcurrentMode=m,F.ContextConsumer=d,F.ContextProvider=a,F.Element=r,F.ForwardRef=E,F.Fragment=t,F.Lazy=D,F.Memo=P,F.Portal=u,F.Profiler=c,F.StrictMode=i,F.Suspense=g,F.isAsyncMode=function(s){return H(s)||N(s)===y},F.isConcurrentMode=H,F.isContextConsumer=function(s){return N(s)===d},F.isContextProvider=function(s){return N(s)===a},F.isElement=function(s){return typeof s=="object"&&s!==null&&s.$$typeof===r},F.isForwardRef=function(s){return N(s)===E},F.isFragment=function(s){return N(s)===t},F.isLazy=function(s){return N(s)===D},F.isMemo=function(s){return N(s)===P},F.isPortal=function(s){return N(s)===u},F.isProfiler=function(s){return N(s)===c},F.isStrictMode=function(s){return N(s)===i},F.isSuspense=function(s){return N(s)===g},F.isValidElementType=function(s){return typeof s=="string"||typeof s=="function"||s===t||s===m||s===c||s===i||s===g||s===O||typeof s=="object"&&s!==null&&(s.$$typeof===D||s.$$typeof===P||s.$$typeof===a||s.$$typeof===d||s.$$typeof===E||s.$$typeof===B||s.$$typeof===v||s.$$typeof===C||s.$$typeof===j)},F.typeOf=N,F}var V={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ve;function Ct(){return Ve||(Ve=1,process.env.NODE_ENV!=="production"&&(function(){var e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,u=e?Symbol.for("react.portal"):60106,t=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,c=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,y=e?Symbol.for("react.async_mode"):60111,m=e?Symbol.for("react.concurrent_mode"):60111,E=e?Symbol.for("react.forward_ref"):60112,g=e?Symbol.for("react.suspense"):60113,O=e?Symbol.for("react.suspense_list"):60120,P=e?Symbol.for("react.memo"):60115,D=e?Symbol.for("react.lazy"):60116,j=e?Symbol.for("react.block"):60121,B=e?Symbol.for("react.fundamental"):60117,v=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function N(l){return typeof l=="string"||typeof l=="function"||l===t||l===m||l===c||l===i||l===g||l===O||typeof l=="object"&&l!==null&&(l.$$typeof===D||l.$$typeof===P||l.$$typeof===a||l.$$typeof===d||l.$$typeof===E||l.$$typeof===B||l.$$typeof===v||l.$$typeof===C||l.$$typeof===j)}function H(l){if(typeof l=="object"&&l!==null){var X=l.$$typeof;switch(X){case r:var oe=l.type;switch(oe){case y:case m:case t:case c:case i:case g:return oe;default:var ve=oe&&oe.$$typeof;switch(ve){case d:case E:case D:case P:case a:return ve;default:return X}}case u:return X}}}var s=y,x=m,k=d,M=a,R=r,L=E,Y=t,J=D,ne=P,ee=u,G=c,I=i,z=g,te=!1;function W(l){return te||(te=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),f(l)||H(l)===y}function f(l){return H(l)===m}function n(l){return H(l)===d}function p(l){return H(l)===a}function A(l){return typeof l=="object"&&l!==null&&l.$$typeof===r}function T(l){return H(l)===E}function $(l){return H(l)===t}function S(l){return H(l)===D}function b(l){return H(l)===P}function w(l){return H(l)===u}function q(l){return H(l)===c}function Z(l){return H(l)===i}function re(l){return H(l)===g}V.AsyncMode=s,V.ConcurrentMode=x,V.ContextConsumer=k,V.ContextProvider=M,V.Element=R,V.ForwardRef=L,V.Fragment=Y,V.Lazy=J,V.Memo=ne,V.Portal=ee,V.Profiler=G,V.StrictMode=I,V.Suspense=z,V.isAsyncMode=W,V.isConcurrentMode=f,V.isContextConsumer=n,V.isContextProvider=p,V.isElement=A,V.isForwardRef=T,V.isFragment=$,V.isLazy=S,V.isMemo=b,V.isPortal=w,V.isProfiler=q,V.isStrictMode=Z,V.isSuspense=re,V.isValidElementType=N,V.typeOf=H})()),V}var We;function Ke(){return We||(We=1,process.env.NODE_ENV==="production"?ge.exports=Pt():ge.exports=Ct()),ge.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var je,Je;function St(){if(Je)return je;Je=1;var e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;function t(c){if(c==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(c)}function i(){try{if(!Object.assign)return!1;var c=new String("abc");if(c[5]="de",Object.getOwnPropertyNames(c)[0]==="5")return!1;for(var a={},d=0;d<10;d++)a["_"+String.fromCharCode(d)]=d;var y=Object.getOwnPropertyNames(a).map(function(E){return a[E]});if(y.join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(E){m[E]=E}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return je=i()?Object.assign:function(c,a){for(var d,y=t(c),m,E=1;E<arguments.length;E++){d=Object(arguments[E]);for(var g in d)r.call(d,g)&&(y[g]=d[g]);if(e){m=e(d);for(var O=0;O<m.length;O++)u.call(d,m[O])&&(y[m[O]]=d[m[O]])}}return y},je}var Me,Xe;function Re(){if(Xe)return Me;Xe=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Me=e,Me}var Ie,Qe;function et(){return Qe||(Qe=1,Ie=Function.call.bind(Object.prototype.hasOwnProperty)),Ie}var De,tt;function wt(){if(tt)return De;tt=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var r=Re(),u={},t=et();e=function(c){var a="Warning: "+c;typeof console<"u"&&console.error(a);try{throw new Error(a)}catch{}}}function i(c,a,d,y,m){if(process.env.NODE_ENV!=="production"){for(var E in c)if(t(c,E)){var g;try{if(typeof c[E]!="function"){var O=Error((y||"React class")+": "+d+" type `"+E+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof c[E]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw O.name="Invariant Violation",O}g=c[E](a,E,y,d,null,r)}catch(D){g=D}if(g&&!(g instanceof Error)&&e((y||"React class")+": type specification of "+d+" `"+E+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof g+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),g instanceof Error&&!(g.message in u)){u[g.message]=!0;var P=m?m():"";e("Failed "+d+" type: "+g.message+(P??""))}}}}return i.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(u={})},De=i,De}var Le,nt;function Ot(){if(nt)return Le;nt=1;var e=Ke(),r=St(),u=Re(),t=et(),i=wt(),c=function(){};process.env.NODE_ENV!=="production"&&(c=function(d){var y="Warning: "+d;typeof console<"u"&&console.error(y);try{throw new Error(y)}catch{}});function a(){return null}return Le=function(d,y){var m=typeof Symbol=="function"&&Symbol.iterator,E="@@iterator";function g(f){var n=f&&(m&&f[m]||f[E]);if(typeof n=="function")return n}var O="<<anonymous>>",P={array:v("array"),bigint:v("bigint"),bool:v("boolean"),func:v("function"),number:v("number"),object:v("object"),string:v("string"),symbol:v("symbol"),any:C(),arrayOf:N,element:H(),elementType:s(),instanceOf:x,node:L(),objectOf:M,oneOf:k,oneOfType:R,shape:J,exact:ne};function D(f,n){return f===n?f!==0||1/f===1/n:f!==f&&n!==n}function j(f,n){this.message=f,this.data=n&&typeof n=="object"?n:{},this.stack=""}j.prototype=Error.prototype;function B(f){if(process.env.NODE_ENV!=="production")var n={},p=0;function A($,S,b,w,q,Z,re){if(w=w||O,Z=Z||b,re!==u){if(y){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var X=w+":"+b;!n[X]&&p<3&&(c("You are manually calling a React.PropTypes validation function for the `"+Z+"` prop on `"+w+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[X]=!0,p++)}}return S[b]==null?$?S[b]===null?new j("The "+q+" `"+Z+"` is marked as required "+("in `"+w+"`, but its value is `null`.")):new j("The "+q+" `"+Z+"` is marked as required in "+("`"+w+"`, but its value is `undefined`.")):null:f(S,b,w,q,Z)}var T=A.bind(null,!1);return T.isRequired=A.bind(null,!0),T}function v(f){function n(p,A,T,$,S,b){var w=p[A],q=I(w);if(q!==f){var Z=z(w);return new j("Invalid "+$+" `"+S+"` of type "+("`"+Z+"` supplied to `"+T+"`, expected ")+("`"+f+"`."),{expectedType:f})}return null}return B(n)}function C(){return B(a)}function N(f){function n(p,A,T,$,S){if(typeof f!="function")return new j("Property `"+S+"` of component `"+T+"` has invalid PropType notation inside arrayOf.");var b=p[A];if(!Array.isArray(b)){var w=I(b);return new j("Invalid "+$+" `"+S+"` of type "+("`"+w+"` supplied to `"+T+"`, expected an array."))}for(var q=0;q<b.length;q++){var Z=f(b,q,T,$,S+"["+q+"]",u);if(Z instanceof Error)return Z}return null}return B(n)}function H(){function f(n,p,A,T,$){var S=n[p];if(!d(S)){var b=I(S);return new j("Invalid "+T+" `"+$+"` of type "+("`"+b+"` supplied to `"+A+"`, expected a single ReactElement."))}return null}return B(f)}function s(){function f(n,p,A,T,$){var S=n[p];if(!e.isValidElementType(S)){var b=I(S);return new j("Invalid "+T+" `"+$+"` of type "+("`"+b+"` supplied to `"+A+"`, expected a single ReactElement type."))}return null}return B(f)}function x(f){function n(p,A,T,$,S){if(!(p[A]instanceof f)){var b=f.name||O,w=W(p[A]);return new j("Invalid "+$+" `"+S+"` of type "+("`"+w+"` supplied to `"+T+"`, expected ")+("instance of `"+b+"`."))}return null}return B(n)}function k(f){if(!Array.isArray(f))return process.env.NODE_ENV!=="production"&&(arguments.length>1?c("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):c("Invalid argument supplied to oneOf, expected an array.")),a;function n(p,A,T,$,S){for(var b=p[A],w=0;w<f.length;w++)if(D(b,f[w]))return null;var q=JSON.stringify(f,function(re,l){var X=z(l);return X==="symbol"?String(l):l});return new j("Invalid "+$+" `"+S+"` of value `"+String(b)+"` "+("supplied to `"+T+"`, expected one of "+q+"."))}return B(n)}function M(f){function n(p,A,T,$,S){if(typeof f!="function")return new j("Property `"+S+"` of component `"+T+"` has invalid PropType notation inside objectOf.");var b=p[A],w=I(b);if(w!=="object")return new j("Invalid "+$+" `"+S+"` of type "+("`"+w+"` supplied to `"+T+"`, expected an object."));for(var q in b)if(t(b,q)){var Z=f(b,q,T,$,S+"."+q,u);if(Z instanceof Error)return Z}return null}return B(n)}function R(f){if(!Array.isArray(f))return process.env.NODE_ENV!=="production"&&c("Invalid argument supplied to oneOfType, expected an instance of array."),a;for(var n=0;n<f.length;n++){var p=f[n];if(typeof p!="function")return c("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+te(p)+" at index "+n+"."),a}function A(T,$,S,b,w){for(var q=[],Z=0;Z<f.length;Z++){var re=f[Z],l=re(T,$,S,b,w,u);if(l==null)return null;l.data&&t(l.data,"expectedType")&&q.push(l.data.expectedType)}var X=q.length>0?", expected one of type ["+q.join(", ")+"]":"";return new j("Invalid "+b+" `"+w+"` supplied to "+("`"+S+"`"+X+"."))}return B(A)}function L(){function f(n,p,A,T,$){return ee(n[p])?null:new j("Invalid "+T+" `"+$+"` supplied to "+("`"+A+"`, expected a ReactNode."))}return B(f)}function Y(f,n,p,A,T){return new j((f||"React class")+": "+n+" type `"+p+"."+A+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+T+"`.")}function J(f){function n(p,A,T,$,S){var b=p[A],w=I(b);if(w!=="object")return new j("Invalid "+$+" `"+S+"` of type `"+w+"` "+("supplied to `"+T+"`, expected `object`."));for(var q in f){var Z=f[q];if(typeof Z!="function")return Y(T,$,S,q,z(Z));var re=Z(b,q,T,$,S+"."+q,u);if(re)return re}return null}return B(n)}function ne(f){function n(p,A,T,$,S){var b=p[A],w=I(b);if(w!=="object")return new j("Invalid "+$+" `"+S+"` of type `"+w+"` "+("supplied to `"+T+"`, expected `object`."));var q=r({},p[A],f);for(var Z in q){var re=f[Z];if(t(f,Z)&&typeof re!="function")return Y(T,$,S,Z,z(re));if(!re)return new j("Invalid "+$+" `"+S+"` key `"+Z+"` supplied to `"+T+"`.\nBad object: "+JSON.stringify(p[A],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(f),null,"  "));var l=re(b,Z,T,$,S+"."+Z,u);if(l)return l}return null}return B(n)}function ee(f){switch(typeof f){case"number":case"string":case"undefined":return!0;case"boolean":return!f;case"object":if(Array.isArray(f))return f.every(ee);if(f===null||d(f))return!0;var n=g(f);if(n){var p=n.call(f),A;if(n!==f.entries){for(;!(A=p.next()).done;)if(!ee(A.value))return!1}else for(;!(A=p.next()).done;){var T=A.value;if(T&&!ee(T[1]))return!1}}else return!1;return!0;default:return!1}}function G(f,n){return f==="symbol"?!0:n?n["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&n instanceof Symbol:!1}function I(f){var n=typeof f;return Array.isArray(f)?"array":f instanceof RegExp?"object":G(n,f)?"symbol":n}function z(f){if(typeof f>"u"||f===null)return""+f;var n=I(f);if(n==="object"){if(f instanceof Date)return"date";if(f instanceof RegExp)return"regexp"}return n}function te(f){var n=z(f);switch(n){case"array":case"object":return"an "+n;case"boolean":case"date":case"regexp":return"a "+n;default:return n}}function W(f){return!f.constructor||!f.constructor.name?O:f.constructor.name}return P.checkPropTypes=i,P.resetWarningCache=i.resetWarningCache,P.PropTypes=P,P},Le}var ze,rt;function Nt(){if(rt)return ze;rt=1;var e=Re();function r(){}function u(){}return u.resetWarningCache=r,ze=function(){function t(a,d,y,m,E,g){if(g!==e){var O=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw O.name="Invariant Violation",O}}t.isRequired=t;function i(){return t}var c={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:i,element:t,elementType:t,instanceOf:i,node:t,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:u,resetWarningCache:r};return c.PropTypes=c,c},ze}var ot;function jt(){if(ot)return pe.exports;if(ot=1,process.env.NODE_ENV!=="production"){var e=Ke(),r=!0;pe.exports=Ot()(e.isElement,r)}else pe.exports=Nt()();return pe.exports}var Mt=jt();const _=bt(Mt),Rt={"10px":"1","12px":"2","14px":"3","16px":"4","18px":"5","24px":"6","32px":"7"},at={bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:"12px",headingLevel:"p"},it=()=>{const[e,r]=h.useState(at),u=h.useCallback(a=>{r(d=>({...d,alignLeft:a==="left",alignCenter:a==="center",alignRight:a==="right",alignJustify:a==="justify"}))},[]),t=h.useCallback(a=>{try{const d=window.getSelection();if(!d||d.rangeCount===0)return!1;const y=d.getRangeAt(0);if(!y.toString())return r(E=>({...E,fontSize:a})),!1;try{const E=document.createElement("span");E.style.fontSize=a;const g=y.extractContents();return E.appendChild(g),y.insertNode(E),y.selectNodeContents(E),d.removeAllRanges(),d.addRange(y),r(O=>({...O,fontSize:a})),!0}catch{const g=Rt[a]||"2";return document.execCommand("fontSize",!1,g),r(O=>({...O,fontSize:a})),!0}}catch(d){return console.warn("[useFormatting] Font size change failed:",d),!1}},[]),i=h.useCallback((a,d=null)=>{try{if(typeof document.execCommand!="function"){console.warn("[useFormatting] execCommand not supported");return}if(a==="fontSize"){t(d);return}switch(document.execCommand(a,!1,d)||console.warn(`[useFormatting] Command "${a}" failed`),a){case"bold":r(m=>({...m,bold:!m.bold}));break;case"italic":r(m=>({...m,italic:!m.italic}));break;case"underline":r(m=>({...m,underline:!m.underline}));break;case"strikethrough":r(m=>({...m,strikethrough:!m.strikethrough}));break;case"justifyLeft":u("left");break;case"justifyCenter":u("center");break;case"justifyRight":u("right");break;case"justifyFull":u("justify");break;case"fontName":r(m=>({...m,fontFamily:d}));break;case"formatBlock":r(m=>({...m,headingLevel:d}));break;default:break}}catch(y){console.warn(`[useFormatting] Error executing command "${a}":`,y)}},[t,u]),c=h.useCallback(()=>{r(at)},[]);return{currentFormat:e,formatText:i,resetFormat:c}},ie={A4:{width:595,height:842},Letter:{width:612,height:792},Legal:{width:612,height:1008}},he={top:60,bottom:100,left:72,right:72},It=300,Dt=200,Lt=50,zt='page-break, [data-page-break="true"]',st=(e,r,u=100)=>{const t=Ne(),i=h.useRef(null),c=h.useRef(null),a=h.useRef(e),d=h.useRef(u),y=h.useRef(!1);h.useEffect(()=>{a.current=e},[e]),h.useEffect(()=>{d.current=u},[u]),h.useEffect(()=>()=>{i.current&&clearTimeout(i.current),c.current&&clearTimeout(c.current)},[]);const m=h.useCallback((s,x)=>{if(!s||s.length===0)return null;let k=0,M=null;for(let R=0;R<s.length;R++){const L=s[R];if(!L||!L.getBoundingClientRect)continue;const Y=L.getBoundingClientRect().height;if(Y<1)continue;if(k+Y>x)return M===null?R>0?{overflowIndex:R,overflowElement:L,accumulatedHeight:k}:null:{overflowIndex:R,overflowElement:L,accumulatedHeight:k};k+=Y,M=L}return null},[]),E=h.useCallback((s,x)=>{if(!s||!r?.current)return!1;try{const k=document.createElement("page-break");return k.setAttribute("data-page-break","true"),k.setAttribute("contenteditable","false"),k.setAttribute("data-page-number",x||"2"),s.parentNode.insertBefore(k,s),!0}catch(k){return console.warn("[insertPageBreakBefore] Failed to insert page break:",k),!1}},[r]),g=h.useCallback((s={})=>{if(!r?.current||typeof document>"u")return[];const x=s.pageSize||a.current||"A4",k=ie[x]||ie.A4,M=r.current,R=M.querySelectorAll(zt),L=[];L.push({id:"page-0",pageNumber:1,top:0,height:k.height});const Y=M.getBoundingClientRect(),J=M.scrollTop;return R.forEach((ne,ee)=>{const I=ne.getBoundingClientRect().top-Y.top+J;L.push({id:`page-${ee+1}`,pageNumber:ee+2,top:I,height:k.height})}),L},[r]),O=h.useCallback((s={})=>{const x=g(s);return t.updatePageBoundaries(x),x},[g,t]),P=h.useCallback(s=>{if(!r?.current)return!1;try{const x=r.current,k=a.current||"A4",M=d.current||100,L=(ie[k]||ie.A4).height-he.top-he.bottom,Y=M/100,ne=L/Y*(s-1),ee=Array.from(x.children);let G=0,I=null;for(let z=0;z<ee.length;z++){const te=ee[z];if(te.tagName==="PAGE-BREAK"||te.getAttribute("data-page-break")==="true")continue;const W=te.getBoundingClientRect().height;if(G+W>ne){I=te;break}G+=W}if(I){const z=document.createElement("page-break");z.setAttribute("data-page-break","true"),z.setAttribute("contenteditable","false"),z.setAttribute("data-page-number",String(s)),I.parentNode.insertBefore(z,I);const te=x.innerHTML;return t.updateContinuousContent(te),setTimeout(()=>{O()},50),!0}else{const z=document.createElement("page-break");z.setAttribute("data-page-break","true"),z.setAttribute("contenteditable","false"),z.setAttribute("data-page-number",String(s)),x.appendChild(z);const te=document.createElement("p");te.innerHTML="<br>",x.appendChild(te);const W=x.innerHTML;return t.updateContinuousContent(W),setTimeout(()=>{O()},50),!0}}catch(x){return console.error("[insertPageBreakAtBoundary] Failed to insert page break:",x),!1}},[r,t,O]),D=h.useCallback(()=>{if(!(!r?.current||y.current))try{y.current=!0;const s=r.current,x=a.current||"A4",k=d.current||100,R=(ie[x]||ie.A4).height-he.top-he.bottom,L=k/100,Y=R/L,J=Array.from(s.children);if(J.length===0)return;let ne=[],ee=[];for(const W of J)W.tagName==="PAGE-BREAK"||W.getAttribute("data-page-break")==="true"?ee.length>0&&(ne.push(ee),ee=[]):ee.push(W);ee.length>0&&ne.push(ee),ne.length===0&&J.length>0&&ne.push(J.filter(W=>!(W.tagName==="PAGE-BREAK"||W.getAttribute("data-page-break")==="true")));let G=!1,I=0;const z=3,te=20;for(let W=0;W<ne.length&&I<z;W++){const f=ne[W],n=m(f,Y);if(n&&n.overflowIndex>0){let p=0;for(let S=0;S<f.length;S++){const b=f[S];b&&b.getBoundingClientRect&&(p+=b.getBoundingClientRect().height)}if(p-Y<te)continue;const T=W+2;if(E(n.overflowElement,T)){G=!0,I++;const S=Array.from(s.children),b=[];let w=[];for(const q of S)q.tagName==="PAGE-BREAK"||q.getAttribute("data-page-break")==="true"?w.length>0&&(b.push(w),w=[]):w.push(q);w.length>0&&b.push(w),ne=b}}}if(G){const W=s.innerHTML;t.updateContinuousContent(W),setTimeout(()=>{O(),I>=z&&setTimeout(()=>{y.current||D()},100)},Lt)}}catch(s){console.warn("[checkAndReflow] Reflow failed:",s)}finally{y.current=!1}},[r,m,E,t,O]),j=h.useCallback((s=Dt)=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{c.current=null,D()},s)},[D]),B=h.useCallback((s={})=>{i.current&&clearTimeout(i.current);const x=typeof s.delay=="number"?s.delay:It;i.current=setTimeout(()=>{i.current=null,O(s)},Math.max(0,x))},[O]),v=h.useCallback(s=>{if(!s?.current||!r?.current)return 0;try{const x=s.current,M=r.current.querySelectorAll('page-break, [data-page-break="true"]');if(M.length===0)return 0;const R=x.getBoundingClientRect(),L=R.top+R.height/2;for(let Y=M.length-1;Y>=0;Y--)if(M[Y].getBoundingClientRect().top<L)return Y+1;return 0}catch(x){return console.warn("[getCurrentPage] Failed to calculate page:",x),0}},[r]),C=h.useCallback(s=>{if(!r?.current)return;const x=r.current;x.focus();try{let k=null,M=0;if(s===0)k=x.firstChild,M=0;else{const L=x.querySelectorAll('page-break, [data-page-break="true"]')[s-1];L&&L.nextSibling&&(k=L.nextSibling,M=0)}if(k){const R=document.createRange(),L=window.getSelection();k.nodeType===Node.TEXT_NODE?R.setStart(k,M):R.setStart(k,0),R.collapse(!0),L.removeAllRanges(),L.addRange(R)}}catch(k){console.warn("[positionCursorAtPage] Failed to position cursor:",k)}},[r]),N=h.useCallback((s,x)=>{if(!x?.current||!r?.current){console.warn("[scrollToPage] Missing refs");return}const k=x.current,M=r.current;try{let R=null;if(s===0)R=M;else{const Y=M.querySelectorAll('page-break, [data-page-break="true"]')[s-1];if(Y)R=Y;else{console.warn("[scrollToPage] Page break not found for page",s);return}}if(R){const L=R.getBoundingClientRect(),Y=k.getBoundingClientRect(),J=k.scrollTop+(L.top-Y.top);console.log("[scrollToPage] Scrolling to page",s,"scrollTop:",J),k.scrollTo({top:J,behavior:"smooth"}),setTimeout(()=>{C(s)},400)}}catch(R){console.error("[scrollToPage] Error:",R)}},[r,C]),H=h.useCallback(s=>{if(!r?.current)return!1;const x=r.current;if(g().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const M=Array.from(x.querySelectorAll('page-break, [data-page-break="true"]'));if(s>M.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const R=window.getSelection();let L=!1,Y=[],J=null;if(s===0){const G=M[0];if(!G)return console.warn("[removePageAndContent] No page break found for first page"),!1;let I=x.firstChild;for(;I&&I!==G;)Y.push(I),I=I.nextSibling;J=G}else{const G=M[s-1];if(!G)return console.warn("[removePageAndContent] Page break not found"),!1;const I=M[s];let z=G.nextSibling;for(;z&&z!==I;)Y.push(z),z=z.nextSibling;J=G}if(R&&R.rangeCount>0){const I=R.getRangeAt(0).startContainer;for(const z of Y)if(z.contains(I)||z===I){L=!0;break}}J&&J.parentNode&&J.remove(),Y.forEach(G=>{G.parentNode&&G.remove()}),x.querySelectorAll('page-break, [data-page-break="true"]').forEach((G,I)=>{G.setAttribute("data-page-number",String(I+2))}),L&&setTimeout(()=>{C(0)},50);const ee=x.innerHTML;return t.updateContinuousContent(ee),setTimeout(()=>{O(),setTimeout(()=>{D()},150)},100),!0}catch(M){return console.error("[removePageAndContent] Failed to remove page:",M),!1}},[r,g,t,O,C,D]);return{calculatePageBoundaries:g,checkAndUpdateBoundaries:B,updateBoundaries:O,getCurrentPage:v,scrollToPage:N,positionCursorAtPage:C,checkAndReflow:D,triggerAutoReflow:j,removePageAndContent:H,insertPageBreakAtBoundary:P,boundaryTimeoutRef:i,reflowTimeoutRef:c}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bt=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,u,t)=>t?t.toUpperCase():u.toLowerCase()),ct=e=>{const r=Bt(e);return r.charAt(0).toUpperCase()+r.slice(1)},lt=(...e)=>e.filter((r,u,t)=>!!r&&r.trim()!==""&&t.indexOf(r)===u).join(" ").trim(),Ut=e=>{for(const r in e)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ht={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=h.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:u=2,absoluteStrokeWidth:t,className:i="",children:c,iconNode:a,...d},y)=>h.createElement("svg",{ref:y,...Ht,width:r,height:r,stroke:e,strokeWidth:t?Number(u)*24/Number(r):u,className:lt("lucide",i),...!c&&!Ut(d)&&{"aria-hidden":"true"},...d},[...a.map(([m,E])=>h.createElement(m,E)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=(e,r)=>{const u=h.forwardRef(({className:t,...i},c)=>h.createElement(qt,{ref:c,iconNode:r,className:lt(`lucide-${$t(ct(e))}`,`lucide-${e}`,t),...i}));return u.displayName=ct(e),u};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=K("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=K("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=K("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=K("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=K("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=K("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=K("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=K("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=K("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=K("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=K("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=K("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=K("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=K("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=K("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=K("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=K("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=K("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=K("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=K("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=K("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=K("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=K("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=K("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=K("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=K("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=K("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=K("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),dt=({editorView:e,isCollapsed:r,onToggle:u,wordCount:t,pageCount:i})=>{const c=Oe(),{pages:a,activePage:d,continuousContent:y,editorMode:m}=c,[E,g]=h.useState(0),[O,P]=h.useState([]);h.useEffect(()=>{if(t!==void 0&&i!==void 0){if(g(t),y){const v=document.createElement("div");v.innerHTML=y;const C=v.querySelectorAll("h1, h2, h3, h4, h5, h6"),N=Array.from(C).map((H,s)=>{const x=parseInt(H.tagName.charAt(1)),k=H.textContent.trim();return k?{id:`heading-${s}`,level:x,text:k,page:1}:null}).filter(Boolean);P(N)}return}let j=0;const B=[];a.forEach((v,C)=>{if(v.content){const N=document.createElement("div");N.innerHTML=v.content;const s=(N.textContent||N.innerText||"").trim().split(/\s+/).filter(k=>k.length>0);j+=s.length,N.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((k,M)=>{const R=parseInt(k.tagName.charAt(1)),L=k.textContent.trim();L&&B.push({id:`heading-${C}-${M}`,level:R,text:L,page:C+1})})}}),g(j),P(B)},[a,t,i,y]);const D=i!==void 0?i:a.length;return o.jsxs("aside",{className:`sidebar ${r?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[o.jsxs("div",{className:"sidebar-header",children:[o.jsxs("div",{className:"sidebar-title",children:[o.jsx(me,{size:18}),o.jsx("h2",{children:"Document Info"})]}),o.jsx("button",{className:"sidebar-toggle",onClick:u,"aria-label":r?"Expand sidebar":"Collapse sidebar",title:r?"Expand sidebar":"Collapse sidebar",children:r?o.jsx(Yt,{size:16}):o.jsx(Zt,{size:16})})]}),!r&&o.jsxs("div",{className:"sidebar-content",children:[o.jsxs("div",{className:"sidebar-section",children:[o.jsx("h3",{children:"Statistics"}),o.jsxs("div",{className:"stat-item",children:[o.jsxs("div",{className:"stat-label",children:[o.jsx(Ft,{size:14}),o.jsx("span",{children:"Pages:"})]}),o.jsx("span",{className:"stat-value",children:D})]}),o.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[o.jsxs("div",{className:"stat-label",children:[o.jsx(Vt,{size:14}),o.jsx("span",{children:"Words:"})]}),o.jsx("span",{className:"stat-value",children:E.toLocaleString()})]}),o.jsxs("div",{className:"stat-item",children:[o.jsxs("div",{className:"stat-label",children:[o.jsx(me,{size:14}),o.jsx("span",{children:"Active Page:"})]}),o.jsx("span",{className:"stat-value",children:d+1})]})]}),O.length>0&&o.jsxs("div",{className:"sidebar-section",children:[o.jsxs("h3",{children:[o.jsx(ut,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),o.jsx("div",{className:"document-outline","data-testid":"outline",children:O.map(j=>{const B=j.level===1?Wt:j.level===2?Kt:Jt;return o.jsxs("div",{className:`outline-item outline-level-${j.level}`,style:{marginLeft:`${(j.level-1)*12}px`},children:[o.jsx(B,{size:12,className:"outline-icon"}),o.jsx("span",{className:"outline-text",children:j.text}),o.jsxs("span",{className:"outline-page",children:["p.",j.page]})]},j.id)})})]}),o.jsxs("div",{className:"sidebar-section",children:[o.jsx("h3",{children:"Document"}),o.jsx("p",{children:"HTML Editor"}),o.jsx("p",{children:"Multi-page support"})]})]})]})};function yn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}function ft(e){return new Promise((r,u)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){u(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){u(new Error("Image exceeds maximum size of 5MB"));return}const i=new FileReader;i.onload=c=>{const a=c.target.result;if(a.split(",")[1].length*3/4>5*1024*1024){u(new Error("Image exceeds maximum size of 5MB"));return}try{const m=`editor-image-${yn()}`;localStorage.setItem(m,a),r(m)}catch(m){m.name==="QuotaExceededError"?u(new Error("Storage quota exceeded")):u(m)}},i.onerror=()=>{u(new Error("Error reading image file"))},i.readAsDataURL(e)})}function bn(e){return localStorage.getItem(e)}function En(e){localStorage.removeItem(e)}function vn(){Object.keys(localStorage).forEach(e=>{e.startsWith("editor-image-")&&localStorage.removeItem(e)})}function _n(){return Object.keys(localStorage).filter(e=>e.startsWith("editor-image-"))}class pt{constructor(r="Editor"){this.namespace=r}_format(r,u,t){return`[${new Date().toISOString()}] [${this.namespace}] [${r}] ${u}`}info(r,u){}warn(r,u){}error(r,u){}debug(r,u){}}const gt=new pt("Editor"),ye=({currentFormat:e,onFormatText:r,onAddPageBreak:u})=>{const t=async i=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(i.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(i.size>5242880){alert("Image exceeds maximum size of 5MB");return}const a=await ft(i),d=localStorage.getItem(a);d&&(document.execCommand("insertImage",!1,d),gt.info("Image inserted",{key:a}))}catch(c){gt.error("Error uploading image",c)}};return o.jsxs("div",{className:"editor-toolbar",children:[o.jsx("button",{onClick:()=>r("undo"),title:"Undo",children:o.jsx(pn,{size:16})}),o.jsx("button",{onClick:()=>r("redo"),title:"Redo",children:o.jsx(rn,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>r("bold"),className:e.bold?"active":"",title:"Bold",children:o.jsx(Gt,{size:16})}),o.jsx("button",{onClick:()=>r("italic"),className:e.italic?"active":"",title:"Italic",children:o.jsx(Qt,{size:16})}),o.jsx("button",{onClick:()=>r("underline"),className:e.underline?"active":"",title:"Underline",children:o.jsx(fn,{size:16})}),o.jsx("button",{onClick:()=>r("strikethrough"),className:e.strikethrough?"active":"",title:"Strikethrough",children:o.jsx(an,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>r("justifyLeft"),className:e.alignLeft?"active":"",title:"Align Left",children:o.jsx(dn,{size:16})}),o.jsx("button",{onClick:()=>r("justifyCenter"),className:e.alignCenter?"active":"",title:"Align Center",children:o.jsx(cn,{size:16})}),o.jsx("button",{onClick:()=>r("justifyRight"),className:e.alignRight?"active":"",title:"Align Right",children:o.jsx(ln,{size:16})}),o.jsx("button",{onClick:()=>r("justifyFull"),className:e.alignJustify?"active":"",title:"Justify",children:o.jsx(un,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsxs("select",{onChange:i=>r("fontName",i.target.value),defaultValue:"Arial",title:"Font Family",children:[o.jsx("option",{value:"Arial",children:"Arial"}),o.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),o.jsx("option",{value:"Courier New",children:"Courier New"}),o.jsx("option",{value:"Georgia",children:"Georgia"}),o.jsx("option",{value:"Verdana",children:"Verdana"})]}),o.jsxs("select",{onChange:i=>r("fontSize",i.target.value),defaultValue:"12px",title:"Font Size",children:[o.jsx("option",{value:"10px",children:"10"}),o.jsx("option",{value:"12px",children:"12"}),o.jsx("option",{value:"14px",children:"14"}),o.jsx("option",{value:"16px",children:"16"}),o.jsx("option",{value:"18px",children:"18"}),o.jsx("option",{value:"24px",children:"24"}),o.jsx("option",{value:"32px",children:"32"})]}),o.jsxs("select",{onChange:i=>r("formatBlock",i.target.value),value:e.headingLevel||"p",title:"Heading Level",children:[o.jsx("option",{value:"p",children:"Normal"}),o.jsx("option",{value:"h1",children:"Heading 1"}),o.jsx("option",{value:"h2",children:"Heading 2"}),o.jsx("option",{value:"h3",children:"Heading 3"}),o.jsx("option",{value:"h4",children:"Heading 4"}),o.jsx("option",{value:"h5",children:"Heading 5"}),o.jsx("option",{value:"h6",children:"Heading 6"})]}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>r("insertUnorderedList"),title:"Bullet List",children:o.jsx(ut,{size:16})}),o.jsx("button",{onClick:()=>r("insertOrderedList"),title:"Numbered List",children:o.jsx(tn,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>{const i=prompt("Enter URL:");i&&r("createLink",i)},title:"Insert Link",children:o.jsx(en,{size:16})}),o.jsx("button",{onClick:()=>r("insertHTML",'<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>'),title:"Insert Table",children:o.jsx(sn,{size:16})}),u&&o.jsx("button",{onClick:u,title:"Insert Page Break",children:o.jsx(me,{size:16})}),o.jsx("input",{type:"file",accept:"image/*",onChange:i=>i.target.files[0]&&t(i.target.files[0]),style:{display:"none"},id:"image-upload"}),o.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:o.jsx(Xt,{size:16})})]})};ye.propTypes={currentFormat:_.shape({bold:_.bool,italic:_.bool,underline:_.bool,strikethrough:_.bool,alignLeft:_.bool,alignCenter:_.bool,alignRight:_.bool,alignJustify:_.bool,fontFamily:_.string,fontSize:_.string,headingLevel:_.string}).isRequired,onFormatText:_.func.isRequired,onAddPageBreak:_.func},ye.defaultProps={onAddPageBreak:void 0};const be=({content:e,dimensions:r,pageSize:u,pageBoundaries:t=[],editorRef:i,onInput:c,onKeyDown:a,onClick:d,onScroll:y,zoomLevel:m=100})=>{const E={top:40,bottom:40,left:40,right:40},g=m/100,O=(v,C)=>{if(!v)return!1;const N=v.getBoundingClientRect(),H=C-N.top;return H<E.top||H>N.height-E.bottom},P=v=>v?v.nodeType===Node.ELEMENT_NODE?v.tagName==="PAGE-BREAK"||v.getAttribute("data-page-break")==="true":v.parentElement&&P(v.parentElement):!1,D=v=>{const C=window.getSelection();if(!C||C.rangeCount===0)return;const N=C.getRangeAt(0),{startContainer:H,endContainer:s}=N;if((P(H)||P(s))&&(v.key.length===1||v.key==="Enter"||v.key===" "))return v.preventDefault(),!1;if(v.key==="Tab")return v.preventDefault(),document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;"),!1;if((v.key==="Backspace"||v.key==="Delete")&&(P(H)||P(s)))return v.preventDefault(),!1;a&&a(v)},j=v=>{if(!i.current)return;const C=v.target;if(P(C)){v.preventDefault();return}if(O(i.current,v.clientY)){v.preventDefault();const N=i.current.getBoundingClientRect();if(v.clientY-N.top<E.top){const s=i.current.firstElementChild;if(s&&s.tagName!=="PAGE-BREAK"){const x=document.createRange(),k=window.getSelection();x.setStart(s,0),x.collapse(!0),k.removeAllRanges(),k.addRange(x)}}else{const s=i.current.lastElementChild;if(s&&s.tagName!=="PAGE-BREAK"){const x=document.createRange(),k=window.getSelection();x.selectNodeContents(s),x.collapse(!1),k.removeAllRanges(),k.addRange(x)}}return}d&&d(v)},B=v=>{const C=window.getSelection();if(!C||C.rangeCount===0)return;const N=C.getRangeAt(0),{startContainer:H}=N;if(P(H))return v.preventDefault(),!1};return o.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${r.width}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh",transform:`scale(${g})`,transformOrigin:"top center",transition:"transform 0.2s ease-out"},children:o.jsx("div",{ref:i,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${r.height}px`,width:`${r.width}px`,backgroundColor:"white",padding:`${E.top}px ${E.right}px ${E.bottom}px ${E.left}px`,boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:"Arial, sans-serif",fontSize:"12px",lineHeight:"1.15",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:c,onKeyDown:D,onBeforeInput:B,onClick:j,onScroll:y,"data-testid":"continuous-editor"})})};be.propTypes={content:_.string.isRequired,dimensions:_.shape({width:_.number.isRequired,height:_.number.isRequired}).isRequired,pageSize:_.oneOf(["A4","Letter","Legal"]).isRequired,pageBoundaries:_.arrayOf(_.shape({id:_.string.isRequired,pageNumber:_.number.isRequired,top:_.number,height:_.number})),editorRef:_.shape({current:_.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onInput:_.func.isRequired,onKeyDown:_.func,onClick:_.func,onScroll:_.func,zoomLevel:_.number},be.defaultProps={pageBoundaries:[],onKeyDown:void 0,onClick:void 0,onScroll:void 0,zoomLevel:100};const $e=({pageBoundaries:e=[{id:"page-0",pageNumber:1}],activePage:r=0,pageSize:u="A4",zoomLevel:t=100,canZoomIn:i=!0,canZoomOut:c=!0,onNavigate:a,onAddPage:d,onDeletePage:y,onPageSizeChange:m,onZoomIn:E,onZoomOut:g,onZoomReset:O}={})=>{const P=Math.max(e?.length||0,1),D=C=>{a&&a(C)},j=()=>{d&&d()},B=C=>{if(P<=1){console.warn("[PageManager] Cannot delete the only page");return}y&&y(C)},v=C=>{m&&m(C)};return o.jsxs("div",{className:"page-manager",children:[o.jsxs("div",{className:"page-size-controls",children:[o.jsxs("label",{htmlFor:"page-size-selector",children:[o.jsx(on,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Size:"]}),o.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:u,onChange:C=>v(C.target.value),children:[o.jsx("option",{value:"A4",children:"A4"}),o.jsx("option",{value:"Letter",children:"Letter"}),o.jsx("option",{value:"Legal",children:"Legal"})]})]}),o.jsxs("div",{className:"zoom-controls",children:[o.jsx("button",{type:"button",className:"zoom-button",onClick:g,disabled:!c,"aria-label":"Zoom out",title:"Zoom out (Ctrl + -)",children:o.jsx(mn,{size:14})}),o.jsxs("button",{type:"button",className:"zoom-reset-button",onClick:O,"aria-label":"Reset zoom",title:"Reset zoom to 100% (Ctrl + 0)",children:[t,"%"]}),o.jsx("button",{type:"button",className:"zoom-button",onClick:E,disabled:!i,"aria-label":"Zoom in",title:"Zoom in (Ctrl + +)",children:o.jsx(hn,{size:14})})]}),o.jsx("div",{className:"page-list",children:(e&&e.length>0?e:[{id:"page-0",pageNumber:1}]).map((C,N)=>o.jsxs("div",{className:"page-item",children:[o.jsxs("button",{type:"button",className:`page-button ${N===r?"active":""}`,onClick:()=>D(N),"aria-label":`Go to page ${N+1}`,"aria-current":N===r?"page":void 0,children:[o.jsx(me,{size:14}),o.jsxs("span",{children:["Page ",N+1]})]}),P>1&&o.jsx("button",{type:"button",className:"delete-page-button",onClick:H=>{H.stopPropagation(),B(N)},"aria-label":`Delete page ${N+1}`,title:"Delete this page and its content",children:o.jsx(gn,{size:14})})]},C.id||`page-${N}`))}),o.jsxs("button",{type:"button",className:"add-page-button",onClick:j,"aria-label":"Add new page",title:"Add new page at end",children:[o.jsx(nn,{size:16}),o.jsx("span",{children:"Add Page"})]})]})};$e.propTypes={pageBoundaries:_.arrayOf(_.shape({id:_.string.isRequired,pageNumber:_.number.isRequired,top:_.number,height:_.number})),activePage:_.number,pageSize:_.oneOf(["A4","Letter","Legal"]),zoomLevel:_.number,canZoomIn:_.bool,canZoomOut:_.bool,onNavigate:_.func,onAddPage:_.func,onDeletePage:_.func,onPageSizeChange:_.func,onZoomIn:_.func,onZoomOut:_.func,onZoomReset:_.func},$e.defaultProps={pageBoundaries:[{id:"page-0",pageNumber:1}],activePage:0,pageSize:"A4",zoomLevel:100,canZoomIn:!0,canZoomOut:!0,onNavigate:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onZoomIn:void 0,onZoomOut:void 0,onZoomReset:void 0};const ht=h.memo($e),mt={A4:{width:595,height:842},Letter:{width:612,height:792},Legal:{width:612,height:1008}},xn=50,Tn=50,yt=50,An=100,kn=500,Ee=h.forwardRef(({pageManagerComponent:e=null,onNavigatePage:r,onAddPage:u,onDeletePage:t,onPageSizeChange:i,onChange:c,showSidebar:a=!0,showToolbar:d=!0,showPageManager:y=!0},m)=>{const E=Oe(),g=Ne(),{pageSize:O,continuousContent:P,pageBoundaries:D,activePage:j,zoomLevel:B}=E,v=h.useRef(null),C=h.useRef(null),{currentFormat:N,formatText:H}=it(),{checkAndUpdateBoundaries:s,getCurrentPage:x,scrollToPage:k,updateBoundaries:M,triggerAutoReflow:R,removePageAndContent:L,insertPageBreakAtBoundary:Y}=st(O,C,B),J=h.useMemo(()=>mt[O]||mt.A4,[O]),[ne,ee]=h.useState(!1),G=h.useRef(null),I=h.useRef(!1),z=h.useRef(!1),te=h.useRef(!1),W=h.useRef(P);h.useEffect(()=>{if(C.current){if(!te.current){C.current.innerHTML=P,te.current=!0,W.current=P;const l=setTimeout(()=>{M()},xn);return()=>clearTimeout(l)}if(W.current!==P){if(C.current.innerHTML!==P){C.current.innerHTML=P;const X=setTimeout(()=>{if(M(),I.current){I.current=!1;const oe=Math.max(0,D.length-1);g.setActivePage(oe),setTimeout(()=>{k(oe,v)},yt)}},Tn);return W.current=P,()=>clearTimeout(X)}W.current=P}}},[P,M,D.length,g,k]),h.useEffect(()=>{c&&te.current&&c(P)},[P,c]),h.useImperativeHandle(m,()=>({getHTMLContent:()=>P,getPlainText:()=>P.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),setContent:l=>{g.updateContinuousContent(l),C.current&&(C.current.innerHTML=l,setTimeout(()=>{M()},50))}}),[P,g,M]),h.useEffect(()=>{const l=setTimeout(()=>{C.current&&C.current.focus()},200);return()=>clearTimeout(l)},[]);const f=h.useCallback(l=>{const X=l.currentTarget.innerHTML;g.updateContinuousContent(X),s(),R(200);const oe=x(v);oe!==j&&g.setActivePage(oe)},[s,g,x,j,R,v]),n=h.useCallback(l=>{g.updatePageSize(l),M({pageSize:l}),i&&i(l)},[g,M,i]),p=h.useCallback(l=>{l<0||l>=D.length||(z.current=!0,g.setActivePage(l),k(l,v),setTimeout(()=>{z.current=!1},kn),r&&r(l))},[g,k,r,D.length]),A=h.useCallback(()=>{const l=D.length+1;Y(l)&&(I.current=!0,setTimeout(()=>{if(I.current){I.current=!1;const oe=Math.max(0,D.length-1);g.setActivePage(oe),setTimeout(()=>{k(oe,v)},yt)}},100)),u&&u()},[D.length,Y,g,k,u]),T=h.useCallback(()=>{const l=window.getSelection();if(l&&l.rangeCount>0){if(!C?.current)return;const ve=`<page-break data-page-break="true" contenteditable="false" data-page-number="${C.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,ve),setTimeout(()=>{M();const Cn=x(v);g.setActivePage(Cn)},150)}},[M,x,g,v]),$=h.useCallback(l=>{if(D.length<=1){console.warn("Cannot delete the only page");return}L(l)&&(g.setActivePage(0),t&&t(l))},[D.length,L,g,t]),S=h.useCallback(()=>{g.zoomIn()},[g]),b=h.useCallback(()=>{g.zoomOut()},[g]),w=h.useCallback(()=>{g.resetZoom()},[g]);h.useEffect(()=>{const l=X=>{if(!(!C.current&&!v.current)&&(X.ctrlKey||X.metaKey))switch(X.key){case"+":case"=":X.preventDefault(),S();break;case"-":case"_":X.preventDefault(),b();break;case"0":X.preventDefault(),w();break}};return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[S,b,w]);const q=h.useCallback(()=>{!v.current||!C.current||z.current||(G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{if(z.current){G.current=null;return}const l=x(v);l!==j&&l>=0&&g.setActivePage(l),G.current=null},An))},[x,j,g]),Z=h.useMemo(()=>{if(!P)return 0;const X=P.replace(/<[^>]*>/g," ").match(/\b\w+\b/g);return X?X.length:0},[P]),re=D.length||1;return h.useEffect(()=>()=>{G.current&&clearTimeout(G.current)},[]),o.jsxs("div",{className:"multi-page-editor",children:[d&&o.jsx(ye,{currentFormat:N,onFormatText:H,onAddPageBreak:T}),o.jsxs("div",{className:"editor-container",children:[a&&o.jsx(dt,{editorView:null,isCollapsed:ne,onToggle:()=>ee(l=>!l),wordCount:Z,pageCount:re}),o.jsx("div",{className:"editor-viewport continuous-scroll",ref:v,onScroll:q,children:o.jsx(be,{content:P,dimensions:J,pageSize:O,pageBoundaries:D,editorRef:C,onInput:f,onClick:()=>C.current?.focus(),zoomLevel:B})}),y&&o.jsx("div",{className:"page-manager-sidebar",children:e?h.cloneElement(e,{onNavigate:p,onAddPage:A,onDeletePage:$,onPageSizeChange:n,zoomLevel:B,canZoomIn:ke(B),canZoomOut:Pe(B),onZoomIn:S,onZoomOut:b,onZoomReset:w}):o.jsx(ht,{pageBoundaries:D,activePage:j,pageSize:O,zoomLevel:B,canZoomIn:ke(B),canZoomOut:Pe(B),onNavigate:p,onAddPage:A,onDeletePage:$,onPageSizeChange:n,onZoomIn:S,onZoomOut:b,onZoomReset:w})})]})]})});Ee.displayName="HtmlEditor",Ee.propTypes={pageManagerComponent:_.element,onNavigatePage:_.func,onAddPage:_.func,onDeletePage:_.func,onPageSizeChange:_.func,onChange:_.func,showSidebar:_.bool,showToolbar:_.bool,showPageManager:_.bool},Ee.defaultProps={pageManagerComponent:null,onNavigatePage:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onChange:void 0,showSidebar:!0,showToolbar:!0,showPageManager:!0};class Be extends h.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,u){console.error("[ErrorBoundary] Caught error:",r),console.error("[ErrorBoundary] Error info:",u),this.setState({error:r,errorInfo:u}),this.props.onError&&this.props.onError(r,u)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:o.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #f44336",borderRadius:"4px",backgroundColor:"#ffebee",color:"#c62828"},children:[o.jsx("h2",{style:{marginTop:0},children:" Something went wrong"}),o.jsx("p",{children:"The editor encountered an unexpected error and couldn't continue."}),this.props.showDetails&&this.state.error&&o.jsxs("details",{style:{marginTop:"10px",padding:"10px",backgroundColor:"white",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[o.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),o.jsxs("pre",{style:{marginTop:"10px",overflow:"auto",maxHeight:"200px"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),o.jsx("button",{onClick:this.handleReset,style:{marginTop:"15px",padding:"8px 16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Try Again"})]}):this.props.children}}Be.propTypes={children:_.node.isRequired,fallback:_.node,onError:_.func,onReset:_.func,showDetails:_.bool},Be.defaultProps={fallback:null,onError:void 0,onReset:void 0,showDetails:process.env.NODE_ENV==="development"};const Pn={A4:{width:595,height:842},Letter:{width:612,height:792},Legal:{width:612,height:1008}};Q.DocumentProvider=kt,Q.EditorToolbar=ye,Q.ErrorBoundary=Be,Q.HtmlEditor=Ee,Q.PAGE_DIMENSIONS=Pn,Q.PageManager=ht,Q.PageView=be,Q.Sidebar=dt,Q.clearImages=vn,Q.deleteImage=En,Q.getAllImageKeys=_n,Q.getImage=bn,Q.logger=pt,Q.saveImage=ft,Q.useContinuousReflow=st,Q.useDocument=we,Q.useDocumentActions=Ne,Q.useDocumentState=Oe,Q.useFormatting=it,Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
