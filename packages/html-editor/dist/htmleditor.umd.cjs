(function(V,y){typeof exports=="object"&&typeof module<"u"?y(exports,require("react"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","react","uuid"],y):(V=typeof globalThis<"u"?globalThis:V||self,y(V.HTMLEditor={},V.React,V.uuid))})(this,(function(V,y,Ee){"use strict";function dt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var le={exports:{}},ae={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Me;function ft(){if(Me)return ae;Me=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function l(r,i,c){var a=null;if(c!==void 0&&(a=""+c),i.key!==void 0&&(a=""+i.key),"key"in i){c={};for(var u in i)u!=="key"&&(c[u]=i[u])}else c=i;return i=c.ref,{$$typeof:e,type:r,key:a,ref:i!==void 0?i:null,props:c}}return ae.Fragment=n,ae.jsx=l,ae.jsxs=l,ae}var ie={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ie;function pt(){return Ie||(Ie=1,process.env.NODE_ENV!=="production"&&(function(){function e(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===H?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case k:return"Profiler";case j:return"StrictMode";case w:return"Suspense";case L:return"SuspenseList";case J:return"Activity"}if(typeof t=="object")switch(typeof t.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),t.$$typeof){case N:return"Portal";case C:return t.displayName||"Context";case P:return(t._context.displayName||"Context")+".Consumer";case s:var p=t.render;return t=t.displayName,t||(t=p.displayName||p.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return p=t.displayName||null,p!==null?p:e(t.type)||"Memo";case U:p=t._payload,t=t._init;try{return e(t(p))}catch{}}return null}function n(t){return""+t}function l(t){try{n(t);var p=!1}catch{p=!0}if(p){p=console;var _=p.error,v=typeof Symbol=="function"&&Symbol.toStringTag&&t[Symbol.toStringTag]||t.constructor.name||"Object";return _.call(p,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",v),n(t)}}function r(t){if(t===M)return"<>";if(typeof t=="object"&&t!==null&&t.$$typeof===U)return"<...>";try{var p=e(t);return p?"<"+p+">":"<...>"}catch{return"<...>"}}function i(){var t=K.A;return t===null?null:t.getOwner()}function c(){return Error("react-stack-top-frame")}function a(t){if(Y.call(t,"key")){var p=Object.getOwnPropertyDescriptor(t,"key").get;if(p&&p.isReactWarning)return!1}return t.key!==void 0}function u(t,p){function _(){Z||(Z=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",p))}_.isReactWarning=!0,Object.defineProperty(t,"key",{get:_,configurable:!0})}function b(){var t=e(this.type);return Q[t]||(Q[t]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),t=this.props.ref,t!==void 0?t:null}function f(t,p,_,v,$,O){var T=_.ref;return t={$$typeof:B,type:t,key:p,props:_,_owner:v},(T!==void 0?T:null)!==null?Object.defineProperty(t,"ref",{enumerable:!1,get:b}):Object.defineProperty(t,"ref",{enumerable:!1,value:null}),t._store={},Object.defineProperty(t._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(t,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(t,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:$}),Object.defineProperty(t,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:O}),Object.freeze&&(Object.freeze(t.props),Object.freeze(t)),t}function E(t,p,_,v,$,O){var T=p.children;if(T!==void 0)if(v)if(F(T)){for(v=0;v<T.length;v++)g(T[v]);Object.freeze&&Object.freeze(T)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else g(T);if(Y.call(p,"key")){T=e(t);var h=Object.keys(p).filter(function(D){return D!=="key"});v=0<h.length?"{key: someKey, "+h.join(": ..., ")+": ...}":"{key: someKey}",d[T+v]||(h=0<h.length?"{"+h.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,v,T,h,T),d[T+v]=!0)}if(T=null,_!==void 0&&(l(_),T=""+_),a(p)&&(l(p.key),T=""+p.key),"key"in p){_={};for(var R in p)R!=="key"&&(_[R]=p[R])}else _=p;return T&&u(_,typeof t=="function"?t.displayName||t.name||"Unknown":t),f(t,T,_,i(),$,O)}function g(t){S(t)?t._store&&(t._store.validated=1):typeof t=="object"&&t!==null&&t.$$typeof===U&&(t._payload.status==="fulfilled"?S(t._payload.value)&&t._payload.value._store&&(t._payload.value._store.validated=1):t._store&&(t._store.validated=1))}function S(t){return typeof t=="object"&&t!==null&&t.$$typeof===B}var x=y,B=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),C=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),H=Symbol.for("react.client.reference"),K=x.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=Object.prototype.hasOwnProperty,F=Array.isArray,ee=console.createTask?console.createTask:function(){return null};x={react_stack_bottom_frame:function(t){return t()}};var Z,Q={},te=x.react_stack_bottom_frame.bind(x,c)(),ne=ee(r(c)),d={};ie.Fragment=M,ie.jsx=function(t,p,_){var v=1e4>K.recentlyCreatedOwnerStacks++;return E(t,p,_,!1,v?Error("react-stack-top-frame"):te,v?ee(r(t)):ne)},ie.jsxs=function(t,p,_){var v=1e4>K.recentlyCreatedOwnerStacks++;return E(t,p,_,!0,v?Error("react-stack-top-frame"):te,v?ee(r(t)):ne)}})()),ie}var De;function gt(){return De||(De=1,process.env.NODE_ENV==="production"?le.exports=ft():le.exports=pt()),le.exports}var o=gt();const se="A4",oe="<p><br></p>",ht="continuous",ve={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},ce=(e,n=se)=>({id:Ee.v4(),index:e,size:n,content:oe,images:[],isBreakPoint:!1}),ue=e=>typeof e!="string"||e.trim()===""?oe:e,$e=(e,n=se)=>(e.length>0?e:[ce(0,n)]).map((r,i)=>({id:r.id||Ee.v4(),index:i,size:r.size||n,content:ue(r.content),images:r.images||[],isBreakPoint:!!r.isBreakPoint})),mt=(e=se)=>[{id:"page-0",pageNumber:1,top:0,height:(ve[e]||ve.A4).height}],_e=(e={})=>{const n=new Date().toISOString(),l=e.pageSize||se,r=$e(e.pages||[ce(0,l)],l);return{id:Ee.v4(),title:e.title||"Untitled Document",createdAt:n,updatedAt:n,pageSize:l,pages:r,activePage:e.activePage&&e.activePage<r.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:r.length,editorMode:e.editorMode||ht,continuousContent:e.continuousContent||oe,pageBoundaries:e.pageBoundaries||mt(l)}},z={INITIALIZE_DOCUMENT:"INITIALIZE_DOCUMENT",UPDATE_TITLE:"UPDATE_TITLE",UPDATE_PAGE_CONTENT:"UPDATE_PAGE_CONTENT",UPDATE_PAGES:"UPDATE_PAGES",ADD_PAGE:"ADD_PAGE",DELETE_PAGE:"DELETE_PAGE",SET_ACTIVE_PAGE:"SET_ACTIVE_PAGE",UPDATE_PAGE_SIZE:"UPDATE_PAGE_SIZE",RESET_DOCUMENT:"RESET_DOCUMENT",UPDATE_CONTINUOUS_CONTENT:"UPDATE_CONTINUOUS_CONTENT",UPDATE_PAGE_BOUNDARIES:"UPDATE_PAGE_BOUNDARIES",ADD_PAGE_BREAK:"ADD_PAGE_BREAK",REMOVE_PAGE_BREAK:"REMOVE_PAGE_BREAK",SET_EDITOR_MODE:"SET_EDITOR_MODE",INSERT_PAGE_AT:"INSERT_PAGE_AT",MOVE_PAGE_TO:"MOVE_PAGE_TO",DUPLICATE_PAGE:"DUPLICATE_PAGE"},yt=(e,n)=>{const l=new Date().toISOString();switch(n.type){case z.INITIALIZE_DOCUMENT:{const{initialContent:r=oe,pageSize:i=se}=n.payload||{},c={...ce(0,i),content:ue(r)};return _e({title:e.title,pageSize:i,pages:[c]})}case z.UPDATE_TITLE:return{...e,title:n.payload,updatedAt:l};case z.UPDATE_PAGE_CONTENT:{const{pageIndex:r,content:i}=n.payload;if(r<0||r>=e.pages.length)return e;const c=[...e.pages];return c[r]={...c[r],content:ue(i)},{...e,pages:c,updatedAt:l}}case z.UPDATE_PAGES:{const r=Array.isArray(n.payload)?{pages:n.payload}:n.payload||{},i=$e(r.pages||[],e.pageSize),c=Array.isArray(r.pageBreaks)?r.pageBreaks:i.slice(0,-1).map((a,u)=>({id:`auto-break-${u}`,pageNumber:u+1}));return{...e,pages:i,activePage:Math.min(e.activePage,i.length-1),pageBreaks:c,totalPages:i.length,updatedAt:l}}case z.ADD_PAGE:{const r=typeof n.payload?.index=="number"?Math.min(Math.max(n.payload.index,0),e.pages.length):e.pages.length,i=[...e.pages];i.splice(r,0,ce(r,e.pageSize));const c=i.map((u,b)=>({...u,index:b,size:e.pageSize})),a=c.slice(0,-1).map((u,b)=>({id:`auto-break-${b}`,pageNumber:b+1}));return{...e,pages:c,activePage:r,pageBreaks:a,totalPages:c.length,updatedAt:l}}case z.DELETE_PAGE:{const r=n.payload;if(e.pages.length<=1)return e;const i=[...e.pages];i.splice(r,1);const c=i.map((b,f)=>({...b,index:f,size:e.pageSize}));let a=e.activePage;a>=c.length?a=c.length-1:r<=a&&a>0&&(a-=1);const u=c.slice(0,-1).map((b,f)=>({id:`auto-break-${f}`,pageNumber:f+1}));return{...e,pages:c,activePage:a,pageBreaks:u,totalPages:c.length,updatedAt:l}}case z.SET_ACTIVE_PAGE:{const r=n.payload;if(r===e.activePage)return e;const i=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;return r<0||r>=i?e:{...e,activePage:r,updatedAt:l}}case z.UPDATE_PAGE_SIZE:{const r=n.payload;if(r===e.pageSize)return e;if(!ve[r])return console.warn(`Invalid page size: ${r}`),e;const i=e.pages.map((a,u)=>({...a,index:u,size:r})),c=i.slice(0,-1).map((a,u)=>({id:`auto-break-${u}`,pageNumber:u+1}));return{...e,pageSize:r,pages:i,pageBreaks:c,updatedAt:l}}case z.RESET_DOCUMENT:return _e();case z.UPDATE_CONTINUOUS_CONTENT:{const r=ue(n.payload);return r===e.continuousContent?e:{...e,continuousContent:r,updatedAt:l}}case z.UPDATE_PAGE_BOUNDARIES:{const r=Array.isArray(n.payload)?n.payload:[];if(r.length===e.pageBoundaries.length&&r.length>0&&r[0].id===e.pageBoundaries[0]?.id&&r[r.length-1].id===e.pageBoundaries[r.length-1]?.id)return e;const i=e.activePage>=r.length?Math.max(0,r.length-1):e.activePage;return{...e,pageBoundaries:r,totalPages:r.length,activePage:i,updatedAt:l}}case z.ADD_PAGE_BREAK:{const{position:r="end",pageIndex:i}=n.payload||{},c='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';let a=e.continuousContent;if(r==="end")a=a+c+"<p><br></p>";else if(typeof r=="number"){const u=a.substring(0,r),b=a.substring(r);a=u+c+b}else if(typeof i=="number"&&typeof document<"u"){const u=document.createElement("div");u.innerHTML=a;const b=u.querySelectorAll('page-break, [data-page-break="true"]');if(i===0&&b.length===0)a=a+c+"<p><br></p>";else if(i<b.length){const f=b[i],E=document.createElement("page-break");E.setAttribute("data-page-break","true"),E.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const g=document.createElement("p");g.innerHTML="<br>",f.parentNode.insertBefore(E,f.nextSibling),E.parentNode.insertBefore(g,E.nextSibling),a=u.innerHTML}else a=a+c+"<p><br></p>"}return{...e,continuousContent:a,updatedAt:l}}case z.REMOVE_PAGE_BREAK:{const{pageIndex:r}=n.payload||{};if(typeof r!="number"||typeof document>"u")return e;const i=document.createElement("div");i.innerHTML=e.continuousContent;const c=i.querySelectorAll('page-break, [data-page-break="true"]');return c[r]&&c[r].remove(),i.querySelectorAll('page-break, [data-page-break="true"]').forEach((u,b)=>{u.setAttribute("data-page-number",String(b+2))}),{...e,continuousContent:i.innerHTML,updatedAt:l}}case z.SET_EDITOR_MODE:{const r=n.payload;if(r===e.editorMode)return e;let i=e.continuousContent,c=e.pages;return r==="continuous"?i=e.pages.map(u=>u.content).filter(u=>u&&u!==oe).join(`
`)||oe:e.continuousContent&&e.continuousContent!==oe&&(c=[{...ce(0,e.pageSize),content:e.continuousContent}]),{...e,editorMode:r,continuousContent:i,pages:c,updatedAt:l}}default:return e}},Le=y.createContext(null),bt=({children:e,initialState:n={}})=>{const[l,r]=y.useReducer(yt,_e(n)),i=y.useMemo(()=>({initializeDocument:a=>r({type:z.INITIALIZE_DOCUMENT,payload:a}),updateTitle:a=>r({type:z.UPDATE_TITLE,payload:a}),updatePageContent:a=>r({type:z.UPDATE_PAGE_CONTENT,payload:a}),updatePages:a=>r({type:z.UPDATE_PAGES,payload:a}),addPage:a=>r({type:z.ADD_PAGE,payload:a}),deletePage:a=>r({type:z.DELETE_PAGE,payload:a}),setActivePage:a=>r({type:z.SET_ACTIVE_PAGE,payload:a}),updatePageSize:a=>r({type:z.UPDATE_PAGE_SIZE,payload:a}),resetDocument:()=>r({type:z.RESET_DOCUMENT}),updateContinuousContent:a=>r({type:z.UPDATE_CONTINUOUS_CONTENT,payload:a}),updatePageBoundaries:a=>r({type:z.UPDATE_PAGE_BOUNDARIES,payload:a}),addPageBreak:a=>r({type:z.ADD_PAGE_BREAK,payload:a}),removePageBreak:a=>r({type:z.REMOVE_PAGE_BREAK,payload:a}),setEditorMode:a=>r({type:z.SET_EDITOR_MODE,payload:a}),insertPageAt:a=>r({type:z.INSERT_PAGE_AT,payload:a}),movePageTo:a=>r({type:z.MOVE_PAGE_TO,payload:a}),duplicatePage:a=>r({type:z.DUPLICATE_PAGE,payload:a})}),[]),c=y.useMemo(()=>({state:l,actions:i,dispatch:r}),[l,i]);return o.jsx(Le.Provider,{value:c,children:e})},xe=()=>{const e=y.useContext(Le);if(!e)throw new Error("useDocument must be used within a DocumentProvider");return e},Te=()=>{const{state:e}=xe();return e},Ae=()=>{const{actions:e}=xe();return e};var de={exports:{}},fe={exports:{}},q={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Be;function Et(){if(Be)return q;Be=1;var e=typeof Symbol=="function"&&Symbol.for,n=e?Symbol.for("react.element"):60103,l=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,c=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,b=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,E=e?Symbol.for("react.forward_ref"):60112,g=e?Symbol.for("react.suspense"):60113,S=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,B=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,M=e?Symbol.for("react.fundamental"):60117,j=e?Symbol.for("react.responder"):60118,k=e?Symbol.for("react.scope"):60119;function P(s){if(typeof s=="object"&&s!==null){var w=s.$$typeof;switch(w){case n:switch(s=s.type,s){case b:case f:case r:case c:case i:case g:return s;default:switch(s=s&&s.$$typeof,s){case u:case E:case B:case x:case a:return s;default:return w}}case l:return w}}}function C(s){return P(s)===f}return q.AsyncMode=b,q.ConcurrentMode=f,q.ContextConsumer=u,q.ContextProvider=a,q.Element=n,q.ForwardRef=E,q.Fragment=r,q.Lazy=B,q.Memo=x,q.Portal=l,q.Profiler=c,q.StrictMode=i,q.Suspense=g,q.isAsyncMode=function(s){return C(s)||P(s)===b},q.isConcurrentMode=C,q.isContextConsumer=function(s){return P(s)===u},q.isContextProvider=function(s){return P(s)===a},q.isElement=function(s){return typeof s=="object"&&s!==null&&s.$$typeof===n},q.isForwardRef=function(s){return P(s)===E},q.isFragment=function(s){return P(s)===r},q.isLazy=function(s){return P(s)===B},q.isMemo=function(s){return P(s)===x},q.isPortal=function(s){return P(s)===l},q.isProfiler=function(s){return P(s)===c},q.isStrictMode=function(s){return P(s)===i},q.isSuspense=function(s){return P(s)===g},q.isValidElementType=function(s){return typeof s=="string"||typeof s=="function"||s===r||s===f||s===c||s===i||s===g||s===S||typeof s=="object"&&s!==null&&(s.$$typeof===B||s.$$typeof===x||s.$$typeof===a||s.$$typeof===u||s.$$typeof===E||s.$$typeof===M||s.$$typeof===j||s.$$typeof===k||s.$$typeof===N)},q.typeOf=P,q}var G={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ze;function vt(){return ze||(ze=1,process.env.NODE_ENV!=="production"&&(function(){var e=typeof Symbol=="function"&&Symbol.for,n=e?Symbol.for("react.element"):60103,l=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,c=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,b=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,E=e?Symbol.for("react.forward_ref"):60112,g=e?Symbol.for("react.suspense"):60113,S=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,B=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,M=e?Symbol.for("react.fundamental"):60117,j=e?Symbol.for("react.responder"):60118,k=e?Symbol.for("react.scope"):60119;function P(m){return typeof m=="string"||typeof m=="function"||m===r||m===f||m===c||m===i||m===g||m===S||typeof m=="object"&&m!==null&&(m.$$typeof===B||m.$$typeof===x||m.$$typeof===a||m.$$typeof===u||m.$$typeof===E||m.$$typeof===M||m.$$typeof===j||m.$$typeof===k||m.$$typeof===N)}function C(m){if(typeof m=="object"&&m!==null){var re=m.$$typeof;switch(re){case n:var be=m.type;switch(be){case b:case f:case r:case c:case i:case g:return be;default:var ut=be&&be.$$typeof;switch(ut){case u:case E:case B:case x:case a:return ut;default:return re}}case l:return re}}}var s=b,w=f,L=u,I=a,U=n,J=E,H=r,K=B,Y=x,F=l,ee=c,Z=i,Q=g,te=!1;function ne(m){return te||(te=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),d(m)||C(m)===b}function d(m){return C(m)===f}function t(m){return C(m)===u}function p(m){return C(m)===a}function _(m){return typeof m=="object"&&m!==null&&m.$$typeof===n}function v(m){return C(m)===E}function $(m){return C(m)===r}function O(m){return C(m)===B}function T(m){return C(m)===x}function h(m){return C(m)===l}function R(m){return C(m)===c}function D(m){return C(m)===i}function X(m){return C(m)===g}G.AsyncMode=s,G.ConcurrentMode=w,G.ContextConsumer=L,G.ContextProvider=I,G.Element=U,G.ForwardRef=J,G.Fragment=H,G.Lazy=K,G.Memo=Y,G.Portal=F,G.Profiler=ee,G.StrictMode=Z,G.Suspense=Q,G.isAsyncMode=ne,G.isConcurrentMode=d,G.isContextConsumer=t,G.isContextProvider=p,G.isElement=_,G.isForwardRef=v,G.isFragment=$,G.isLazy=O,G.isMemo=T,G.isPortal=h,G.isProfiler=R,G.isStrictMode=D,G.isSuspense=X,G.isValidElementType=P,G.typeOf=C})()),G}var Ue;function qe(){return Ue||(Ue=1,process.env.NODE_ENV==="production"?fe.exports=Et():fe.exports=vt()),fe.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Pe,Ge;function _t(){if(Ge)return Pe;Ge=1;var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;function r(c){if(c==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(c)}function i(){try{if(!Object.assign)return!1;var c=new String("abc");if(c[5]="de",Object.getOwnPropertyNames(c)[0]==="5")return!1;for(var a={},u=0;u<10;u++)a["_"+String.fromCharCode(u)]=u;var b=Object.getOwnPropertyNames(a).map(function(E){return a[E]});if(b.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(E){f[E]=E}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Pe=i()?Object.assign:function(c,a){for(var u,b=r(c),f,E=1;E<arguments.length;E++){u=Object(arguments[E]);for(var g in u)n.call(u,g)&&(b[g]=u[g]);if(e){f=e(u);for(var S=0;S<f.length;S++)l.call(u,f[S])&&(b[f[S]]=u[f[S]])}}return b},Pe}var ke,He;function Ce(){if(He)return ke;He=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ke=e,ke}var Se,Ye;function Fe(){return Ye||(Ye=1,Se=Function.call.bind(Object.prototype.hasOwnProperty)),Se}var we,Ve;function xt(){if(Ve)return we;Ve=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var n=Ce(),l={},r=Fe();e=function(c){var a="Warning: "+c;typeof console<"u"&&console.error(a);try{throw new Error(a)}catch{}}}function i(c,a,u,b,f){if(process.env.NODE_ENV!=="production"){for(var E in c)if(r(c,E)){var g;try{if(typeof c[E]!="function"){var S=Error((b||"React class")+": "+u+" type `"+E+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof c[E]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw S.name="Invariant Violation",S}g=c[E](a,E,b,u,null,n)}catch(B){g=B}if(g&&!(g instanceof Error)&&e((b||"React class")+": type specification of "+u+" `"+E+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof g+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),g instanceof Error&&!(g.message in l)){l[g.message]=!0;var x=f?f():"";e("Failed "+u+" type: "+g.message+(x??""))}}}}return i.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(l={})},we=i,we}var Ne,We;function Tt(){if(We)return Ne;We=1;var e=qe(),n=_t(),l=Ce(),r=Fe(),i=xt(),c=function(){};process.env.NODE_ENV!=="production"&&(c=function(u){var b="Warning: "+u;typeof console<"u"&&console.error(b);try{throw new Error(b)}catch{}});function a(){return null}return Ne=function(u,b){var f=typeof Symbol=="function"&&Symbol.iterator,E="@@iterator";function g(d){var t=d&&(f&&d[f]||d[E]);if(typeof t=="function")return t}var S="<<anonymous>>",x={array:j("array"),bigint:j("bigint"),bool:j("boolean"),func:j("function"),number:j("number"),object:j("object"),string:j("string"),symbol:j("symbol"),any:k(),arrayOf:P,element:C(),elementType:s(),instanceOf:w,node:J(),objectOf:I,oneOf:L,oneOfType:U,shape:K,exact:Y};function B(d,t){return d===t?d!==0||1/d===1/t:d!==d&&t!==t}function N(d,t){this.message=d,this.data=t&&typeof t=="object"?t:{},this.stack=""}N.prototype=Error.prototype;function M(d){if(process.env.NODE_ENV!=="production")var t={},p=0;function _($,O,T,h,R,D,X){if(h=h||S,D=D||T,X!==l){if(b){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var re=h+":"+T;!t[re]&&p<3&&(c("You are manually calling a React.PropTypes validation function for the `"+D+"` prop on `"+h+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),t[re]=!0,p++)}}return O[T]==null?$?O[T]===null?new N("The "+R+" `"+D+"` is marked as required "+("in `"+h+"`, but its value is `null`.")):new N("The "+R+" `"+D+"` is marked as required in "+("`"+h+"`, but its value is `undefined`.")):null:d(O,T,h,R,D)}var v=_.bind(null,!1);return v.isRequired=_.bind(null,!0),v}function j(d){function t(p,_,v,$,O,T){var h=p[_],R=Z(h);if(R!==d){var D=Q(h);return new N("Invalid "+$+" `"+O+"` of type "+("`"+D+"` supplied to `"+v+"`, expected ")+("`"+d+"`."),{expectedType:d})}return null}return M(t)}function k(){return M(a)}function P(d){function t(p,_,v,$,O){if(typeof d!="function")return new N("Property `"+O+"` of component `"+v+"` has invalid PropType notation inside arrayOf.");var T=p[_];if(!Array.isArray(T)){var h=Z(T);return new N("Invalid "+$+" `"+O+"` of type "+("`"+h+"` supplied to `"+v+"`, expected an array."))}for(var R=0;R<T.length;R++){var D=d(T,R,v,$,O+"["+R+"]",l);if(D instanceof Error)return D}return null}return M(t)}function C(){function d(t,p,_,v,$){var O=t[p];if(!u(O)){var T=Z(O);return new N("Invalid "+v+" `"+$+"` of type "+("`"+T+"` supplied to `"+_+"`, expected a single ReactElement."))}return null}return M(d)}function s(){function d(t,p,_,v,$){var O=t[p];if(!e.isValidElementType(O)){var T=Z(O);return new N("Invalid "+v+" `"+$+"` of type "+("`"+T+"` supplied to `"+_+"`, expected a single ReactElement type."))}return null}return M(d)}function w(d){function t(p,_,v,$,O){if(!(p[_]instanceof d)){var T=d.name||S,h=ne(p[_]);return new N("Invalid "+$+" `"+O+"` of type "+("`"+h+"` supplied to `"+v+"`, expected ")+("instance of `"+T+"`."))}return null}return M(t)}function L(d){if(!Array.isArray(d))return process.env.NODE_ENV!=="production"&&(arguments.length>1?c("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):c("Invalid argument supplied to oneOf, expected an array.")),a;function t(p,_,v,$,O){for(var T=p[_],h=0;h<d.length;h++)if(B(T,d[h]))return null;var R=JSON.stringify(d,function(X,m){var re=Q(m);return re==="symbol"?String(m):m});return new N("Invalid "+$+" `"+O+"` of value `"+String(T)+"` "+("supplied to `"+v+"`, expected one of "+R+"."))}return M(t)}function I(d){function t(p,_,v,$,O){if(typeof d!="function")return new N("Property `"+O+"` of component `"+v+"` has invalid PropType notation inside objectOf.");var T=p[_],h=Z(T);if(h!=="object")return new N("Invalid "+$+" `"+O+"` of type "+("`"+h+"` supplied to `"+v+"`, expected an object."));for(var R in T)if(r(T,R)){var D=d(T,R,v,$,O+"."+R,l);if(D instanceof Error)return D}return null}return M(t)}function U(d){if(!Array.isArray(d))return process.env.NODE_ENV!=="production"&&c("Invalid argument supplied to oneOfType, expected an instance of array."),a;for(var t=0;t<d.length;t++){var p=d[t];if(typeof p!="function")return c("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+te(p)+" at index "+t+"."),a}function _(v,$,O,T,h){for(var R=[],D=0;D<d.length;D++){var X=d[D],m=X(v,$,O,T,h,l);if(m==null)return null;m.data&&r(m.data,"expectedType")&&R.push(m.data.expectedType)}var re=R.length>0?", expected one of type ["+R.join(", ")+"]":"";return new N("Invalid "+T+" `"+h+"` supplied to "+("`"+O+"`"+re+"."))}return M(_)}function J(){function d(t,p,_,v,$){return F(t[p])?null:new N("Invalid "+v+" `"+$+"` supplied to "+("`"+_+"`, expected a ReactNode."))}return M(d)}function H(d,t,p,_,v){return new N((d||"React class")+": "+t+" type `"+p+"."+_+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+v+"`.")}function K(d){function t(p,_,v,$,O){var T=p[_],h=Z(T);if(h!=="object")return new N("Invalid "+$+" `"+O+"` of type `"+h+"` "+("supplied to `"+v+"`, expected `object`."));for(var R in d){var D=d[R];if(typeof D!="function")return H(v,$,O,R,Q(D));var X=D(T,R,v,$,O+"."+R,l);if(X)return X}return null}return M(t)}function Y(d){function t(p,_,v,$,O){var T=p[_],h=Z(T);if(h!=="object")return new N("Invalid "+$+" `"+O+"` of type `"+h+"` "+("supplied to `"+v+"`, expected `object`."));var R=n({},p[_],d);for(var D in R){var X=d[D];if(r(d,D)&&typeof X!="function")return H(v,$,O,D,Q(X));if(!X)return new N("Invalid "+$+" `"+O+"` key `"+D+"` supplied to `"+v+"`.\nBad object: "+JSON.stringify(p[_],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(d),null,"  "));var m=X(T,D,v,$,O+"."+D,l);if(m)return m}return null}return M(t)}function F(d){switch(typeof d){case"number":case"string":case"undefined":return!0;case"boolean":return!d;case"object":if(Array.isArray(d))return d.every(F);if(d===null||u(d))return!0;var t=g(d);if(t){var p=t.call(d),_;if(t!==d.entries){for(;!(_=p.next()).done;)if(!F(_.value))return!1}else for(;!(_=p.next()).done;){var v=_.value;if(v&&!F(v[1]))return!1}}else return!1;return!0;default:return!1}}function ee(d,t){return d==="symbol"?!0:t?t["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&t instanceof Symbol:!1}function Z(d){var t=typeof d;return Array.isArray(d)?"array":d instanceof RegExp?"object":ee(t,d)?"symbol":t}function Q(d){if(typeof d>"u"||d===null)return""+d;var t=Z(d);if(t==="object"){if(d instanceof Date)return"date";if(d instanceof RegExp)return"regexp"}return t}function te(d){var t=Q(d);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function ne(d){return!d.constructor||!d.constructor.name?S:d.constructor.name}return x.checkPropTypes=i,x.resetWarningCache=i.resetWarningCache,x.PropTypes=x,x},Ne}var je,Ke;function At(){if(Ke)return je;Ke=1;var e=Ce();function n(){}function l(){}return l.resetWarningCache=n,je=function(){function r(a,u,b,f,E,g){if(g!==e){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}r.isRequired=r;function i(){return r}var c={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:l,resetWarningCache:n};return c.PropTypes=c,c},je}var Je;function Pt(){if(Je)return de.exports;if(Je=1,process.env.NODE_ENV!=="production"){var e=qe(),n=!0;de.exports=Tt()(e.isElement,n)}else de.exports=At()();return de.exports}var kt=Pt();const A=dt(kt),Ct={"10px":"1","12px":"2","14px":"3","16px":"4","18px":"5","24px":"6","32px":"7"},Ze={bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:"12px",headingLevel:"p"},Xe=()=>{const[e,n]=y.useState(Ze),l=y.useCallback(a=>{n(u=>({...u,alignLeft:a==="left",alignCenter:a==="center",alignRight:a==="right",alignJustify:a==="justify"}))},[]),r=y.useCallback(a=>{try{const u=window.getSelection();if(!u||u.rangeCount===0)return!1;const b=u.getRangeAt(0);if(!b.toString())return n(E=>({...E,fontSize:a})),!1;try{const E=document.createElement("span");E.style.fontSize=a;const g=b.extractContents();return E.appendChild(g),b.insertNode(E),b.selectNodeContents(E),u.removeAllRanges(),u.addRange(b),n(S=>({...S,fontSize:a})),!0}catch{const g=Ct[a]||"2";return document.execCommand("fontSize",!1,g),n(S=>({...S,fontSize:a})),!0}}catch(u){return console.warn("[useFormatting] Font size change failed:",u),!1}},[]),i=y.useCallback((a,u=null)=>{try{if(typeof document.execCommand!="function"){console.warn("[useFormatting] execCommand not supported");return}if(a==="fontSize"){r(u);return}switch(document.execCommand(a,!1,u)||console.warn(`[useFormatting] Command "${a}" failed`),a){case"bold":n(f=>({...f,bold:!f.bold}));break;case"italic":n(f=>({...f,italic:!f.italic}));break;case"underline":n(f=>({...f,underline:!f.underline}));break;case"strikethrough":n(f=>({...f,strikethrough:!f.strikethrough}));break;case"justifyLeft":l("left");break;case"justifyCenter":l("center");break;case"justifyRight":l("right");break;case"justifyFull":l("justify");break;case"fontName":n(f=>({...f,fontFamily:u}));break;case"formatBlock":n(f=>({...f,headingLevel:u}));break;default:break}}catch(b){console.warn(`[useFormatting] Error executing command "${a}":`,b)}},[r,l]),c=y.useCallback(()=>{n(Ze)},[]);return{currentFormat:e,formatText:i,resetFormat:c}},pe={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},Qe={top:60,bottom:100,left:72,right:72},St=300,wt=500,Nt=50,jt='page-break, [data-page-break="true"]',et=(e,n)=>{const l=Ae(),r=y.useRef(null),i=y.useRef(null),c=y.useRef(e),a=y.useRef(!1);y.useEffect(()=>{c.current=e},[e]),y.useEffect(()=>()=>{r.current&&clearTimeout(r.current),i.current&&clearTimeout(i.current)},[]);const u=y.useCallback((k,P)=>{if(!k||k.length===0)return null;let C=0;for(let s=0;s<k.length;s++){const w=k[s];if(!w||!w.getBoundingClientRect)continue;const L=w.getBoundingClientRect().height;if(C+L>P)return{overflowIndex:s,overflowElement:w,accumulatedHeight:C};C+=L}return null},[]),b=y.useCallback((k,P)=>{if(!k||!n?.current)return!1;try{const C=n.current,s=document.createElement("page-break");return s.setAttribute("data-page-break","true"),s.setAttribute("contenteditable","false"),s.setAttribute("data-page-number",P||"2"),k.parentNode.insertBefore(s,k),!0}catch(C){return console.warn("[insertPageBreakBefore] Failed to insert page break:",C),!1}},[n]),f=y.useCallback((k={})=>{if(!n?.current||typeof document>"u")return[];const P=k.pageSize||c.current||"A4",C=pe[P]||pe.A4,s=n.current,w=s.querySelectorAll(jt),L=[];L.push({id:"page-0",pageNumber:1,top:0,height:C.height});const I=s.getBoundingClientRect(),U=s.scrollTop;return w.forEach((J,H)=>{const Y=J.getBoundingClientRect().top-I.top+U;L.push({id:`page-${H+1}`,pageNumber:H+2,top:Y,height:C.height})}),L},[n]),E=y.useCallback((k={})=>{const P=f(k);return l.updatePageBoundaries(P),P},[f,l]),g=y.useCallback(()=>{if(!(!n?.current||a.current))try{a.current=!0;const k=n.current,P=c.current||"A4",s=(pe[P]||pe.A4).height-Qe.top-Qe.bottom,w=Array.from(k.children);if(w.length===0)return;const L=w.filter(H=>H.tagName==="PAGE-BREAK"||H.getAttribute("data-page-break")==="true"),I=[];let U=[];for(const H of w)H.tagName==="PAGE-BREAK"||H.getAttribute("data-page-break")==="true"?U.length>0&&(I.push(U),U=[]):U.push(H);U.length>0&&I.push(U),I.length===0&&w.length>0&&I.push(w.filter(H=>!(H.tagName==="PAGE-BREAK"||H.getAttribute("data-page-break")==="true")));let J=!1;for(let H=0;H<I.length;H++){const K=I[H],Y=u(K,s);if(Y&&Y.overflowIndex>0){const F=H+2;if(b(Y.overflowElement,F)){J=!0;break}}}if(J){const H=k.innerHTML;l.updateContinuousContent(H),setTimeout(()=>{E()},Nt)}}catch(k){console.warn("[checkAndReflow] Reflow failed:",k)}finally{a.current=!1}},[n,u,b,l,E]),S=y.useCallback((k=wt)=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{i.current=null,g()},k)},[g]),x=y.useCallback((k={})=>{r.current&&clearTimeout(r.current);const P=typeof k.delay=="number"?k.delay:St;r.current=setTimeout(()=>{r.current=null,E(k)},Math.max(0,P))},[E]),B=y.useCallback(k=>{if(!k?.current||!n?.current)return 0;try{const P=k.current,s=n.current.querySelectorAll('page-break, [data-page-break="true"]');if(s.length===0)return 0;const w=P.getBoundingClientRect(),L=w.top+w.height/2;for(let I=s.length-1;I>=0;I--)if(s[I].getBoundingClientRect().top<L)return I+1;return 0}catch(P){return console.warn("[getCurrentPage] Failed to calculate page:",P),0}},[n]),N=y.useCallback(k=>{if(!n?.current)return;const P=n.current;P.focus();try{let C=null,s=0;if(k===0)C=P.firstChild,s=0;else{const L=P.querySelectorAll('page-break, [data-page-break="true"]')[k-1];L&&L.nextSibling&&(C=L.nextSibling,s=0)}if(C){const w=document.createRange(),L=window.getSelection();C.nodeType===Node.TEXT_NODE?w.setStart(C,s):w.setStart(C,0),w.collapse(!0),L.removeAllRanges(),L.addRange(w)}}catch(C){console.warn("[positionCursorAtPage] Failed to position cursor:",C)}},[n]),M=y.useCallback((k,P)=>{if(!P?.current||!n?.current){console.warn("[scrollToPage] Missing refs");return}const C=P.current,s=n.current;try{let w=null;if(k===0)w=s;else{const I=s.querySelectorAll('page-break, [data-page-break="true"]')[k-1];if(I)w=I;else{console.warn("[scrollToPage] Page break not found for page",k);return}}if(w){const L=w.getBoundingClientRect(),I=C.getBoundingClientRect(),U=C.scrollTop+(L.top-I.top);console.log("[scrollToPage] Scrolling to page",k,"scrollTop:",U),C.scrollTo({top:U,behavior:"smooth"}),setTimeout(()=>{N(k)},400)}}catch(w){console.error("[scrollToPage] Error:",w)}},[n,N]),j=y.useCallback(k=>{if(!n?.current)return!1;const P=n.current;if(f().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const s=Array.from(P.querySelectorAll('page-break, [data-page-break="true"]'));if(k>s.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const w=window.getSelection();let L=!1,I=[],U=null;if(k===0){const K=s[0];if(!K)return console.warn("[removePageAndContent] No page break found for first page"),!1;let Y=P.firstChild;for(;Y&&Y!==K;)I.push(Y),Y=Y.nextSibling;U=K}else{const K=s[k-1];if(!K)return console.warn("[removePageAndContent] Page break not found"),!1;const Y=s[k];let F=K.nextSibling;for(;F&&F!==Y;)I.push(F),F=F.nextSibling;U=K}if(w&&w.rangeCount>0){const Y=w.getRangeAt(0).startContainer;for(const F of I)if(F.contains(Y)||F===Y){L=!0;break}}U&&U.parentNode&&U.remove(),I.forEach(K=>{K.parentNode&&K.remove()}),P.querySelectorAll('page-break, [data-page-break="true"]').forEach((K,Y)=>{K.setAttribute("data-page-number",String(Y+2))}),L&&setTimeout(()=>{N(0)},50);const H=P.innerHTML;return l.updateContinuousContent(H),setTimeout(()=>{E()},100),!0}catch(s){return console.error("[removePageAndContent] Failed to remove page:",s),!1}},[n,f,l,E,N]);return{calculatePageBoundaries:f,checkAndUpdateBoundaries:x,updateBoundaries:E,getCurrentPage:B,scrollToPage:M,positionCursorAtPage:N,checkAndReflow:g,triggerAutoReflow:S,removePageAndContent:j,boundaryTimeoutRef:r,reflowTimeoutRef:i}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Rt=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,l,r)=>r?r.toUpperCase():l.toLowerCase()),tt=e=>{const n=Rt(e);return n.charAt(0).toUpperCase()+n.slice(1)},rt=(...e)=>e.filter((n,l,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===l).join(" ").trim(),Mt=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var It={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=y.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:r,className:i="",children:c,iconNode:a,...u},b)=>y.createElement("svg",{ref:b,...It,width:n,height:n,stroke:e,strokeWidth:r?Number(l)*24/Number(n):l,className:rt("lucide",i),...!c&&!Mt(u)&&{"aria-hidden":"true"},...u},[...a.map(([f,E])=>y.createElement(f,E)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=(e,n)=>{const l=y.forwardRef(({className:r,...i},c)=>y.createElement(Dt,{ref:c,iconNode:n,className:rt(`lucide-${Ot(tt(e))}`,`lucide-${e}`,r),...i}));return l.displayName=tt(e),l};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=W("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=W("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=W("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=W("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=W("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=W("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=W("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=W("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=W("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=W("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=W("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=W("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=W("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=W("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=W("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=W("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=W("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=W("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=W("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=W("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=W("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=W("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=W("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=W("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=W("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=W("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ot=({editorView:e,isCollapsed:n,onToggle:l,wordCount:r,pageCount:i})=>{const c=Te(),{pages:a,activePage:u,continuousContent:b,editorMode:f}=c,[E,g]=y.useState(0),[S,x]=y.useState([]);y.useEffect(()=>{if(r!==void 0&&i!==void 0){if(g(r),b){const j=document.createElement("div");j.innerHTML=b;const k=j.querySelectorAll("h1, h2, h3, h4, h5, h6"),P=Array.from(k).map((C,s)=>{const w=parseInt(C.tagName.charAt(1)),L=C.textContent.trim();return L?{id:`heading-${s}`,level:w,text:L,page:1}:null}).filter(Boolean);x(P)}return}let N=0;const M=[];a.forEach((j,k)=>{if(j.content){const P=document.createElement("div");P.innerHTML=j.content;const s=(P.textContent||P.innerText||"").trim().split(/\s+/).filter(L=>L.length>0);N+=s.length,P.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((L,I)=>{const U=parseInt(L.tagName.charAt(1)),J=L.textContent.trim();J&&M.push({id:`heading-${k}-${I}`,level:U,text:J,page:k+1})})}}),g(N),x(M)},[a,r,i,b]);const B=i!==void 0?i:a.length;return o.jsxs("aside",{className:`sidebar ${n?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[o.jsxs("div",{className:"sidebar-header",children:[o.jsxs("div",{className:"sidebar-title",children:[o.jsx(ge,{size:18}),o.jsx("h2",{children:"Document Info"})]}),o.jsx("button",{className:"sidebar-toggle",onClick:l,"aria-label":n?"Expand sidebar":"Collapse sidebar",title:n?"Expand sidebar":"Collapse sidebar",children:n?o.jsx(Bt,{size:16}):o.jsx(Lt,{size:16})})]}),!n&&o.jsxs("div",{className:"sidebar-content",children:[o.jsxs("div",{className:"sidebar-section",children:[o.jsx("h3",{children:"Statistics"}),o.jsxs("div",{className:"stat-item",children:[o.jsxs("div",{className:"stat-label",children:[o.jsx(zt,{size:14}),o.jsx("span",{children:"Pages:"})]}),o.jsx("span",{className:"stat-value",children:B})]}),o.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[o.jsxs("div",{className:"stat-label",children:[o.jsx(Ut,{size:14}),o.jsx("span",{children:"Words:"})]}),o.jsx("span",{className:"stat-value",children:E.toLocaleString()})]}),o.jsxs("div",{className:"stat-item",children:[o.jsxs("div",{className:"stat-label",children:[o.jsx(ge,{size:14}),o.jsx("span",{children:"Active Page:"})]}),o.jsx("span",{className:"stat-value",children:u+1})]})]}),S.length>0&&o.jsxs("div",{className:"sidebar-section",children:[o.jsxs("h3",{children:[o.jsx(nt,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),o.jsx("div",{className:"document-outline","data-testid":"outline",children:S.map(N=>{const M=N.level===1?qt:N.level===2?Gt:Ht;return o.jsxs("div",{className:`outline-item outline-level-${N.level}`,style:{marginLeft:`${(N.level-1)*12}px`},children:[o.jsx(M,{size:12,className:"outline-icon"}),o.jsx("span",{className:"outline-text",children:N.text}),o.jsxs("span",{className:"outline-page",children:["p.",N.page]})]},N.id)})})]}),o.jsxs("div",{className:"sidebar-section",children:[o.jsx("h3",{children:"Document"}),o.jsx("p",{children:"HTML Editor"}),o.jsx("p",{children:"Multi-page support"})]})]})]})};function sr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})}function at(e){return new Promise((n,l)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){l(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){l(new Error("Image exceeds maximum size of 5MB"));return}const i=new FileReader;i.onload=c=>{const a=c.target.result;if(a.split(",")[1].length*3/4>5*1024*1024){l(new Error("Image exceeds maximum size of 5MB"));return}try{const f=`editor-image-${sr()}`;localStorage.setItem(f,a),n(f)}catch(f){f.name==="QuotaExceededError"?l(new Error("Storage quota exceeded")):l(f)}},i.onerror=()=>{l(new Error("Error reading image file"))},i.readAsDataURL(e)})}function cr(e){return localStorage.getItem(e)}function lr(e){localStorage.removeItem(e)}function ur(){Object.keys(localStorage).forEach(e=>{e.startsWith("editor-image-")&&localStorage.removeItem(e)})}function dr(){return Object.keys(localStorage).filter(e=>e.startsWith("editor-image-"))}class it{constructor(n="Editor"){this.namespace=n}_format(n,l,r){return`[${new Date().toISOString()}] [${this.namespace}] [${n}] ${l}`}info(n,l){}warn(n,l){}error(n,l){}debug(n,l){}}const st=new it("Editor"),he=({currentFormat:e,onFormatText:n,onAddPageBreak:l})=>{const r=async i=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(i.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(i.size>5242880){alert("Image exceeds maximum size of 5MB");return}const a=await at(i),u=localStorage.getItem(a);u&&(document.execCommand("insertImage",!1,u),st.info("Image inserted",{key:a}))}catch(c){st.error("Error uploading image",c)}};return o.jsxs("div",{className:"editor-toolbar",children:[o.jsx("button",{onClick:()=>n("undo"),title:"Undo",children:o.jsx(ar,{size:16})}),o.jsx("button",{onClick:()=>n("redo"),title:"Redo",children:o.jsx(Jt,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>n("bold"),className:e.bold?"active":"",title:"Bold",children:o.jsx($t,{size:16})}),o.jsx("button",{onClick:()=>n("italic"),className:e.italic?"active":"",title:"Italic",children:o.jsx(Ft,{size:16})}),o.jsx("button",{onClick:()=>n("underline"),className:e.underline?"active":"",title:"Underline",children:o.jsx(or,{size:16})}),o.jsx("button",{onClick:()=>n("strikethrough"),className:e.strikethrough?"active":"",title:"Strikethrough",children:o.jsx(Xt,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>n("justifyLeft"),className:e.alignLeft?"active":"",title:"Align Left",children:o.jsx(nr,{size:16})}),o.jsx("button",{onClick:()=>n("justifyCenter"),className:e.alignCenter?"active":"",title:"Align Center",children:o.jsx(er,{size:16})}),o.jsx("button",{onClick:()=>n("justifyRight"),className:e.alignRight?"active":"",title:"Align Right",children:o.jsx(tr,{size:16})}),o.jsx("button",{onClick:()=>n("justifyFull"),className:e.alignJustify?"active":"",title:"Justify",children:o.jsx(rr,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsxs("select",{onChange:i=>n("fontName",i.target.value),defaultValue:"Arial",title:"Font Family",children:[o.jsx("option",{value:"Arial",children:"Arial"}),o.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),o.jsx("option",{value:"Courier New",children:"Courier New"}),o.jsx("option",{value:"Georgia",children:"Georgia"}),o.jsx("option",{value:"Verdana",children:"Verdana"})]}),o.jsxs("select",{onChange:i=>n("fontSize",i.target.value),defaultValue:"12px",title:"Font Size",children:[o.jsx("option",{value:"10px",children:"10"}),o.jsx("option",{value:"12px",children:"12"}),o.jsx("option",{value:"14px",children:"14"}),o.jsx("option",{value:"16px",children:"16"}),o.jsx("option",{value:"18px",children:"18"}),o.jsx("option",{value:"24px",children:"24"}),o.jsx("option",{value:"32px",children:"32"})]}),o.jsxs("select",{onChange:i=>n("formatBlock",i.target.value),value:e.headingLevel||"p",title:"Heading Level",children:[o.jsx("option",{value:"p",children:"Normal"}),o.jsx("option",{value:"h1",children:"Heading 1"}),o.jsx("option",{value:"h2",children:"Heading 2"}),o.jsx("option",{value:"h3",children:"Heading 3"}),o.jsx("option",{value:"h4",children:"Heading 4"}),o.jsx("option",{value:"h5",children:"Heading 5"}),o.jsx("option",{value:"h6",children:"Heading 6"})]}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>n("insertUnorderedList"),title:"Bullet List",children:o.jsx(nt,{size:16})}),o.jsx("button",{onClick:()=>n("insertOrderedList"),title:"Numbered List",children:o.jsx(Wt,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>{const i=prompt("Enter URL:");i&&n("createLink",i)},title:"Insert Link",children:o.jsx(Vt,{size:16})}),o.jsx("button",{onClick:()=>n("insertHTML",'<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>'),title:"Insert Table",children:o.jsx(Qt,{size:16})}),l&&o.jsx("button",{onClick:l,title:"Insert Page Break",children:o.jsx(ge,{size:16})}),o.jsx("input",{type:"file",accept:"image/*",onChange:i=>i.target.files[0]&&r(i.target.files[0]),style:{display:"none"},id:"image-upload"}),o.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:o.jsx(Yt,{size:16})})]})};he.propTypes={currentFormat:A.shape({bold:A.bool,italic:A.bool,underline:A.bool,strikethrough:A.bool,alignLeft:A.bool,alignCenter:A.bool,alignRight:A.bool,alignJustify:A.bool,fontFamily:A.string,fontSize:A.string,headingLevel:A.string}).isRequired,onFormatText:A.func.isRequired,onAddPageBreak:A.func},he.defaultProps={onAddPageBreak:void 0};const me=({content:e,dimensions:n,pageSize:l,pageBoundaries:r=[],editorRef:i,onInput:c,onKeyDown:a,onClick:u,onScroll:b})=>{const f={top:60,bottom:100,left:72,right:72},E=g=>{if(g.key==="Tab")return g.preventDefault(),document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;"),!1;const S=window.getSelection();if(!S||S.rangeCount===0)return;const x=S.getRangeAt(0),{startContainer:B,endContainer:N}=x,M=j=>j?j.nodeType===Node.ELEMENT_NODE?j.tagName==="PAGE-BREAK"||j.getAttribute("data-page-break")==="true":j.parentElement&&M(j.parentElement):!1;if((g.key==="Backspace"||g.key==="Delete")&&(M(B)||M(N)))return g.preventDefault(),!1;a&&a(g)};return o.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${n.width}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh"},children:o.jsx("div",{ref:i,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${n.height}px`,backgroundColor:"white",padding:`${f.top}px ${f.right}px ${f.bottom}px ${f.left}px`,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:"Arial, sans-serif",fontSize:"12px",lineHeight:"1.15",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:c,onKeyDown:E,onClick:u,onScroll:b,"data-testid":"continuous-editor"})})};me.propTypes={content:A.string.isRequired,dimensions:A.shape({width:A.number.isRequired,height:A.number.isRequired}).isRequired,pageSize:A.oneOf(["A4","Letter","Legal"]).isRequired,pageBoundaries:A.arrayOf(A.shape({id:A.string.isRequired,pageNumber:A.number.isRequired,top:A.number,height:A.number})),editorRef:A.shape({current:A.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onInput:A.func.isRequired,onKeyDown:A.func,onClick:A.func,onScroll:A.func},me.defaultProps={pageBoundaries:[],onKeyDown:void 0,onClick:void 0,onScroll:void 0};const Oe=({pageBoundaries:e=[{id:"page-0",pageNumber:1}],activePage:n=0,pageSize:l="A4",onNavigate:r,onAddPage:i,onDeletePage:c,onPageSizeChange:a}={})=>{const u=Math.max(e?.length||0,1),b=S=>{r&&r(S)},f=()=>{i&&i()},E=S=>{if(u<=1){console.warn("[PageManager] Cannot delete the only page");return}c&&c(S)},g=S=>{a&&a(S)};return o.jsxs("div",{className:"page-manager",children:[o.jsxs("div",{className:"page-size-controls",children:[o.jsxs("label",{htmlFor:"page-size-selector",children:[o.jsx(Zt,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Size:"]}),o.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:l,onChange:S=>g(S.target.value),children:[o.jsx("option",{value:"A4",children:"A4"}),o.jsx("option",{value:"Letter",children:"Letter"}),o.jsx("option",{value:"Legal",children:"Legal"})]})]}),o.jsx("div",{className:"page-list",children:(e&&e.length>0?e:[{id:"page-0",pageNumber:1}]).map((S,x)=>o.jsxs("div",{className:"page-item",children:[o.jsxs("button",{type:"button",className:`page-button ${x===n?"active":""}`,onClick:()=>b(x),"aria-label":`Go to page ${x+1}`,"aria-current":x===n?"page":void 0,children:[o.jsx(ge,{size:14}),o.jsxs("span",{children:["Page ",x+1]})]}),u>1&&o.jsx("button",{type:"button",className:"delete-page-button",onClick:B=>{B.stopPropagation(),E(x)},"aria-label":`Delete page ${x+1}`,title:"Delete this page and its content",children:o.jsx(ir,{size:14})})]},S.id||`page-${x}`))}),o.jsxs("button",{type:"button",className:"add-page-button",onClick:f,"aria-label":"Add new page",title:"Add new page at end",children:[o.jsx(Kt,{size:16}),o.jsx("span",{children:"Add Page"})]})]})};Oe.propTypes={pageBoundaries:A.arrayOf(A.shape({id:A.string.isRequired,pageNumber:A.number.isRequired,top:A.number,height:A.number})),activePage:A.number,pageSize:A.oneOf(["A4","Letter","Legal"]),onNavigate:A.func,onAddPage:A.func,onDeletePage:A.func,onPageSizeChange:A.func},Oe.defaultProps={pageBoundaries:[{id:"page-0",pageNumber:1}],activePage:0,pageSize:"A4",onNavigate:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0};const ct=y.memo(Oe),lt={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},fr=50,pr=50,gr=50,hr=100,mr=500,ye=y.forwardRef(({pageManagerComponent:e=null,onNavigatePage:n,onAddPage:l,onDeletePage:r,onPageSizeChange:i,onChange:c,showSidebar:a=!0,showToolbar:u=!0,showPageManager:b=!0},f)=>{const E=Te(),g=Ae(),{pageSize:S,continuousContent:x,pageBoundaries:B,activePage:N}=E,M=y.useRef(null),j=y.useRef(null),{currentFormat:k,formatText:P}=Xe(),{checkAndUpdateBoundaries:C,getCurrentPage:s,scrollToPage:w,positionCursorAtPage:L,updateBoundaries:I,triggerAutoReflow:U,removePageAndContent:J}=et(S,j),H=y.useMemo(()=>lt[S]||lt.A4,[S]),[K,Y]=y.useState(!1),F=y.useRef(null),ee=y.useRef(!1),Z=y.useRef(!1),Q=y.useRef(!1),te=y.useRef(x);y.useEffect(()=>{if(j.current){if(!Q.current){j.current.innerHTML=x,Q.current=!0,te.current=x;const h=setTimeout(()=>{I()},fr);return()=>clearTimeout(h)}if(te.current!==x){if(j.current.innerHTML!==x){j.current.innerHTML=x;const R=setTimeout(()=>{if(I(),ee.current){ee.current=!1;const D=Math.max(0,B.length-1);g.setActivePage(D),setTimeout(()=>{w(D,M)},gr)}},pr);return te.current=x,()=>clearTimeout(R)}te.current=x}}},[x,I,B.length,g,w]),y.useEffect(()=>{c&&Q.current&&c(x)},[x,c]),y.useImperativeHandle(f,()=>({getHTMLContent:()=>x,getPlainText:()=>x.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),setContent:h=>{g.updateContinuousContent(h),j.current&&(j.current.innerHTML=h,setTimeout(()=>{I()},50))}}),[x,g,I]),y.useEffect(()=>{const h=setTimeout(()=>{j.current&&j.current.focus()},200);return()=>clearTimeout(h)},[]);const ne=y.useCallback(h=>{const R=h.currentTarget.innerHTML;g.updateContinuousContent(R),C(),U();const D=s(M);D!==N&&g.setActivePage(D)},[C,g,s,N,U,M]),d=y.useCallback(h=>{g.updatePageSize(h),I({pageSize:h}),i&&i(h)},[g,I,i]),t=y.useCallback(h=>{h<0||h>=B.length||(Z.current=!0,g.setActivePage(h),w(h,M),setTimeout(()=>{Z.current=!1},mr),n&&n(h))},[g,w,n,B.length]),p=y.useCallback(()=>{ee.current=!0,g.addPageBreak({position:"end"}),l&&l()},[g,l]),_=y.useCallback(()=>{const h=window.getSelection();if(h&&h.rangeCount>0){if(!j?.current)return;const X=`<page-break data-page-break="true" contenteditable="false" data-page-number="${j.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,X),setTimeout(()=>{I();const m=s(M);g.setActivePage(m)},150)}},[I,s,g,M]),v=y.useCallback(h=>{if(B.length<=1){console.warn("Cannot delete the only page");return}J(h)&&(g.setActivePage(0),r&&r(h))},[B.length,J,g,r]),$=y.useCallback(()=>{!M.current||!j.current||Z.current||(F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{if(Z.current){F.current=null;return}const h=s(M);h!==N&&h>=0&&g.setActivePage(h),F.current=null},hr))},[s,N,g]),O=y.useMemo(()=>{if(!x)return 0;const R=x.replace(/<[^>]*>/g," ").match(/\b\w+\b/g);return R?R.length:0},[x]),T=B.length||1;return y.useEffect(()=>()=>{F.current&&clearTimeout(F.current)},[]),o.jsxs("div",{className:"multi-page-editor",children:[u&&o.jsx(he,{currentFormat:k,onFormatText:P,onAddPageBreak:_}),o.jsxs("div",{className:"editor-container",children:[a&&o.jsx(ot,{editorView:null,isCollapsed:K,onToggle:()=>Y(h=>!h),wordCount:O,pageCount:T}),o.jsx("div",{className:"editor-viewport continuous-scroll",ref:M,onScroll:$,children:o.jsx(me,{content:x,dimensions:H,pageSize:S,pageBoundaries:B,editorRef:j,onInput:ne,onClick:()=>j.current?.focus()})}),b&&o.jsx("div",{className:"page-manager-sidebar",children:e?y.cloneElement(e,{onNavigate:t,onAddPage:p,onDeletePage:v,onPageSizeChange:d}):o.jsx(ct,{pageBoundaries:B,activePage:N,pageSize:S,onNavigate:t,onAddPage:p,onDeletePage:v,onPageSizeChange:d})})]})]})});ye.displayName="HtmlEditor",ye.propTypes={pageManagerComponent:A.element,onNavigatePage:A.func,onAddPage:A.func,onDeletePage:A.func,onPageSizeChange:A.func,onChange:A.func,showSidebar:A.bool,showToolbar:A.bool,showPageManager:A.bool},ye.defaultProps={pageManagerComponent:null,onNavigatePage:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onChange:void 0,showSidebar:!0,showToolbar:!0,showPageManager:!0};class Re extends y.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,l){console.error("[ErrorBoundary] Caught error:",n),console.error("[ErrorBoundary] Error info:",l),this.setState({error:n,errorInfo:l}),this.props.onError&&this.props.onError(n,l)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:o.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #f44336",borderRadius:"4px",backgroundColor:"#ffebee",color:"#c62828"},children:[o.jsx("h2",{style:{marginTop:0},children:" Something went wrong"}),o.jsx("p",{children:"The editor encountered an unexpected error and couldn't continue."}),this.props.showDetails&&this.state.error&&o.jsxs("details",{style:{marginTop:"10px",padding:"10px",backgroundColor:"white",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[o.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),o.jsxs("pre",{style:{marginTop:"10px",overflow:"auto",maxHeight:"200px"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),o.jsx("button",{onClick:this.handleReset,style:{marginTop:"15px",padding:"8px 16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Try Again"})]}):this.props.children}}Re.propTypes={children:A.node.isRequired,fallback:A.node,onError:A.func,onReset:A.func,showDetails:A.bool},Re.defaultProps={fallback:null,onError:void 0,onReset:void 0,showDetails:process.env.NODE_ENV==="development"};const yr={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}};V.DocumentProvider=bt,V.EditorToolbar=he,V.ErrorBoundary=Re,V.HtmlEditor=ye,V.PAGE_DIMENSIONS=yr,V.PageManager=ct,V.PageView=me,V.Sidebar=ot,V.clearImages=ur,V.deleteImage=lr,V.getAllImageKeys=dr,V.getImage=cr,V.logger=it,V.saveImage=at,V.useContinuousReflow=et,V.useDocument=xe,V.useDocumentActions=Ae,V.useDocumentState=Te,V.useFormatting=Xe,Object.defineProperty(V,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
