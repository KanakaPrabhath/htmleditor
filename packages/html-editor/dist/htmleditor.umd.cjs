(function(j,m){typeof exports=="object"&&typeof module<"u"?m(exports,require("react"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","react","uuid"],m):(j=typeof globalThis<"u"?globalThis:j||self,m(j.HTMLEditor={},j.React,j.uuid))})(this,(function(j,m,De){"use strict";function Vt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xe={exports:{}},ye={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it;function Kt(){if(it)return ye;it=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(r,s,a){var n=null;if(a!==void 0&&(n=""+a),s.key!==void 0&&(n=""+s.key),"key"in s){a={};for(var i in s)i!=="key"&&(a[i]=s[i])}else a=s;return s=a.ref,{$$typeof:e,type:r,key:n,ref:s!==void 0?s:null,props:a}}return ye.Fragment=t,ye.jsx=o,ye.jsxs=o,ye}var be={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ct;function Xt(){return ct||(ct=1,process.env.NODE_ENV!=="production"&&(function(){function e(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===te?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case P:return"Fragment";case w:return"Profiler";case D:return"StrictMode";case I:return"Suspense";case h:return"SuspenseList";case q:return"Activity"}if(typeof c=="object")switch(typeof c.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),c.$$typeof){case b:return"Portal";case M:return c.displayName||"Context";case O:return(c._context.displayName||"Context")+".Consumer";case u:var A=c.render;return c=c.displayName,c||(c=A.displayName||A.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case C:return A=c.displayName||null,A!==null?A:e(c.type)||"Memo";case L:A=c._payload,c=c._init;try{return e(c(A))}catch{}}return null}function t(c){return""+c}function o(c){try{t(c);var A=!1}catch{A=!0}if(A){A=console;var S=A.error,R=typeof Symbol=="function"&&Symbol.toStringTag&&c[Symbol.toStringTag]||c.constructor.name||"Object";return S.call(A,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",R),t(c)}}function r(c){if(c===P)return"<>";if(typeof c=="object"&&c!==null&&c.$$typeof===L)return"<...>";try{var A=e(c);return A?"<"+A+">":"<...>"}catch{return"<...>"}}function s(){var c=W.A;return c===null?null:c.getOwner()}function a(){return Error("react-stack-top-frame")}function n(c){if(Q.call(c,"key")){var A=Object.getOwnPropertyDescriptor(c,"key").get;if(A&&A.isReactWarning)return!1}return c.key!==void 0}function i(c,A){function S(){ee||(ee=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",A))}S.isReactWarning=!0,Object.defineProperty(c,"key",{get:S,configurable:!0})}function f(){var c=e(this.type);return Y[c]||(Y[c]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),c=this.props.ref,c!==void 0?c:null}function y(c,A,S,R,U,z){var N=S.ref;return c={$$typeof:v,type:c,key:A,props:S,_owner:R},(N!==void 0?N:null)!==null?Object.defineProperty(c,"ref",{enumerable:!1,get:f}):Object.defineProperty(c,"ref",{enumerable:!1,value:null}),c._store={},Object.defineProperty(c._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(c,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(c,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:U}),Object.defineProperty(c,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:z}),Object.freeze&&(Object.freeze(c.props),Object.freeze(c)),c}function d(c,A,S,R,U,z){var N=A.children;if(N!==void 0)if(R)if(B(N)){for(R=0;R<N.length;R++)p(N[R]);Object.freeze&&Object.freeze(N)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else p(N);if(Q.call(A,"key")){N=e(c);var H=Object.keys(A).filter(function(F){return F!=="key"});R=0<H.length?"{key: someKey, "+H.join(": ..., ")+": ...}":"{key: someKey}",E[N+R]||(H=0<H.length?"{"+H.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,R,N,H,N),E[N+R]=!0)}if(N=null,S!==void 0&&(o(S),N=""+S),n(A)&&(o(A.key),N=""+A.key),"key"in A){S={};for(var Z in A)Z!=="key"&&(S[Z]=A[Z])}else S=A;return N&&i(S,typeof c=="function"?c.displayName||c.name||"Unknown":c),y(c,N,S,s(),U,z)}function p(c){g(c)?c._store&&(c._store.validated=1):typeof c=="object"&&c!==null&&c.$$typeof===L&&(c._payload.status==="fulfilled"?g(c._payload.value)&&c._payload.value._store&&(c._payload.value._store.validated=1):c._store&&(c._store.validated=1))}function g(c){return typeof c=="object"&&c!==null&&c.$$typeof===v}var T=m,v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),M=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),te=Symbol.for("react.client.reference"),W=T.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=Object.prototype.hasOwnProperty,B=Array.isArray,re=console.createTask?console.createTask:function(){return null};T={react_stack_bottom_frame:function(c){return c()}};var ee,Y={},X=T.react_stack_bottom_frame.bind(T,a)(),ne=re(r(a)),E={};be.Fragment=P,be.jsx=function(c,A,S){var R=1e4>W.recentlyCreatedOwnerStacks++;return d(c,A,S,!1,R?Error("react-stack-top-frame"):X,R?re(r(c)):ne)},be.jsxs=function(c,A,S){var R=1e4>W.recentlyCreatedOwnerStacks++;return d(c,A,S,!0,R?Error("react-stack-top-frame"):X,R?re(r(c)):ne)}})()),be}var lt;function Jt(){return lt||(lt=1,process.env.NODE_ENV==="production"?xe.exports=Kt():xe.exports=Xt()),xe.exports}var l=Jt();const ze=100,$e=50,Be=200,ut=5,He=e=>e<Be,Ge=e=>e>$e,Qt=96,_e=e=>Math.round(e*Qt),Pe={NORMAL:{name:"Normal",label:'Normal (1")',top:1,bottom:1,left:1,right:1},NARROW:{name:"Narrow",label:'Narrow (0.5")',top:.5,bottom:.5,left:.5,right:.5},MODERATE:{name:"Moderate",label:'Moderate (1" / 0.75")',top:1,bottom:1,left:.75,right:.75},WIDE:{name:"Wide",label:'Wide (1" / 2")',top:1,bottom:1,left:2,right:2},OFFICE_2003:{name:"Office 2003",label:'Office 2003 (1" / 1.25")',top:1,bottom:1,left:1.25,right:1.25}},ue="NORMAL",dt=(e=ue)=>{const t=Pe[e]||Pe[ue];return{top:_e(t.top),bottom:_e(t.bottom),left:_e(t.left),right:_e(t.right)}},en=(e=ue)=>{const t=dt(e);return t.top+t.bottom},tn=()=>Object.keys(Pe),nn=e=>{const t=Pe[e];return t?t.label:"Unknown"},ie={A4:{name:"A4",width:794,height:1123,widthMm:210,heightMm:297,widthIn:8.27,heightIn:11.69},Letter:{name:"Letter",width:816,height:1056,widthMm:216,heightMm:279,widthIn:8.5,heightIn:11},Legal:{name:"Legal",width:816,height:1344,widthMm:216,heightMm:356,widthIn:8.5,heightIn:14}},Ue="A4",Ae=e=>{const t=ie[e]||ie[Ue];return{width:t.width,height:t.height}},rn=e=>Object.keys(ie).includes(e),an=()=>Object.keys(ie),Ee=Ue,pe="<p><br></p>",on="continuous",ve=(e,t=Ee)=>({id:De.v4(),index:e,size:t,content:pe,images:[],isBreakPoint:!1}),ke=e=>typeof e!="string"||e.trim()===""?pe:e,ft=(e,t=Ee)=>(e.length>0?e:[ve(0,t)]).map((r,s)=>({id:r.id||De.v4(),index:s,size:r.size||t,content:ke(r.content),images:r.images||[],isBreakPoint:!!r.isBreakPoint})),sn=(e=Ee)=>[{id:"page-0",pageNumber:1,top:0,height:Ae(e).height}],Fe=(e={})=>{const t=new Date().toISOString(),o=e.pageSize||Ee,r=ft(e.pages||[ve(0,o)],o);return{id:De.v4(),title:e.title||"Untitled Document",createdAt:t,updatedAt:t,pageSize:o,pages:r,activePage:e.activePage&&e.activePage<r.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:r.length,editorMode:e.editorMode||on,continuousContent:e.continuousContent||pe,pageBoundaries:e.pageBoundaries||sn(o),zoomLevel:e.zoomLevel||ze,pageMargins:e.pageMargins||ue}},G={INITIALIZE_DOCUMENT:"INITIALIZE_DOCUMENT",UPDATE_TITLE:"UPDATE_TITLE",UPDATE_PAGE_CONTENT:"UPDATE_PAGE_CONTENT",UPDATE_PAGES:"UPDATE_PAGES",ADD_PAGE:"ADD_PAGE",DELETE_PAGE:"DELETE_PAGE",SET_ACTIVE_PAGE:"SET_ACTIVE_PAGE",UPDATE_PAGE_SIZE:"UPDATE_PAGE_SIZE",RESET_DOCUMENT:"RESET_DOCUMENT",UPDATE_CONTINUOUS_CONTENT:"UPDATE_CONTINUOUS_CONTENT",UPDATE_PAGE_BOUNDARIES:"UPDATE_PAGE_BOUNDARIES",ADD_PAGE_BREAK:"ADD_PAGE_BREAK",REMOVE_PAGE_BREAK:"REMOVE_PAGE_BREAK",SET_EDITOR_MODE:"SET_EDITOR_MODE",INSERT_PAGE_AT:"INSERT_PAGE_AT",MOVE_PAGE_TO:"MOVE_PAGE_TO",DUPLICATE_PAGE:"DUPLICATE_PAGE",SET_ZOOM_LEVEL:"SET_ZOOM_LEVEL",ZOOM_IN:"ZOOM_IN",ZOOM_OUT:"ZOOM_OUT",RESET_ZOOM:"RESET_ZOOM",UPDATE_PAGE_MARGINS:"UPDATE_PAGE_MARGINS"},cn=(e,t)=>{const o=new Date().toISOString();switch(t.type){case G.INITIALIZE_DOCUMENT:{const{initialContent:r=pe,pageSize:s=Ee}=t.payload||{},a={...ve(0,s),content:ke(r)};return Fe({title:e.title,pageSize:s,pages:[a]})}case G.UPDATE_TITLE:return{...e,title:t.payload,updatedAt:o};case G.UPDATE_PAGE_CONTENT:{const{pageIndex:r,content:s}=t.payload;if(r<0||r>=e.pages.length)return e;const a=[...e.pages];return a[r]={...a[r],content:ke(s)},{...e,pages:a,updatedAt:o}}case G.UPDATE_PAGES:{const r=Array.isArray(t.payload)?{pages:t.payload}:t.payload||{},s=ft(r.pages||[],e.pageSize),a=Array.isArray(r.pageBreaks)?r.pageBreaks:s.slice(0,-1).map((n,i)=>({id:`auto-break-${i}`,pageNumber:i+1}));return{...e,pages:s,activePage:Math.min(e.activePage,s.length-1),pageBreaks:a,totalPages:s.length,updatedAt:o}}case G.ADD_PAGE:{const r=typeof t.payload?.index=="number"?Math.min(Math.max(t.payload.index,0),e.pages.length):e.pages.length,s=[...e.pages];s.splice(r,0,ve(r,e.pageSize));const a=s.map((i,f)=>({...i,index:f,size:e.pageSize})),n=a.slice(0,-1).map((i,f)=>({id:`auto-break-${f}`,pageNumber:f+1}));return{...e,pages:a,activePage:r,pageBreaks:n,totalPages:a.length,updatedAt:o}}case G.DELETE_PAGE:{const r=t.payload;if(e.pages.length<=1)return e;const s=[...e.pages];s.splice(r,1);const a=s.map((f,y)=>({...f,index:y,size:e.pageSize}));let n=e.activePage;n>=a.length?n=a.length-1:r<=n&&n>0&&(n-=1);const i=a.slice(0,-1).map((f,y)=>({id:`auto-break-${y}`,pageNumber:y+1}));return{...e,pages:a,activePage:n,pageBreaks:i,totalPages:a.length,updatedAt:o}}case G.SET_ACTIVE_PAGE:{const r=t.payload;if(r===e.activePage)return e;const s=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;return r<0||r>=s?e:{...e,activePage:r,updatedAt:o}}case G.UPDATE_PAGE_SIZE:{const r=t.payload;if(r===e.pageSize)return e;try{Ae(r)}catch{return console.warn(`Invalid page size: ${r}`),e}const s=e.pages.map((n,i)=>({...n,index:i,size:r})),a=s.slice(0,-1).map((n,i)=>({id:`auto-break-${i}`,pageNumber:i+1}));return{...e,pageSize:r,pages:s,pageBreaks:a,updatedAt:o}}case G.RESET_DOCUMENT:return Fe();case G.UPDATE_CONTINUOUS_CONTENT:{const r=ke(t.payload);return r===e.continuousContent?e:{...e,continuousContent:r,updatedAt:o}}case G.UPDATE_PAGE_BOUNDARIES:{const r=Array.isArray(t.payload)?t.payload:[];if(r.length===e.pageBoundaries.length&&r.length>0&&r[0].id===e.pageBoundaries[0]?.id&&r[r.length-1].id===e.pageBoundaries[r.length-1]?.id)return e;const s=e.activePage>=r.length?Math.max(0,r.length-1):e.activePage;return{...e,pageBoundaries:r,totalPages:r.length,activePage:s,updatedAt:o}}case G.ADD_PAGE_BREAK:{const{position:r="end",pageIndex:s}=t.payload||{},a='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';let n=e.continuousContent;if(r==="end")n=n+a+"<p><br></p>";else if(typeof r=="number"){const i=n.substring(0,r),f=n.substring(r);n=i+a+f}else if(typeof s=="number"&&typeof document<"u"){const i=document.createElement("div");i.innerHTML=n;const f=i.querySelectorAll('page-break, [data-page-break="true"]');if(s===0&&f.length===0)n=n+a+"<p><br></p>";else if(s<f.length){const y=f[s],d=document.createElement("page-break");d.setAttribute("data-page-break","true"),d.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const p=document.createElement("p");p.innerHTML="<br>",y.parentNode.insertBefore(d,y.nextSibling),d.parentNode.insertBefore(p,d.nextSibling),n=i.innerHTML}else n=n+a+"<p><br></p>"}return{...e,continuousContent:n,updatedAt:o}}case G.REMOVE_PAGE_BREAK:{const{pageIndex:r}=t.payload||{};if(typeof r!="number"||typeof document>"u")return e;const s=document.createElement("div");s.innerHTML=e.continuousContent;const a=s.querySelectorAll('page-break, [data-page-break="true"]');return a[r]&&a[r].remove(),s.querySelectorAll('page-break, [data-page-break="true"]').forEach((i,f)=>{i.setAttribute("data-page-number",String(f+2))}),{...e,continuousContent:s.innerHTML,updatedAt:o}}case G.SET_EDITOR_MODE:{const r=t.payload;if(r===e.editorMode)return e;let s=e.continuousContent,a=e.pages;return r==="continuous"?s=e.pages.map(i=>i.content).filter(i=>i&&i!==pe).join(`
`)||pe:e.continuousContent&&e.continuousContent!==pe&&(a=[{...ve(0,e.pageSize),content:e.continuousContent}]),{...e,editorMode:r,continuousContent:s,pages:a,updatedAt:o}}case G.SET_ZOOM_LEVEL:{const r=t.payload;return r<$e||r>Be?(console.warn(`Invalid zoom level: ${r}. Must be between ${$e} and ${Be}.`),e):r===e.zoomLevel?e:{...e,zoomLevel:r,updatedAt:o}}case G.ZOOM_IN:{if(!He(e.zoomLevel))return e;const r=e.zoomLevel+ut;return{...e,zoomLevel:r,updatedAt:o}}case G.ZOOM_OUT:{if(!Ge(e.zoomLevel))return e;const r=e.zoomLevel-ut;return{...e,zoomLevel:r,updatedAt:o}}case G.RESET_ZOOM:return e.zoomLevel===ze?e:{...e,zoomLevel:ze,updatedAt:o};case G.UPDATE_PAGE_MARGINS:{const r=t.payload;return r===e.pageMargins?e:{...e,pageMargins:r,updatedAt:o}}default:return e}},pt=m.createContext(null),ln=({children:e,initialState:t={}})=>{const[o,r]=m.useReducer(cn,Fe(t)),s=m.useMemo(()=>({initializeDocument:n=>r({type:G.INITIALIZE_DOCUMENT,payload:n}),updateTitle:n=>r({type:G.UPDATE_TITLE,payload:n}),updatePageContent:n=>r({type:G.UPDATE_PAGE_CONTENT,payload:n}),updatePages:n=>r({type:G.UPDATE_PAGES,payload:n}),addPage:n=>r({type:G.ADD_PAGE,payload:n}),deletePage:n=>r({type:G.DELETE_PAGE,payload:n}),setActivePage:n=>r({type:G.SET_ACTIVE_PAGE,payload:n}),updatePageSize:n=>r({type:G.UPDATE_PAGE_SIZE,payload:n}),resetDocument:()=>r({type:G.RESET_DOCUMENT}),updateContinuousContent:n=>r({type:G.UPDATE_CONTINUOUS_CONTENT,payload:n}),updatePageBoundaries:n=>r({type:G.UPDATE_PAGE_BOUNDARIES,payload:n}),addPageBreak:n=>r({type:G.ADD_PAGE_BREAK,payload:n}),removePageBreak:n=>r({type:G.REMOVE_PAGE_BREAK,payload:n}),setEditorMode:n=>r({type:G.SET_EDITOR_MODE,payload:n}),insertPageAt:n=>r({type:G.INSERT_PAGE_AT,payload:n}),movePageTo:n=>r({type:G.MOVE_PAGE_TO,payload:n}),duplicatePage:n=>r({type:G.DUPLICATE_PAGE,payload:n}),setZoomLevel:n=>r({type:G.SET_ZOOM_LEVEL,payload:n}),zoomIn:()=>r({type:G.ZOOM_IN}),zoomOut:()=>r({type:G.ZOOM_OUT}),resetZoom:()=>r({type:G.RESET_ZOOM}),updatePageMargins:n=>r({type:G.UPDATE_PAGE_MARGINS,payload:n})}),[]),a=m.useMemo(()=>({state:o,actions:s,dispatch:r}),[o,s]);return l.jsx(pt.Provider,{value:a,children:e})},Ze=()=>{const e=m.useContext(pt);if(!e)throw new Error("useDocument must be used within a DocumentProvider");return e},qe=()=>{const{state:e}=Ze();return e},We=()=>{const{actions:e}=Ze();return e};var Oe={exports:{}},we={exports:{}},V={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gt;function un(){if(gt)return V;gt=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,n=e?Symbol.for("react.provider"):60109,i=e?Symbol.for("react.context"):60110,f=e?Symbol.for("react.async_mode"):60111,y=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,g=e?Symbol.for("react.suspense_list"):60120,T=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,b=e?Symbol.for("react.block"):60121,P=e?Symbol.for("react.fundamental"):60117,D=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function O(u){if(typeof u=="object"&&u!==null){var I=u.$$typeof;switch(I){case t:switch(u=u.type,u){case f:case y:case r:case a:case s:case p:return u;default:switch(u=u&&u.$$typeof,u){case i:case d:case v:case T:case n:return u;default:return I}}case o:return I}}}function M(u){return O(u)===y}return V.AsyncMode=f,V.ConcurrentMode=y,V.ContextConsumer=i,V.ContextProvider=n,V.Element=t,V.ForwardRef=d,V.Fragment=r,V.Lazy=v,V.Memo=T,V.Portal=o,V.Profiler=a,V.StrictMode=s,V.Suspense=p,V.isAsyncMode=function(u){return M(u)||O(u)===f},V.isConcurrentMode=M,V.isContextConsumer=function(u){return O(u)===i},V.isContextProvider=function(u){return O(u)===n},V.isElement=function(u){return typeof u=="object"&&u!==null&&u.$$typeof===t},V.isForwardRef=function(u){return O(u)===d},V.isFragment=function(u){return O(u)===r},V.isLazy=function(u){return O(u)===v},V.isMemo=function(u){return O(u)===T},V.isPortal=function(u){return O(u)===o},V.isProfiler=function(u){return O(u)===a},V.isStrictMode=function(u){return O(u)===s},V.isSuspense=function(u){return O(u)===p},V.isValidElementType=function(u){return typeof u=="string"||typeof u=="function"||u===r||u===y||u===a||u===s||u===p||u===g||typeof u=="object"&&u!==null&&(u.$$typeof===v||u.$$typeof===T||u.$$typeof===n||u.$$typeof===i||u.$$typeof===d||u.$$typeof===P||u.$$typeof===D||u.$$typeof===w||u.$$typeof===b)},V.typeOf=O,V}var K={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ht;function dn(){return ht||(ht=1,process.env.NODE_ENV!=="production"&&(function(){var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,n=e?Symbol.for("react.provider"):60109,i=e?Symbol.for("react.context"):60110,f=e?Symbol.for("react.async_mode"):60111,y=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,g=e?Symbol.for("react.suspense_list"):60120,T=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,b=e?Symbol.for("react.block"):60121,P=e?Symbol.for("react.fundamental"):60117,D=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function O(k){return typeof k=="string"||typeof k=="function"||k===r||k===y||k===a||k===s||k===p||k===g||typeof k=="object"&&k!==null&&(k.$$typeof===v||k.$$typeof===T||k.$$typeof===n||k.$$typeof===i||k.$$typeof===d||k.$$typeof===P||k.$$typeof===D||k.$$typeof===w||k.$$typeof===b)}function M(k){if(typeof k=="object"&&k!==null){var se=k.$$typeof;switch(se){case t:var me=k.type;switch(me){case f:case y:case r:case a:case s:case p:return me;default:var Le=me&&me.$$typeof;switch(Le){case i:case d:case v:case T:case n:return Le;default:return se}}case o:return se}}}var u=f,I=y,h=i,C=n,L=t,q=d,te=r,W=v,Q=T,B=o,re=a,ee=s,Y=p,X=!1;function ne(k){return X||(X=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),E(k)||M(k)===f}function E(k){return M(k)===y}function c(k){return M(k)===i}function A(k){return M(k)===n}function S(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function R(k){return M(k)===d}function U(k){return M(k)===r}function z(k){return M(k)===v}function N(k){return M(k)===T}function H(k){return M(k)===o}function Z(k){return M(k)===a}function F(k){return M(k)===s}function ae(k){return M(k)===p}K.AsyncMode=u,K.ConcurrentMode=I,K.ContextConsumer=h,K.ContextProvider=C,K.Element=L,K.ForwardRef=q,K.Fragment=te,K.Lazy=W,K.Memo=Q,K.Portal=B,K.Profiler=re,K.StrictMode=ee,K.Suspense=Y,K.isAsyncMode=ne,K.isConcurrentMode=E,K.isContextConsumer=c,K.isContextProvider=A,K.isElement=S,K.isForwardRef=R,K.isFragment=U,K.isLazy=z,K.isMemo=N,K.isPortal=H,K.isProfiler=Z,K.isStrictMode=F,K.isSuspense=ae,K.isValidElementType=O,K.typeOf=M})()),K}var mt;function yt(){return mt||(mt=1,process.env.NODE_ENV==="production"?we.exports=un():we.exports=dn()),we.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ye,bt;function fn(){if(bt)return Ye;bt=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function r(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function s(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;var f=Object.getOwnPropertyNames(n).map(function(d){return n[d]});if(f.join("")!=="0123456789")return!1;var y={};return"abcdefghijklmnopqrst".split("").forEach(function(d){y[d]=d}),Object.keys(Object.assign({},y)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Ye=s()?Object.assign:function(a,n){for(var i,f=r(a),y,d=1;d<arguments.length;d++){i=Object(arguments[d]);for(var p in i)t.call(i,p)&&(f[p]=i[p]);if(e){y=e(i);for(var g=0;g<y.length;g++)o.call(i,y[g])&&(f[y[g]]=i[y[g]])}}return f},Ye}var Ve,Et;function Ke(){if(Et)return Ve;Et=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ve=e,Ve}var Xe,vt;function Tt(){return vt||(vt=1,Xe=Function.call.bind(Object.prototype.hasOwnProperty)),Xe}var Je,xt;function pn(){if(xt)return Je;xt=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var t=Ke(),o={},r=Tt();e=function(a){var n="Warning: "+a;typeof console<"u"&&console.error(n);try{throw new Error(n)}catch{}}}function s(a,n,i,f,y){if(process.env.NODE_ENV!=="production"){for(var d in a)if(r(a,d)){var p;try{if(typeof a[d]!="function"){var g=Error((f||"React class")+": "+i+" type `"+d+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[d]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw g.name="Invariant Violation",g}p=a[d](n,d,f,i,null,t)}catch(v){p=v}if(p&&!(p instanceof Error)&&e((f||"React class")+": type specification of "+i+" `"+d+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof p+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),p instanceof Error&&!(p.message in o)){o[p.message]=!0;var T=y?y():"";e("Failed "+i+" type: "+p.message+(T??""))}}}}return s.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(o={})},Je=s,Je}var Qe,_t;function gn(){if(_t)return Qe;_t=1;var e=yt(),t=fn(),o=Ke(),r=Tt(),s=pn(),a=function(){};process.env.NODE_ENV!=="production"&&(a=function(i){var f="Warning: "+i;typeof console<"u"&&console.error(f);try{throw new Error(f)}catch{}});function n(){return null}return Qe=function(i,f){var y=typeof Symbol=="function"&&Symbol.iterator,d="@@iterator";function p(E){var c=E&&(y&&E[y]||E[d]);if(typeof c=="function")return c}var g="<<anonymous>>",T={array:D("array"),bigint:D("bigint"),bool:D("boolean"),func:D("function"),number:D("number"),object:D("object"),string:D("string"),symbol:D("symbol"),any:w(),arrayOf:O,element:M(),elementType:u(),instanceOf:I,node:q(),objectOf:C,oneOf:h,oneOfType:L,shape:W,exact:Q};function v(E,c){return E===c?E!==0||1/E===1/c:E!==E&&c!==c}function b(E,c){this.message=E,this.data=c&&typeof c=="object"?c:{},this.stack=""}b.prototype=Error.prototype;function P(E){if(process.env.NODE_ENV!=="production")var c={},A=0;function S(U,z,N,H,Z,F,ae){if(H=H||g,F=F||N,ae!==o){if(f){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var se=H+":"+N;!c[se]&&A<3&&(a("You are manually calling a React.PropTypes validation function for the `"+F+"` prop on `"+H+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),c[se]=!0,A++)}}return z[N]==null?U?z[N]===null?new b("The "+Z+" `"+F+"` is marked as required "+("in `"+H+"`, but its value is `null`.")):new b("The "+Z+" `"+F+"` is marked as required in "+("`"+H+"`, but its value is `undefined`.")):null:E(z,N,H,Z,F)}var R=S.bind(null,!1);return R.isRequired=S.bind(null,!0),R}function D(E){function c(A,S,R,U,z,N){var H=A[S],Z=ee(H);if(Z!==E){var F=Y(H);return new b("Invalid "+U+" `"+z+"` of type "+("`"+F+"` supplied to `"+R+"`, expected ")+("`"+E+"`."),{expectedType:E})}return null}return P(c)}function w(){return P(n)}function O(E){function c(A,S,R,U,z){if(typeof E!="function")return new b("Property `"+z+"` of component `"+R+"` has invalid PropType notation inside arrayOf.");var N=A[S];if(!Array.isArray(N)){var H=ee(N);return new b("Invalid "+U+" `"+z+"` of type "+("`"+H+"` supplied to `"+R+"`, expected an array."))}for(var Z=0;Z<N.length;Z++){var F=E(N,Z,R,U,z+"["+Z+"]",o);if(F instanceof Error)return F}return null}return P(c)}function M(){function E(c,A,S,R,U){var z=c[A];if(!i(z)){var N=ee(z);return new b("Invalid "+R+" `"+U+"` of type "+("`"+N+"` supplied to `"+S+"`, expected a single ReactElement."))}return null}return P(E)}function u(){function E(c,A,S,R,U){var z=c[A];if(!e.isValidElementType(z)){var N=ee(z);return new b("Invalid "+R+" `"+U+"` of type "+("`"+N+"` supplied to `"+S+"`, expected a single ReactElement type."))}return null}return P(E)}function I(E){function c(A,S,R,U,z){if(!(A[S]instanceof E)){var N=E.name||g,H=ne(A[S]);return new b("Invalid "+U+" `"+z+"` of type "+("`"+H+"` supplied to `"+R+"`, expected ")+("instance of `"+N+"`."))}return null}return P(c)}function h(E){if(!Array.isArray(E))return process.env.NODE_ENV!=="production"&&(arguments.length>1?a("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):a("Invalid argument supplied to oneOf, expected an array.")),n;function c(A,S,R,U,z){for(var N=A[S],H=0;H<E.length;H++)if(v(N,E[H]))return null;var Z=JSON.stringify(E,function(ae,k){var se=Y(k);return se==="symbol"?String(k):k});return new b("Invalid "+U+" `"+z+"` of value `"+String(N)+"` "+("supplied to `"+R+"`, expected one of "+Z+"."))}return P(c)}function C(E){function c(A,S,R,U,z){if(typeof E!="function")return new b("Property `"+z+"` of component `"+R+"` has invalid PropType notation inside objectOf.");var N=A[S],H=ee(N);if(H!=="object")return new b("Invalid "+U+" `"+z+"` of type "+("`"+H+"` supplied to `"+R+"`, expected an object."));for(var Z in N)if(r(N,Z)){var F=E(N,Z,R,U,z+"."+Z,o);if(F instanceof Error)return F}return null}return P(c)}function L(E){if(!Array.isArray(E))return process.env.NODE_ENV!=="production"&&a("Invalid argument supplied to oneOfType, expected an instance of array."),n;for(var c=0;c<E.length;c++){var A=E[c];if(typeof A!="function")return a("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+X(A)+" at index "+c+"."),n}function S(R,U,z,N,H){for(var Z=[],F=0;F<E.length;F++){var ae=E[F],k=ae(R,U,z,N,H,o);if(k==null)return null;k.data&&r(k.data,"expectedType")&&Z.push(k.data.expectedType)}var se=Z.length>0?", expected one of type ["+Z.join(", ")+"]":"";return new b("Invalid "+N+" `"+H+"` supplied to "+("`"+z+"`"+se+"."))}return P(S)}function q(){function E(c,A,S,R,U){return B(c[A])?null:new b("Invalid "+R+" `"+U+"` supplied to "+("`"+S+"`, expected a ReactNode."))}return P(E)}function te(E,c,A,S,R){return new b((E||"React class")+": "+c+" type `"+A+"."+S+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+R+"`.")}function W(E){function c(A,S,R,U,z){var N=A[S],H=ee(N);if(H!=="object")return new b("Invalid "+U+" `"+z+"` of type `"+H+"` "+("supplied to `"+R+"`, expected `object`."));for(var Z in E){var F=E[Z];if(typeof F!="function")return te(R,U,z,Z,Y(F));var ae=F(N,Z,R,U,z+"."+Z,o);if(ae)return ae}return null}return P(c)}function Q(E){function c(A,S,R,U,z){var N=A[S],H=ee(N);if(H!=="object")return new b("Invalid "+U+" `"+z+"` of type `"+H+"` "+("supplied to `"+R+"`, expected `object`."));var Z=t({},A[S],E);for(var F in Z){var ae=E[F];if(r(E,F)&&typeof ae!="function")return te(R,U,z,F,Y(ae));if(!ae)return new b("Invalid "+U+" `"+z+"` key `"+F+"` supplied to `"+R+"`.\nBad object: "+JSON.stringify(A[S],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(E),null,"  "));var k=ae(N,F,R,U,z+"."+F,o);if(k)return k}return null}return P(c)}function B(E){switch(typeof E){case"number":case"string":case"undefined":return!0;case"boolean":return!E;case"object":if(Array.isArray(E))return E.every(B);if(E===null||i(E))return!0;var c=p(E);if(c){var A=c.call(E),S;if(c!==E.entries){for(;!(S=A.next()).done;)if(!B(S.value))return!1}else for(;!(S=A.next()).done;){var R=S.value;if(R&&!B(R[1]))return!1}}else return!1;return!0;default:return!1}}function re(E,c){return E==="symbol"?!0:c?c["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&c instanceof Symbol:!1}function ee(E){var c=typeof E;return Array.isArray(E)?"array":E instanceof RegExp?"object":re(c,E)?"symbol":c}function Y(E){if(typeof E>"u"||E===null)return""+E;var c=ee(E);if(c==="object"){if(E instanceof Date)return"date";if(E instanceof RegExp)return"regexp"}return c}function X(E){var c=Y(E);switch(c){case"array":case"object":return"an "+c;case"boolean":case"date":case"regexp":return"a "+c;default:return c}}function ne(E){return!E.constructor||!E.constructor.name?g:E.constructor.name}return T.checkPropTypes=s,T.resetWarningCache=s.resetWarningCache,T.PropTypes=T,T},Qe}var et,Pt;function hn(){if(Pt)return et;Pt=1;var e=Ke();function t(){}function o(){}return o.resetWarningCache=t,et=function(){function r(n,i,f,y,d,p){if(p!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:o,resetWarningCache:t};return a.PropTypes=a,a},et}var At;function mn(){if(At)return Oe.exports;if(At=1,process.env.NODE_ENV!=="production"){var e=yt(),t=!0;Oe.exports=gn()(e.isElement,t)}else Oe.exports=hn()();return Oe.exports}var yn=mn();const x=Vt(yn),tt={"7.5pt":{pt:7.5,px:10,label:"7.5"},"9pt":{pt:9,px:12,label:"9"},"10pt":{pt:10,px:13,label:"10"},"11pt":{pt:11,px:15,label:"11"},"12pt":{pt:12,px:16,label:"12"},"14pt":{pt:14,px:19,label:"14"},"16pt":{pt:16,px:21,label:"16"},"18pt":{pt:18,px:24,label:"18"},"20pt":{pt:20,px:27,label:"20"},"22pt":{pt:22,px:29,label:"22"},"24pt":{pt:24,px:32,label:"24"},"26pt":{pt:26,px:35,label:"26"},"28pt":{pt:28,px:37,label:"28"},"36pt":{pt:36,px:48,label:"36"},"48pt":{pt:48,px:64,label:"48"},"72pt":{pt:72,px:96,label:"72"}},kt=[{value:"10px",label:"7.5",pt:7.5},{value:"12px",label:"9",pt:9},{value:"13px",label:"10",pt:10},{value:"15px",label:"11",pt:11},{value:"16px",label:"12",pt:12},{value:"19px",label:"14",pt:14},{value:"21px",label:"16",pt:16},{value:"24px",label:"18",pt:18},{value:"27px",label:"20",pt:20},{value:"32px",label:"24",pt:24},{value:"37px",label:"28",pt:28},{value:"48px",label:"36",pt:36},{value:"64px",label:"48",pt:48},{value:"96px",label:"72",pt:72}],Ce="16px",Ot=e=>Math.round(e*96/72),wt=e=>Math.round(e*72/96*2)/2,bn=e=>{const t=Object.values(tt).find(o=>o.pt===e);return t?`${t.px}px`:`${Ot(e)}px`},En=e=>{const t=parseInt(e),o=Object.values(tt).find(r=>r.px===t);return o?o.pt:wt(t)},vn=e=>{if(!e)return!1;if(e.endsWith("px")){const t=parseInt(e);return t>=8&&t<=144}if(e.endsWith("pt")){const t=parseFloat(e);return t>=6&&t<=108}return!1},fe={minWidth:50,minHeight:50,maxWidth:800,maxHeight:600,aspectRatio:!0,preserveAspectRatio:!0,defaultWidth:300,defaultHeight:200},_={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};function Tn({handler:e,startX:t,startY:o,currentX:r,currentY:s,startWidth:a,startHeight:n,options:i=fe}){const f=r-t,y=s-o;let d=a,p=n;switch(e){case _.TOP_LEFT:d=Math.max(i.minWidth,a-f),p=Math.max(i.minHeight,n-y);break;case _.TOP_RIGHT:d=Math.max(i.minWidth,a+f),p=Math.max(i.minHeight,n-y);break;case _.BOTTOM_LEFT:d=Math.max(i.minWidth,a-f),p=Math.max(i.minHeight,n+y);break;case _.BOTTOM_RIGHT:d=Math.max(i.minWidth,a+f),p=Math.max(i.minHeight,n+y);break;case _.TOP:p=Math.max(i.minHeight,n-y);break;case _.BOTTOM:p=Math.max(i.minHeight,n+y);break;case _.LEFT:d=Math.max(i.minWidth,a-f);break;case _.RIGHT:d=Math.max(i.minWidth,a+f);break;default:return{width:d,height:p}}if(i.preserveAspectRatio&&i.aspectRatio){const g=a/n;[_.TOP_LEFT,_.TOP_RIGHT,_.BOTTOM_LEFT,_.BOTTOM_RIGHT].includes(e)?d/g>p?p=Math.max(i.minHeight,d/g):d=Math.max(i.minWidth,p*g):[_.TOP,_.BOTTOM].includes(e)?d=p*g:[_.LEFT,_.RIGHT].includes(e)&&(p=d/g)}return i.maxWidth&&d>i.maxWidth&&(d=i.maxWidth,i.preserveAspectRatio&&i.aspectRatio&&(p=d/(a/n))),i.maxHeight&&p>i.maxHeight&&(p=i.maxHeight,i.preserveAspectRatio&&i.aspectRatio&&(d=p*(a/n))),d=Math.max(i.minWidth,d),p=Math.max(i.minHeight,p),{width:Math.round(d),height:Math.round(p)}}function de(e){return e?!!(e.tagName==="IMG"||e.tagName==="DIV"&&e.style.backgroundImage&&e.style.backgroundImage!=="none"):!1}function xn(e){return de(e)?{width:e.offsetWidth,height:e.offsetHeight}:{width:0,height:0}}function _n(e,{width:t,height:o}){de(e)&&(e.tagName==="IMG"?(e.style.width=`${t}px`,e.style.height=`${o}px`,e.width=t,e.height=o):e.tagName==="DIV"&&(e.style.width=`${t}px`,e.style.height=`${o}px`))}function nt(e){if(!de(e))return null;const t=document.createElement("div");t.className="image-resize-overlay",t.style.position="absolute",t.style.zIndex="1000",t.style.pointerEvents="none";const o=e.getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop,s=window.pageXOffset||document.documentElement.scrollLeft;t.style.top=`${o.top+r}px`,t.style.left=`${o.left+s}px`,t.style.width=`${o.width}px`,t.style.height=`${o.height}px`,Object.values(_).forEach(i=>{const f=document.createElement("div");f.className=`resize-handler resize-handler-${i}`,f.dataset.handler=i,f.style.position="absolute",f.style.width="10px",f.style.height="10px",f.style.backgroundColor="#007bff",f.style.border="2px solid white",f.style.borderRadius="50%",f.style.boxShadow="0 0 3px rgba(0,0,0,0.3)",f.style.cursor=Pn(i),f.style.pointerEvents="all",Ct(f,i,o.width,o.height),t.appendChild(f)});const n=document.createElement("div");return n.className="aspect-ratio-toggle",n.innerHTML="🔗",n.title="Toggle aspect ratio preservation",n.style.position="absolute",n.style.top="-15px",n.style.right="-15px",n.style.width="20px",n.style.height="20px",n.style.backgroundColor="#007bff",n.style.color="white",n.style.borderRadius="50%",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.fontSize="12px",n.style.cursor="pointer",n.style.boxShadow="0 0 3px rgba(0,0,0,0.3)",n.style.pointerEvents="all",t.appendChild(n),t}function Pn(e){switch(e){case _.TOP_LEFT:case _.BOTTOM_RIGHT:return"nwse-resize";case _.TOP_RIGHT:case _.BOTTOM_LEFT:return"nesw-resize";case _.TOP:case _.BOTTOM:return"ns-resize";case _.LEFT:case _.RIGHT:return"ew-resize";default:return"default"}}function Ct(e,t,o,r){switch(t){case _.TOP_LEFT:e.style.top="-5px",e.style.left="-5px";break;case _.TOP_RIGHT:e.style.top="-5px",e.style.right="-5px";break;case _.BOTTOM_LEFT:e.style.bottom="-5px",e.style.left="-5px";break;case _.BOTTOM_RIGHT:e.style.bottom="-5px",e.style.right="-5px";break;case _.TOP:e.style.top="-5px",e.style.left=`${o/2+-5}px`;break;case _.BOTTOM:e.style.bottom="-5px",e.style.left=`${o/2+-5}px`;break;case _.LEFT:e.style.top=`${r/2+-5}px`,e.style.left="-5px";break;case _.RIGHT:e.style.top=`${r/2+-5}px`,e.style.right="-5px";break}}function Se(e,t){if(!e||!t)return;const o=t.getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop,s=window.pageXOffset||document.documentElement.scrollLeft;e.style.top=`${o.top+r}px`,e.style.left=`${o.left+s}px`,e.style.width=`${o.width}px`,e.style.height=`${o.height}px`,e.querySelectorAll(".resize-handler").forEach(n=>{const i=n.dataset.handler;Ct(n,i,o.width,o.height)})}function ge(e){e&&e.parentNode&&e.parentNode.removeChild(e)}const An={"10px":"1","12px":"2","13px":"2","15px":"3","16px":"3","19px":"4","21px":"4","24px":"5","27px":"5","32px":"6","37px":"6","48px":"6","64px":"7","96px":"7"},St={bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:Ce,headingLevel:"p",imageSelected:!1,imageResizeOptions:fe,preserveAspectRatio:!0},Mt=()=>{const[e,t]=m.useState(St),o=m.useCallback(T=>{t(v=>({...v,alignLeft:T==="left",alignCenter:T==="center",alignRight:T==="right",alignJustify:T==="justify"}))},[]),r=m.useCallback(T=>{try{const v=window.getSelection();if(!v||v.rangeCount===0)return!1;const b=v.getRangeAt(0);if(!b.toString())return t(D=>({...D,fontSize:T})),!1;try{const D=document.createElement("span");D.style.fontSize=T;const w=b.extractContents();return D.appendChild(w),b.insertNode(D),b.selectNodeContents(D),v.removeAllRanges(),v.addRange(b),t(O=>({...O,fontSize:T})),!0}catch{const w=An[T]||"2";return document.execCommand("fontSize",!1,w),t(O=>({...O,fontSize:T})),!0}}catch(v){return console.warn("[useFormatting] Font size change failed:",v),!1}},[]),s=m.useCallback((T,v=null)=>{try{if(typeof document.execCommand!="function"){console.warn("[useFormatting] execCommand not supported");return}if(T==="fontSize"){r(v);return}switch(document.execCommand(T,!1,v)||console.warn(`[useFormatting] Command "${T}" failed`),T){case"bold":t(P=>({...P,bold:!P.bold}));break;case"italic":t(P=>({...P,italic:!P.italic}));break;case"underline":t(P=>({...P,underline:!P.underline}));break;case"strikethrough":t(P=>({...P,strikethrough:!P.strikethrough}));case"justifyLeft":o("left");break;case"justifyCenter":o("center");case"justifyRight":o("right");case"justifyFull":o("justify");case"fontName":t(P=>({...P,fontFamily:v}));case"formatBlock":t(P=>({...P,headingLevel:v}));default:break}}catch(b){console.warn(`[useFormatting] Error executing command "${T}":`,b)}},[r,o]),a=m.useRef(null),n=m.useRef(null),i=m.useRef(null),f=m.useRef(null),y=m.useRef(fe);m.useCallback(T=>{if(!de(T))return;a.current&&(ge(a.current),a.current=null),T.classList.add("selected");const v=nt(T);v&&(a.current=v,n.current=T,document.body.appendChild(v),t(b=>({...b,imageSelected:!0,preserveAspectRatio:y.current.preserveAspectRatio})))},[]);const d=m.useCallback(()=>{n.current&&(n.current.classList.remove("selected"),n.current=null),a.current&&(ge(a.current),a.current=null),i.current=null,f.current=null,t(T=>({...T,imageSelected:!1}))},[]),p=m.useCallback(()=>{const T=!y.current.preserveAspectRatio;y.current={...y.current,preserveAspectRatio:T,aspectRatio:T},t(v=>({...v,preserveAspectRatio:T}))},[]);m.useCallback((T,v,b)=>{n.current&&(i.current={x:v,y:b,width:n.current.offsetWidth,height:n.current.offsetHeight},f.current=T,document.body.classList.add("resize-in-progress"),document.body.style.cursor=kn(T))},[]),m.useCallback((T,v)=>{if(!n.current||!i.current||!f.current)return;const{x:b,y:P,width:D,height:w}=i.current,O=f.current,M=On({handler:O,startX:b,startY:P,currentX:T,currentY:v,startWidth:D,startHeight:w,options:y.current});wn(n.current,M),a.current&&Se(a.current,n.current)},[]),m.useCallback(()=>{if(i.current=null,f.current=null,document.body.classList.remove("resize-in-progress"),document.body.style.cursor="",n.current){const T=new Event("input",{bubbles:!0,cancelable:!0});n.current.dispatchEvent(T)}},[]);const g=m.useCallback(()=>{d(),t(St)},[d]);return m.useEffect(()=>()=>{a.current&&ge(a.current)},[]),{currentFormat:e,formatText:s,resetFormat:g,toggleAspectRatio:p}};function kn(e){switch(e){case _.TOP_LEFT:case _.BOTTOM_RIGHT:return"nwse-resize";case _.TOP_RIGHT:case _.BOTTOM_LEFT:return"nesw-resize";case RESIZE_HANDLRES.TOP:case _.BOTTOM:return"ns-resize";case _.LEFT:case _.RIGHT:return"ew-resize";default:return"default"}}function On({handler:e,startX:t,startY:o,currentX:r,currentY:s,startWidth:a,startHeight:n,options:i=fe}){const f=r-t,y=s-o;let d=a,p=n;switch(e){case _.TOP_LEFT:d=Math.max(i.minWidth,a-f),p=Math.max(i.minHeight,n-y);break;case _.TOP_RIGHT:d=Math.max(i.minWidth,a+f),p=Math.max(i.minHeight,n-y);break;case _.BOTTOM_LEFT:d=Math.max(i.minWidth,a-f),p=Math.max(i.minHeight,n+y);break;case _.BOTTOM_RIGHT:d=Math.max(i.minWidth,a+f),p=Math.max(i.minHeight,n+y);break;case _.TOP:p=Math.max(i.minHeight,n-y);break;case _.BOTTOM:p=Math.max(i.minHeight,n+y);break;case _.LEFT:d=Math.max(i.minWidth,a-f);break;case _.RIGHT:d=Math.max(i.minWidth,a+f);break;default:return{width:d,height:p}}if(i.preserveAspectRatio&&i.aspectRatio){const g=a/n;[_.TOP_LEFT,_.TOP_RIGHT,_.BOTTOM_LEFT,_.BOTTOM_RIGHT].includes(e)?d/g>p?p=Math.max(i.minHeight,d/g):d=Math.max(i.minWidth,p*g):[_.TOP,_.BOTTOM].includes(e)?d=p*g:[_.LEFT,_.RIGHT].includes(e)&&(p=d/g)}return i.maxWidth&&d>i.maxWidth&&(d=i.maxWidth,i.preserveAspectRatio&&i.aspectRatio&&(p=d/(a/n))),i.maxHeight&&p>i.maxHeight&&(p=i.maxHeight,i.preserveAspectRatio&&i.aspectRatio&&(d=p*(a/n))),d=Math.max(i.minWidth,d),p=Math.max(i.minHeight,p),{width:Math.round(d),height:Math.round(p)}}function wn(e,{width:t,height:o}){de(e)&&(e.tagName==="IMG"?(e.style.width=`${t}px`,e.style.height=`${o}px`,e.width=t,e.height=o):e.tagName==="DIV"&&(e.style.width=`${t}px`,e.style.height=`${o}px`))}const he='page-break, [data-page-break="true"]',Rt=e=>ie[e]||ie.A4,Cn=(e,t={})=>{if(!e||typeof document>"u")return[];const o=t.pageSize||"A4",r=Rt(o),s=e.querySelectorAll(he),a=[];a.push({id:"page-0",pageNumber:1,top:0,height:r.height});const n=e.getBoundingClientRect(),i=e.scrollTop;return s.forEach((f,y)=>{const p=f.getBoundingClientRect().top-n.top+i;a.push({id:`page-${y+1}`,pageNumber:y+2,top:p,height:r.height})}),a},Nt=(e,t=100,o=ue)=>{const r=Rt(e),s=en(o),a=r.height-s,n=t/100;return a/n},Sn=(e,t)=>{if(!e||!t)return 0;try{const o=t.querySelectorAll(he);if(o.length===0)return 0;const r=e.getBoundingClientRect(),s=r.top+r.height/2;for(let a=o.length-1;a>=0;a--)if(o[a].getBoundingClientRect().top<s)return a+1;return 0}catch(o){return console.warn("[getCurrentPage] Failed to calculate page:",o),0}},It=e=>{if(!e)return[];const t=Array.from(e.children);if(t.length===0)return[];let o=[],r=[];for(const s of t)s.tagName==="PAGE-BREAK"||s.getAttribute("data-page-break")==="true"?r.length>0&&(o.push(r),r=[]):r.push(s);return r.length>0&&o.push(r),o.length===0&&t.length>0&&o.push(t.filter(s=>!(s.tagName==="PAGE-BREAK"||s.getAttribute("data-page-break")==="true"))),o},Mn=e=>{if(!e||!e.getBoundingClientRect)return 0;const t=e.getBoundingClientRect();return e.tagName==="P"?t.height+16:e.tagName==="H1"||e.tagName==="H2"||e.tagName==="H3"||e.tagName==="H4"||e.tagName==="H5"||e.tagName==="H6"?t.height+20:e.tagName==="UL"||e.tagName==="OL"?t.height+16:t.height},Rn=(e,t)=>{if(!e)return!1;try{const o=document.createElement("page-break");return o.setAttribute("data-page-break","true"),o.setAttribute("contenteditable","false"),o.setAttribute("data-page-number",t||"2"),e.parentNode.insertBefore(o,e),!0}catch(o){return console.warn("[insertPageBreakBefore] Failed to insert page break:",o),!1}},Nn=(e,t,o,r,s,a,n)=>{if(!e)return!1;try{const f=Nt(o,r,s)*(t-1),y=Array.from(e.children);let d=0,p=null;for(let g=0;g<y.length;g++){const T=y[g];if(T.tagName==="PAGE-BREAK"||T.getAttribute("data-page-break")==="true")continue;const v=Mn(T);if(d+v>f){p=T;break}d+=v}if(p){const g=document.createElement("page-break");if(g.setAttribute("data-page-break","true"),g.setAttribute("contenteditable","false"),g.setAttribute("data-page-number",String(t)),p.parentNode.insertBefore(g,p),a){const T=e.innerHTML;a(T)}return n&&setTimeout(()=>{n()},50),!0}else{const g=document.createElement("page-break");g.setAttribute("data-page-break","true"),g.setAttribute("contenteditable","false"),g.setAttribute("data-page-number",String(t)),e.appendChild(g);const T=document.createElement("p");if(T.innerHTML="<br>",e.appendChild(T),a){const v=e.innerHTML;a(v)}return n&&setTimeout(()=>{n()},50),!0}}catch(i){return console.error("[insertPageBreakAtBoundary] Failed to insert page break:",i),!1}},In=(e,t,o,r,s,a,n)=>{if(!e)return!1;if(o().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const f=Array.from(e.querySelectorAll(he));if(t>f.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const y=window.getSelection();let d=!1,p=[],g=null;if(t===0){const v=f[0];if(!v)return console.warn("[removePageAndContent] No page break found for first page"),!1;let b=e.firstChild;for(;b&&b!==v;)p.push(b),b=b.nextSibling;g=v}else{const v=f[t-1];if(!v)return console.warn("[removePageAndContent] Page break not found"),!1;const b=f[t];let P=v.nextSibling;for(;P&&P!==b;)p.push(P),P=P.nextSibling;g=v}if(y&&y.rangeCount>0){const b=y.getRangeAt(0).startContainer;for(const P of p)if(P.contains(b)||P===b){d=!0;break}}if(g&&g.parentNode&&g.remove(),p.forEach(v=>{v.parentNode&&v.remove()}),e.querySelectorAll(he).forEach((v,b)=>{v.setAttribute("data-page-number",String(b+2))}),d&&a&&setTimeout(()=>{a(0)},50),r){const v=e.innerHTML;r(v)}return s&&setTimeout(()=>{s(),n&&setTimeout(()=>{n()},150)},100),!0}catch(f){return console.error("[removePageAndContent] Failed to remove page:",f),!1}},jn=200,Ln=50,jt=3,Dn=20,Lt=e=>{if(!e||!e.getBoundingClientRect)return 0;const t=e.getBoundingClientRect();return e.tagName==="P"?t.height+16:e.tagName==="H1"||e.tagName==="H2"||e.tagName==="H3"||e.tagName==="H4"||e.tagName==="H5"||e.tagName==="H6"?t.height+20:e.tagName==="UL"||e.tagName==="OL"?t.height+16:t.height},zn=(e,t)=>{if(!e||e.length===0)return null;let o=0,r=null;for(let s=0;s<e.length;s++){const a=e[s];if(!a||!a.getBoundingClientRect)continue;const n=Lt(a);if(n<1)continue;if(o+n>t)return r===null?s>0?{overflowIndex:s,overflowElement:a,accumulatedHeight:o}:null:{overflowIndex:s,overflowElement:a,accumulatedHeight:o};o+=n,r=a}return null},$n=(e,t,o,r,s,a,n,i)=>{if(!e||n.current)return!1;try{n.current=!0;const f=Nt(t,o,r);let y=It(e),d=!1,p=0;for(let g=0;g<y.length&&p<jt;g++){const T=y[g],v=zn(T,f);if(v&&v.overflowIndex>0){let b=0;for(let O=0;O<T.length;O++){const M=T[O];M&&M.getBoundingClientRect&&(b+=Lt(M))}if(b-f<Dn)continue;const D=g+2;Rn(v.overflowElement,D)&&(d=!0,p++,y=It(e))}}if(d){if(s){const g=e.innerHTML;s(g)}setTimeout(()=>{a&&a(),p>=jt&&i&&setTimeout(()=>{n.current||i()},100)},Ln)}return d}catch(f){return console.warn("[checkAndReflow] Reflow failed:",f),!1}finally{n.current=!1}},Bn=(e,t,o=jn)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{t.current=null,e()},o)},Hn=400,Dt=(e,t)=>{if(e){e.focus();try{let o=null,r=0;if(t===0)o=e.firstChild,r=0;else{const a=e.querySelectorAll(he)[t-1];a&&a.nextSibling&&(o=a.nextSibling,r=0)}if(o){const s=document.createRange(),a=window.getSelection();o.nodeType===Node.TEXT_NODE?s.setStart(o,r):s.setStart(o,0),s.collapse(!0),a.removeAllRanges(),a.addRange(s)}}catch(o){console.warn("[positionCursorAtPage] Failed to position cursor:",o)}}},Gn=(e,t,o,r)=>{if(!e||!t){console.warn("[scrollToPage] Missing refs");return}try{let s=null;if(o===0)s=t;else{const n=t.querySelectorAll(he)[o-1];if(n)s=n;else{console.warn("[scrollToPage] Page break not found for page",o);return}}if(s){const a=s.getBoundingClientRect(),n=e.getBoundingClientRect(),i=e.scrollTop+(a.top-n.top);console.log("[scrollToPage] Scrolling to page",o,"scrollTop:",i),e.scrollTo({top:i,behavior:"smooth"}),setTimeout(()=>{r?r(o):Dt(t,o)},Hn)}}catch(s){console.error("[scrollToPage] Error:",s)}},Un=(e,t,o={},r=300)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{t.current=null,e(o)},Math.max(0,r))},Fn=300,zt=(e,t,o=100,r="NARROW")=>{const s=We(),a=m.useRef(null),n=m.useRef(null),i=m.useRef(e),f=m.useRef(o),y=m.useRef(r),d=m.useRef(!1);m.useEffect(()=>{i.current=e},[e]),m.useEffect(()=>{f.current=o},[o]),m.useEffect(()=>{y.current=r},[r]),m.useEffect(()=>()=>{a.current&&clearTimeout(a.current),n.current&&clearTimeout(n.current)},[]);const p=m.useCallback((u={})=>t?.current?Cn(t.current,u):[],[t]),g=m.useCallback((u={})=>{const I=p(u);return s.updatePageBoundaries(I),I},[p,s]),T=m.useCallback(async u=>{if(!t?.current)return!1;const I=i.current||"A4",h=f.current||100,C=y.current||"NARROW";return Nn(t.current,u,I,h,C,s.updateContinuousContent,g)},[t,s,g]),v=m.useCallback(()=>{if(!t?.current)return;const u=i.current||"A4",I=f.current||100,h=y.current||"NARROW";$n(t.current,u,I,h,s.updateContinuousContent,g,d,v)},[t,s,g]),b=m.useCallback(u=>{Bn(v,n,u)},[v]),P=m.useCallback((u={})=>{const I=typeof u.delay=="number"?u.delay:Fn;Un(g,a,u,I)},[g]),D=m.useCallback(u=>!u?.current||!t?.current?0:Sn(u.current,t.current),[t]),w=m.useCallback(u=>{t?.current&&Dt(t.current,u)},[t]),O=m.useCallback((u,I)=>{if(!I?.current||!t?.current){console.warn("[scrollToPage] Missing refs");return}Gn(I.current,t.current,u,w)},[t,w]),M=m.useCallback(u=>t?.current?In(t.current,u,p,s.updateContinuousContent,g,w,v):!1,[t,p,s,g,w,v]);return{calculatePageBoundaries:p,checkAndUpdateBoundaries:P,updateBoundaries:g,getCurrentPage:D,scrollToPage:O,positionCursorAtPage:w,checkAndReflow:v,triggerAutoReflow:b,removePageAndContent:M,insertPageBreakAtBoundary:T,boundaryTimeoutRef:a,reflowTimeoutRef:n}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qn=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,r)=>r?r.toUpperCase():o.toLowerCase()),$t=e=>{const t=qn(e);return t.charAt(0).toUpperCase()+t.slice(1)},Bt=(...e)=>e.filter((t,o,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===o).join(" ").trim(),Wn=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:n,...i},f)=>m.createElement("svg",{ref:f,...Yn,width:t,height:t,stroke:e,strokeWidth:r?Number(o)*24/Number(t):o,className:Bt("lucide",s),...!a&&!Wn(i)&&{"aria-hidden":"true"},...i},[...n.map(([y,d])=>m.createElement(y,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(e,t)=>{const o=m.forwardRef(({className:r,...s},a)=>m.createElement(Vn,{ref:a,iconNode:t,className:Bt(`lucide-${Zn($t(e))}`,`lucide-${e}`,r),...s}));return o.displayName=$t(e),o};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=J("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=J("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=J("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=J("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=J("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=J("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=J("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=J("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=J("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=J("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=J("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=J("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=J("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=J("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=J("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=J("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=J("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=J("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=J("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=J("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=J("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=J("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=J("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=J("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=J("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=J("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=J("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=J("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Gt=({editorView:e,isCollapsed:t,onToggle:o,wordCount:r,pageCount:s})=>{const a=qe(),{pages:n,activePage:i,continuousContent:f,editorMode:y}=a,[d,p]=m.useState(0),[g,T]=m.useState([]);m.useEffect(()=>{if(r!==void 0&&s!==void 0){if(p(r),f){const D=document.createElement("div");D.innerHTML=f;const w=D.querySelectorAll("h1, h2, h3, h4, h5, h6"),O=Array.from(w).map((M,u)=>{const I=parseInt(M.tagName.charAt(1)),h=M.textContent.trim();return h?{id:`heading-${u}`,level:I,text:h,page:1}:null}).filter(Boolean);T(O)}return}let b=0;const P=[];n.forEach((D,w)=>{if(D.content){const O=document.createElement("div");O.innerHTML=D.content;const u=(O.textContent||O.innerText||"").trim().split(/\s+/).filter(h=>h.length>0);b+=u.length,O.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((h,C)=>{const L=parseInt(h.tagName.charAt(1)),q=h.textContent.trim();q&&P.push({id:`heading-${w}-${C}`,level:L,text:q,page:w+1})})}}),p(b),T(P)},[n,r,s,f]);const v=s!==void 0?s:n.length;return l.jsxs("aside",{className:`sidebar ${t?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[l.jsxs("div",{className:"sidebar-header",children:[l.jsxs("div",{className:"sidebar-title",children:[l.jsx(Me,{size:18}),l.jsx("h2",{children:"Document Info"})]}),l.jsx("button",{className:"sidebar-toggle",onClick:o,"aria-label":t?"Expand sidebar":"Collapse sidebar",title:t?"Expand sidebar":"Collapse sidebar",children:t?l.jsx(Jn,{size:16}):l.jsx(Xn,{size:16})})]}),!t&&l.jsxs("div",{className:"sidebar-content",children:[l.jsxs("div",{className:"sidebar-section",children:[l.jsx("h3",{children:"Statistics"}),l.jsxs("div",{className:"stat-item",children:[l.jsxs("div",{className:"stat-label",children:[l.jsx(Qn,{size:14}),l.jsx("span",{children:"Pages:"})]}),l.jsx("span",{className:"stat-value",children:v})]}),l.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[l.jsxs("div",{className:"stat-label",children:[l.jsx(er,{size:14}),l.jsx("span",{children:"Words:"})]}),l.jsx("span",{className:"stat-value",children:d.toLocaleString()})]}),l.jsxs("div",{className:"stat-item",children:[l.jsxs("div",{className:"stat-label",children:[l.jsx(Me,{size:14}),l.jsx("span",{children:"Active Page:"})]}),l.jsx("span",{className:"stat-value",children:i+1})]})]}),g.length>0&&l.jsxs("div",{className:"sidebar-section",children:[l.jsxs("h3",{children:[l.jsx(Ht,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),l.jsx("div",{className:"document-outline","data-testid":"outline",children:g.map(b=>{const P=b.level===1?tr:b.level===2?nr:rr;return l.jsxs("div",{className:`outline-item outline-level-${b.level}`,style:{marginLeft:`${(b.level-1)*12}px`},children:[l.jsx(P,{size:12,className:"outline-icon"}),l.jsx("span",{className:"outline-text",children:b.text}),l.jsxs("span",{className:"outline-page",children:["p.",b.page]})]},b.id)})})]}),l.jsxs("div",{className:"sidebar-section",children:[l.jsx("h3",{children:"Document"}),l.jsx("p",{children:"HTML Editor"}),l.jsx("p",{children:"Multi-page support"})]})]})]})},xr="html-editor-storage",_r=1,ce="images";function Pr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function Te(){return new Promise((e,t)=>{const o=indexedDB.open(xr,_r);o.onerror=()=>{t(new Error("Failed to open IndexedDB database"))},o.onsuccess=()=>{e(o.result)},o.onupgradeneeded=r=>{const s=r.target.result;s.objectStoreNames.contains(ce)||s.createObjectStore(ce,{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1})}})}function Ut(e){return new Promise((t,o)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){o(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){o(new Error("Image exceeds maximum size of 5MB"));return}const s=new FileReader;s.onload=async a=>{const n=a.target.result,f=n.split(",")[1].length*3/4;if(f>5*1024*1024){o(new Error("Image exceeds maximum size of 5MB"));return}try{const y=await Te(),d=`editor-image-${Pr()}`,g=y.transaction([ce],"readwrite").objectStore(ce),T={key:d,dataUrl:n,size:f,type:e.type,timestamp:Date.now()},v=g.add(T);v.onsuccess=()=>{y.close(),t(d)},v.onerror=()=>{y.close(),o(new Error("Failed to save image to IndexedDB"))}}catch(y){o(y)}},s.onerror=()=>{o(new Error("Error reading image file"))},s.readAsDataURL(e)})}async function Ft(e){try{const t=await Te();return new Promise((o,r)=>{const n=t.transaction([ce],"readonly").objectStore(ce).get(e);n.onsuccess=()=>{t.close();const i=n.result;o(i?i.dataUrl:null)},n.onerror=()=>{t.close(),r(new Error("Failed to retrieve image from IndexedDB"))}})}catch(t){return console.error("Error getting image:",t),null}}async function Ar(e){try{const t=await Te();return new Promise((o,r)=>{const n=t.transaction([ce],"readwrite").objectStore(ce).delete(e);n.onsuccess=()=>{t.close(),o()},n.onerror=()=>{t.close(),r(new Error("Failed to delete image from IndexedDB"))}})}catch(t){console.error("Error deleting image:",t)}}async function kr(){try{const e=await Te();return new Promise((t,o)=>{const a=e.transaction([ce],"readwrite").objectStore(ce).clear();a.onsuccess=()=>{e.close(),t()},a.onerror=()=>{e.close(),o(new Error("Failed to clear images from IndexedDB"))}})}catch(e){console.error("Error clearing images:",e)}}async function Or(){try{const e=await Te();return new Promise((t,o)=>{const a=e.transaction([ce],"readonly").objectStore(ce).getAllKeys();a.onsuccess=()=>{e.close(),t(a.result||[])},a.onerror=()=>{e.close(),o(new Error("Failed to get image keys from IndexedDB"))}})}catch(e){return console.error("Error getting image keys:",e),[]}}class Zt{constructor(t="Editor"){this.namespace=t}_format(t,o,r){return`[${new Date().toISOString()}] [${this.namespace}] [${t}] ${o}`}info(t,o){}warn(t,o){}error(t,o){}debug(t,o){}}const qt=new Zt("Editor"),Re=({currentFormat:e,onFormatText:t,onAddPageBreak:o})=>{const r=async s=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(s.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(s.size>5242880){alert("Image exceeds maximum size of 5MB");return}const n=await Ut(s),i=await Ft(n);i&&(document.execCommand("insertImage",!1,i),qt.info("Image inserted",{key:n}))}catch(a){qt.error("Error uploading image",a)}};return l.jsxs("div",{className:"editor-toolbar",children:[l.jsx("button",{onClick:()=>t("undo"),title:"Undo",children:l.jsx(br,{size:16})}),l.jsx("button",{onClick:()=>t("redo"),title:"Redo",children:l.jsx(lr,{size:16})}),l.jsx("div",{className:"toolbar-separator"}),l.jsx("button",{onClick:()=>t("bold"),className:e.bold?"active":"",title:"Bold",children:l.jsx(Kn,{size:16})}),l.jsx("button",{onClick:()=>t("italic"),className:e.italic?"active":"",title:"Italic",children:l.jsx(or,{size:16})}),l.jsx("button",{onClick:()=>t("underline"),className:e.underline?"active":"",title:"Underline",children:l.jsx(yr,{size:16})}),l.jsx("button",{onClick:()=>t("strikethrough"),className:e.strikethrough?"active":"",title:"Strikethrough",children:l.jsx(dr,{size:16})}),l.jsx("div",{className:"toolbar-separator"}),l.jsx("button",{onClick:()=>t("justifyLeft"),className:e.alignLeft?"active":"",title:"Align Left",children:l.jsx(mr,{size:16})}),l.jsx("button",{onClick:()=>t("justifyCenter"),className:e.alignCenter?"active":"",title:"Align Center",children:l.jsx(pr,{size:16})}),l.jsx("button",{onClick:()=>t("justifyRight"),className:e.alignRight?"active":"",title:"Align Right",children:l.jsx(gr,{size:16})}),l.jsx("button",{onClick:()=>t("justifyFull"),className:e.alignJustify?"active":"",title:"Justify",children:l.jsx(hr,{size:16})}),l.jsx("div",{className:"toolbar-separator"}),l.jsxs("select",{onChange:s=>t("fontName",s.target.value),defaultValue:"Arial",title:"Font Family",children:[l.jsx("option",{value:"Arial",children:"Arial"}),l.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),l.jsx("option",{value:"Courier New",children:"Courier New"}),l.jsx("option",{value:"Georgia",children:"Georgia"}),l.jsx("option",{value:"Verdana",children:"Verdana"})]}),l.jsx("select",{onChange:s=>t("fontSize",s.target.value),defaultValue:Ce,title:"Font Size",children:kt.map(({value:s,label:a,pt:n})=>l.jsx("option",{value:s,children:a},s))}),l.jsxs("select",{onChange:s=>t("formatBlock",s.target.value),value:e.headingLevel||"p",title:"Heading Level",children:[l.jsx("option",{value:"p",children:"Normal"}),l.jsx("option",{value:"h1",children:"Heading 1"}),l.jsx("option",{value:"h2",children:"Heading 2"}),l.jsx("option",{value:"h3",children:"Heading 3"}),l.jsx("option",{value:"h4",children:"Heading 4"}),l.jsx("option",{value:"h5",children:"Heading 5"}),l.jsx("option",{value:"h6",children:"Heading 6"})]}),l.jsx("div",{className:"toolbar-separator"}),l.jsx("button",{onClick:()=>t("insertUnorderedList"),title:"Bullet List",children:l.jsx(Ht,{size:16})}),l.jsx("button",{onClick:()=>t("insertOrderedList"),title:"Numbered List",children:l.jsx(ir,{size:16})}),l.jsx("div",{className:"toolbar-separator"}),l.jsx("button",{onClick:()=>{const s=prompt("Enter URL:");s&&t("createLink",s)},title:"Insert Link",children:l.jsx(sr,{size:16})}),l.jsx("button",{onClick:()=>t("insertHTML",'<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>'),title:"Insert Table",children:l.jsx(fr,{size:16})}),o&&l.jsx("button",{onClick:o,title:"Insert Page Break",children:l.jsx(Me,{size:16})}),e.imageSelected&&l.jsxs("div",{className:"toolbar-group",children:[l.jsx("button",{onClick:()=>t("toggleImageAspectRatio"),title:e.preserveAspectRatio?"Toggle aspect ratio preservation (currently ON)":"Toggle aspect ratio preservation (currently OFF)",className:`toolbar-button ${e.preserveAspectRatio?"active":""}`,children:e.preserveAspectRatio?"🔗":"🔓"}),l.jsx("div",{className:"toolbar-separator"}),l.jsxs("div",{className:"toolbar-group",children:[l.jsxs("select",{title:"Image width",className:"toolbar-button",onChange:s=>{const a=s.target.value;a==="auto"?(document.execCommand("styleWithCSS",!1,!0),document.execCommand("removeFormat",!1,"width")):(document.execCommand("styleWithCSS",!1,!0),document.execCommand("styleWithCSS",!1,`width: ${a}`))},children:[l.jsx("option",{value:"",children:"Width..."}),l.jsx("option",{value:"auto",children:"Auto"}),l.jsx("option",{value:"100px",children:"100px"}),l.jsx("option",{value:"200px",children:"200px"}),l.jsx("option",{value:"300px",children:"300px"}),l.jsx("option",{value:"50%",children:"50%"}),l.jsx("option",{value:"100%",children:"100%"})]}),l.jsxs("select",{title:"Image height",className:"toolbar-button",onChange:s=>{const a=s.target.value;a==="auto"?(document.execCommand("styleWithCSS",!1,!0),document.execCommand("removeFormat",!1,"height")):(document.execCommand("styleWithCSS",!1,!0),document.execCommand("styleWithCSS",!1,`height: ${a}`))},children:[l.jsx("option",{value:"",children:"Height..."}),l.jsx("option",{value:"auto",children:"Auto"}),l.jsx("option",{value:"100px",children:"100px"}),l.jsx("option",{value:"200px",children:"200px"}),l.jsx("option",{value:"300px",children:"300px"}),l.jsx("option",{value:"50%",children:"50%"}),l.jsx("option",{value:"100%",children:"100%"})]})]})]}),l.jsx("div",{className:"toolbar-separator"}),l.jsx("input",{type:"file",accept:"image/*",onChange:s=>s.target.files[0]&&r(s.target.files[0]),style:{display:"none"},id:"image-upload"}),l.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:l.jsx(ar,{size:16})})]})};Re.propTypes={currentFormat:x.shape({bold:x.bool,italic:x.bool,underline:x.bool,strikethrough:x.bool,alignLeft:x.bool,alignCenter:x.bool,alignRight:x.bool,alignJustify:x.bool,fontFamily:x.string,fontSize:x.string,headingLevel:x.string}).isRequired,onFormatText:x.func.isRequired,onAddPageBreak:x.func},Re.defaultProps={onAddPageBreak:void 0};const Ne=({content:e,dimensions:t,pageSize:o,pageBoundaries:r=[],editorRef:s,onInput:a,onKeyDown:n,onClick:i,onScroll:f,zoomLevel:y=100,pageMargins:d=ue})=>{const p=dt(d),g=y/100,T=(w,O)=>{if(!w)return!1;const M=w.getBoundingClientRect(),u=O-M.top;return u<p.top||u>M.height-p.bottom},v=w=>w?w.nodeType===Node.ELEMENT_NODE?w.tagName==="PAGE-BREAK"||w.getAttribute("data-page-break")==="true":w.parentElement&&v(w.parentElement):!1,b=w=>{const O=window.getSelection();if(!O||O.rangeCount===0)return;const M=O.getRangeAt(0),{startContainer:u,endContainer:I}=M;if((v(u)||v(I))&&(w.key.length===1||w.key==="Enter"||w.key===" "))return w.preventDefault(),!1;if(w.key==="Tab")return w.preventDefault(),document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;"),!1;if((w.key==="Backspace"||w.key==="Delete")&&(v(u)||v(I)))return w.preventDefault(),!1;n&&n(w)},P=w=>{if(!s.current)return;const O=w.target;if(v(O)){w.preventDefault();return}if(T(s.current,w.clientY)){w.preventDefault();const M=s.current.getBoundingClientRect();if(w.clientY-M.top<p.top){const I=s.current.firstElementChild;if(I&&I.tagName!=="PAGE-BREAK"){const h=document.createRange(),C=window.getSelection();h.setStart(I,0),h.collapse(!0),C.removeAllRanges(),C.addRange(h)}}else{const I=s.current.lastElementChild;if(I&&I.tagName!=="PAGE-BREAK"){const h=document.createRange(),C=window.getSelection();h.selectNodeContents(I),h.collapse(!1),C.removeAllRanges(),C.addRange(h)}}return}i&&i(w)},D=w=>{const O=window.getSelection();if(!O||O.rangeCount===0)return;const M=O.getRangeAt(0),{startContainer:u}=M;if(v(u))return w.preventDefault(),!1};return l.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${t.width}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh",transform:`scale(${g})`,transformOrigin:"top center",transition:"transform 0.2s ease-out"},children:l.jsx("div",{ref:s,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${t.height}px`,width:`${t.width}px`,backgroundColor:"white",padding:`${p.top}px ${p.right}px ${p.bottom}px ${p.left}px`,boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:"Arial, sans-serif",fontSize:Ce,lineHeight:"1.3",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:a,onKeyDown:b,onBeforeInput:D,onClick:P,onScroll:f,"data-testid":"continuous-editor"})})};Ne.propTypes={content:x.string.isRequired,dimensions:x.shape({width:x.number.isRequired,height:x.number.isRequired}).isRequired,pageSize:x.oneOf(["A4","Letter","Legal"]).isRequired,pageBoundaries:x.arrayOf(x.shape({id:x.string.isRequired,pageNumber:x.number.isRequired,top:x.number,height:x.number})),editorRef:x.shape({current:x.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onInput:x.func.isRequired,onKeyDown:x.func,onClick:x.func,onScroll:x.func,zoomLevel:x.number,pageMargins:x.string},Ne.defaultProps={pageBoundaries:[],onKeyDown:void 0,onClick:void 0,onScroll:void 0,zoomLevel:100,pageMargins:ue};const rt=({pageBoundaries:e=[{id:"page-0",pageNumber:1}],activePage:t=0,pageSize:o="A4",pageMargins:r=ue,zoomLevel:s=100,canZoomIn:a=!0,canZoomOut:n=!0,onNavigate:i,onAddPage:f,onDeletePage:y,onPageSizeChange:d,onPageMarginsChange:p,onZoomIn:g,onZoomOut:T,onZoomReset:v}={})=>{const b=Math.max(e?.length||0,1),P=u=>{i&&i(u)},D=()=>{f&&f()},w=u=>{if(b<=1){console.warn("[PageManager] Cannot delete the only page");return}y&&y(u)},O=u=>{d&&d(u)},M=u=>{p&&p(u)};return l.jsxs("div",{className:"page-manager",children:[l.jsxs("div",{className:"page-settings-group",children:[l.jsxs("div",{className:"page-settings-header",children:[l.jsx(ur,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Settings"]}),l.jsxs("div",{className:"page-settings-controls",children:[l.jsxs("div",{className:"page-setting-item",children:[l.jsx("label",{htmlFor:"page-size-selector",children:"Size:"}),l.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:o,onChange:u=>O(u.target.value),children:[l.jsx("option",{value:"A4",children:"A4"}),l.jsx("option",{value:"Letter",children:"Letter"}),l.jsx("option",{value:"Legal",children:"Legal"})]})]}),l.jsxs("div",{className:"page-setting-item",children:[l.jsx("label",{htmlFor:"page-margins-selector",children:"Margins:"}),l.jsx("select",{id:"page-margins-selector",role:"combobox","aria-label":"Page margins selector",value:r,onChange:u=>M(u.target.value),children:tn().map(u=>l.jsx("option",{value:u,children:nn(u)},u))})]})]})]}),l.jsxs("div",{className:"zoom-controls-compact",children:[l.jsx("button",{type:"button",className:"zoom-button-compact",onClick:T,disabled:!n,"aria-label":"Zoom out",title:"Zoom out (Ctrl + -)",children:l.jsx(Tr,{size:12})}),l.jsxs("span",{className:"zoom-level-display",children:[s,"%"]}),l.jsx("button",{type:"button",className:"zoom-button-compact",onClick:g,disabled:!a,"aria-label":"Zoom in",title:"Zoom in (Ctrl + +)",children:l.jsx(vr,{size:12})}),l.jsx("button",{type:"button",className:"zoom-reset-compact",onClick:v,"aria-label":"Reset zoom",title:"Reset zoom to 100% (Ctrl + 0)",children:"Reset"})]}),l.jsx("div",{className:"page-list",children:(e&&e.length>0?e:[{id:"page-0",pageNumber:1}]).map((u,I)=>l.jsxs("div",{className:"page-item",children:[l.jsxs("button",{type:"button",className:`page-button ${I===t?"active":""}`,onClick:()=>P(I),"aria-label":`Go to page ${I+1}`,"aria-current":I===t?"page":void 0,children:[l.jsx(Me,{size:14}),l.jsxs("span",{children:["Page ",I+1]})]}),b>1&&l.jsx("button",{type:"button",className:"delete-page-button",onClick:h=>{h.stopPropagation(),w(I)},"aria-label":`Delete page ${I+1}`,title:"Delete this page and its content",children:l.jsx(Er,{size:14})})]},u.id||`page-${I}`))}),l.jsxs("button",{type:"button",className:"add-page-button",onClick:D,"aria-label":"Add new page",title:"Add new page at end",children:[l.jsx(cr,{size:16}),l.jsx("span",{children:"Add Page"})]})]})};rt.propTypes={pageBoundaries:x.arrayOf(x.shape({id:x.string.isRequired,pageNumber:x.number.isRequired,top:x.number,height:x.number})),activePage:x.number,pageSize:x.oneOf(["A4","Letter","Legal"]),pageMargins:x.string,zoomLevel:x.number,canZoomIn:x.bool,canZoomOut:x.bool,onNavigate:x.func,onAddPage:x.func,onDeletePage:x.func,onPageSizeChange:x.func,onPageMarginsChange:x.func,onZoomIn:x.func,onZoomOut:x.func,onZoomReset:x.func},rt.defaultProps={pageBoundaries:[{id:"page-0",pageNumber:1}],activePage:0,pageSize:"A4",pageMargins:ue,zoomLevel:100,canZoomIn:!0,canZoomOut:!0,onNavigate:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onPageMarginsChange:void 0,onZoomIn:void 0,onZoomOut:void 0,onZoomReset:void 0};const Wt=m.memo(rt),Ie=({editorRef:e,onImageResize:t,onImageSelect:o,onImageDeselect:r,resizeOptions:s=fe})=>{const a=m.useRef(null),n=m.useRef(null),i=m.useRef(null),f=m.useRef(null),y=m.useRef(s),d=m.useRef(!1);m.useEffect(()=>{y.current=s},[s]);const p=m.useCallback(h=>{if(!de(h))return;a.current&&(ge(a.current),a.current=null),h.classList.add("selected");const C=nt(h);if(C){a.current=C,n.current=h,document.body.appendChild(C),C.querySelectorAll(".resize-handler").forEach(te=>{te.addEventListener("mousedown",v)});const q=C.querySelector(".aspect-ratio-toggle");q&&q.addEventListener("click",T),o&&o(h)}},[o]),g=m.useCallback(()=>{n.current&&(n.current.classList.remove("selected"),n.current=null),a.current&&(ge(a.current),a.current=null),i.current=null,f.current=null,d.current=!1,r&&r()},[r]),T=m.useCallback(h=>{h.preventDefault(),h.stopPropagation();const C=!y.current.preserveAspectRatio;y.current={...y.current,preserveAspectRatio:C,aspectRatio:C};const L=h.currentTarget;C?(L.innerHTML="🔗",L.title="Toggle aspect ratio preservation (currently ON)",L.classList.remove("locked")):(L.innerHTML="🔓",L.title="Toggle aspect ratio preservation (currently OFF)",L.classList.add("locked"))},[]),v=m.useCallback(h=>{if(h.preventDefault(),h.stopPropagation(),!n.current)return;const C=h.currentTarget.dataset.handler,L=n.current.getBoundingClientRect(),q=window.pageYOffset||document.documentElement.scrollTop,te=window.pageXOffset||document.documentElement.scrollLeft;i.current={x:h.clientX,y:h.clientY,width:n.current.offsetWidth,height:n.current.offsetHeight,offsetX:h.clientX-L.left-te,offsetY:h.clientY-L.top-q},f.current=C,d.current=!0,document.body.classList.add("resize-in-progress"),document.body.style.cursor=M(C),document.addEventListener("mousemove",b),document.addEventListener("mouseup",P)},[]),b=m.useCallback(h=>{if(!d.current||!n.current||!i.current||!f.current)return;h.preventDefault(),h.stopPropagation();const{x:C,y:L,width:q,height:te}=i.current,W=f.current,Q=h.clientX,B=h.clientY,re=u({handler:W,startX:C,startY:L,currentX:Q,currentY:B,startWidth:q,startHeight:te,options:y.current});I(n.current,re),a.current&&Se(a.current,n.current)},[]),P=m.useCallback(h=>{if(d.current&&(h.preventDefault(),h.stopPropagation(),i.current=null,f.current=null,d.current=!1,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",P),document.body.classList.remove("resize-in-progress"),document.body.style.cursor="",n.current)){const C=new Event("input",{bubbles:!0,cancelable:!0});n.current.dispatchEvent(C),t&&t(n.current,{width:n.current.offsetWidth,height:n.current.offsetHeight})}},[t]),D=m.useCallback(h=>{a.current&&!a.current.contains(h.target)&&g();const C=h.target;if(de(C)){if(C===n.current)return;p(C)}},[p,g]),w=m.useCallback(h=>{if((h.key==="Delete"||h.key==="Backspace")&&n.current&&!d.current){h.preventDefault();const C=n.current;if(C.parentNode){C.parentNode.removeChild(C),g();const L=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(L)}}if(h.key==="Escape"&&n.current&&g(),n.current&&!d.current){if((h.ctrlKey||h.metaKey)&&h.shiftKey&&h.key===">"){h.preventDefault();const C=n.current.offsetWidth,L=Math.min(y.current.maxWidth||800,C+10);I(n.current,{width:L,height:n.current.offsetHeight});const q=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(q)}if((h.ctrlKey||h.metaKey)&&h.shiftKey&&h.key==="<"){h.preventDefault();const C=n.current.offsetWidth,L=Math.max(y.current.minWidth||50,C-10);I(n.current,{width:L,height:n.current.offsetHeight});const q=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(q)}if((h.ctrlKey||h.metaKey)&&h.shiftKey&&h.key==="+"){h.preventDefault();const C=n.current.offsetHeight,L=Math.min(y.current.maxHeight||600,C+10);I(n.current,{width:n.current.offsetWidth,height:L});const q=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(q)}if((h.ctrlKey||h.metaKey)&&h.shiftKey&&h.key==="-"){h.preventDefault();const C=n.current.offsetHeight,L=Math.max(y.current.minHeight||50,C-10);I(n.current,{width:n.current.offsetWidth,height:L});const q=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(q)}if((h.ctrlKey||h.metaKey)&&h.key==="r"){h.preventDefault(),I(n.current,{width:300,height:200});const C=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(C)}if((h.ctrlKey||h.metaKey)&&h.altKey&&h.key==="l"){h.preventDefault();const C=!y.current.preserveAspectRatio;if(y.current={...y.current,preserveAspectRatio:C,aspectRatio:C},a.current){const L=a.current.querySelector(".aspect-ratio-toggle");L&&(C?(L.innerHTML="🔗",L.title="Toggle aspect ratio preservation (currently ON)",L.classList.remove("locked")):(L.innerHTML="🔓",L.title="Toggle aspect ratio preservation (currently OFF)",L.classList.add("locked")))}}}},[e,g]),O=m.useCallback(()=>{a.current&&n.current&&Se(a.current,n.current)},[]);m.useEffect(()=>{if(!e.current)return;const h=e.current;h.addEventListener("click",D),h.addEventListener("keydown",w);const C=h.closest(".editor-viewport");return C&&C.addEventListener("scroll",O),window.addEventListener("resize",O),()=>{h.removeEventListener("click",D),h.removeEventListener("keydown",w),C&&C.removeEventListener("scroll",O),window.removeEventListener("resize",O),d.current&&(document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",P),document.body.classList.remove("resize-in-progress"),document.body.style.cursor=""),a.current&&ge(a.current)}},[e,D,w,O,b,P]);function M(h){switch(h){case _.TOP_LEFT:case _.BOTTOM_RIGHT:return"nwse-resize";case _.TOP_RIGHT:case _.BOTTOM_LEFT:return"nesw-resize";case _.TOP:case _.BOTTOM:return"ns-resize";case _.LEFT:case _.RIGHT:return"ew-resize";default:return"default"}}function u({handler:h,startX:C,startY:L,currentX:q,currentY:te,startWidth:W,startHeight:Q,options:B=fe}){const re=q-C,ee=te-L;let Y=W,X=Q;switch(h){case _.TOP_LEFT:Y=Math.max(B.minWidth,W-re),X=Math.max(B.minHeight,Q-ee);break;case _.TOP_RIGHT:Y=Math.max(B.minWidth,W+re),X=Math.max(B.minHeight,Q-ee);break;case _.BOTTOM_LEFT:Y=Math.max(B.minWidth,W-re),X=Math.max(B.minHeight,Q+ee);break;case _.BOTTOM_RIGHT:Y=Math.max(B.minWidth,W+re),X=Math.max(B.minHeight,Q+ee);break;case _.TOP:X=Math.max(B.minHeight,Q-ee);break;case _.BOTTOM:X=Math.max(B.minHeight,Q+ee);break;case _.LEFT:Y=Math.max(B.minWidth,W-re);break;case _.RIGHT:Y=Math.max(B.minWidth,W+re);break;default:return{width:Y,height:X}}if(B.preserveAspectRatio&&B.aspectRatio){const ne=W/Q;[_.TOP_LEFT,_.TOP_RIGHT,_.BOTTOM_LEFT,_.BOTTOM_RIGHT].includes(h)?Y/ne>X?X=Math.max(B.minHeight,Y/ne):Y=Math.max(B.minWidth,X*ne):[_.TOP,_.BOTTOM].includes(h)?Y=X*ne:[_.LEFT,_.RIGHT].includes(h)&&(X=Y/ne)}return B.maxWidth&&Y>B.maxWidth&&(Y=B.maxWidth,B.preserveAspectRatio&&B.aspectRatio&&(X=Y/(W/Q))),B.maxHeight&&X>B.maxHeight&&(X=B.maxHeight,B.preserveAspectRatio&&B.aspectRatio&&(Y=X*(W/Q))),Y=Math.max(B.minWidth,Y),X=Math.max(B.minHeight,X),{width:Math.round(Y),height:Math.round(X)}}function I(h,{width:C,height:L}){de(h)&&(h.tagName==="IMG"?(h.style.width=`${C}px`,h.style.height=`${L}px`,h.width=C,h.height=L):h.tagName==="DIV"&&(h.style.width=`${C}px`,h.style.height=`${L}px`))}return null};Ie.propTypes={editorRef:x.shape({current:x.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onImageResize:x.func,onImageSelect:x.func,onImageDeselect:x.func,resizeOptions:x.shape({minWidth:x.number,minHeight:x.number,maxWidth:x.number,maxHeight:x.number,aspectRatio:x.bool,preserveAspectRatio:x.bool,defaultWidth:x.number,defaultHeight:x.number})},Ie.defaultProps={onImageResize:void 0,onImageSelect:void 0,onImageDeselect:void 0,resizeOptions:fe};const wr=50,Cr=50,Yt=50,Sr=100,Mr=500,je=m.forwardRef(({pageManagerComponent:e=null,onNavigatePage:t,onAddPage:o,onDeletePage:r,onPageSizeChange:s,onPageMarginsChange:a,onChange:n,showSidebar:i=!0,showToolbar:f=!0,showPageManager:y=!0},d)=>{const p=qe(),g=We(),{pageSize:T,pageMargins:v,continuousContent:b,pageBoundaries:P,activePage:D,zoomLevel:w}=p,O=m.useRef(null),M=m.useRef(null),{currentFormat:u,formatText:I}=Mt(),[h,C]=m.useState(!1),{checkAndUpdateBoundaries:L,getCurrentPage:q,scrollToPage:te,updateBoundaries:W,triggerAutoReflow:Q,removePageAndContent:B,insertPageBreakAtBoundary:re}=zt(T,M,w,v),ee=m.useMemo(()=>Ae(T),[T]),[Y,X]=m.useState(!1),ne=m.useRef(null),E=m.useRef(!1),c=m.useRef(!1),A=m.useRef(!1),S=m.useRef(b);m.useEffect(()=>{if(M.current){if(!A.current){M.current.innerHTML=b,A.current=!0,S.current=b;const $=setTimeout(()=>{W()},wr);return()=>clearTimeout($)}if(S.current!==b){if(M.current.innerHTML!==b){M.current.innerHTML=b;const oe=setTimeout(()=>{if(W(),E.current){E.current=!1;const le=Math.max(0,P.length-1);g.setActivePage(le),setTimeout(()=>{te(le,O)},Yt)}},Cr);return S.current=b,()=>clearTimeout(oe)}S.current=b}}},[b,W,P.length,g,te]),m.useEffect(()=>{n&&A.current&&n(b)},[b,n]),m.useImperativeHandle(d,()=>({getHTMLContent:()=>b,getPlainText:()=>b.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),setContent:$=>{g.updateContinuousContent($),M.current&&(M.current.innerHTML=$,setTimeout(()=>{W()},50))}}),[b,g,W]),m.useEffect(()=>{const $=setTimeout(()=>{M.current&&M.current.focus()},200);return()=>clearTimeout($)},[]);const R=m.useCallback($=>{const oe=$.currentTarget.innerHTML;g.updateContinuousContent(oe),L(),Q(200);const le=q(O);le!==D&&g.setActivePage(le)},[L,g,q,D,Q,O]),U=m.useCallback($=>{g.updatePageSize($),W({pageSize:$}),s&&s($)},[g,W,s]),z=m.useCallback($=>{g.updatePageMargins($),W({pageMargins:$}),a&&a($)},[g,W,a]),N=m.useCallback($=>{$<0||$>=P.length||(c.current=!0,g.setActivePage($),te($,O),setTimeout(()=>{c.current=!1},Mr),t&&t($))},[g,te,t,P.length]),H=m.useCallback(()=>{const $=P.length+1;re($)&&(E.current=!0,setTimeout(()=>{if(E.current){E.current=!1;const le=Math.max(0,P.length-1);g.setActivePage(le),setTimeout(()=>{te(le,O)},Yt)}},100)),o&&o()},[P.length,re,g,te,o]),Z=m.useCallback(()=>{const $=window.getSelection();if($&&$.rangeCount>0){if(!M?.current)return;const ot=`<page-break data-page-break="true" contenteditable="false" data-page-number="${M.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,ot),setTimeout(()=>{W();const st=q(O);g.setActivePage(st)},150)}},[W,q,g,O]),F=m.useCallback($=>{if(P.length<=1){console.warn("Cannot delete the only page");return}B($)&&(g.setActivePage(0),r&&r($))},[P.length,B,g,r]),ae=m.useCallback(()=>{g.zoomIn()},[g]),k=m.useCallback(()=>{g.zoomOut()},[g]),se=m.useCallback(()=>{g.resetZoom()},[g]);m.useEffect(()=>{const $=oe=>{if(oe.ctrlKey||oe.metaKey){["+","=","-","_","0"].includes(oe.key)&&oe.preventDefault();const le=document.activeElement===M.current,ot=document.activeElement===O.current,st=document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA"||document.activeElement?.isContentEditable===!1;if(le||ot||!st)switch(oe.key){case"+":case"=":ae();break;case"-":case"_":k();break;case"0":se();break}}};return window.addEventListener("keydown",$),()=>{window.removeEventListener("keydown",$)}},[ae,k,se]);const me=m.useCallback(()=>{!O.current||!M.current||c.current||(ne.current&&clearTimeout(ne.current),ne.current=setTimeout(()=>{if(c.current){ne.current=null;return}const $=q(O);$!==D&&$>=0&&g.setActivePage($),ne.current=null},Sr))},[q,D,g]),Le=m.useMemo(()=>{if(!b)return 0;const oe=b.replace(/<[^>]*>/g," ").match(/\b\w+\b/g);return oe?oe.length:0},[b]),Nr=P.length||1,Ir=m.useCallback($=>{C(!0)},[]),jr=m.useCallback(()=>{C(!1)},[]),Lr=m.useCallback(($,oe)=>{},[]);return m.useEffect(()=>()=>{ne.current&&clearTimeout(ne.current)},[]),l.jsxs("div",{className:"multi-page-editor",children:[f&&l.jsx(Re,{currentFormat:{...u,imageSelected:h},onFormatText:I,onAddPageBreak:Z}),l.jsxs("div",{className:"editor-container",children:[i&&l.jsx(Gt,{editorView:null,isCollapsed:Y,onToggle:()=>X($=>!$),wordCount:Le,pageCount:Nr}),l.jsx("div",{className:"editor-viewport continuous-scroll",ref:O,onScroll:me,children:l.jsx(Ne,{content:b,dimensions:ee,pageSize:T,pageMargins:v,pageBoundaries:P,editorRef:M,onInput:R,onClick:()=>M.current?.focus(),zoomLevel:w})}),l.jsx(Ie,{editorRef:M,onImageSelect:Ir,onImageDeselect:jr,onImageResize:Lr}),y&&l.jsx("div",{className:"page-manager-sidebar",children:e?m.cloneElement(e,{onNavigate:N,onAddPage:H,onDeletePage:F,onPageSizeChange:U,onPageMarginsChange:z,zoomLevel:w,canZoomIn:He(w),canZoomOut:Ge(w),onZoomIn:ae,onZoomOut:k,onZoomReset:se}):l.jsx(Wt,{pageBoundaries:P,activePage:D,pageSize:T,pageMargins:v,zoomLevel:w,canZoomIn:He(w),canZoomOut:Ge(w),onNavigate:N,onAddPage:H,onDeletePage:F,onPageSizeChange:U,onPageMarginsChange:z,onZoomIn:ae,onZoomOut:k,onZoomReset:se})})]})]})});je.displayName="HtmlEditor",je.propTypes={pageManagerComponent:x.element,onNavigatePage:x.func,onAddPage:x.func,onDeletePage:x.func,onPageSizeChange:x.func,onPageMarginsChange:x.func,onChange:x.func,showSidebar:x.bool,showToolbar:x.bool,showPageManager:x.bool},je.defaultProps={pageManagerComponent:null,onNavigatePage:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onPageMarginsChange:void 0,onChange:void 0,showSidebar:!0,showToolbar:!0,showPageManager:!0};class at extends m.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,o){console.error("[ErrorBoundary] Caught error:",t),console.error("[ErrorBoundary] Error info:",o),this.setState({error:t,errorInfo:o}),this.props.onError&&this.props.onError(t,o)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:l.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #f44336",borderRadius:"4px",backgroundColor:"#ffebee",color:"#c62828"},children:[l.jsx("h2",{style:{marginTop:0},children:"⚠️ Something went wrong"}),l.jsx("p",{children:"The editor encountered an unexpected error and couldn't continue."}),this.props.showDetails&&this.state.error&&l.jsxs("details",{style:{marginTop:"10px",padding:"10px",backgroundColor:"white",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[l.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),l.jsxs("pre",{style:{marginTop:"10px",overflow:"auto",maxHeight:"200px"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),l.jsx("button",{onClick:this.handleReset,style:{marginTop:"15px",padding:"8px 16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Try Again"})]}):this.props.children}}at.propTypes={children:x.node.isRequired,fallback:x.node,onError:x.func,onReset:x.func,showDetails:x.bool},at.defaultProps={fallback:null,onError:void 0,onReset:void 0,showDetails:process.env.NODE_ENV==="development"};const Rr={A4:{width:ie.A4.width,height:ie.A4.height},Letter:{width:ie.Letter.width,height:ie.Letter.height},Legal:{width:ie.Legal.width,height:ie.Legal.height}};j.COMMON_FONT_SIZES=kt,j.DEFAULT_FONT_SIZE=Ce,j.DEFAULT_IMAGE_RESIZE_OPTIONS=fe,j.DEFAULT_PAGE_SIZE=Ue,j.DocumentProvider=ln,j.EditorToolbar=Re,j.ErrorBoundary=at,j.FONT_SIZE_MAP=tt,j.HtmlEditor=je,j.ImageResizeHandlers=Ie,j.PAGE_DIMENSIONS=Rr,j.PAGE_SIZES=ie,j.PageManager=Wt,j.PageView=Ne,j.RESIZE_HANDLERS=_,j.Sidebar=Gt,j.applyImageDimensions=_n,j.calculateResizeDimensions=Tn,j.clearImages=kr,j.createResizeOverlay=nt,j.deleteImage=Ar,j.getAllImageKeys=Or,j.getAvailablePageSizes=an,j.getImage=Ft,j.getImageDimensions=xn,j.getPageDimensions=Ae,j.getPixelValue=bn,j.getPointValue=En,j.isResizableImage=de,j.isValidFontSize=vn,j.isValidPageSize=rn,j.logger=Zt,j.pixelsToPoints=wt,j.pointsToPixels=Ot,j.removeResizeOverlay=ge,j.saveImage=Ut,j.updateResizeOverlay=Se,j.useContinuousReflow=zt,j.useDocument=Ze,j.useDocumentActions=We,j.useDocumentState=qe,j.useFormatting=Mt,Object.defineProperty(j,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
