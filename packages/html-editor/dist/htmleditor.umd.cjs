(function(f,d){typeof exports=="object"&&typeof module<"u"?d(exports,require("react"),require("react-redux"),require("@reduxjs/toolkit"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","react","react-redux","@reduxjs/toolkit","uuid"],d):(f=typeof globalThis<"u"?globalThis:f||self,d(f.HTMLEditor={},f.React,f.ReactRedux,f.RTK,f.uuid))})(this,(function(f,d,F,Me,ie){"use strict";var K={exports:{}},G={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var de;function Re(){if(de)return G;de=1;var e=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(o,i,s){var u=null;if(s!==void 0&&(u=""+s),i.key!==void 0&&(u=""+i.key),"key"in i){s={};for(var v in i)v!=="key"&&(s[v]=i[v])}else s=i;return i=s.ref,{$$typeof:e,type:o,key:u,ref:i!==void 0?i:null,props:s}}return G.Fragment=a,G.jsx=r,G.jsxs=r,G}var W={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ue;function ze(){return ue||(ue=1,process.env.NODE_ENV!=="production"&&(function(){function e(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case R:return"Fragment";case l:return"Profiler";case B:return"StrictMode";case h:return"Suspense";case k:return"SuspenseList";case D:return"Activity"}if(typeof t=="object")switch(typeof t.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),t.$$typeof){case y:return"Portal";case b:return t.displayName||"Context";case g:return(t._context.displayName||"Context")+".Consumer";case p:var c=t.render;return t=t.displayName,t||(t=c.displayName||c.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w:return c=t.displayName||null,c!==null?c:e(t.type)||"Memo";case C:c=t._payload,t=t._init;try{return e(t(c))}catch{}}return null}function a(t){return""+t}function r(t){try{a(t);var c=!1}catch{c=!0}if(c){c=console;var j=c.error,T=typeof Symbol=="function"&&Symbol.toStringTag&&t[Symbol.toStringTag]||t.constructor.name||"Object";return j.call(c,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",T),a(t)}}function o(t){if(t===R)return"<>";if(typeof t=="object"&&t!==null&&t.$$typeof===C)return"<...>";try{var c=e(t);return c?"<"+c+">":"<...>"}catch{return"<...>"}}function i(){var t=E.A;return t===null?null:t.getOwner()}function s(){return Error("react-stack-top-frame")}function u(t){if(P.call(t,"key")){var c=Object.getOwnPropertyDescriptor(t,"key").get;if(c&&c.isReactWarning)return!1}return t.key!==void 0}function v(t,c){function j(){te||(te=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",c))}j.isReactWarning=!0,Object.defineProperty(t,"key",{get:j,configurable:!0})}function m(){var t=e(this.type);return J[t]||(J[t]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),t=this.props.ref,t!==void 0?t:null}function _(t,c,j,T,oe,le){var z=j.ref;return t={$$typeof:L,type:t,key:c,props:j,_owner:T},(z!==void 0?z:null)!==null?Object.defineProperty(t,"ref",{enumerable:!1,get:m}):Object.defineProperty(t,"ref",{enumerable:!1,value:null}),t._store={},Object.defineProperty(t._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(t,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(t,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:oe}),Object.defineProperty(t,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:le}),Object.freeze&&(Object.freeze(t.props),Object.freeze(t)),t}function M(t,c,j,T,oe,le){var z=c.children;if(z!==void 0)if(T)if(O(z)){for(T=0;T<z.length;T++)N(z[T]);Object.freeze&&Object.freeze(z)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else N(z);if(P.call(c,"key")){z=e(t);var V=Object.keys(c).filter(function(wt){return wt!=="key"});T=0<V.length?"{key: someKey, "+V.join(": ..., ")+": ...}":"{key: someKey}",re[z+T]||(V=0<V.length?"{"+V.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,T,z,V,z),re[z+T]=!0)}if(z=null,j!==void 0&&(r(j),z=""+j),u(c)&&(r(c.key),z=""+c.key),"key"in c){j={};for(var ce in c)ce!=="key"&&(j[ce]=c[ce])}else j=c;return z&&v(j,typeof t=="function"?t.displayName||t.name||"Unknown":t),_(t,z,j,i(),oe,le)}function N(t){S(t)?t._store&&(t._store.validated=1):typeof t=="object"&&t!==null&&t.$$typeof===C&&(t._payload.status==="fulfilled"?S(t._payload.value)&&t._payload.value._store&&(t._payload.value._store.validated=1):t._store&&(t._store.validated=1))}function S(t){return typeof t=="object"&&t!==null&&t.$$typeof===L}var I=d,L=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),b=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),A=Symbol.for("react.client.reference"),E=I.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=Object.prototype.hasOwnProperty,O=Array.isArray,U=console.createTask?console.createTask:function(){return null};I={react_stack_bottom_frame:function(t){return t()}};var te,J={},ne=I.react_stack_bottom_frame.bind(I,s)(),ae=U(o(s)),re={};W.Fragment=R,W.jsx=function(t,c,j){var T=1e4>E.recentlyCreatedOwnerStacks++;return M(t,c,j,!1,T?Error("react-stack-top-frame"):ne,T?U(o(t)):ae)},W.jsxs=function(t,c,j){var T=1e4>E.recentlyCreatedOwnerStacks++;return M(t,c,j,!0,T?Error("react-stack-top-frame"):ne,T?U(o(t)):ae)}})()),W}var ge;function Ie(){return ge||(ge=1,process.env.NODE_ENV==="production"?K.exports=Re():K.exports=ze()),K.exports}var n=Ie();const X="A4",H="<p><br></p>",Y=(e,a=X)=>({id:ie.v4(),index:e,size:a,content:H,images:[],isBreakPoint:!1}),pe=(e,a=X)=>(e.length>0?e:[Y(0,a)]).map((o,i)=>({id:o.id||ie.v4(),index:i,size:o.size||a,content:Z(o.content),images:o.images||[],isBreakPoint:!!o.isBreakPoint})),Z=e=>typeof e!="string"||e.trim()===""?H:e,se=(e={})=>{const a=new Date().toISOString(),r=e.pageSize||X,o=pe(e.pages||[Y(0,r)],r);return{id:ie.v4(),title:e.title||"Untitled Document",createdAt:a,updatedAt:a,pageSize:r,pages:o,activePage:e.activePage&&e.activePage<o.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:o.length,editorMode:e.editorMode||"continuous",continuousContent:e.continuousContent||H,pageBoundaries:e.pageBoundaries||[]}},Be=se(),he=Me.createSlice({name:"document",initialState:Be,reducers:{initializeDocument:(e,a)=>{const{initialContent:r=H,pageSize:o=X}=a.payload||{},i={...Y(0,o),content:Z(r)};return se({title:e.title,pageSize:o,pages:[i]})},updateTitle:(e,a)=>{e.title=a.payload,e.updatedAt=new Date().toISOString()},updatePageContent:(e,a)=>{const{pageIndex:r,content:o}=a.payload;r<0||r>=e.pages.length||(e.pages[r].content=Z(o),e.updatedAt=new Date().toISOString())},updatePages:(e,a)=>{const r=Array.isArray(a.payload)?{pages:a.payload}:a.payload||{},o=pe(r.pages||[],e.pageSize);e.pages=o,e.activePage=Math.min(e.activePage,o.length-1),e.pageBreaks=Array.isArray(r.pageBreaks)?r.pageBreaks:o.slice(0,-1).map((i,s)=>({id:`auto-break-${s}`,pageNumber:s+1})),e.totalPages=o.length,e.updatedAt=new Date().toISOString()},addPage:(e,a)=>{const r=typeof a.payload?.index=="number"?Math.min(Math.max(a.payload.index,0),e.pages.length):e.pages.length;e.pages.splice(r,0,Y(r,e.pageSize)),e.pages=e.pages.map((o,i)=>({...o,index:i,size:e.pageSize})),e.activePage=r,e.pageBreaks=e.pages.slice(0,-1).map((o,i)=>({id:`auto-break-${i}`,pageNumber:i+1})),e.totalPages=e.pages.length,e.updatedAt=new Date().toISOString()},deletePage:(e,a)=>{const r=a.payload;e.pages.length<=1||(e.pages.splice(r,1),e.pages=e.pages.map((o,i)=>({...o,index:i,size:e.pageSize})),e.activePage>=e.pages.length?e.activePage=e.pages.length-1:r<=e.activePage&&e.activePage>0&&(e.activePage-=1),e.pageBreaks=e.pages.slice(0,-1).map((o,i)=>({id:`auto-break-${i}`,pageNumber:i+1})),e.totalPages=e.pages.length,e.updatedAt=new Date().toISOString())},setActivePage:(e,a)=>{const r=a.payload;r>=0&&r<e.pages.length&&r!==e.activePage&&(e.activePage=r,e.updatedAt=new Date().toISOString())},updatePageSize:(e,a)=>{const r=a.payload;e.pageSize=r,e.pages=e.pages.map((o,i)=>({...o,index:i,size:r})),e.pageBreaks=e.pages.slice(0,-1).map((o,i)=>({id:`auto-break-${i}`,pageNumber:i+1})),e.updatedAt=new Date().toISOString()},resetDocument:()=>se(),updateContinuousContent:(e,a)=>{e.continuousContent=Z(a.payload),e.updatedAt=new Date().toISOString()},updatePageBoundaries:(e,a)=>{e.pageBoundaries=a.payload||[],e.totalPages=e.pageBoundaries.length,e.updatedAt=new Date().toISOString()},addPageBreak:(e,a)=>{const{position:r="end"}=a.payload||{},o='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';if(r==="end")e.continuousContent=e.continuousContent+o+"<p><br></p>";else if(typeof r=="number"){const i=e.continuousContent.substring(0,r),s=e.continuousContent.substring(r);e.continuousContent=i+o+s}e.updatedAt=new Date().toISOString()},removePageBreak:(e,a)=>{const{pageIndex:r}=a.payload||{};if(typeof r=="number"&&typeof document<"u"){const o=document.createElement("div");o.innerHTML=e.continuousContent;const i=o.querySelectorAll('page-break, [data-page-break="true"]');i[r]&&i[r].remove(),o.querySelectorAll('page-break, [data-page-break="true"]').forEach((u,v)=>{u.setAttribute("data-page-number",String(v+2))}),e.continuousContent=o.innerHTML,e.updatedAt=new Date().toISOString()}},setEditorMode:(e,a)=>{const r=a.payload;if(r!==e.editorMode){if(e.editorMode=r,r==="continuous"){const o=e.pages.map(i=>i.content).filter(i=>i&&i!==H).join(`
`);e.continuousContent=o||H}else e.continuousContent&&e.continuousContent!==H&&(e.pages=[{...Y(0,e.pageSize),content:e.continuousContent}]);e.updatedAt=new Date().toISOString()}}}}),{initializeDocument:Oe,updateTitle:Le,updatePageContent:De,updatePages:He,addPage:Ue,deletePage:Ve,setActivePage:$,updatePageSize:fe,resetDocument:Ge,updateContinuousContent:Q,updatePageBoundaries:me,addPageBreak:ke,removePageBreak:We,setEditorMode:Ye}=he.actions,$e=he.reducer,be=()=>{const[e,a]=d.useState({bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:"16px"}),r=d.useCallback((o,i=null)=>{document.execCommand(o,!1,i),o==="bold"?a(s=>({...s,bold:!s.bold})):o==="italic"?a(s=>({...s,italic:!s.italic})):o==="underline"?a(s=>({...s,underline:!s.underline})):o==="strikethrough"?a(s=>({...s,strikethrough:!s.strikethrough})):o==="justifyLeft"?a(s=>({...s,alignLeft:!0,alignCenter:!1,alignRight:!1,alignJustify:!1})):o==="justifyCenter"?a(s=>({...s,alignLeft:!1,alignCenter:!0,alignRight:!1,alignJustify:!1})):o==="justifyRight"?a(s=>({...s,alignLeft:!1,alignCenter:!1,alignRight:!0,alignJustify:!1})):o==="justifyFull"&&a(s=>({...s,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!0}))},[]);return{currentFormat:e,formatText:r}},q={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},ye={top:60,bottom:100,left:72,right:72},xe=(e,a)=>{const r=F.useDispatch(),o=d.useRef(null),i=d.useRef(null),s=d.useRef(e),u=d.useRef(!1);d.useEffect(()=>{s.current=e},[e]),d.useEffect(()=>()=>{o.current&&clearTimeout(o.current),i.current&&clearTimeout(i.current)},[]);const v=d.useCallback((l,g)=>{let b=0;for(let p=0;p<l.length;p++){const h=l[p],k=h.getBoundingClientRect().height;if(b+k>g)return{overflowIndex:p,overflowElement:h,accumulatedHeight:b};b+=k}return null},[]),m=d.useCallback((l,g)=>{if(!l||!a?.current)return!1;try{const b=a.current,p=document.createElement("page-break");return p.setAttribute("data-page-break","true"),p.setAttribute("contenteditable","false"),p.setAttribute("data-page-number",g||"2"),l.parentNode.insertBefore(p,l),!0}catch(b){return console.warn("[insertPageBreakBefore] Failed to insert page break:",b),!1}},[a]),_=d.useCallback(()=>{if(!(!a?.current||u.current))try{u.current=!0;const l=a.current,g=s.current||"A4",p=(q[g]||q.A4).height-ye.top-ye.bottom,h=Array.from(l.children),k=h.filter(A=>A.tagName==="PAGE-BREAK"||A.getAttribute("data-page-break")==="true"),w=[];let C=[];for(const A of h)A.tagName==="PAGE-BREAK"||A.getAttribute("data-page-break")==="true"?C.length>0&&(w.push(C),C=[]):C.push(A);C.length>0&&w.push(C),w.length===0&&h.length>0&&w.push(h.filter(A=>!(A.tagName==="PAGE-BREAK"||A.getAttribute("data-page-break")==="true")));let D=!1;for(let A=0;A<w.length;A++){const E=w[A],P=v(E,p);if(P&&P.overflowIndex>0){const O=A+2;if(m(P.overflowElement,O)){D=!0;break}}}if(D){const A=l.innerHTML;r(Q(A)),setTimeout(()=>{S()},50)}}catch(l){console.warn("[checkAndReflow] Reflow failed:",l)}finally{u.current=!1}},[a,v,m,r]),M=d.useCallback((l=500)=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{i.current=null,_()},l)},[_]),N=d.useCallback((l={})=>{if(!a?.current||typeof document>"u")return[];const g=l.pageSize||s.current||"A4",b=q[g]||q.A4,p=a.current,h=p.querySelectorAll('page-break, [data-page-break="true"]'),k=[];return k.push({id:"page-0",pageNumber:1,top:0,height:b.height}),h.forEach((w,C)=>{const D=w.getBoundingClientRect(),A=p.getBoundingClientRect(),E=D.top-A.top+p.scrollTop;k.push({id:`page-${C+1}`,pageNumber:C+2,top:E,height:b.height})}),k},[a]),S=d.useCallback((l={})=>{const g=N(l);return r(me(g)),g},[N,r]),I=d.useCallback((l={})=>{o.current&&clearTimeout(o.current);const g=typeof l.delay=="number"?l.delay:300;o.current=setTimeout(()=>{o.current=null,S(l)},Math.max(0,g))},[S]),L=d.useCallback(()=>{if(!a?.current)return 0;const l=window.getSelection();if(!l||l.rangeCount===0)return 0;try{const g=l.getRangeAt(0),b=a.current;let p=g.startContainer;const h=Array.from(b.querySelectorAll('page-break, [data-page-break="true"]'));if(h.length===0)return 0;for(;p&&p!==b;){for(let k=h.length-1;k>=0;k--)if(h[k].compareDocumentPosition(p)&Node.DOCUMENT_POSITION_FOLLOWING)return k+1;p=p.parentNode}return 0}catch(g){return console.warn("[getCurrentPage] Failed to calculate page:",g),0}},[a]),y=d.useCallback((l,g)=>{if(!g?.current||!a?.current)return;a.current;const p=N().find(h=>h.pageNumber===l+1);p&&(g.current.scrollTo({top:p.top-40,behavior:"smooth"}),setTimeout(()=>{R(l)},300))},[a]),R=d.useCallback(l=>{if(!a?.current)return;const g=a.current;g.focus();try{let b=null,p=0;if(l===0)b=g.firstChild,p=0;else{const k=g.querySelectorAll('page-break, [data-page-break="true"]')[l-1];k&&k.nextSibling&&(b=k.nextSibling,p=0)}if(b){const h=document.createRange(),k=window.getSelection();b.nodeType===Node.TEXT_NODE?h.setStart(b,p):h.setStart(b,0),h.collapse(!0),k.removeAllRanges(),k.addRange(h)}}catch(b){console.warn("[positionCursorAtPage] Failed to position cursor:",b)}},[a]),B=d.useCallback(l=>{if(!a?.current)return!1;const g=a.current;if(N().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const p=Array.from(g.querySelectorAll('page-break, [data-page-break="true"]'));if(l>p.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const h=window.getSelection();let k=!1,w=[],C=null;if(l===0){const E=p[0];if(!E)return console.warn("[removePageAndContent] No page break found for first page"),!1;let P=g.firstChild;for(;P&&P!==E;)w.push(P),P=P.nextSibling;C=E}else{const E=p[l-1];if(!E)return console.warn("[removePageAndContent] Page break not found"),!1;const P=p[l];let O=E.nextSibling;for(;O&&O!==P;)w.push(O),O=O.nextSibling;C=E}if(h&&h.rangeCount>0){const P=h.getRangeAt(0).startContainer;for(const O of w)if(O.contains(P)||O===P){k=!0;break}}C&&C.parentNode&&C.remove(),w.forEach(E=>{E.parentNode&&E.remove()}),g.querySelectorAll('page-break, [data-page-break="true"]').forEach((E,P)=>{E.setAttribute("data-page-number",String(P+2))}),k&&setTimeout(()=>{R(0)},50);const A=g.innerHTML;return r(Q(A)),setTimeout(()=>{S()},100),!0}catch(p){return console.error("[removePageAndContent] Failed to remove page:",p),!1}},[a,N,r,S,R]);return{calculatePageBoundaries:N,checkAndUpdateBoundaries:I,updateBoundaries:S,getCurrentPage:L,scrollToPage:y,positionCursorAtPage:R,checkAndReflow:_,triggerAutoReflow:M,removePageAndContent:B,boundaryTimeoutRef:o,reflowTimeoutRef:i}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,r,o)=>o?o.toUpperCase():r.toLowerCase()),ve=e=>{const a=Fe(e);return a.charAt(0).toUpperCase()+a.slice(1)},_e=(...e)=>e.filter((a,r,o)=>!!a&&a.trim()!==""&&o.indexOf(a)===r).join(" ").trim(),Ke=e=>{for(const a in e)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=d.forwardRef(({color:e="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:i="",children:s,iconNode:u,...v},m)=>d.createElement("svg",{ref:m,...Xe,width:a,height:a,stroke:e,strokeWidth:o?Number(r)*24/Number(a):r,className:_e("lucide",i),...!s&&!Ke(v)&&{"aria-hidden":"true"},...v},[...u.map(([_,M])=>d.createElement(_,M)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=(e,a)=>{const r=d.forwardRef(({className:o,...i},s)=>d.createElement(Ze,{ref:s,iconNode:a,className:_e(`lucide-${Je(ve(e))}`,`lucide-${e}`,o),...i}));return r.displayName=ve(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=x("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=x("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=x("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=x("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=x("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=x("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=x("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=x("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=x("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=x("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=x("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=x("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=x("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=x("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=x("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=x("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=x("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=x("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=x("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=x("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=x("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=x("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=x("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=x("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=x("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=x("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=x("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ne=({editorView:e,isCollapsed:a,onToggle:r,wordCount:o,pageCount:i})=>{const s=F.useSelector(y=>y.document),{pages:u,activePage:v,continuousContent:m,editorMode:_}=s,[M,N]=d.useState(0),[S,I]=d.useState([]);d.useEffect(()=>{if(o!==void 0&&i!==void 0){if(N(o),m){const B=document.createElement("div");B.innerHTML=m;const l=B.querySelectorAll("h1, h2, h3, h4, h5, h6"),g=Array.from(l).map((b,p)=>{const h=parseInt(b.tagName.charAt(1)),k=b.textContent.trim();return k?{id:`heading-${p}`,level:h,text:k,page:1}:null}).filter(Boolean);I(g)}return}let y=0;const R=[];u.forEach((B,l)=>{if(B.content){const g=document.createElement("div");g.innerHTML=B.content;const p=(g.textContent||g.innerText||"").trim().split(/\s+/).filter(k=>k.length>0);y+=p.length,g.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((k,w)=>{const C=parseInt(k.tagName.charAt(1)),D=k.textContent.trim();D&&R.push({id:`heading-${l}-${w}`,level:C,text:D,page:l+1})})}}),N(y),I(R)},[u,o,i,m]);const L=i!==void 0?i:u.length;return n.jsxs("aside",{className:`sidebar ${a?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[n.jsxs("div",{className:"sidebar-header",children:[n.jsxs("div",{className:"sidebar-title",children:[n.jsx(ee,{size:18}),n.jsx("h2",{children:"Document Info"})]}),n.jsx("button",{className:"sidebar-toggle",onClick:r,"aria-label":a?"Expand sidebar":"Collapse sidebar",title:a?"Expand sidebar":"Collapse sidebar",children:a?n.jsx(et,{size:16}):n.jsx(qe,{size:16})})]}),!a&&n.jsxs("div",{className:"sidebar-content",children:[n.jsxs("div",{className:"sidebar-section",children:[n.jsx("h3",{children:"Statistics"}),n.jsxs("div",{className:"stat-item",children:[n.jsxs("div",{className:"stat-label",children:[n.jsx(tt,{size:14}),n.jsx("span",{children:"Pages:"})]}),n.jsx("span",{className:"stat-value",children:L})]}),n.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[n.jsxs("div",{className:"stat-label",children:[n.jsx(nt,{size:14}),n.jsx("span",{children:"Words:"})]}),n.jsx("span",{className:"stat-value",children:M.toLocaleString()})]}),n.jsxs("div",{className:"stat-item",children:[n.jsxs("div",{className:"stat-label",children:[n.jsx(ee,{size:14}),n.jsx("span",{children:"Active Page:"})]}),n.jsx("span",{className:"stat-value",children:v+1})]})]}),S.length>0&&n.jsxs("div",{className:"sidebar-section",children:[n.jsxs("h3",{children:[n.jsx(je,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),n.jsx("div",{className:"document-outline","data-testid":"outline",children:S.map(y=>{const R=y.level===1?at:y.level===2?rt:ot;return n.jsxs("div",{className:`outline-item outline-level-${y.level}`,style:{marginLeft:`${(y.level-1)*12}px`},children:[n.jsx(R,{size:12,className:"outline-icon"}),n.jsx("span",{className:"outline-text",children:y.text}),n.jsxs("span",{className:"outline-page",children:["p.",y.page]})]},y.id)})})]}),n.jsxs("div",{className:"sidebar-section",children:[n.jsx("h3",{children:"Document"}),n.jsx("p",{children:"HTML Editor"}),n.jsx("p",{children:"Multi-page support"})]})]})]})};function jt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const a=Math.random()*16|0;return(e==="x"?a:a&3|8).toString(16)})}function Ce(e){return new Promise((a,r)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){r(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){r(new Error("Image exceeds maximum size of 5MB"));return}const i=new FileReader;i.onload=s=>{const u=s.target.result;if(u.split(",")[1].length*3/4>5*1024*1024){r(new Error("Image exceeds maximum size of 5MB"));return}try{const _=`editor-image-${jt()}`;localStorage.setItem(_,u),a(_)}catch(_){_.name==="QuotaExceededError"?r(new Error("Storage quota exceeded")):r(_)}},i.onerror=()=>{r(new Error("Error reading image file"))},i.readAsDataURL(e)})}function Nt(e){return localStorage.getItem(e)}function Ct(e){localStorage.removeItem(e)}function At(){Object.keys(localStorage).forEach(e=>{e.startsWith("editor-image-")&&localStorage.removeItem(e)})}function St(){return Object.keys(localStorage).filter(e=>e.startsWith("editor-image-"))}class Ae{constructor(a="Editor"){this.namespace=a}_format(a,r,o){return`[${new Date().toISOString()}] [${this.namespace}] [${a}] ${r}`}info(a,r){}warn(a,r){}error(a,r){}debug(a,r){}}const Se=new Ae("Editor"),Ee=({currentFormat:e,pageSize:a,onFormatText:r,onPageSizeChange:o,onAddPageBreak:i})=>{const s=async u=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(u.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(u.size>5242880){alert("Image exceeds maximum size of 5MB");return}const m=await Ce(u),_=localStorage.getItem(m);_&&(document.execCommand("insertImage",!1,_),Se.info("Image inserted",{key:m}))}catch(v){Se.error("Error uploading image",v)}};return n.jsxs("div",{className:"editor-toolbar",children:[n.jsx("button",{onClick:()=>r("bold"),className:e.bold?"active":"",title:"Bold",children:n.jsx(Qe,{size:16})}),n.jsx("button",{onClick:()=>r("italic"),className:e.italic?"active":"",title:"Italic",children:n.jsx(st,{size:16})}),n.jsx("button",{onClick:()=>r("underline"),className:e.underline?"active":"",title:"Underline",children:n.jsx(xt,{size:16})}),n.jsx("button",{onClick:()=>r("strikethrough"),className:e.strikethrough?"active":"",title:"Strikethrough",children:n.jsx(ht,{size:16})}),n.jsx("div",{className:"toolbar-separator"}),n.jsx("button",{onClick:()=>r("justifyLeft"),className:e.alignLeft?"active":"",title:"Align Left",children:n.jsx(yt,{size:16})}),n.jsx("button",{onClick:()=>r("justifyCenter"),className:e.alignCenter?"active":"",title:"Align Center",children:n.jsx(mt,{size:16})}),n.jsx("button",{onClick:()=>r("justifyRight"),className:e.alignRight?"active":"",title:"Align Right",children:n.jsx(kt,{size:16})}),n.jsx("button",{onClick:()=>r("justifyFull"),className:e.alignJustify?"active":"",title:"Justify",children:n.jsx(bt,{size:16})}),n.jsx("div",{className:"toolbar-separator"}),n.jsxs("select",{onChange:u=>r("fontName",u.target.value),defaultValue:"Arial",title:"Font Family",children:[n.jsx("option",{value:"Arial",children:"Arial"}),n.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),n.jsx("option",{value:"Courier New",children:"Courier New"}),n.jsx("option",{value:"Georgia",children:"Georgia"}),n.jsx("option",{value:"Verdana",children:"Verdana"})]}),n.jsxs("select",{onChange:u=>r("fontSize",u.target.value),defaultValue:"16px",title:"Font Size",children:[n.jsx("option",{value:"10px",children:"10"}),n.jsx("option",{value:"12px",children:"12"}),n.jsx("option",{value:"14px",children:"14"}),n.jsx("option",{value:"16px",children:"16"}),n.jsx("option",{value:"18px",children:"18"}),n.jsx("option",{value:"24px",children:"24"}),n.jsx("option",{value:"32px",children:"32"})]}),n.jsx("div",{className:"toolbar-separator"}),n.jsx("button",{onClick:()=>r("insertUnorderedList"),title:"Bullet List",children:n.jsx(je,{size:16})}),n.jsx("button",{onClick:()=>r("insertOrderedList"),title:"Numbered List",children:n.jsx(ct,{size:16})}),n.jsx("button",{onClick:()=>r("insertCheckList"),title:"Checklist",children:n.jsx(pt,{size:16})}),n.jsx("div",{className:"toolbar-separator"}),n.jsx("button",{onClick:()=>{const u=prompt("Enter URL:");u&&r("createLink",u)},title:"Insert Link",children:n.jsx(lt,{size:16})}),n.jsx("button",{onClick:()=>r("insertHTML",'<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>'),title:"Insert Table",children:n.jsx(ft,{size:16})}),i&&n.jsx("button",{onClick:i,title:"Insert Page Break",children:n.jsx(ee,{size:16})}),n.jsx("div",{className:"toolbar-separator"}),n.jsx("button",{onClick:()=>r("undo"),title:"Undo",children:n.jsx(vt,{size:16})}),n.jsx("button",{onClick:()=>r("redo"),title:"Redo",children:n.jsx(ut,{size:16})}),n.jsx("div",{className:"toolbar-separator"}),n.jsx("input",{type:"file",accept:"image/*",onChange:u=>u.target.files[0]&&s(u.target.files[0]),style:{display:"none"},id:"image-upload"}),n.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:n.jsx(it,{size:16})}),n.jsx("div",{className:"toolbar-separator"}),n.jsxs("select",{value:a,onChange:u=>o(u.target.value),title:"Page Size",children:[n.jsx("option",{value:"A4",children:"A4"}),n.jsx("option",{value:"Letter",children:"Letter"}),n.jsx("option",{value:"Legal",children:"Legal"})]})]})},Pe=({content:e,dimensions:a,pageSize:r,pageBoundaries:o=[],editorRef:i,onInput:s,onKeyDown:u,onClick:v,onScroll:m})=>{const _={top:60,bottom:100,left:72,right:72},M=N=>{const S=window.getSelection();if(!S||S.rangeCount===0)return;const I=S.getRangeAt(0),{startContainer:L,endContainer:y}=I,R=B=>B?B.nodeType===Node.ELEMENT_NODE?B.tagName==="PAGE-BREAK"||B.getAttribute("data-page-break")==="true":B.parentElement&&R(B.parentElement):!1;if((N.key==="Backspace"||N.key==="Delete")&&(R(L)||R(y)))return N.preventDefault(),!1;u&&u(N)};return n.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${a.width}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh"},children:n.jsx("div",{ref:i,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${a.height}px`,backgroundColor:"white",padding:`${_.top}px ${_.right}px ${_.bottom}px ${_.left}px`,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:"Arial, sans-serif",fontSize:"16px",lineHeight:"1.6",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:s,onKeyDown:M,onClick:v,onScroll:m,"data-testid":"continuous-editor"})})},we=({pages:e,activePage:a,pageSize:r,onNavigate:o,onAddPage:i,onDeletePage:s,onPageSizeChange:u})=>n.jsxs("div",{className:"page-manager",children:[n.jsxs("div",{className:"page-size-controls",children:[n.jsxs("label",{htmlFor:"page-size-selector",children:[n.jsx(gt,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Size:"]}),n.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:r,onChange:v=>u(v.target.value),children:[n.jsx("option",{value:"A4",children:"A4"}),n.jsx("option",{value:"Letter",children:"Letter"}),n.jsx("option",{value:"Legal",children:"Legal"})]})]}),n.jsx("div",{className:"page-list",children:e.map((v,m)=>n.jsxs("div",{className:"page-item",children:[n.jsxs("button",{type:"button",className:`page-button ${m===a?"active":""}`,onClick:()=>o(m),"aria-label":`Go to page ${m+1}`,children:[n.jsx(ee,{size:14}),n.jsxs("span",{children:["Page ",m+1]})]}),e.length>1&&n.jsx("button",{type:"button",className:"delete-page-button",onClick:_=>{_.stopPropagation(),s(m)},"aria-label":`Delete page ${m+1}`,title:"Delete this page and its content",children:n.jsx(_t,{size:14})})]},v.id))}),n.jsxs("button",{type:"button",className:"add-page-button",onClick:i,"aria-label":"Add new page",children:[n.jsx(dt,{size:16}),n.jsx("span",{children:"Add Page"})]})]}),Te={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},Et=({pageManagerComponent:e=null,onNavigatePage:a,onAddPage:r,onDeletePage:o,onPageSizeChange:i,showSidebar:s=!0,showToolbar:u=!0,showPageManager:v=!0})=>{const m=F.useDispatch(),_=F.useSelector(t=>t.document),{pageSize:M,continuousContent:N,pageBoundaries:S,activePage:I}=_,L=d.useRef(null),y=d.useRef(null),{currentFormat:R,formatText:B}=be(),{checkAndUpdateBoundaries:l,getCurrentPage:g,scrollToPage:b,positionCursorAtPage:p,updateBoundaries:h,triggerAutoReflow:k,removePageAndContent:w}=xe(M,y),C=Te[M]||Te.A4,[D,A]=d.useState(!1);d.useEffect(()=>{y.current&&y.current.innerHTML!==N&&(y.current.innerHTML=N,setTimeout(()=>{h()},100))},[N,h]),d.useEffect(()=>{const t=setTimeout(()=>{y.current&&y.current.focus()},200);return()=>clearTimeout(t)},[]);const E=d.useCallback(t=>{const c=t.currentTarget.innerHTML;m(Q(c)),l(),k();const j=g();j!==I&&m($(j))},[l,m,g,I,k]),P=d.useCallback(t=>{m(fe(t)),h({pageSize:t}),i&&i(t)},[m,h,i]),O=d.useCallback(t=>{m($(t)),b(t,L),a&&a(t)},[m,b,a]),U=d.useCallback(()=>{m(ke({position:"end"})),setTimeout(()=>{h()},100),r&&r()},[m,h,r]),te=d.useCallback(()=>{const t=window.getSelection();if(t&&t.rangeCount>0){if(!y?.current)return;const T=`<page-break data-page-break="true" contenteditable="false" data-page-number="${y.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,T),setTimeout(()=>{h()},100)}},[h,y]),J=d.useCallback(t=>{if(S.length<=1){console.warn("Cannot delete the only page");return}w(t)&&(m($(0)),o&&o(t))},[S.length,w,m,o]),ne=d.useCallback(()=>{if(!L.current||!y.current)return;const t=g();t!==I&&m($(t))},[g,I,m]),ae=N?(N.replace(/<[^>]*>/g," ").match(/\b\w+\b/g)||[]).length:0,re=S.length||1;return n.jsxs("div",{className:"multi-page-editor",children:[u&&n.jsx(Ee,{currentFormat:R,pageSize:M,onFormatText:B,onPageSizeChange:P,onAddPageBreak:te}),n.jsxs("div",{className:"editor-container",children:[s&&n.jsx(Ne,{editorView:null,isCollapsed:D,onToggle:()=>A(t=>!t),wordCount:ae,pageCount:re}),n.jsx("div",{className:"editor-viewport continuous-scroll",ref:L,onScroll:ne,children:n.jsx(Pe,{content:N,dimensions:C,pageSize:M,pageBoundaries:S,editorRef:y,onInput:E,onClick:()=>y.current?.focus()})}),v&&n.jsx("div",{className:"page-manager-sidebar",children:e?d.cloneElement(e,{pages:S.map((t,c)=>({id:t.id,index:c,size:M})),activePage:I,pageSize:M,onNavigate:O,onAddPage:U,onDeletePage:J,onPageSizeChange:P}):n.jsx(we,{pages:S.map((t,c)=>({id:t.id,index:c,size:M})),activePage:I,pageSize:M,onNavigate:O,onAddPage:U,onDeletePage:J,onPageSizeChange:P})})]})]})},Pt={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}};f.ContentEditableEditor=Et,f.ContinuousPageView=Pe,f.EditorToolbar=Ee,f.PAGE_DIMENSIONS=Pt,f.PageManager=we,f.Sidebar=Ne,f.addPage=Ue,f.addPageBreak=ke,f.clearImages=At,f.deleteImage=Ct,f.deletePage=Ve,f.documentReducer=$e,f.getAllImageKeys=St,f.getImage=Nt,f.initializeDocument=Oe,f.logger=Ae,f.removePageBreak=We,f.resetDocument=Ge,f.saveImage=Ce,f.setActivePage=$,f.setEditorMode=Ye,f.updateContinuousContent=Q,f.updatePageBoundaries=me,f.updatePageContent=De,f.updatePageSize=fe,f.updatePages=He,f.updateTitle=Le,f.useContinuousReflow=xe,f.useFormatting=be,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
