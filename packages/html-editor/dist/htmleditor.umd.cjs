(function(J,m){typeof exports=="object"&&typeof module<"u"?m(exports,require("react"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","react","uuid"],m):(J=typeof globalThis<"u"?globalThis:J||self,m(J.HTMLEditor={},J.React,J.uuid))})(this,(function(J,m,ve){"use strict";function yt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ue={exports:{}},ie={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Be;function Et(){if(Be)return ie;Be=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function l(t,i,c){var a=null;if(c!==void 0&&(a=""+c),i.key!==void 0&&(a=""+i.key),"key"in i){c={};for(var d in i)d!=="key"&&(c[d]=i[d])}else c=i;return i=c.ref,{$$typeof:e,type:t,key:a,ref:i!==void 0?i:null,props:c}}return ie.Fragment=r,ie.jsx=l,ie.jsxs=l,ie}var se={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ue;function bt(){return Ue||(Ue=1,process.env.NODE_ENV!=="production"&&(function(){function e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===W?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case S:return"Profiler";case b:return"StrictMode";case P:return"Suspense";case C:return"SuspenseList";case U:return"Activity"}if(typeof n=="object")switch(typeof n.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),n.$$typeof){case R:return"Portal";case g:return n.displayName||"Context";case N:return(n._context.displayName||"Context")+".Consumer";case s:var p=n.render;return n=n.displayName,n||(n=p.displayName||p.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case z:return p=n.displayName||null,p!==null?p:e(n.type)||"Memo";case M:p=n._payload,n=n._init;try{return e(n(p))}catch{}}return null}function r(n){return""+n}function l(n){try{r(n);var p=!1}catch{p=!0}if(p){p=console;var A=p.error,T=typeof Symbol=="function"&&Symbol.toStringTag&&n[Symbol.toStringTag]||n.constructor.name||"Object";return A.call(p,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",T),r(n)}}function t(n){if(n===D)return"<>";if(typeof n=="object"&&n!==null&&n.$$typeof===M)return"<...>";try{var p=e(n);return p?"<"+p+">":"<...>"}catch{return"<...>"}}function i(){var n=ne.A;return n===null?null:n.getOwner()}function c(){return Error("react-stack-top-frame")}function a(n){if(Q.call(n,"key")){var p=Object.getOwnPropertyDescriptor(n,"key").get;if(p&&p.isReactWarning)return!1}return n.key!==void 0}function d(n,p){function A(){V||(V=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",p))}A.isReactWarning=!0,Object.defineProperty(n,"key",{get:A,configurable:!0})}function E(){var n=e(this.type);return ee[n]||(ee[n]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),n=this.props.ref,n!==void 0?n:null}function y(n,p,A,T,I,w){var v=A.ref;return n={$$typeof:q,type:n,key:p,props:A,_owner:T},(v!==void 0?v:null)!==null?Object.defineProperty(n,"ref",{enumerable:!1,get:E}):Object.defineProperty(n,"ref",{enumerable:!1,value:null}),n._store={},Object.defineProperty(n._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(n,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(n,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:I}),Object.defineProperty(n,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:w}),Object.freeze&&(Object.freeze(n.props),Object.freeze(n)),n}function _(n,p,A,T,I,w){var v=p.children;if(v!==void 0)if(T)if(H(v)){for(T=0;T<v.length;T++)h(v[T]);Object.freeze&&Object.freeze(v)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else h(v);if(Q.call(p,"key")){v=e(n);var O=Object.keys(p).filter(function(B){return B!=="key"});T=0<O.length?"{key: someKey, "+O.join(": ..., ")+": ...}":"{key: someKey}",f[v+T]||(O=0<O.length?"{"+O.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,T,v,O,v),f[v+T]=!0)}if(v=null,A!==void 0&&(l(A),v=""+A),a(p)&&(l(p.key),v=""+p.key),"key"in p){A={};for(var $ in p)$!=="key"&&(A[$]=p[$])}else A=p;return v&&d(A,typeof n=="function"?n.displayName||n.name||"Unknown":n),y(n,v,A,i(),I,w)}function h(n){j(n)?n._store&&(n._store.validated=1):typeof n=="object"&&n!==null&&n.$$typeof===M&&(n._payload.status==="fulfilled"?j(n._payload.value)&&n._payload.value._store&&(n._payload.value._store.validated=1):n._store&&(n._store.validated=1))}function j(n){return typeof n=="object"&&n!==null&&n.$$typeof===q}var k=m,q=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),g=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),W=Symbol.for("react.client.reference"),ne=k.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=Object.prototype.hasOwnProperty,H=Array.isArray,G=console.createTask?console.createTask:function(){return null};k={react_stack_bottom_frame:function(n){return n()}};var V,ee={},re=k.react_stack_bottom_frame.bind(k,c)(),K=G(t(c)),f={};se.Fragment=D,se.jsx=function(n,p,A){var T=1e4>ne.recentlyCreatedOwnerStacks++;return _(n,p,A,!1,T?Error("react-stack-top-frame"):re,T?G(t(n)):K)},se.jsxs=function(n,p,A){var T=1e4>ne.recentlyCreatedOwnerStacks++;return _(n,p,A,!0,T?Error("react-stack-top-frame"):re,T?G(t(n)):K)}})()),se}var qe;function vt(){return qe||(qe=1,process.env.NODE_ENV==="production"?ue.exports=Et():ue.exports=bt()),ue.exports}var o=vt();const _e=100,xe=50,Te=200,Ge=5,Ae=e=>e<Te,ke=e=>e>xe,ce="A4",ae="<p><br></p>",_t="continuous",Pe={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},le=(e,r=ce)=>({id:ve.v4(),index:e,size:r,content:ae,images:[],isBreakPoint:!1}),de=e=>typeof e!="string"||e.trim()===""?ae:e,He=(e,r=ce)=>(e.length>0?e:[le(0,r)]).map((t,i)=>({id:t.id||ve.v4(),index:i,size:t.size||r,content:de(t.content),images:t.images||[],isBreakPoint:!!t.isBreakPoint})),xt=(e=ce)=>[{id:"page-0",pageNumber:1,top:0,height:(Pe[e]||Pe.A4).height}],Ce=(e={})=>{const r=new Date().toISOString(),l=e.pageSize||ce,t=He(e.pages||[le(0,l)],l);return{id:ve.v4(),title:e.title||"Untitled Document",createdAt:r,updatedAt:r,pageSize:l,pages:t,activePage:e.activePage&&e.activePage<t.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:t.length,editorMode:e.editorMode||_t,continuousContent:e.continuousContent||ae,pageBoundaries:e.pageBoundaries||xt(l),zoomLevel:e.zoomLevel||_e}},L={INITIALIZE_DOCUMENT:"INITIALIZE_DOCUMENT",UPDATE_TITLE:"UPDATE_TITLE",UPDATE_PAGE_CONTENT:"UPDATE_PAGE_CONTENT",UPDATE_PAGES:"UPDATE_PAGES",ADD_PAGE:"ADD_PAGE",DELETE_PAGE:"DELETE_PAGE",SET_ACTIVE_PAGE:"SET_ACTIVE_PAGE",UPDATE_PAGE_SIZE:"UPDATE_PAGE_SIZE",RESET_DOCUMENT:"RESET_DOCUMENT",UPDATE_CONTINUOUS_CONTENT:"UPDATE_CONTINUOUS_CONTENT",UPDATE_PAGE_BOUNDARIES:"UPDATE_PAGE_BOUNDARIES",ADD_PAGE_BREAK:"ADD_PAGE_BREAK",REMOVE_PAGE_BREAK:"REMOVE_PAGE_BREAK",SET_EDITOR_MODE:"SET_EDITOR_MODE",INSERT_PAGE_AT:"INSERT_PAGE_AT",MOVE_PAGE_TO:"MOVE_PAGE_TO",DUPLICATE_PAGE:"DUPLICATE_PAGE",SET_ZOOM_LEVEL:"SET_ZOOM_LEVEL",ZOOM_IN:"ZOOM_IN",ZOOM_OUT:"ZOOM_OUT",RESET_ZOOM:"RESET_ZOOM"},Tt=(e,r)=>{const l=new Date().toISOString();switch(r.type){case L.INITIALIZE_DOCUMENT:{const{initialContent:t=ae,pageSize:i=ce}=r.payload||{},c={...le(0,i),content:de(t)};return Ce({title:e.title,pageSize:i,pages:[c]})}case L.UPDATE_TITLE:return{...e,title:r.payload,updatedAt:l};case L.UPDATE_PAGE_CONTENT:{const{pageIndex:t,content:i}=r.payload;if(t<0||t>=e.pages.length)return e;const c=[...e.pages];return c[t]={...c[t],content:de(i)},{...e,pages:c,updatedAt:l}}case L.UPDATE_PAGES:{const t=Array.isArray(r.payload)?{pages:r.payload}:r.payload||{},i=He(t.pages||[],e.pageSize),c=Array.isArray(t.pageBreaks)?t.pageBreaks:i.slice(0,-1).map((a,d)=>({id:`auto-break-${d}`,pageNumber:d+1}));return{...e,pages:i,activePage:Math.min(e.activePage,i.length-1),pageBreaks:c,totalPages:i.length,updatedAt:l}}case L.ADD_PAGE:{const t=typeof r.payload?.index=="number"?Math.min(Math.max(r.payload.index,0),e.pages.length):e.pages.length,i=[...e.pages];i.splice(t,0,le(t,e.pageSize));const c=i.map((d,E)=>({...d,index:E,size:e.pageSize})),a=c.slice(0,-1).map((d,E)=>({id:`auto-break-${E}`,pageNumber:E+1}));return{...e,pages:c,activePage:t,pageBreaks:a,totalPages:c.length,updatedAt:l}}case L.DELETE_PAGE:{const t=r.payload;if(e.pages.length<=1)return e;const i=[...e.pages];i.splice(t,1);const c=i.map((E,y)=>({...E,index:y,size:e.pageSize}));let a=e.activePage;a>=c.length?a=c.length-1:t<=a&&a>0&&(a-=1);const d=c.slice(0,-1).map((E,y)=>({id:`auto-break-${y}`,pageNumber:y+1}));return{...e,pages:c,activePage:a,pageBreaks:d,totalPages:c.length,updatedAt:l}}case L.SET_ACTIVE_PAGE:{const t=r.payload;if(t===e.activePage)return e;const i=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;return t<0||t>=i?e:{...e,activePage:t,updatedAt:l}}case L.UPDATE_PAGE_SIZE:{const t=r.payload;if(t===e.pageSize)return e;if(!Pe[t])return console.warn(`Invalid page size: ${t}`),e;const i=e.pages.map((a,d)=>({...a,index:d,size:t})),c=i.slice(0,-1).map((a,d)=>({id:`auto-break-${d}`,pageNumber:d+1}));return{...e,pageSize:t,pages:i,pageBreaks:c,updatedAt:l}}case L.RESET_DOCUMENT:return Ce();case L.UPDATE_CONTINUOUS_CONTENT:{const t=de(r.payload);return t===e.continuousContent?e:{...e,continuousContent:t,updatedAt:l}}case L.UPDATE_PAGE_BOUNDARIES:{const t=Array.isArray(r.payload)?r.payload:[];if(t.length===e.pageBoundaries.length&&t.length>0&&t[0].id===e.pageBoundaries[0]?.id&&t[t.length-1].id===e.pageBoundaries[t.length-1]?.id)return e;const i=e.activePage>=t.length?Math.max(0,t.length-1):e.activePage;return{...e,pageBoundaries:t,totalPages:t.length,activePage:i,updatedAt:l}}case L.ADD_PAGE_BREAK:{const{position:t="end",pageIndex:i}=r.payload||{},c='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';let a=e.continuousContent;if(t==="end")a=a+c+"<p><br></p>";else if(typeof t=="number"){const d=a.substring(0,t),E=a.substring(t);a=d+c+E}else if(typeof i=="number"&&typeof document<"u"){const d=document.createElement("div");d.innerHTML=a;const E=d.querySelectorAll('page-break, [data-page-break="true"]');if(i===0&&E.length===0)a=a+c+"<p><br></p>";else if(i<E.length){const y=E[i],_=document.createElement("page-break");_.setAttribute("data-page-break","true"),_.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const h=document.createElement("p");h.innerHTML="<br>",y.parentNode.insertBefore(_,y.nextSibling),_.parentNode.insertBefore(h,_.nextSibling),a=d.innerHTML}else a=a+c+"<p><br></p>"}return{...e,continuousContent:a,updatedAt:l}}case L.REMOVE_PAGE_BREAK:{const{pageIndex:t}=r.payload||{};if(typeof t!="number"||typeof document>"u")return e;const i=document.createElement("div");i.innerHTML=e.continuousContent;const c=i.querySelectorAll('page-break, [data-page-break="true"]');return c[t]&&c[t].remove(),i.querySelectorAll('page-break, [data-page-break="true"]').forEach((d,E)=>{d.setAttribute("data-page-number",String(E+2))}),{...e,continuousContent:i.innerHTML,updatedAt:l}}case L.SET_EDITOR_MODE:{const t=r.payload;if(t===e.editorMode)return e;let i=e.continuousContent,c=e.pages;return t==="continuous"?i=e.pages.map(d=>d.content).filter(d=>d&&d!==ae).join(`
`)||ae:e.continuousContent&&e.continuousContent!==ae&&(c=[{...le(0,e.pageSize),content:e.continuousContent}]),{...e,editorMode:t,continuousContent:i,pages:c,updatedAt:l}}case L.SET_ZOOM_LEVEL:{const t=r.payload;return t<xe||t>Te?(console.warn(`Invalid zoom level: ${t}. Must be between ${xe} and ${Te}.`),e):t===e.zoomLevel?e:{...e,zoomLevel:t,updatedAt:l}}case L.ZOOM_IN:{if(!Ae(e.zoomLevel))return e;const t=e.zoomLevel+Ge;return{...e,zoomLevel:t,updatedAt:l}}case L.ZOOM_OUT:{if(!ke(e.zoomLevel))return e;const t=e.zoomLevel-Ge;return{...e,zoomLevel:t,updatedAt:l}}case L.RESET_ZOOM:return e.zoomLevel===_e?e:{...e,zoomLevel:_e,updatedAt:l};default:return e}},Ze=m.createContext(null),At=({children:e,initialState:r={}})=>{const[l,t]=m.useReducer(Tt,Ce(r)),i=m.useMemo(()=>({initializeDocument:a=>t({type:L.INITIALIZE_DOCUMENT,payload:a}),updateTitle:a=>t({type:L.UPDATE_TITLE,payload:a}),updatePageContent:a=>t({type:L.UPDATE_PAGE_CONTENT,payload:a}),updatePages:a=>t({type:L.UPDATE_PAGES,payload:a}),addPage:a=>t({type:L.ADD_PAGE,payload:a}),deletePage:a=>t({type:L.DELETE_PAGE,payload:a}),setActivePage:a=>t({type:L.SET_ACTIVE_PAGE,payload:a}),updatePageSize:a=>t({type:L.UPDATE_PAGE_SIZE,payload:a}),resetDocument:()=>t({type:L.RESET_DOCUMENT}),updateContinuousContent:a=>t({type:L.UPDATE_CONTINUOUS_CONTENT,payload:a}),updatePageBoundaries:a=>t({type:L.UPDATE_PAGE_BOUNDARIES,payload:a}),addPageBreak:a=>t({type:L.ADD_PAGE_BREAK,payload:a}),removePageBreak:a=>t({type:L.REMOVE_PAGE_BREAK,payload:a}),setEditorMode:a=>t({type:L.SET_EDITOR_MODE,payload:a}),insertPageAt:a=>t({type:L.INSERT_PAGE_AT,payload:a}),movePageTo:a=>t({type:L.MOVE_PAGE_TO,payload:a}),duplicatePage:a=>t({type:L.DUPLICATE_PAGE,payload:a}),setZoomLevel:a=>t({type:L.SET_ZOOM_LEVEL,payload:a}),zoomIn:()=>t({type:L.ZOOM_IN}),zoomOut:()=>t({type:L.ZOOM_OUT}),resetZoom:()=>t({type:L.RESET_ZOOM})}),[]),c=m.useMemo(()=>({state:l,actions:i,dispatch:t}),[l,i]);return o.jsx(Ze.Provider,{value:c,children:e})},Se=()=>{const e=m.useContext(Ze);if(!e)throw new Error("useDocument must be used within a DocumentProvider");return e},we=()=>{const{state:e}=Se();return e},Oe=()=>{const{actions:e}=Se();return e};var fe={exports:{}},pe={exports:{}},Z={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ye;function kt(){if(Ye)return Z;Ye=1;var e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,l=e?Symbol.for("react.portal"):60106,t=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,c=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,E=e?Symbol.for("react.async_mode"):60111,y=e?Symbol.for("react.concurrent_mode"):60111,_=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,j=e?Symbol.for("react.suspense_list"):60120,k=e?Symbol.for("react.memo"):60115,q=e?Symbol.for("react.lazy"):60116,R=e?Symbol.for("react.block"):60121,D=e?Symbol.for("react.fundamental"):60117,b=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function N(s){if(typeof s=="object"&&s!==null){var P=s.$$typeof;switch(P){case r:switch(s=s.type,s){case E:case y:case t:case c:case i:case h:return s;default:switch(s=s&&s.$$typeof,s){case d:case _:case q:case k:case a:return s;default:return P}}case l:return P}}}function g(s){return N(s)===y}return Z.AsyncMode=E,Z.ConcurrentMode=y,Z.ContextConsumer=d,Z.ContextProvider=a,Z.Element=r,Z.ForwardRef=_,Z.Fragment=t,Z.Lazy=q,Z.Memo=k,Z.Portal=l,Z.Profiler=c,Z.StrictMode=i,Z.Suspense=h,Z.isAsyncMode=function(s){return g(s)||N(s)===E},Z.isConcurrentMode=g,Z.isContextConsumer=function(s){return N(s)===d},Z.isContextProvider=function(s){return N(s)===a},Z.isElement=function(s){return typeof s=="object"&&s!==null&&s.$$typeof===r},Z.isForwardRef=function(s){return N(s)===_},Z.isFragment=function(s){return N(s)===t},Z.isLazy=function(s){return N(s)===q},Z.isMemo=function(s){return N(s)===k},Z.isPortal=function(s){return N(s)===l},Z.isProfiler=function(s){return N(s)===c},Z.isStrictMode=function(s){return N(s)===i},Z.isSuspense=function(s){return N(s)===h},Z.isValidElementType=function(s){return typeof s=="string"||typeof s=="function"||s===t||s===y||s===c||s===i||s===h||s===j||typeof s=="object"&&s!==null&&(s.$$typeof===q||s.$$typeof===k||s.$$typeof===a||s.$$typeof===d||s.$$typeof===_||s.$$typeof===D||s.$$typeof===b||s.$$typeof===S||s.$$typeof===R)},Z.typeOf=N,Z}var Y={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ve;function Pt(){return Ve||(Ve=1,process.env.NODE_ENV!=="production"&&(function(){var e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,l=e?Symbol.for("react.portal"):60106,t=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,c=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,E=e?Symbol.for("react.async_mode"):60111,y=e?Symbol.for("react.concurrent_mode"):60111,_=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,j=e?Symbol.for("react.suspense_list"):60120,k=e?Symbol.for("react.memo"):60115,q=e?Symbol.for("react.lazy"):60116,R=e?Symbol.for("react.block"):60121,D=e?Symbol.for("react.fundamental"):60117,b=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function N(u){return typeof u=="string"||typeof u=="function"||u===t||u===y||u===c||u===i||u===h||u===j||typeof u=="object"&&u!==null&&(u.$$typeof===q||u.$$typeof===k||u.$$typeof===a||u.$$typeof===d||u.$$typeof===_||u.$$typeof===D||u.$$typeof===b||u.$$typeof===S||u.$$typeof===R)}function g(u){if(typeof u=="object"&&u!==null){var X=u.$$typeof;switch(X){case r:var oe=u.type;switch(oe){case E:case y:case t:case c:case i:case h:return oe;default:var be=oe&&oe.$$typeof;switch(be){case d:case _:case q:case k:case a:return be;default:return X}}case l:return X}}}var s=E,P=y,C=d,z=a,M=r,U=_,W=t,ne=q,Q=k,H=l,G=c,V=i,ee=h,re=!1;function K(u){return re||(re=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),f(u)||g(u)===E}function f(u){return g(u)===y}function n(u){return g(u)===d}function p(u){return g(u)===a}function A(u){return typeof u=="object"&&u!==null&&u.$$typeof===r}function T(u){return g(u)===_}function I(u){return g(u)===t}function w(u){return g(u)===q}function v(u){return g(u)===k}function O(u){return g(u)===l}function $(u){return g(u)===c}function B(u){return g(u)===i}function te(u){return g(u)===h}Y.AsyncMode=s,Y.ConcurrentMode=P,Y.ContextConsumer=C,Y.ContextProvider=z,Y.Element=M,Y.ForwardRef=U,Y.Fragment=W,Y.Lazy=ne,Y.Memo=Q,Y.Portal=H,Y.Profiler=G,Y.StrictMode=V,Y.Suspense=ee,Y.isAsyncMode=K,Y.isConcurrentMode=f,Y.isContextConsumer=n,Y.isContextProvider=p,Y.isElement=A,Y.isForwardRef=T,Y.isFragment=I,Y.isLazy=w,Y.isMemo=v,Y.isPortal=O,Y.isProfiler=$,Y.isStrictMode=B,Y.isSuspense=te,Y.isValidElementType=N,Y.typeOf=g})()),Y}var Fe;function We(){return Fe||(Fe=1,process.env.NODE_ENV==="production"?pe.exports=kt():pe.exports=Pt()),pe.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ne,Ke;function Ct(){if(Ke)return Ne;Ke=1;var e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;function t(c){if(c==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(c)}function i(){try{if(!Object.assign)return!1;var c=new String("abc");if(c[5]="de",Object.getOwnPropertyNames(c)[0]==="5")return!1;for(var a={},d=0;d<10;d++)a["_"+String.fromCharCode(d)]=d;var E=Object.getOwnPropertyNames(a).map(function(_){return a[_]});if(E.join("")!=="0123456789")return!1;var y={};return"abcdefghijklmnopqrst".split("").forEach(function(_){y[_]=_}),Object.keys(Object.assign({},y)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Ne=i()?Object.assign:function(c,a){for(var d,E=t(c),y,_=1;_<arguments.length;_++){d=Object(arguments[_]);for(var h in d)r.call(d,h)&&(E[h]=d[h]);if(e){y=e(d);for(var j=0;j<y.length;j++)l.call(d,y[j])&&(E[y[j]]=d[y[j]])}}return E},Ne}var je,Je;function Re(){if(Je)return je;Je=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return je=e,je}var Me,Xe;function Qe(){return Xe||(Xe=1,Me=Function.call.bind(Object.prototype.hasOwnProperty)),Me}var Ie,et;function St(){if(et)return Ie;et=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var r=Re(),l={},t=Qe();e=function(c){var a="Warning: "+c;typeof console<"u"&&console.error(a);try{throw new Error(a)}catch{}}}function i(c,a,d,E,y){if(process.env.NODE_ENV!=="production"){for(var _ in c)if(t(c,_)){var h;try{if(typeof c[_]!="function"){var j=Error((E||"React class")+": "+d+" type `"+_+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof c[_]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw j.name="Invariant Violation",j}h=c[_](a,_,E,d,null,r)}catch(q){h=q}if(h&&!(h instanceof Error)&&e((E||"React class")+": type specification of "+d+" `"+_+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof h+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),h instanceof Error&&!(h.message in l)){l[h.message]=!0;var k=y?y():"";e("Failed "+d+" type: "+h.message+(k??""))}}}}return i.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(l={})},Ie=i,Ie}var De,tt;function wt(){if(tt)return De;tt=1;var e=We(),r=Ct(),l=Re(),t=Qe(),i=St(),c=function(){};process.env.NODE_ENV!=="production"&&(c=function(d){var E="Warning: "+d;typeof console<"u"&&console.error(E);try{throw new Error(E)}catch{}});function a(){return null}return De=function(d,E){var y=typeof Symbol=="function"&&Symbol.iterator,_="@@iterator";function h(f){var n=f&&(y&&f[y]||f[_]);if(typeof n=="function")return n}var j="<<anonymous>>",k={array:b("array"),bigint:b("bigint"),bool:b("boolean"),func:b("function"),number:b("number"),object:b("object"),string:b("string"),symbol:b("symbol"),any:S(),arrayOf:N,element:g(),elementType:s(),instanceOf:P,node:U(),objectOf:z,oneOf:C,oneOfType:M,shape:ne,exact:Q};function q(f,n){return f===n?f!==0||1/f===1/n:f!==f&&n!==n}function R(f,n){this.message=f,this.data=n&&typeof n=="object"?n:{},this.stack=""}R.prototype=Error.prototype;function D(f){if(process.env.NODE_ENV!=="production")var n={},p=0;function A(I,w,v,O,$,B,te){if(O=O||j,B=B||v,te!==l){if(E){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var X=O+":"+v;!n[X]&&p<3&&(c("You are manually calling a React.PropTypes validation function for the `"+B+"` prop on `"+O+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[X]=!0,p++)}}return w[v]==null?I?w[v]===null?new R("The "+$+" `"+B+"` is marked as required "+("in `"+O+"`, but its value is `null`.")):new R("The "+$+" `"+B+"` is marked as required in "+("`"+O+"`, but its value is `undefined`.")):null:f(w,v,O,$,B)}var T=A.bind(null,!1);return T.isRequired=A.bind(null,!0),T}function b(f){function n(p,A,T,I,w,v){var O=p[A],$=V(O);if($!==f){var B=ee(O);return new R("Invalid "+I+" `"+w+"` of type "+("`"+B+"` supplied to `"+T+"`, expected ")+("`"+f+"`."),{expectedType:f})}return null}return D(n)}function S(){return D(a)}function N(f){function n(p,A,T,I,w){if(typeof f!="function")return new R("Property `"+w+"` of component `"+T+"` has invalid PropType notation inside arrayOf.");var v=p[A];if(!Array.isArray(v)){var O=V(v);return new R("Invalid "+I+" `"+w+"` of type "+("`"+O+"` supplied to `"+T+"`, expected an array."))}for(var $=0;$<v.length;$++){var B=f(v,$,T,I,w+"["+$+"]",l);if(B instanceof Error)return B}return null}return D(n)}function g(){function f(n,p,A,T,I){var w=n[p];if(!d(w)){var v=V(w);return new R("Invalid "+T+" `"+I+"` of type "+("`"+v+"` supplied to `"+A+"`, expected a single ReactElement."))}return null}return D(f)}function s(){function f(n,p,A,T,I){var w=n[p];if(!e.isValidElementType(w)){var v=V(w);return new R("Invalid "+T+" `"+I+"` of type "+("`"+v+"` supplied to `"+A+"`, expected a single ReactElement type."))}return null}return D(f)}function P(f){function n(p,A,T,I,w){if(!(p[A]instanceof f)){var v=f.name||j,O=K(p[A]);return new R("Invalid "+I+" `"+w+"` of type "+("`"+O+"` supplied to `"+T+"`, expected ")+("instance of `"+v+"`."))}return null}return D(n)}function C(f){if(!Array.isArray(f))return process.env.NODE_ENV!=="production"&&(arguments.length>1?c("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):c("Invalid argument supplied to oneOf, expected an array.")),a;function n(p,A,T,I,w){for(var v=p[A],O=0;O<f.length;O++)if(q(v,f[O]))return null;var $=JSON.stringify(f,function(te,u){var X=ee(u);return X==="symbol"?String(u):u});return new R("Invalid "+I+" `"+w+"` of value `"+String(v)+"` "+("supplied to `"+T+"`, expected one of "+$+"."))}return D(n)}function z(f){function n(p,A,T,I,w){if(typeof f!="function")return new R("Property `"+w+"` of component `"+T+"` has invalid PropType notation inside objectOf.");var v=p[A],O=V(v);if(O!=="object")return new R("Invalid "+I+" `"+w+"` of type "+("`"+O+"` supplied to `"+T+"`, expected an object."));for(var $ in v)if(t(v,$)){var B=f(v,$,T,I,w+"."+$,l);if(B instanceof Error)return B}return null}return D(n)}function M(f){if(!Array.isArray(f))return process.env.NODE_ENV!=="production"&&c("Invalid argument supplied to oneOfType, expected an instance of array."),a;for(var n=0;n<f.length;n++){var p=f[n];if(typeof p!="function")return c("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+re(p)+" at index "+n+"."),a}function A(T,I,w,v,O){for(var $=[],B=0;B<f.length;B++){var te=f[B],u=te(T,I,w,v,O,l);if(u==null)return null;u.data&&t(u.data,"expectedType")&&$.push(u.data.expectedType)}var X=$.length>0?", expected one of type ["+$.join(", ")+"]":"";return new R("Invalid "+v+" `"+O+"` supplied to "+("`"+w+"`"+X+"."))}return D(A)}function U(){function f(n,p,A,T,I){return H(n[p])?null:new R("Invalid "+T+" `"+I+"` supplied to "+("`"+A+"`, expected a ReactNode."))}return D(f)}function W(f,n,p,A,T){return new R((f||"React class")+": "+n+" type `"+p+"."+A+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+T+"`.")}function ne(f){function n(p,A,T,I,w){var v=p[A],O=V(v);if(O!=="object")return new R("Invalid "+I+" `"+w+"` of type `"+O+"` "+("supplied to `"+T+"`, expected `object`."));for(var $ in f){var B=f[$];if(typeof B!="function")return W(T,I,w,$,ee(B));var te=B(v,$,T,I,w+"."+$,l);if(te)return te}return null}return D(n)}function Q(f){function n(p,A,T,I,w){var v=p[A],O=V(v);if(O!=="object")return new R("Invalid "+I+" `"+w+"` of type `"+O+"` "+("supplied to `"+T+"`, expected `object`."));var $=r({},p[A],f);for(var B in $){var te=f[B];if(t(f,B)&&typeof te!="function")return W(T,I,w,B,ee(te));if(!te)return new R("Invalid "+I+" `"+w+"` key `"+B+"` supplied to `"+T+"`.\nBad object: "+JSON.stringify(p[A],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(f),null,"  "));var u=te(v,B,T,I,w+"."+B,l);if(u)return u}return null}return D(n)}function H(f){switch(typeof f){case"number":case"string":case"undefined":return!0;case"boolean":return!f;case"object":if(Array.isArray(f))return f.every(H);if(f===null||d(f))return!0;var n=h(f);if(n){var p=n.call(f),A;if(n!==f.entries){for(;!(A=p.next()).done;)if(!H(A.value))return!1}else for(;!(A=p.next()).done;){var T=A.value;if(T&&!H(T[1]))return!1}}else return!1;return!0;default:return!1}}function G(f,n){return f==="symbol"?!0:n?n["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&n instanceof Symbol:!1}function V(f){var n=typeof f;return Array.isArray(f)?"array":f instanceof RegExp?"object":G(n,f)?"symbol":n}function ee(f){if(typeof f>"u"||f===null)return""+f;var n=V(f);if(n==="object"){if(f instanceof Date)return"date";if(f instanceof RegExp)return"regexp"}return n}function re(f){var n=ee(f);switch(n){case"array":case"object":return"an "+n;case"boolean":case"date":case"regexp":return"a "+n;default:return n}}function K(f){return!f.constructor||!f.constructor.name?j:f.constructor.name}return k.checkPropTypes=i,k.resetWarningCache=i.resetWarningCache,k.PropTypes=k,k},De}var Le,nt;function Ot(){if(nt)return Le;nt=1;var e=Re();function r(){}function l(){}return l.resetWarningCache=r,Le=function(){function t(a,d,E,y,_,h){if(h!==e){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}}t.isRequired=t;function i(){return t}var c={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:i,element:t,elementType:t,instanceOf:i,node:t,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:l,resetWarningCache:r};return c.PropTypes=c,c},Le}var rt;function Nt(){if(rt)return fe.exports;if(rt=1,process.env.NODE_ENV!=="production"){var e=We(),r=!0;fe.exports=wt()(e.isElement,r)}else fe.exports=Ot()();return fe.exports}var jt=Nt();const x=yt(jt),Rt={"10px":"1","12px":"2","14px":"3","16px":"4","18px":"5","24px":"6","32px":"7"},ot={bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:"12px",headingLevel:"p"},at=()=>{const[e,r]=m.useState(ot),l=m.useCallback(a=>{r(d=>({...d,alignLeft:a==="left",alignCenter:a==="center",alignRight:a==="right",alignJustify:a==="justify"}))},[]),t=m.useCallback(a=>{try{const d=window.getSelection();if(!d||d.rangeCount===0)return!1;const E=d.getRangeAt(0);if(!E.toString())return r(_=>({..._,fontSize:a})),!1;try{const _=document.createElement("span");_.style.fontSize=a;const h=E.extractContents();return _.appendChild(h),E.insertNode(_),E.selectNodeContents(_),d.removeAllRanges(),d.addRange(E),r(j=>({...j,fontSize:a})),!0}catch{const h=Rt[a]||"2";return document.execCommand("fontSize",!1,h),r(j=>({...j,fontSize:a})),!0}}catch(d){return console.warn("[useFormatting] Font size change failed:",d),!1}},[]),i=m.useCallback((a,d=null)=>{try{if(typeof document.execCommand!="function"){console.warn("[useFormatting] execCommand not supported");return}if(a==="fontSize"){t(d);return}switch(document.execCommand(a,!1,d)||console.warn(`[useFormatting] Command "${a}" failed`),a){case"bold":r(y=>({...y,bold:!y.bold}));break;case"italic":r(y=>({...y,italic:!y.italic}));break;case"underline":r(y=>({...y,underline:!y.underline}));break;case"strikethrough":r(y=>({...y,strikethrough:!y.strikethrough}));break;case"justifyLeft":l("left");break;case"justifyCenter":l("center");break;case"justifyRight":l("right");break;case"justifyFull":l("justify");break;case"fontName":r(y=>({...y,fontFamily:d}));break;case"formatBlock":r(y=>({...y,headingLevel:d}));break;default:break}}catch(E){console.warn(`[useFormatting] Error executing command "${a}":`,E)}},[t,l]),c=m.useCallback(()=>{r(ot)},[]);return{currentFormat:e,formatText:i,resetFormat:c}},ge={A4:{width:595,height:842},Letter:{width:612,height:792},Legal:{width:612,height:1008}},it={top:60,bottom:100,left:72,right:72},Mt=300,It=200,Dt=50,Lt='page-break, [data-page-break="true"]',st=(e,r,l=100)=>{const t=Oe(),i=m.useRef(null),c=m.useRef(null),a=m.useRef(e),d=m.useRef(l),E=m.useRef(!1);m.useEffect(()=>{a.current=e},[e]),m.useEffect(()=>{d.current=l},[l]),m.useEffect(()=>()=>{i.current&&clearTimeout(i.current),c.current&&clearTimeout(c.current)},[]);const y=m.useCallback((g,s)=>{if(!g||g.length===0)return null;let P=0,C=null;for(let z=0;z<g.length;z++){const M=g[z];if(!M||!M.getBoundingClientRect)continue;const U=M.getBoundingClientRect().height;if(U<1)continue;if(P+U>s)return C===null?z>0?{overflowIndex:z,overflowElement:M,accumulatedHeight:P}:null:{overflowIndex:z,overflowElement:M,accumulatedHeight:P};P+=U,C=M}return null},[]),_=m.useCallback((g,s)=>{if(!g||!r?.current)return!1;try{const P=r.current,C=document.createElement("page-break");return C.setAttribute("data-page-break","true"),C.setAttribute("contenteditable","false"),C.setAttribute("data-page-number",s||"2"),g.parentNode.insertBefore(C,g),!0}catch(P){return console.warn("[insertPageBreakBefore] Failed to insert page break:",P),!1}},[r]),h=m.useCallback((g={})=>{if(!r?.current||typeof document>"u")return[];const s=g.pageSize||a.current||"A4",P=ge[s]||ge.A4,C=r.current,z=C.querySelectorAll(Lt),M=[];M.push({id:"page-0",pageNumber:1,top:0,height:P.height});const U=C.getBoundingClientRect(),W=C.scrollTop;return z.forEach((ne,Q)=>{const G=ne.getBoundingClientRect().top-U.top+W;M.push({id:`page-${Q+1}`,pageNumber:Q+2,top:G,height:P.height})}),M},[r]),j=m.useCallback((g={})=>{const s=h(g);return t.updatePageBoundaries(s),s},[h,t]),k=m.useCallback(()=>{if(!(!r?.current||E.current))try{E.current=!0;const g=r.current,s=a.current||"A4",P=d.current||100,z=(ge[s]||ge.A4).height-it.top-it.bottom,M=P/100,U=z/M,W=Array.from(g.children);if(W.length===0)return;const ne=W.filter(K=>K.tagName==="PAGE-BREAK"||K.getAttribute("data-page-break")==="true"),Q=[];let H=[];for(const K of W)K.tagName==="PAGE-BREAK"||K.getAttribute("data-page-break")==="true"?H.length>0&&(Q.push(H),H=[]):H.push(K);H.length>0&&Q.push(H),Q.length===0&&W.length>0&&Q.push(W.filter(K=>!(K.tagName==="PAGE-BREAK"||K.getAttribute("data-page-break")==="true")));let G=!1,V=0;const ee=3,re=20;for(let K=0;K<Q.length&&V<ee;K++){const f=Q[K],n=y(f,U);if(n&&n.overflowIndex>0){let p=0;for(let w=0;w<f.length;w++){const v=f[w];v&&v.getBoundingClientRect&&(p+=v.getBoundingClientRect().height)}if(p-U<re)continue;const T=K+2;if(_(n.overflowElement,T)){G=!0,V++;const w=Array.from(g.children),v=[];let O=[];for(const $ of w)$.tagName==="PAGE-BREAK"||$.getAttribute("data-page-break")==="true"?O.length>0&&(v.push(O),O=[]):O.push($);O.length>0&&v.push(O),Q=v}}}if(G){const K=g.innerHTML;t.updateContinuousContent(K),setTimeout(()=>{j(),V>=ee&&setTimeout(()=>{E.current||k()},100)},Dt)}}catch(g){console.warn("[checkAndReflow] Reflow failed:",g)}finally{E.current=!1}},[r,y,_,t,j]),q=m.useCallback((g=It)=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{c.current=null,k()},g)},[k]),R=m.useCallback((g={})=>{i.current&&clearTimeout(i.current);const s=typeof g.delay=="number"?g.delay:Mt;i.current=setTimeout(()=>{i.current=null,j(g)},Math.max(0,s))},[j]),D=m.useCallback(g=>{if(!g?.current||!r?.current)return 0;try{const s=g.current,C=r.current.querySelectorAll('page-break, [data-page-break="true"]');if(C.length===0)return 0;const z=s.getBoundingClientRect(),M=z.top+z.height/2;for(let U=C.length-1;U>=0;U--)if(C[U].getBoundingClientRect().top<M)return U+1;return 0}catch(s){return console.warn("[getCurrentPage] Failed to calculate page:",s),0}},[r]),b=m.useCallback(g=>{if(!r?.current)return;const s=r.current;s.focus();try{let P=null,C=0;if(g===0)P=s.firstChild,C=0;else{const M=s.querySelectorAll('page-break, [data-page-break="true"]')[g-1];M&&M.nextSibling&&(P=M.nextSibling,C=0)}if(P){const z=document.createRange(),M=window.getSelection();P.nodeType===Node.TEXT_NODE?z.setStart(P,C):z.setStart(P,0),z.collapse(!0),M.removeAllRanges(),M.addRange(z)}}catch(P){console.warn("[positionCursorAtPage] Failed to position cursor:",P)}},[r]),S=m.useCallback((g,s)=>{if(!s?.current||!r?.current){console.warn("[scrollToPage] Missing refs");return}const P=s.current,C=r.current;try{let z=null;if(g===0)z=C;else{const U=C.querySelectorAll('page-break, [data-page-break="true"]')[g-1];if(U)z=U;else{console.warn("[scrollToPage] Page break not found for page",g);return}}if(z){const M=z.getBoundingClientRect(),U=P.getBoundingClientRect(),W=P.scrollTop+(M.top-U.top);console.log("[scrollToPage] Scrolling to page",g,"scrollTop:",W),P.scrollTo({top:W,behavior:"smooth"}),setTimeout(()=>{b(g)},400)}}catch(z){console.error("[scrollToPage] Error:",z)}},[r,b]),N=m.useCallback(g=>{if(!r?.current)return!1;const s=r.current;if(h().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const C=Array.from(s.querySelectorAll('page-break, [data-page-break="true"]'));if(g>C.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const z=window.getSelection();let M=!1,U=[],W=null;if(g===0){const H=C[0];if(!H)return console.warn("[removePageAndContent] No page break found for first page"),!1;let G=s.firstChild;for(;G&&G!==H;)U.push(G),G=G.nextSibling;W=H}else{const H=C[g-1];if(!H)return console.warn("[removePageAndContent] Page break not found"),!1;const G=C[g];let V=H.nextSibling;for(;V&&V!==G;)U.push(V),V=V.nextSibling;W=H}if(z&&z.rangeCount>0){const G=z.getRangeAt(0).startContainer;for(const V of U)if(V.contains(G)||V===G){M=!0;break}}W&&W.parentNode&&W.remove(),U.forEach(H=>{H.parentNode&&H.remove()}),s.querySelectorAll('page-break, [data-page-break="true"]').forEach((H,G)=>{H.setAttribute("data-page-number",String(G+2))}),M&&setTimeout(()=>{b(0)},50);const Q=s.innerHTML;return t.updateContinuousContent(Q),setTimeout(()=>{j()},100),!0}catch(C){return console.error("[removePageAndContent] Failed to remove page:",C),!1}},[r,h,t,j,b]);return{calculatePageBoundaries:h,checkAndUpdateBoundaries:R,updateBoundaries:j,getCurrentPage:D,scrollToPage:S,positionCursorAtPage:b,checkAndReflow:k,triggerAutoReflow:q,removePageAndContent:N,boundaryTimeoutRef:i,reflowTimeoutRef:c}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$t=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,l,t)=>t?t.toUpperCase():l.toLowerCase()),ct=e=>{const r=$t(e);return r.charAt(0).toUpperCase()+r.slice(1)},lt=(...e)=>e.filter((r,l,t)=>!!r&&r.trim()!==""&&t.indexOf(r)===l).join(" ").trim(),Bt=e=>{for(const r in e)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ut={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=m.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:t,className:i="",children:c,iconNode:a,...d},E)=>m.createElement("svg",{ref:E,...Ut,width:r,height:r,stroke:e,strokeWidth:t?Number(l)*24/Number(r):l,className:lt("lucide",i),...!c&&!Bt(d)&&{"aria-hidden":"true"},...d},[...a.map(([y,_])=>m.createElement(y,_)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=(e,r)=>{const l=m.forwardRef(({className:t,...i},c)=>m.createElement(qt,{ref:c,iconNode:r,className:lt(`lucide-${zt(ct(e))}`,`lucide-${e}`,t),...i}));return l.displayName=ct(e),l};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=F("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=F("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=F("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=F("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=F("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=F("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=F("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=F("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=F("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=F("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=F("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=F("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=F("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=F("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=F("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=F("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=F("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=F("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=F("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=F("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=F("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=F("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=F("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=F("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=F("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=F("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=F("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=F("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),dt=({editorView:e,isCollapsed:r,onToggle:l,wordCount:t,pageCount:i})=>{const c=we(),{pages:a,activePage:d,continuousContent:E,editorMode:y}=c,[_,h]=m.useState(0),[j,k]=m.useState([]);m.useEffect(()=>{if(t!==void 0&&i!==void 0){if(h(t),E){const b=document.createElement("div");b.innerHTML=E;const S=b.querySelectorAll("h1, h2, h3, h4, h5, h6"),N=Array.from(S).map((g,s)=>{const P=parseInt(g.tagName.charAt(1)),C=g.textContent.trim();return C?{id:`heading-${s}`,level:P,text:C,page:1}:null}).filter(Boolean);k(N)}return}let R=0;const D=[];a.forEach((b,S)=>{if(b.content){const N=document.createElement("div");N.innerHTML=b.content;const s=(N.textContent||N.innerText||"").trim().split(/\s+/).filter(C=>C.length>0);R+=s.length,N.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((C,z)=>{const M=parseInt(C.tagName.charAt(1)),U=C.textContent.trim();U&&D.push({id:`heading-${S}-${z}`,level:M,text:U,page:S+1})})}}),h(R),k(D)},[a,t,i,E]);const q=i!==void 0?i:a.length;return o.jsxs("aside",{className:`sidebar ${r?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[o.jsxs("div",{className:"sidebar-header",children:[o.jsxs("div",{className:"sidebar-title",children:[o.jsx(he,{size:18}),o.jsx("h2",{children:"Document Info"})]}),o.jsx("button",{className:"sidebar-toggle",onClick:l,"aria-label":r?"Expand sidebar":"Collapse sidebar",title:r?"Expand sidebar":"Collapse sidebar",children:r?o.jsx(Zt,{size:16}):o.jsx(Ht,{size:16})})]}),!r&&o.jsxs("div",{className:"sidebar-content",children:[o.jsxs("div",{className:"sidebar-section",children:[o.jsx("h3",{children:"Statistics"}),o.jsxs("div",{className:"stat-item",children:[o.jsxs("div",{className:"stat-label",children:[o.jsx(Yt,{size:14}),o.jsx("span",{children:"Pages:"})]}),o.jsx("span",{className:"stat-value",children:q})]}),o.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[o.jsxs("div",{className:"stat-label",children:[o.jsx(Vt,{size:14}),o.jsx("span",{children:"Words:"})]}),o.jsx("span",{className:"stat-value",children:_.toLocaleString()})]}),o.jsxs("div",{className:"stat-item",children:[o.jsxs("div",{className:"stat-label",children:[o.jsx(he,{size:14}),o.jsx("span",{children:"Active Page:"})]}),o.jsx("span",{className:"stat-value",children:d+1})]})]}),j.length>0&&o.jsxs("div",{className:"sidebar-section",children:[o.jsxs("h3",{children:[o.jsx(ut,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),o.jsx("div",{className:"document-outline","data-testid":"outline",children:j.map(R=>{const D=R.level===1?Ft:R.level===2?Wt:Kt;return o.jsxs("div",{className:`outline-item outline-level-${R.level}`,style:{marginLeft:`${(R.level-1)*12}px`},children:[o.jsx(D,{size:12,className:"outline-icon"}),o.jsx("span",{className:"outline-text",children:R.text}),o.jsxs("span",{className:"outline-page",children:["p.",R.page]})]},R.id)})})]}),o.jsxs("div",{className:"sidebar-section",children:[o.jsx("h3",{children:"Document"}),o.jsx("p",{children:"HTML Editor"}),o.jsx("p",{children:"Multi-page support"})]})]})]})};function mn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}function ft(e){return new Promise((r,l)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){l(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){l(new Error("Image exceeds maximum size of 5MB"));return}const i=new FileReader;i.onload=c=>{const a=c.target.result;if(a.split(",")[1].length*3/4>5*1024*1024){l(new Error("Image exceeds maximum size of 5MB"));return}try{const y=`editor-image-${mn()}`;localStorage.setItem(y,a),r(y)}catch(y){y.name==="QuotaExceededError"?l(new Error("Storage quota exceeded")):l(y)}},i.onerror=()=>{l(new Error("Error reading image file"))},i.readAsDataURL(e)})}function yn(e){return localStorage.getItem(e)}function En(e){localStorage.removeItem(e)}function bn(){Object.keys(localStorage).forEach(e=>{e.startsWith("editor-image-")&&localStorage.removeItem(e)})}function vn(){return Object.keys(localStorage).filter(e=>e.startsWith("editor-image-"))}class pt{constructor(r="Editor"){this.namespace=r}_format(r,l,t){return`[${new Date().toISOString()}] [${this.namespace}] [${r}] ${l}`}info(r,l){}warn(r,l){}error(r,l){}debug(r,l){}}const gt=new pt("Editor"),me=({currentFormat:e,onFormatText:r,onAddPageBreak:l})=>{const t=async i=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(i.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(i.size>5242880){alert("Image exceeds maximum size of 5MB");return}const a=await ft(i),d=localStorage.getItem(a);d&&(document.execCommand("insertImage",!1,d),gt.info("Image inserted",{key:a}))}catch(c){gt.error("Error uploading image",c)}};return o.jsxs("div",{className:"editor-toolbar",children:[o.jsx("button",{onClick:()=>r("undo"),title:"Undo",children:o.jsx(fn,{size:16})}),o.jsx("button",{onClick:()=>r("redo"),title:"Redo",children:o.jsx(nn,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>r("bold"),className:e.bold?"active":"",title:"Bold",children:o.jsx(Gt,{size:16})}),o.jsx("button",{onClick:()=>r("italic"),className:e.italic?"active":"",title:"Italic",children:o.jsx(Xt,{size:16})}),o.jsx("button",{onClick:()=>r("underline"),className:e.underline?"active":"",title:"Underline",children:o.jsx(dn,{size:16})}),o.jsx("button",{onClick:()=>r("strikethrough"),className:e.strikethrough?"active":"",title:"Strikethrough",children:o.jsx(on,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>r("justifyLeft"),className:e.alignLeft?"active":"",title:"Align Left",children:o.jsx(un,{size:16})}),o.jsx("button",{onClick:()=>r("justifyCenter"),className:e.alignCenter?"active":"",title:"Align Center",children:o.jsx(sn,{size:16})}),o.jsx("button",{onClick:()=>r("justifyRight"),className:e.alignRight?"active":"",title:"Align Right",children:o.jsx(cn,{size:16})}),o.jsx("button",{onClick:()=>r("justifyFull"),className:e.alignJustify?"active":"",title:"Justify",children:o.jsx(ln,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsxs("select",{onChange:i=>r("fontName",i.target.value),defaultValue:"Arial",title:"Font Family",children:[o.jsx("option",{value:"Arial",children:"Arial"}),o.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),o.jsx("option",{value:"Courier New",children:"Courier New"}),o.jsx("option",{value:"Georgia",children:"Georgia"}),o.jsx("option",{value:"Verdana",children:"Verdana"})]}),o.jsxs("select",{onChange:i=>r("fontSize",i.target.value),defaultValue:"12px",title:"Font Size",children:[o.jsx("option",{value:"10px",children:"10"}),o.jsx("option",{value:"12px",children:"12"}),o.jsx("option",{value:"14px",children:"14"}),o.jsx("option",{value:"16px",children:"16"}),o.jsx("option",{value:"18px",children:"18"}),o.jsx("option",{value:"24px",children:"24"}),o.jsx("option",{value:"32px",children:"32"})]}),o.jsxs("select",{onChange:i=>r("formatBlock",i.target.value),value:e.headingLevel||"p",title:"Heading Level",children:[o.jsx("option",{value:"p",children:"Normal"}),o.jsx("option",{value:"h1",children:"Heading 1"}),o.jsx("option",{value:"h2",children:"Heading 2"}),o.jsx("option",{value:"h3",children:"Heading 3"}),o.jsx("option",{value:"h4",children:"Heading 4"}),o.jsx("option",{value:"h5",children:"Heading 5"}),o.jsx("option",{value:"h6",children:"Heading 6"})]}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>r("insertUnorderedList"),title:"Bullet List",children:o.jsx(ut,{size:16})}),o.jsx("button",{onClick:()=>r("insertOrderedList"),title:"Numbered List",children:o.jsx(en,{size:16})}),o.jsx("div",{className:"toolbar-separator"}),o.jsx("button",{onClick:()=>{const i=prompt("Enter URL:");i&&r("createLink",i)},title:"Insert Link",children:o.jsx(Qt,{size:16})}),o.jsx("button",{onClick:()=>r("insertHTML",'<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>'),title:"Insert Table",children:o.jsx(an,{size:16})}),l&&o.jsx("button",{onClick:l,title:"Insert Page Break",children:o.jsx(he,{size:16})}),o.jsx("input",{type:"file",accept:"image/*",onChange:i=>i.target.files[0]&&t(i.target.files[0]),style:{display:"none"},id:"image-upload"}),o.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:o.jsx(Jt,{size:16})})]})};me.propTypes={currentFormat:x.shape({bold:x.bool,italic:x.bool,underline:x.bool,strikethrough:x.bool,alignLeft:x.bool,alignCenter:x.bool,alignRight:x.bool,alignJustify:x.bool,fontFamily:x.string,fontSize:x.string,headingLevel:x.string}).isRequired,onFormatText:x.func.isRequired,onAddPageBreak:x.func},me.defaultProps={onAddPageBreak:void 0};const ye=({content:e,dimensions:r,pageSize:l,pageBoundaries:t=[],editorRef:i,onInput:c,onKeyDown:a,onClick:d,onScroll:E,zoomLevel:y=100})=>{const _={top:60,bottom:100,left:72,right:72},h=y/100,j=(b,S)=>{if(!b)return!1;const N=b.getBoundingClientRect(),g=S-N.top;return g<_.top||g>N.height-_.bottom},k=b=>b?b.nodeType===Node.ELEMENT_NODE?b.tagName==="PAGE-BREAK"||b.getAttribute("data-page-break")==="true":b.parentElement&&k(b.parentElement):!1,q=b=>{const S=window.getSelection();if(!S||S.rangeCount===0)return;const N=S.getRangeAt(0),{startContainer:g,endContainer:s}=N;if((k(g)||k(s))&&(b.key.length===1||b.key==="Enter"||b.key===" "))return b.preventDefault(),!1;if(b.key==="Tab")return b.preventDefault(),document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;"),!1;if((b.key==="Backspace"||b.key==="Delete")&&(k(g)||k(s)))return b.preventDefault(),!1;a&&a(b)},R=b=>{if(!i.current)return;const S=b.target;if(k(S)){b.preventDefault();return}if(j(i.current,b.clientY)){b.preventDefault();const N=i.current.getBoundingClientRect();if(b.clientY-N.top<_.top){const s=i.current.firstElementChild;if(s&&s.tagName!=="PAGE-BREAK"){const P=document.createRange(),C=window.getSelection();P.setStart(s,0),P.collapse(!0),C.removeAllRanges(),C.addRange(P)}}else{const s=i.current.lastElementChild;if(s&&s.tagName!=="PAGE-BREAK"){const P=document.createRange(),C=window.getSelection();P.selectNodeContents(s),P.collapse(!1),C.removeAllRanges(),C.addRange(P)}}return}d&&d(b)},D=b=>{const S=window.getSelection();if(!S||S.rangeCount===0)return;const N=S.getRangeAt(0),{startContainer:g}=N;if(k(g))return b.preventDefault(),!1};return o.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${r.width}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh",transform:`scale(${h})`,transformOrigin:"top center",transition:"transform 0.2s ease-out"},children:o.jsx("div",{ref:i,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${r.height}px`,width:`${r.width}px`,backgroundColor:"white",padding:`${_.top}px ${_.right}px ${_.bottom}px ${_.left}px`,boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:"Arial, sans-serif",fontSize:"12px",lineHeight:"1.15",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:c,onKeyDown:q,onBeforeInput:D,onClick:R,onScroll:E,"data-testid":"continuous-editor"})})};ye.propTypes={content:x.string.isRequired,dimensions:x.shape({width:x.number.isRequired,height:x.number.isRequired}).isRequired,pageSize:x.oneOf(["A4","Letter","Legal"]).isRequired,pageBoundaries:x.arrayOf(x.shape({id:x.string.isRequired,pageNumber:x.number.isRequired,top:x.number,height:x.number})),editorRef:x.shape({current:x.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onInput:x.func.isRequired,onKeyDown:x.func,onClick:x.func,onScroll:x.func,zoomLevel:x.number},ye.defaultProps={pageBoundaries:[],onKeyDown:void 0,onClick:void 0,onScroll:void 0,zoomLevel:100};const ze=({pageBoundaries:e=[{id:"page-0",pageNumber:1}],activePage:r=0,pageSize:l="A4",zoomLevel:t=100,canZoomIn:i=!0,canZoomOut:c=!0,onNavigate:a,onAddPage:d,onDeletePage:E,onPageSizeChange:y,onZoomIn:_,onZoomOut:h,onZoomReset:j}={})=>{const k=Math.max(e?.length||0,1),q=S=>{a&&a(S)},R=()=>{d&&d()},D=S=>{if(k<=1){console.warn("[PageManager] Cannot delete the only page");return}E&&E(S)},b=S=>{y&&y(S)};return o.jsxs("div",{className:"page-manager",children:[o.jsxs("div",{className:"page-size-controls",children:[o.jsxs("label",{htmlFor:"page-size-selector",children:[o.jsx(rn,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Size:"]}),o.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:l,onChange:S=>b(S.target.value),children:[o.jsx("option",{value:"A4",children:"A4"}),o.jsx("option",{value:"Letter",children:"Letter"}),o.jsx("option",{value:"Legal",children:"Legal"})]})]}),o.jsxs("div",{className:"zoom-controls",children:[o.jsx("button",{type:"button",className:"zoom-button",onClick:h,disabled:!c,"aria-label":"Zoom out",title:"Zoom out (Ctrl + -)",children:o.jsx(hn,{size:14})}),o.jsxs("button",{type:"button",className:"zoom-reset-button",onClick:j,"aria-label":"Reset zoom",title:"Reset zoom to 100% (Ctrl + 0)",children:[t,"%"]}),o.jsx("button",{type:"button",className:"zoom-button",onClick:_,disabled:!i,"aria-label":"Zoom in",title:"Zoom in (Ctrl + +)",children:o.jsx(gn,{size:14})})]}),o.jsx("div",{className:"page-list",children:(e&&e.length>0?e:[{id:"page-0",pageNumber:1}]).map((S,N)=>o.jsxs("div",{className:"page-item",children:[o.jsxs("button",{type:"button",className:`page-button ${N===r?"active":""}`,onClick:()=>q(N),"aria-label":`Go to page ${N+1}`,"aria-current":N===r?"page":void 0,children:[o.jsx(he,{size:14}),o.jsxs("span",{children:["Page ",N+1]})]}),k>1&&o.jsx("button",{type:"button",className:"delete-page-button",onClick:g=>{g.stopPropagation(),D(N)},"aria-label":`Delete page ${N+1}`,title:"Delete this page and its content",children:o.jsx(pn,{size:14})})]},S.id||`page-${N}`))}),o.jsxs("button",{type:"button",className:"add-page-button",onClick:R,"aria-label":"Add new page",title:"Add new page at end",children:[o.jsx(tn,{size:16}),o.jsx("span",{children:"Add Page"})]})]})};ze.propTypes={pageBoundaries:x.arrayOf(x.shape({id:x.string.isRequired,pageNumber:x.number.isRequired,top:x.number,height:x.number})),activePage:x.number,pageSize:x.oneOf(["A4","Letter","Legal"]),zoomLevel:x.number,canZoomIn:x.bool,canZoomOut:x.bool,onNavigate:x.func,onAddPage:x.func,onDeletePage:x.func,onPageSizeChange:x.func,onZoomIn:x.func,onZoomOut:x.func,onZoomReset:x.func},ze.defaultProps={pageBoundaries:[{id:"page-0",pageNumber:1}],activePage:0,pageSize:"A4",zoomLevel:100,canZoomIn:!0,canZoomOut:!0,onNavigate:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onZoomIn:void 0,onZoomOut:void 0,onZoomReset:void 0};const ht=m.memo(ze),mt={A4:{width:595,height:842},Letter:{width:612,height:792},Legal:{width:612,height:1008}},_n=50,xn=50,Tn=50,An=100,kn=500,Ee=m.forwardRef(({pageManagerComponent:e=null,onNavigatePage:r,onAddPage:l,onDeletePage:t,onPageSizeChange:i,onChange:c,showSidebar:a=!0,showToolbar:d=!0,showPageManager:E=!0},y)=>{const _=we(),h=Oe(),{pageSize:j,continuousContent:k,pageBoundaries:q,activePage:R,zoomLevel:D}=_,b=m.useRef(null),S=m.useRef(null),{currentFormat:N,formatText:g}=at(),{checkAndUpdateBoundaries:s,getCurrentPage:P,scrollToPage:C,positionCursorAtPage:z,updateBoundaries:M,triggerAutoReflow:U,removePageAndContent:W}=st(j,S,D),ne=m.useMemo(()=>mt[j]||mt.A4,[j]),[Q,H]=m.useState(!1),G=m.useRef(null),V=m.useRef(!1),ee=m.useRef(!1),re=m.useRef(!1),K=m.useRef(k);m.useEffect(()=>{if(S.current){if(!re.current){S.current.innerHTML=k,re.current=!0,K.current=k;const u=setTimeout(()=>{M()},_n);return()=>clearTimeout(u)}if(K.current!==k){if(S.current.innerHTML!==k){S.current.innerHTML=k;const X=setTimeout(()=>{if(M(),V.current){V.current=!1;const oe=Math.max(0,q.length-1);h.setActivePage(oe),setTimeout(()=>{C(oe,b)},Tn)}},xn);return K.current=k,()=>clearTimeout(X)}K.current=k}}},[k,M,q.length,h,C]),m.useEffect(()=>{c&&re.current&&c(k)},[k,c]),m.useImperativeHandle(y,()=>({getHTMLContent:()=>k,getPlainText:()=>k.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),setContent:u=>{h.updateContinuousContent(u),S.current&&(S.current.innerHTML=u,setTimeout(()=>{M()},50))}}),[k,h,M]),m.useEffect(()=>{const u=setTimeout(()=>{S.current&&S.current.focus()},200);return()=>clearTimeout(u)},[]);const f=m.useCallback(u=>{const X=u.currentTarget.innerHTML;h.updateContinuousContent(X),s(),U(200);const oe=P(b);oe!==R&&h.setActivePage(oe)},[s,h,P,R,U,b]),n=m.useCallback(u=>{h.updatePageSize(u),M({pageSize:u}),i&&i(u)},[h,M,i]),p=m.useCallback(u=>{u<0||u>=q.length||(ee.current=!0,h.setActivePage(u),C(u,b),setTimeout(()=>{ee.current=!1},kn),r&&r(u))},[h,C,r,q.length]),A=m.useCallback(()=>{V.current=!0,h.addPageBreak({position:"end"}),l&&l()},[h,l]),T=m.useCallback(()=>{const u=window.getSelection();if(u&&u.rangeCount>0){if(!S?.current)return;const be=`<page-break data-page-break="true" contenteditable="false" data-page-number="${S.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,be),setTimeout(()=>{M();const Cn=P(b);h.setActivePage(Cn)},150)}},[M,P,h,b]),I=m.useCallback(u=>{if(q.length<=1){console.warn("Cannot delete the only page");return}W(u)&&(h.setActivePage(0),t&&t(u))},[q.length,W,h,t]),w=m.useCallback(()=>{h.zoomIn()},[h]),v=m.useCallback(()=>{h.zoomOut()},[h]),O=m.useCallback(()=>{h.resetZoom()},[h]);m.useEffect(()=>{const u=X=>{if(!(!S.current&&!b.current)&&(X.ctrlKey||X.metaKey))switch(X.key){case"+":case"=":X.preventDefault(),w();break;case"-":case"_":X.preventDefault(),v();break;case"0":X.preventDefault(),O();break}};return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[w,v,O]);const $=m.useCallback(()=>{!b.current||!S.current||ee.current||(G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{if(ee.current){G.current=null;return}const u=P(b);u!==R&&u>=0&&h.setActivePage(u),G.current=null},An))},[P,R,h]),B=m.useMemo(()=>{if(!k)return 0;const X=k.replace(/<[^>]*>/g," ").match(/\b\w+\b/g);return X?X.length:0},[k]),te=q.length||1;return m.useEffect(()=>()=>{G.current&&clearTimeout(G.current)},[]),o.jsxs("div",{className:"multi-page-editor",children:[d&&o.jsx(me,{currentFormat:N,onFormatText:g,onAddPageBreak:T}),o.jsxs("div",{className:"editor-container",children:[a&&o.jsx(dt,{editorView:null,isCollapsed:Q,onToggle:()=>H(u=>!u),wordCount:B,pageCount:te}),o.jsx("div",{className:"editor-viewport continuous-scroll",ref:b,onScroll:$,children:o.jsx(ye,{content:k,dimensions:ne,pageSize:j,pageBoundaries:q,editorRef:S,onInput:f,onClick:()=>S.current?.focus(),zoomLevel:D})}),E&&o.jsx("div",{className:"page-manager-sidebar",children:e?m.cloneElement(e,{onNavigate:p,onAddPage:A,onDeletePage:I,onPageSizeChange:n,zoomLevel:D,canZoomIn:Ae(D),canZoomOut:ke(D),onZoomIn:w,onZoomOut:v,onZoomReset:O}):o.jsx(ht,{pageBoundaries:q,activePage:R,pageSize:j,zoomLevel:D,canZoomIn:Ae(D),canZoomOut:ke(D),onNavigate:p,onAddPage:A,onDeletePage:I,onPageSizeChange:n,onZoomIn:w,onZoomOut:v,onZoomReset:O})})]})]})});Ee.displayName="HtmlEditor",Ee.propTypes={pageManagerComponent:x.element,onNavigatePage:x.func,onAddPage:x.func,onDeletePage:x.func,onPageSizeChange:x.func,onChange:x.func,showSidebar:x.bool,showToolbar:x.bool,showPageManager:x.bool},Ee.defaultProps={pageManagerComponent:null,onNavigatePage:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onChange:void 0,showSidebar:!0,showToolbar:!0,showPageManager:!0};class $e extends m.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,l){console.error("[ErrorBoundary] Caught error:",r),console.error("[ErrorBoundary] Error info:",l),this.setState({error:r,errorInfo:l}),this.props.onError&&this.props.onError(r,l)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:o.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #f44336",borderRadius:"4px",backgroundColor:"#ffebee",color:"#c62828"},children:[o.jsx("h2",{style:{marginTop:0},children:"⚠️ Something went wrong"}),o.jsx("p",{children:"The editor encountered an unexpected error and couldn't continue."}),this.props.showDetails&&this.state.error&&o.jsxs("details",{style:{marginTop:"10px",padding:"10px",backgroundColor:"white",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[o.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),o.jsxs("pre",{style:{marginTop:"10px",overflow:"auto",maxHeight:"200px"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),o.jsx("button",{onClick:this.handleReset,style:{marginTop:"15px",padding:"8px 16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Try Again"})]}):this.props.children}}$e.propTypes={children:x.node.isRequired,fallback:x.node,onError:x.func,onReset:x.func,showDetails:x.bool},$e.defaultProps={fallback:null,onError:void 0,onReset:void 0,showDetails:process.env.NODE_ENV==="development"};const Pn={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}};J.DocumentProvider=At,J.EditorToolbar=me,J.ErrorBoundary=$e,J.HtmlEditor=Ee,J.PAGE_DIMENSIONS=Pn,J.PageManager=ht,J.PageView=ye,J.Sidebar=dt,J.clearImages=bn,J.deleteImage=En,J.getAllImageKeys=vn,J.getImage=yn,J.logger=pt,J.saveImage=ft,J.useContinuousReflow=st,J.useDocument=Se,J.useDocumentActions=Oe,J.useDocumentState=we,J.useFormatting=at,Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
