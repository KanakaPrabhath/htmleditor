(function(W,b){typeof exports=="object"&&typeof module<"u"?b(exports,require("react"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","react","uuid"],b):(W=typeof globalThis<"u"?globalThis:W||self,b(W.HTMLEditor={},W.React,W.uuid))})(this,(function(W,b,Ee){"use strict";function dt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var le={exports:{}},ae={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Me;function ft(){if(Me)return ae;Me=1;var e=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function i(r,s,l){var n=null;if(l!==void 0&&(n=""+l),s.key!==void 0&&(n=""+s.key),"key"in s){l={};for(var u in s)u!=="key"&&(l[u]=s[u])}else l=s;return s=l.ref,{$$typeof:e,type:r,key:n,ref:s!==void 0?s:null,props:l}}return ae.Fragment=o,ae.jsx=i,ae.jsxs=i,ae}var ie={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ie;function pt(){return Ie||(Ie=1,process.env.NODE_ENV!=="production"&&(function(){function e(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===H?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case k:return"Profiler";case j:return"StrictMode";case w:return"Suspense";case L:return"SuspenseList";case J:return"Activity"}if(typeof t=="object")switch(typeof t.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),t.$$typeof){case N:return"Portal";case C:return t.displayName||"Context";case P:return(t._context.displayName||"Context")+".Consumer";case c:var p=t.render;return t=t.displayName,t||(t=p.displayName||p.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return p=t.displayName||null,p!==null?p:e(t.type)||"Memo";case U:p=t._payload,t=t._init;try{return e(t(p))}catch{}}return null}function o(t){return""+t}function i(t){try{o(t);var p=!1}catch{p=!0}if(p){p=console;var _=p.error,v=typeof Symbol=="function"&&Symbol.toStringTag&&t[Symbol.toStringTag]||t.constructor.name||"Object";return _.call(p,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",v),o(t)}}function r(t){if(t===M)return"<>";if(typeof t=="object"&&t!==null&&t.$$typeof===U)return"<...>";try{var p=e(t);return p?"<"+p+">":"<...>"}catch{return"<...>"}}function s(){var t=K.A;return t===null?null:t.getOwner()}function l(){return Error("react-stack-top-frame")}function n(t){if(F.call(t,"key")){var p=Object.getOwnPropertyDescriptor(t,"key").get;if(p&&p.isReactWarning)return!1}return t.key!==void 0}function u(t,p){function _(){Z||(Z=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",p))}_.isReactWarning=!0,Object.defineProperty(t,"key",{get:_,configurable:!0})}function y(){var t=e(this.type);return Q[t]||(Q[t]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),t=this.props.ref,t!==void 0?t:null}function f(t,p,_,v,$,O){var A=_.ref;return t={$$typeof:z,type:t,key:p,props:_,_owner:v},(A!==void 0?A:null)!==null?Object.defineProperty(t,"ref",{enumerable:!1,get:y}):Object.defineProperty(t,"ref",{enumerable:!1,value:null}),t._store={},Object.defineProperty(t._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(t,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(t,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:$}),Object.defineProperty(t,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:O}),Object.freeze&&(Object.freeze(t.props),Object.freeze(t)),t}function E(t,p,_,v,$,O){var A=p.children;if(A!==void 0)if(v)if(V(A)){for(v=0;v<A.length;v++)g(A[v]);Object.freeze&&Object.freeze(A)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else g(A);if(F.call(p,"key")){A=e(t);var h=Object.keys(p).filter(function(D){return D!=="key"});v=0<h.length?"{key: someKey, "+h.join(": ..., ")+": ...}":"{key: someKey}",d[A+v]||(h=0<h.length?"{"+h.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,v,A,h,A),d[A+v]=!0)}if(A=null,_!==void 0&&(i(_),A=""+_),n(p)&&(i(p.key),A=""+p.key),"key"in p){_={};for(var R in p)R!=="key"&&(_[R]=p[R])}else _=p;return A&&u(_,typeof t=="function"?t.displayName||t.name||"Unknown":t),f(t,A,_,s(),$,O)}function g(t){S(t)?t._store&&(t._store.validated=1):typeof t=="object"&&t!==null&&t.$$typeof===U&&(t._payload.status==="fulfilled"?S(t._payload.value)&&t._payload.value._store&&(t._payload.value._store.validated=1):t._store&&(t._store.validated=1))}function S(t){return typeof t=="object"&&t!==null&&t.$$typeof===z}var T=b,z=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),C=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),H=Symbol.for("react.client.reference"),K=T.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=Object.prototype.hasOwnProperty,V=Array.isArray,ee=console.createTask?console.createTask:function(){return null};T={react_stack_bottom_frame:function(t){return t()}};var Z,Q={},te=T.react_stack_bottom_frame.bind(T,l)(),ne=ee(r(l)),d={};ie.Fragment=M,ie.jsx=function(t,p,_){var v=1e4>K.recentlyCreatedOwnerStacks++;return E(t,p,_,!1,v?Error("react-stack-top-frame"):te,v?ee(r(t)):ne)},ie.jsxs=function(t,p,_){var v=1e4>K.recentlyCreatedOwnerStacks++;return E(t,p,_,!0,v?Error("react-stack-top-frame"):te,v?ee(r(t)):ne)}})()),ie}var De;function gt(){return De||(De=1,process.env.NODE_ENV==="production"?le.exports=ft():le.exports=pt()),le.exports}var a=gt();const se="A4",oe="<p><br></p>",ht="continuous",ve={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},ce=(e,o=se)=>({id:Ee.v4(),index:e,size:o,content:oe,images:[],isBreakPoint:!1}),ue=e=>typeof e!="string"||e.trim()===""?oe:e,$e=(e,o=se)=>(e.length>0?e:[ce(0,o)]).map((r,s)=>({id:r.id||Ee.v4(),index:s,size:r.size||o,content:ue(r.content),images:r.images||[],isBreakPoint:!!r.isBreakPoint})),mt=(e=se)=>[{id:"page-0",pageNumber:1,top:0,height:(ve[e]||ve.A4).height}],_e=(e={})=>{const o=new Date().toISOString(),i=e.pageSize||se,r=$e(e.pages||[ce(0,i)],i);return{id:Ee.v4(),title:e.title||"Untitled Document",createdAt:o,updatedAt:o,pageSize:i,pages:r,activePage:e.activePage&&e.activePage<r.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:r.length,editorMode:e.editorMode||ht,continuousContent:e.continuousContent||oe,pageBoundaries:e.pageBoundaries||mt(i)}},B={INITIALIZE_DOCUMENT:"INITIALIZE_DOCUMENT",UPDATE_TITLE:"UPDATE_TITLE",UPDATE_PAGE_CONTENT:"UPDATE_PAGE_CONTENT",UPDATE_PAGES:"UPDATE_PAGES",ADD_PAGE:"ADD_PAGE",DELETE_PAGE:"DELETE_PAGE",SET_ACTIVE_PAGE:"SET_ACTIVE_PAGE",UPDATE_PAGE_SIZE:"UPDATE_PAGE_SIZE",RESET_DOCUMENT:"RESET_DOCUMENT",UPDATE_CONTINUOUS_CONTENT:"UPDATE_CONTINUOUS_CONTENT",UPDATE_PAGE_BOUNDARIES:"UPDATE_PAGE_BOUNDARIES",ADD_PAGE_BREAK:"ADD_PAGE_BREAK",REMOVE_PAGE_BREAK:"REMOVE_PAGE_BREAK",SET_EDITOR_MODE:"SET_EDITOR_MODE",INSERT_PAGE_AT:"INSERT_PAGE_AT",MOVE_PAGE_TO:"MOVE_PAGE_TO",DUPLICATE_PAGE:"DUPLICATE_PAGE"},yt=(e,o)=>{const i=new Date().toISOString();switch(o.type){case B.INITIALIZE_DOCUMENT:{const{initialContent:r=oe,pageSize:s=se}=o.payload||{},l={...ce(0,s),content:ue(r)};return _e({title:e.title,pageSize:s,pages:[l]})}case B.UPDATE_TITLE:return{...e,title:o.payload,updatedAt:i};case B.UPDATE_PAGE_CONTENT:{const{pageIndex:r,content:s}=o.payload;if(r<0||r>=e.pages.length)return e;const l=[...e.pages];return l[r]={...l[r],content:ue(s)},{...e,pages:l,updatedAt:i}}case B.UPDATE_PAGES:{const r=Array.isArray(o.payload)?{pages:o.payload}:o.payload||{},s=$e(r.pages||[],e.pageSize),l=Array.isArray(r.pageBreaks)?r.pageBreaks:s.slice(0,-1).map((n,u)=>({id:`auto-break-${u}`,pageNumber:u+1}));return{...e,pages:s,activePage:Math.min(e.activePage,s.length-1),pageBreaks:l,totalPages:s.length,updatedAt:i}}case B.ADD_PAGE:{const r=typeof o.payload?.index=="number"?Math.min(Math.max(o.payload.index,0),e.pages.length):e.pages.length,s=[...e.pages];s.splice(r,0,ce(r,e.pageSize));const l=s.map((u,y)=>({...u,index:y,size:e.pageSize})),n=l.slice(0,-1).map((u,y)=>({id:`auto-break-${y}`,pageNumber:y+1}));return{...e,pages:l,activePage:r,pageBreaks:n,totalPages:l.length,updatedAt:i}}case B.DELETE_PAGE:{const r=o.payload;if(e.pages.length<=1)return e;const s=[...e.pages];s.splice(r,1);const l=s.map((y,f)=>({...y,index:f,size:e.pageSize}));let n=e.activePage;n>=l.length?n=l.length-1:r<=n&&n>0&&(n-=1);const u=l.slice(0,-1).map((y,f)=>({id:`auto-break-${f}`,pageNumber:f+1}));return{...e,pages:l,activePage:n,pageBreaks:u,totalPages:l.length,updatedAt:i}}case B.SET_ACTIVE_PAGE:{const r=o.payload;if(r===e.activePage)return e;const s=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;return r<0||r>=s?e:{...e,activePage:r,updatedAt:i}}case B.UPDATE_PAGE_SIZE:{const r=o.payload;if(r===e.pageSize)return e;if(!ve[r])return console.warn(`Invalid page size: ${r}`),e;const s=e.pages.map((n,u)=>({...n,index:u,size:r})),l=s.slice(0,-1).map((n,u)=>({id:`auto-break-${u}`,pageNumber:u+1}));return{...e,pageSize:r,pages:s,pageBreaks:l,updatedAt:i}}case B.RESET_DOCUMENT:return _e();case B.UPDATE_CONTINUOUS_CONTENT:{const r=ue(o.payload);return r===e.continuousContent?e:{...e,continuousContent:r,updatedAt:i}}case B.UPDATE_PAGE_BOUNDARIES:{const r=Array.isArray(o.payload)?o.payload:[];if(r.length===e.pageBoundaries.length&&r.length>0&&r[0].id===e.pageBoundaries[0]?.id&&r[r.length-1].id===e.pageBoundaries[r.length-1]?.id)return e;const s=e.activePage>=r.length?Math.max(0,r.length-1):e.activePage;return{...e,pageBoundaries:r,totalPages:r.length,activePage:s,updatedAt:i}}case B.ADD_PAGE_BREAK:{const{position:r="end",pageIndex:s}=o.payload||{},l='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';let n=e.continuousContent;if(r==="end")n=n+l+"<p><br></p>";else if(typeof r=="number"){const u=n.substring(0,r),y=n.substring(r);n=u+l+y}else if(typeof s=="number"&&typeof document<"u"){const u=document.createElement("div");u.innerHTML=n;const y=u.querySelectorAll('page-break, [data-page-break="true"]');if(s===0&&y.length===0)n=n+l+"<p><br></p>";else if(s<y.length){const f=y[s],E=document.createElement("page-break");E.setAttribute("data-page-break","true"),E.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const g=document.createElement("p");g.innerHTML="<br>",f.parentNode.insertBefore(E,f.nextSibling),E.parentNode.insertBefore(g,E.nextSibling),n=u.innerHTML}else n=n+l+"<p><br></p>"}return{...e,continuousContent:n,updatedAt:i}}case B.REMOVE_PAGE_BREAK:{const{pageIndex:r}=o.payload||{};if(typeof r!="number"||typeof document>"u")return e;const s=document.createElement("div");s.innerHTML=e.continuousContent;const l=s.querySelectorAll('page-break, [data-page-break="true"]');return l[r]&&l[r].remove(),s.querySelectorAll('page-break, [data-page-break="true"]').forEach((u,y)=>{u.setAttribute("data-page-number",String(y+2))}),{...e,continuousContent:s.innerHTML,updatedAt:i}}case B.SET_EDITOR_MODE:{const r=o.payload;if(r===e.editorMode)return e;let s=e.continuousContent,l=e.pages;return r==="continuous"?s=e.pages.map(u=>u.content).filter(u=>u&&u!==oe).join(`
`)||oe:e.continuousContent&&e.continuousContent!==oe&&(l=[{...ce(0,e.pageSize),content:e.continuousContent}]),{...e,editorMode:r,continuousContent:s,pages:l,updatedAt:i}}default:return e}},Le=b.createContext(null),bt=({children:e,initialState:o={}})=>{const[i,r]=b.useReducer(yt,_e(o)),s=b.useMemo(()=>({initializeDocument:n=>r({type:B.INITIALIZE_DOCUMENT,payload:n}),updateTitle:n=>r({type:B.UPDATE_TITLE,payload:n}),updatePageContent:n=>r({type:B.UPDATE_PAGE_CONTENT,payload:n}),updatePages:n=>r({type:B.UPDATE_PAGES,payload:n}),addPage:n=>r({type:B.ADD_PAGE,payload:n}),deletePage:n=>r({type:B.DELETE_PAGE,payload:n}),setActivePage:n=>r({type:B.SET_ACTIVE_PAGE,payload:n}),updatePageSize:n=>r({type:B.UPDATE_PAGE_SIZE,payload:n}),resetDocument:()=>r({type:B.RESET_DOCUMENT}),updateContinuousContent:n=>r({type:B.UPDATE_CONTINUOUS_CONTENT,payload:n}),updatePageBoundaries:n=>r({type:B.UPDATE_PAGE_BOUNDARIES,payload:n}),addPageBreak:n=>r({type:B.ADD_PAGE_BREAK,payload:n}),removePageBreak:n=>r({type:B.REMOVE_PAGE_BREAK,payload:n}),setEditorMode:n=>r({type:B.SET_EDITOR_MODE,payload:n}),insertPageAt:n=>r({type:B.INSERT_PAGE_AT,payload:n}),movePageTo:n=>r({type:B.MOVE_PAGE_TO,payload:n}),duplicatePage:n=>r({type:B.DUPLICATE_PAGE,payload:n})}),[]),l=b.useMemo(()=>({state:i,actions:s,dispatch:r}),[i,s]);return a.jsx(Le.Provider,{value:l,children:e})},xe=()=>{const e=b.useContext(Le);if(!e)throw new Error("useDocument must be used within a DocumentProvider");return e},Te=()=>{const{state:e}=xe();return e},Ae=()=>{const{actions:e}=xe();return e};var de={exports:{}},fe={exports:{}},q={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ze;function Et(){if(ze)return q;ze=1;var e=typeof Symbol=="function"&&Symbol.for,o=e?Symbol.for("react.element"):60103,i=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,l=e?Symbol.for("react.profiler"):60114,n=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,y=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,E=e?Symbol.for("react.forward_ref"):60112,g=e?Symbol.for("react.suspense"):60113,S=e?Symbol.for("react.suspense_list"):60120,T=e?Symbol.for("react.memo"):60115,z=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,M=e?Symbol.for("react.fundamental"):60117,j=e?Symbol.for("react.responder"):60118,k=e?Symbol.for("react.scope"):60119;function P(c){if(typeof c=="object"&&c!==null){var w=c.$$typeof;switch(w){case o:switch(c=c.type,c){case y:case f:case r:case l:case s:case g:return c;default:switch(c=c&&c.$$typeof,c){case u:case E:case z:case T:case n:return c;default:return w}}case i:return w}}}function C(c){return P(c)===f}return q.AsyncMode=y,q.ConcurrentMode=f,q.ContextConsumer=u,q.ContextProvider=n,q.Element=o,q.ForwardRef=E,q.Fragment=r,q.Lazy=z,q.Memo=T,q.Portal=i,q.Profiler=l,q.StrictMode=s,q.Suspense=g,q.isAsyncMode=function(c){return C(c)||P(c)===y},q.isConcurrentMode=C,q.isContextConsumer=function(c){return P(c)===u},q.isContextProvider=function(c){return P(c)===n},q.isElement=function(c){return typeof c=="object"&&c!==null&&c.$$typeof===o},q.isForwardRef=function(c){return P(c)===E},q.isFragment=function(c){return P(c)===r},q.isLazy=function(c){return P(c)===z},q.isMemo=function(c){return P(c)===T},q.isPortal=function(c){return P(c)===i},q.isProfiler=function(c){return P(c)===l},q.isStrictMode=function(c){return P(c)===s},q.isSuspense=function(c){return P(c)===g},q.isValidElementType=function(c){return typeof c=="string"||typeof c=="function"||c===r||c===f||c===l||c===s||c===g||c===S||typeof c=="object"&&c!==null&&(c.$$typeof===z||c.$$typeof===T||c.$$typeof===n||c.$$typeof===u||c.$$typeof===E||c.$$typeof===M||c.$$typeof===j||c.$$typeof===k||c.$$typeof===N)},q.typeOf=P,q}var G={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Be;function vt(){return Be||(Be=1,process.env.NODE_ENV!=="production"&&(function(){var e=typeof Symbol=="function"&&Symbol.for,o=e?Symbol.for("react.element"):60103,i=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,l=e?Symbol.for("react.profiler"):60114,n=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,y=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,E=e?Symbol.for("react.forward_ref"):60112,g=e?Symbol.for("react.suspense"):60113,S=e?Symbol.for("react.suspense_list"):60120,T=e?Symbol.for("react.memo"):60115,z=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,M=e?Symbol.for("react.fundamental"):60117,j=e?Symbol.for("react.responder"):60118,k=e?Symbol.for("react.scope"):60119;function P(m){return typeof m=="string"||typeof m=="function"||m===r||m===f||m===l||m===s||m===g||m===S||typeof m=="object"&&m!==null&&(m.$$typeof===z||m.$$typeof===T||m.$$typeof===n||m.$$typeof===u||m.$$typeof===E||m.$$typeof===M||m.$$typeof===j||m.$$typeof===k||m.$$typeof===N)}function C(m){if(typeof m=="object"&&m!==null){var re=m.$$typeof;switch(re){case o:var be=m.type;switch(be){case y:case f:case r:case l:case s:case g:return be;default:var ut=be&&be.$$typeof;switch(ut){case u:case E:case z:case T:case n:return ut;default:return re}}case i:return re}}}var c=y,w=f,L=u,I=n,U=o,J=E,H=r,K=z,F=T,V=i,ee=l,Z=s,Q=g,te=!1;function ne(m){return te||(te=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),d(m)||C(m)===y}function d(m){return C(m)===f}function t(m){return C(m)===u}function p(m){return C(m)===n}function _(m){return typeof m=="object"&&m!==null&&m.$$typeof===o}function v(m){return C(m)===E}function $(m){return C(m)===r}function O(m){return C(m)===z}function A(m){return C(m)===T}function h(m){return C(m)===i}function R(m){return C(m)===l}function D(m){return C(m)===s}function X(m){return C(m)===g}G.AsyncMode=c,G.ConcurrentMode=w,G.ContextConsumer=L,G.ContextProvider=I,G.Element=U,G.ForwardRef=J,G.Fragment=H,G.Lazy=K,G.Memo=F,G.Portal=V,G.Profiler=ee,G.StrictMode=Z,G.Suspense=Q,G.isAsyncMode=ne,G.isConcurrentMode=d,G.isContextConsumer=t,G.isContextProvider=p,G.isElement=_,G.isForwardRef=v,G.isFragment=$,G.isLazy=O,G.isMemo=A,G.isPortal=h,G.isProfiler=R,G.isStrictMode=D,G.isSuspense=X,G.isValidElementType=P,G.typeOf=C})()),G}var Ue;function qe(){return Ue||(Ue=1,process.env.NODE_ENV==="production"?fe.exports=Et():fe.exports=vt()),fe.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Pe,Ge;function _t(){if(Ge)return Pe;Ge=1;var e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function r(l){if(l==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}function s(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de",Object.getOwnPropertyNames(l)[0]==="5")return!1;for(var n={},u=0;u<10;u++)n["_"+String.fromCharCode(u)]=u;var y=Object.getOwnPropertyNames(n).map(function(E){return n[E]});if(y.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(E){f[E]=E}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Pe=s()?Object.assign:function(l,n){for(var u,y=r(l),f,E=1;E<arguments.length;E++){u=Object(arguments[E]);for(var g in u)o.call(u,g)&&(y[g]=u[g]);if(e){f=e(u);for(var S=0;S<f.length;S++)i.call(u,f[S])&&(y[f[S]]=u[f[S]])}}return y},Pe}var ke,He;function Ce(){if(He)return ke;He=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ke=e,ke}var Se,Ye;function Fe(){return Ye||(Ye=1,Se=Function.call.bind(Object.prototype.hasOwnProperty)),Se}var we,Ve;function xt(){if(Ve)return we;Ve=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var o=Ce(),i={},r=Fe();e=function(l){var n="Warning: "+l;typeof console<"u"&&console.error(n);try{throw new Error(n)}catch{}}}function s(l,n,u,y,f){if(process.env.NODE_ENV!=="production"){for(var E in l)if(r(l,E)){var g;try{if(typeof l[E]!="function"){var S=Error((y||"React class")+": "+u+" type `"+E+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof l[E]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw S.name="Invariant Violation",S}g=l[E](n,E,y,u,null,o)}catch(z){g=z}if(g&&!(g instanceof Error)&&e((y||"React class")+": type specification of "+u+" `"+E+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof g+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),g instanceof Error&&!(g.message in i)){i[g.message]=!0;var T=f?f():"";e("Failed "+u+" type: "+g.message+(T??""))}}}}return s.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(i={})},we=s,we}var Ne,We;function Tt(){if(We)return Ne;We=1;var e=qe(),o=_t(),i=Ce(),r=Fe(),s=xt(),l=function(){};process.env.NODE_ENV!=="production"&&(l=function(u){var y="Warning: "+u;typeof console<"u"&&console.error(y);try{throw new Error(y)}catch{}});function n(){return null}return Ne=function(u,y){var f=typeof Symbol=="function"&&Symbol.iterator,E="@@iterator";function g(d){var t=d&&(f&&d[f]||d[E]);if(typeof t=="function")return t}var S="<<anonymous>>",T={array:j("array"),bigint:j("bigint"),bool:j("boolean"),func:j("function"),number:j("number"),object:j("object"),string:j("string"),symbol:j("symbol"),any:k(),arrayOf:P,element:C(),elementType:c(),instanceOf:w,node:J(),objectOf:I,oneOf:L,oneOfType:U,shape:K,exact:F};function z(d,t){return d===t?d!==0||1/d===1/t:d!==d&&t!==t}function N(d,t){this.message=d,this.data=t&&typeof t=="object"?t:{},this.stack=""}N.prototype=Error.prototype;function M(d){if(process.env.NODE_ENV!=="production")var t={},p=0;function _($,O,A,h,R,D,X){if(h=h||S,D=D||A,X!==i){if(y){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var re=h+":"+A;!t[re]&&p<3&&(l("You are manually calling a React.PropTypes validation function for the `"+D+"` prop on `"+h+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),t[re]=!0,p++)}}return O[A]==null?$?O[A]===null?new N("The "+R+" `"+D+"` is marked as required "+("in `"+h+"`, but its value is `null`.")):new N("The "+R+" `"+D+"` is marked as required in "+("`"+h+"`, but its value is `undefined`.")):null:d(O,A,h,R,D)}var v=_.bind(null,!1);return v.isRequired=_.bind(null,!0),v}function j(d){function t(p,_,v,$,O,A){var h=p[_],R=Z(h);if(R!==d){var D=Q(h);return new N("Invalid "+$+" `"+O+"` of type "+("`"+D+"` supplied to `"+v+"`, expected ")+("`"+d+"`."),{expectedType:d})}return null}return M(t)}function k(){return M(n)}function P(d){function t(p,_,v,$,O){if(typeof d!="function")return new N("Property `"+O+"` of component `"+v+"` has invalid PropType notation inside arrayOf.");var A=p[_];if(!Array.isArray(A)){var h=Z(A);return new N("Invalid "+$+" `"+O+"` of type "+("`"+h+"` supplied to `"+v+"`, expected an array."))}for(var R=0;R<A.length;R++){var D=d(A,R,v,$,O+"["+R+"]",i);if(D instanceof Error)return D}return null}return M(t)}function C(){function d(t,p,_,v,$){var O=t[p];if(!u(O)){var A=Z(O);return new N("Invalid "+v+" `"+$+"` of type "+("`"+A+"` supplied to `"+_+"`, expected a single ReactElement."))}return null}return M(d)}function c(){function d(t,p,_,v,$){var O=t[p];if(!e.isValidElementType(O)){var A=Z(O);return new N("Invalid "+v+" `"+$+"` of type "+("`"+A+"` supplied to `"+_+"`, expected a single ReactElement type."))}return null}return M(d)}function w(d){function t(p,_,v,$,O){if(!(p[_]instanceof d)){var A=d.name||S,h=ne(p[_]);return new N("Invalid "+$+" `"+O+"` of type "+("`"+h+"` supplied to `"+v+"`, expected ")+("instance of `"+A+"`."))}return null}return M(t)}function L(d){if(!Array.isArray(d))return process.env.NODE_ENV!=="production"&&(arguments.length>1?l("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):l("Invalid argument supplied to oneOf, expected an array.")),n;function t(p,_,v,$,O){for(var A=p[_],h=0;h<d.length;h++)if(z(A,d[h]))return null;var R=JSON.stringify(d,function(X,m){var re=Q(m);return re==="symbol"?String(m):m});return new N("Invalid "+$+" `"+O+"` of value `"+String(A)+"` "+("supplied to `"+v+"`, expected one of "+R+"."))}return M(t)}function I(d){function t(p,_,v,$,O){if(typeof d!="function")return new N("Property `"+O+"` of component `"+v+"` has invalid PropType notation inside objectOf.");var A=p[_],h=Z(A);if(h!=="object")return new N("Invalid "+$+" `"+O+"` of type "+("`"+h+"` supplied to `"+v+"`, expected an object."));for(var R in A)if(r(A,R)){var D=d(A,R,v,$,O+"."+R,i);if(D instanceof Error)return D}return null}return M(t)}function U(d){if(!Array.isArray(d))return process.env.NODE_ENV!=="production"&&l("Invalid argument supplied to oneOfType, expected an instance of array."),n;for(var t=0;t<d.length;t++){var p=d[t];if(typeof p!="function")return l("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+te(p)+" at index "+t+"."),n}function _(v,$,O,A,h){for(var R=[],D=0;D<d.length;D++){var X=d[D],m=X(v,$,O,A,h,i);if(m==null)return null;m.data&&r(m.data,"expectedType")&&R.push(m.data.expectedType)}var re=R.length>0?", expected one of type ["+R.join(", ")+"]":"";return new N("Invalid "+A+" `"+h+"` supplied to "+("`"+O+"`"+re+"."))}return M(_)}function J(){function d(t,p,_,v,$){return V(t[p])?null:new N("Invalid "+v+" `"+$+"` supplied to "+("`"+_+"`, expected a ReactNode."))}return M(d)}function H(d,t,p,_,v){return new N((d||"React class")+": "+t+" type `"+p+"."+_+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+v+"`.")}function K(d){function t(p,_,v,$,O){var A=p[_],h=Z(A);if(h!=="object")return new N("Invalid "+$+" `"+O+"` of type `"+h+"` "+("supplied to `"+v+"`, expected `object`."));for(var R in d){var D=d[R];if(typeof D!="function")return H(v,$,O,R,Q(D));var X=D(A,R,v,$,O+"."+R,i);if(X)return X}return null}return M(t)}function F(d){function t(p,_,v,$,O){var A=p[_],h=Z(A);if(h!=="object")return new N("Invalid "+$+" `"+O+"` of type `"+h+"` "+("supplied to `"+v+"`, expected `object`."));var R=o({},p[_],d);for(var D in R){var X=d[D];if(r(d,D)&&typeof X!="function")return H(v,$,O,D,Q(X));if(!X)return new N("Invalid "+$+" `"+O+"` key `"+D+"` supplied to `"+v+"`.\nBad object: "+JSON.stringify(p[_],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(d),null,"  "));var m=X(A,D,v,$,O+"."+D,i);if(m)return m}return null}return M(t)}function V(d){switch(typeof d){case"number":case"string":case"undefined":return!0;case"boolean":return!d;case"object":if(Array.isArray(d))return d.every(V);if(d===null||u(d))return!0;var t=g(d);if(t){var p=t.call(d),_;if(t!==d.entries){for(;!(_=p.next()).done;)if(!V(_.value))return!1}else for(;!(_=p.next()).done;){var v=_.value;if(v&&!V(v[1]))return!1}}else return!1;return!0;default:return!1}}function ee(d,t){return d==="symbol"?!0:t?t["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&t instanceof Symbol:!1}function Z(d){var t=typeof d;return Array.isArray(d)?"array":d instanceof RegExp?"object":ee(t,d)?"symbol":t}function Q(d){if(typeof d>"u"||d===null)return""+d;var t=Z(d);if(t==="object"){if(d instanceof Date)return"date";if(d instanceof RegExp)return"regexp"}return t}function te(d){var t=Q(d);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function ne(d){return!d.constructor||!d.constructor.name?S:d.constructor.name}return T.checkPropTypes=s,T.resetWarningCache=s.resetWarningCache,T.PropTypes=T,T},Ne}var je,Ke;function At(){if(Ke)return je;Ke=1;var e=Ce();function o(){}function i(){}return i.resetWarningCache=o,je=function(){function r(n,u,y,f,E,g){if(g!==e){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}r.isRequired=r;function s(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:i,resetWarningCache:o};return l.PropTypes=l,l},je}var Je;function Pt(){if(Je)return de.exports;if(Je=1,process.env.NODE_ENV!=="production"){var e=qe(),o=!0;de.exports=Tt()(e.isElement,o)}else de.exports=At()();return de.exports}var kt=Pt();const x=dt(kt),Ct={"10px":"1","12px":"2","14px":"3","16px":"4","18px":"5","24px":"6","32px":"7"},Ze={bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:"12px"},Xe=()=>{const[e,o]=b.useState(Ze),i=b.useCallback(n=>{o(u=>({...u,alignLeft:n==="left",alignCenter:n==="center",alignRight:n==="right",alignJustify:n==="justify"}))},[]),r=b.useCallback(n=>{try{const u=window.getSelection();if(!u||u.rangeCount===0)return!1;const y=u.getRangeAt(0);if(!y.toString())return o(E=>({...E,fontSize:n})),!1;try{const E=document.createElement("span");E.style.fontSize=n;const g=y.extractContents();return E.appendChild(g),y.insertNode(E),y.selectNodeContents(E),u.removeAllRanges(),u.addRange(y),o(S=>({...S,fontSize:n})),!0}catch{const g=Ct[n]||"2";return document.execCommand("fontSize",!1,g),o(S=>({...S,fontSize:n})),!0}}catch(u){return console.warn("[useFormatting] Font size change failed:",u),!1}},[]),s=b.useCallback((n,u=null)=>{try{if(typeof document.execCommand!="function"){console.warn("[useFormatting] execCommand not supported");return}if(n==="fontSize"){r(u);return}switch(document.execCommand(n,!1,u)||console.warn(`[useFormatting] Command "${n}" failed`),n){case"bold":o(f=>({...f,bold:!f.bold}));break;case"italic":o(f=>({...f,italic:!f.italic}));break;case"underline":o(f=>({...f,underline:!f.underline}));break;case"strikethrough":o(f=>({...f,strikethrough:!f.strikethrough}));break;case"justifyLeft":i("left");break;case"justifyCenter":i("center");break;case"justifyRight":i("right");break;case"justifyFull":i("justify");break;case"fontName":o(f=>({...f,fontFamily:u}));break;default:break}}catch(y){console.warn(`[useFormatting] Error executing command "${n}":`,y)}},[r,i]),l=b.useCallback(()=>{o(Ze)},[]);return{currentFormat:e,formatText:s,resetFormat:l}},pe={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},Qe={top:60,bottom:100,left:72,right:72},St=300,wt=500,Nt=50,jt='page-break, [data-page-break="true"]',et=(e,o)=>{const i=Ae(),r=b.useRef(null),s=b.useRef(null),l=b.useRef(e),n=b.useRef(!1);b.useEffect(()=>{l.current=e},[e]),b.useEffect(()=>()=>{r.current&&clearTimeout(r.current),s.current&&clearTimeout(s.current)},[]);const u=b.useCallback((k,P)=>{if(!k||k.length===0)return null;let C=0;for(let c=0;c<k.length;c++){const w=k[c];if(!w||!w.getBoundingClientRect)continue;const L=w.getBoundingClientRect().height;if(C+L>P)return{overflowIndex:c,overflowElement:w,accumulatedHeight:C};C+=L}return null},[]),y=b.useCallback((k,P)=>{if(!k||!o?.current)return!1;try{const C=o.current,c=document.createElement("page-break");return c.setAttribute("data-page-break","true"),c.setAttribute("contenteditable","false"),c.setAttribute("data-page-number",P||"2"),k.parentNode.insertBefore(c,k),!0}catch(C){return console.warn("[insertPageBreakBefore] Failed to insert page break:",C),!1}},[o]),f=b.useCallback((k={})=>{if(!o?.current||typeof document>"u")return[];const P=k.pageSize||l.current||"A4",C=pe[P]||pe.A4,c=o.current,w=c.querySelectorAll(jt),L=[];L.push({id:"page-0",pageNumber:1,top:0,height:C.height});const I=c.getBoundingClientRect(),U=c.scrollTop;return w.forEach((J,H)=>{const F=J.getBoundingClientRect().top-I.top+U;L.push({id:`page-${H+1}`,pageNumber:H+2,top:F,height:C.height})}),L},[o]),E=b.useCallback((k={})=>{const P=f(k);return i.updatePageBoundaries(P),P},[f,i]),g=b.useCallback(()=>{if(!(!o?.current||n.current))try{n.current=!0;const k=o.current,P=l.current||"A4",c=(pe[P]||pe.A4).height-Qe.top-Qe.bottom,w=Array.from(k.children);if(w.length===0)return;const L=w.filter(H=>H.tagName==="PAGE-BREAK"||H.getAttribute("data-page-break")==="true"),I=[];let U=[];for(const H of w)H.tagName==="PAGE-BREAK"||H.getAttribute("data-page-break")==="true"?U.length>0&&(I.push(U),U=[]):U.push(H);U.length>0&&I.push(U),I.length===0&&w.length>0&&I.push(w.filter(H=>!(H.tagName==="PAGE-BREAK"||H.getAttribute("data-page-break")==="true")));let J=!1;for(let H=0;H<I.length;H++){const K=I[H],F=u(K,c);if(F&&F.overflowIndex>0){const V=H+2;if(y(F.overflowElement,V)){J=!0;break}}}if(J){const H=k.innerHTML;i.updateContinuousContent(H),setTimeout(()=>{E()},Nt)}}catch(k){console.warn("[checkAndReflow] Reflow failed:",k)}finally{n.current=!1}},[o,u,y,i,E]),S=b.useCallback((k=wt)=>{s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{s.current=null,g()},k)},[g]),T=b.useCallback((k={})=>{r.current&&clearTimeout(r.current);const P=typeof k.delay=="number"?k.delay:St;r.current=setTimeout(()=>{r.current=null,E(k)},Math.max(0,P))},[E]),z=b.useCallback(k=>{if(!k?.current||!o?.current)return 0;try{const P=k.current,c=o.current.querySelectorAll('page-break, [data-page-break="true"]');if(c.length===0)return 0;const w=P.getBoundingClientRect(),L=w.top+w.height/2;for(let I=c.length-1;I>=0;I--)if(c[I].getBoundingClientRect().top<L)return I+1;return 0}catch(P){return console.warn("[getCurrentPage] Failed to calculate page:",P),0}},[o]),N=b.useCallback(k=>{if(!o?.current)return;const P=o.current;P.focus();try{let C=null,c=0;if(k===0)C=P.firstChild,c=0;else{const L=P.querySelectorAll('page-break, [data-page-break="true"]')[k-1];L&&L.nextSibling&&(C=L.nextSibling,c=0)}if(C){const w=document.createRange(),L=window.getSelection();C.nodeType===Node.TEXT_NODE?w.setStart(C,c):w.setStart(C,0),w.collapse(!0),L.removeAllRanges(),L.addRange(w)}}catch(C){console.warn("[positionCursorAtPage] Failed to position cursor:",C)}},[o]),M=b.useCallback((k,P)=>{if(!P?.current||!o?.current){console.warn("[scrollToPage] Missing refs");return}const C=P.current,c=o.current;try{let w=null;if(k===0)w=c;else{const I=c.querySelectorAll('page-break, [data-page-break="true"]')[k-1];if(I)w=I;else{console.warn("[scrollToPage] Page break not found for page",k);return}}if(w){const L=w.getBoundingClientRect(),I=C.getBoundingClientRect(),U=C.scrollTop+(L.top-I.top);console.log("[scrollToPage] Scrolling to page",k,"scrollTop:",U),C.scrollTo({top:U,behavior:"smooth"}),setTimeout(()=>{N(k)},400)}}catch(w){console.error("[scrollToPage] Error:",w)}},[o,N]),j=b.useCallback(k=>{if(!o?.current)return!1;const P=o.current;if(f().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const c=Array.from(P.querySelectorAll('page-break, [data-page-break="true"]'));if(k>c.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const w=window.getSelection();let L=!1,I=[],U=null;if(k===0){const K=c[0];if(!K)return console.warn("[removePageAndContent] No page break found for first page"),!1;let F=P.firstChild;for(;F&&F!==K;)I.push(F),F=F.nextSibling;U=K}else{const K=c[k-1];if(!K)return console.warn("[removePageAndContent] Page break not found"),!1;const F=c[k];let V=K.nextSibling;for(;V&&V!==F;)I.push(V),V=V.nextSibling;U=K}if(w&&w.rangeCount>0){const F=w.getRangeAt(0).startContainer;for(const V of I)if(V.contains(F)||V===F){L=!0;break}}U&&U.parentNode&&U.remove(),I.forEach(K=>{K.parentNode&&K.remove()}),P.querySelectorAll('page-break, [data-page-break="true"]').forEach((K,F)=>{K.setAttribute("data-page-number",String(F+2))}),L&&setTimeout(()=>{N(0)},50);const H=P.innerHTML;return i.updateContinuousContent(H),setTimeout(()=>{E()},100),!0}catch(c){return console.error("[removePageAndContent] Failed to remove page:",c),!1}},[o,f,i,E,N]);return{calculatePageBoundaries:f,checkAndUpdateBoundaries:T,updateBoundaries:E,getCurrentPage:z,scrollToPage:M,positionCursorAtPage:N,checkAndReflow:g,triggerAutoReflow:S,removePageAndContent:j,boundaryTimeoutRef:r,reflowTimeoutRef:s}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Rt=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,i,r)=>r?r.toUpperCase():i.toLowerCase()),tt=e=>{const o=Rt(e);return o.charAt(0).toUpperCase()+o.slice(1)},rt=(...e)=>e.filter((o,i,r)=>!!o&&o.trim()!==""&&r.indexOf(o)===i).join(" ").trim(),Mt=e=>{for(const o in e)if(o.startsWith("aria-")||o==="role"||o==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var It={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=b.forwardRef(({color:e="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:n,...u},y)=>b.createElement("svg",{ref:y,...It,width:o,height:o,stroke:e,strokeWidth:r?Number(i)*24/Number(o):i,className:rt("lucide",s),...!l&&!Mt(u)&&{"aria-hidden":"true"},...u},[...n.map(([f,E])=>b.createElement(f,E)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(e,o)=>{const i=b.forwardRef(({className:r,...s},l)=>b.createElement(Dt,{ref:l,iconNode:o,className:rt(`lucide-${Ot(tt(e))}`,`lucide-${e}`,r),...s}));return i.displayName=tt(e),i};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=Y("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=Y("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Y("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=Y("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=Y("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Y("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=Y("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Y("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=Y("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=Y("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=Y("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=Y("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=Y("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=Y("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Y("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Y("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=Y("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=Y("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=Y("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=Y("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=Y("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Y("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=Y("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=Y("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=Y("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Y("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Y("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ot=({editorView:e,isCollapsed:o,onToggle:i,wordCount:r,pageCount:s})=>{const l=Te(),{pages:n,activePage:u,continuousContent:y,editorMode:f}=l,[E,g]=b.useState(0),[S,T]=b.useState([]);b.useEffect(()=>{if(r!==void 0&&s!==void 0){if(g(r),y){const j=document.createElement("div");j.innerHTML=y;const k=j.querySelectorAll("h1, h2, h3, h4, h5, h6"),P=Array.from(k).map((C,c)=>{const w=parseInt(C.tagName.charAt(1)),L=C.textContent.trim();return L?{id:`heading-${c}`,level:w,text:L,page:1}:null}).filter(Boolean);T(P)}return}let N=0;const M=[];n.forEach((j,k)=>{if(j.content){const P=document.createElement("div");P.innerHTML=j.content;const c=(P.textContent||P.innerText||"").trim().split(/\s+/).filter(L=>L.length>0);N+=c.length,P.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((L,I)=>{const U=parseInt(L.tagName.charAt(1)),J=L.textContent.trim();J&&M.push({id:`heading-${k}-${I}`,level:U,text:J,page:k+1})})}}),g(N),T(M)},[n,r,s,y]);const z=s!==void 0?s:n.length;return a.jsxs("aside",{className:`sidebar ${o?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[a.jsxs("div",{className:"sidebar-header",children:[a.jsxs("div",{className:"sidebar-title",children:[a.jsx(ge,{size:18}),a.jsx("h2",{children:"Document Info"})]}),a.jsx("button",{className:"sidebar-toggle",onClick:i,"aria-label":o?"Expand sidebar":"Collapse sidebar",title:o?"Expand sidebar":"Collapse sidebar",children:o?a.jsx(zt,{size:16}):a.jsx(Lt,{size:16})})]}),!o&&a.jsxs("div",{className:"sidebar-content",children:[a.jsxs("div",{className:"sidebar-section",children:[a.jsx("h3",{children:"Statistics"}),a.jsxs("div",{className:"stat-item",children:[a.jsxs("div",{className:"stat-label",children:[a.jsx(Bt,{size:14}),a.jsx("span",{children:"Pages:"})]}),a.jsx("span",{className:"stat-value",children:z})]}),a.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[a.jsxs("div",{className:"stat-label",children:[a.jsx(Ut,{size:14}),a.jsx("span",{children:"Words:"})]}),a.jsx("span",{className:"stat-value",children:E.toLocaleString()})]}),a.jsxs("div",{className:"stat-item",children:[a.jsxs("div",{className:"stat-label",children:[a.jsx(ge,{size:14}),a.jsx("span",{children:"Active Page:"})]}),a.jsx("span",{className:"stat-value",children:u+1})]})]}),S.length>0&&a.jsxs("div",{className:"sidebar-section",children:[a.jsxs("h3",{children:[a.jsx(nt,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),a.jsx("div",{className:"document-outline","data-testid":"outline",children:S.map(N=>{const M=N.level===1?qt:N.level===2?Gt:Ht;return a.jsxs("div",{className:`outline-item outline-level-${N.level}`,style:{marginLeft:`${(N.level-1)*12}px`},children:[a.jsx(M,{size:12,className:"outline-icon"}),a.jsx("span",{className:"outline-text",children:N.text}),a.jsxs("span",{className:"outline-page",children:["p.",N.page]})]},N.id)})})]}),a.jsxs("div",{className:"sidebar-section",children:[a.jsx("h3",{children:"Document"}),a.jsx("p",{children:"HTML Editor"}),a.jsx("p",{children:"Multi-page support"})]})]})]})};function cr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const o=Math.random()*16|0;return(e==="x"?o:o&3|8).toString(16)})}function at(e){return new Promise((o,i)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){i(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){i(new Error("Image exceeds maximum size of 5MB"));return}const s=new FileReader;s.onload=l=>{const n=l.target.result;if(n.split(",")[1].length*3/4>5*1024*1024){i(new Error("Image exceeds maximum size of 5MB"));return}try{const f=`editor-image-${cr()}`;localStorage.setItem(f,n),o(f)}catch(f){f.name==="QuotaExceededError"?i(new Error("Storage quota exceeded")):i(f)}},s.onerror=()=>{i(new Error("Error reading image file"))},s.readAsDataURL(e)})}function lr(e){return localStorage.getItem(e)}function ur(e){localStorage.removeItem(e)}function dr(){Object.keys(localStorage).forEach(e=>{e.startsWith("editor-image-")&&localStorage.removeItem(e)})}function fr(){return Object.keys(localStorage).filter(e=>e.startsWith("editor-image-"))}class it{constructor(o="Editor"){this.namespace=o}_format(o,i,r){return`[${new Date().toISOString()}] [${this.namespace}] [${o}] ${i}`}info(o,i){}warn(o,i){}error(o,i){}debug(o,i){}}const st=new it("Editor"),he=({currentFormat:e,pageSize:o,onFormatText:i,onPageSizeChange:r,onAddPageBreak:s})=>{const l=async n=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(n.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(n.size>5242880){alert("Image exceeds maximum size of 5MB");return}const y=await at(n),f=localStorage.getItem(y);f&&(document.execCommand("insertImage",!1,f),st.info("Image inserted",{key:y}))}catch(u){st.error("Error uploading image",u)}};return a.jsxs("div",{className:"editor-toolbar",children:[a.jsx("button",{onClick:()=>i("bold"),className:e.bold?"active":"",title:"Bold",children:a.jsx($t,{size:16})}),a.jsx("button",{onClick:()=>i("italic"),className:e.italic?"active":"",title:"Italic",children:a.jsx(Ft,{size:16})}),a.jsx("button",{onClick:()=>i("underline"),className:e.underline?"active":"",title:"Underline",children:a.jsx(ar,{size:16})}),a.jsx("button",{onClick:()=>i("strikethrough"),className:e.strikethrough?"active":"",title:"Strikethrough",children:a.jsx(Qt,{size:16})}),a.jsx("div",{className:"toolbar-separator"}),a.jsx("button",{onClick:()=>i("justifyLeft"),className:e.alignLeft?"active":"",title:"Align Left",children:a.jsx(or,{size:16})}),a.jsx("button",{onClick:()=>i("justifyCenter"),className:e.alignCenter?"active":"",title:"Align Center",children:a.jsx(tr,{size:16})}),a.jsx("button",{onClick:()=>i("justifyRight"),className:e.alignRight?"active":"",title:"Align Right",children:a.jsx(rr,{size:16})}),a.jsx("button",{onClick:()=>i("justifyFull"),className:e.alignJustify?"active":"",title:"Justify",children:a.jsx(nr,{size:16})}),a.jsx("div",{className:"toolbar-separator"}),a.jsxs("select",{onChange:n=>i("fontName",n.target.value),defaultValue:"Arial",title:"Font Family",children:[a.jsx("option",{value:"Arial",children:"Arial"}),a.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),a.jsx("option",{value:"Courier New",children:"Courier New"}),a.jsx("option",{value:"Georgia",children:"Georgia"}),a.jsx("option",{value:"Verdana",children:"Verdana"})]}),a.jsxs("select",{onChange:n=>i("fontSize",n.target.value),defaultValue:"12px",title:"Font Size",children:[a.jsx("option",{value:"10px",children:"10"}),a.jsx("option",{value:"12px",children:"12"}),a.jsx("option",{value:"14px",children:"14"}),a.jsx("option",{value:"16px",children:"16"}),a.jsx("option",{value:"18px",children:"18"}),a.jsx("option",{value:"24px",children:"24"}),a.jsx("option",{value:"32px",children:"32"})]}),a.jsx("div",{className:"toolbar-separator"}),a.jsx("button",{onClick:()=>i("insertUnorderedList"),title:"Bullet List",children:a.jsx(nt,{size:16})}),a.jsx("button",{onClick:()=>i("insertOrderedList"),title:"Numbered List",children:a.jsx(Wt,{size:16})}),a.jsx("button",{onClick:()=>i("insertCheckList"),title:"Checklist",children:a.jsx(Xt,{size:16})}),a.jsx("div",{className:"toolbar-separator"}),a.jsx("button",{onClick:()=>{const n=prompt("Enter URL:");n&&i("createLink",n)},title:"Insert Link",children:a.jsx(Vt,{size:16})}),a.jsx("button",{onClick:()=>i("insertHTML",'<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>'),title:"Insert Table",children:a.jsx(er,{size:16})}),s&&a.jsx("button",{onClick:s,title:"Insert Page Break",children:a.jsx(ge,{size:16})}),a.jsx("div",{className:"toolbar-separator"}),a.jsx("button",{onClick:()=>i("undo"),title:"Undo",children:a.jsx(ir,{size:16})}),a.jsx("button",{onClick:()=>i("redo"),title:"Redo",children:a.jsx(Jt,{size:16})}),a.jsx("div",{className:"toolbar-separator"}),a.jsx("input",{type:"file",accept:"image/*",onChange:n=>n.target.files[0]&&l(n.target.files[0]),style:{display:"none"},id:"image-upload"}),a.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:a.jsx(Yt,{size:16})}),a.jsx("div",{className:"toolbar-separator"}),a.jsxs("select",{value:o,onChange:n=>r(n.target.value),title:"Page Size",children:[a.jsx("option",{value:"A4",children:"A4"}),a.jsx("option",{value:"Letter",children:"Letter"}),a.jsx("option",{value:"Legal",children:"Legal"})]})]})};he.propTypes={currentFormat:x.shape({bold:x.bool,italic:x.bool,underline:x.bool,strikethrough:x.bool,alignLeft:x.bool,alignCenter:x.bool,alignRight:x.bool,alignJustify:x.bool,fontFamily:x.string,fontSize:x.string}).isRequired,pageSize:x.oneOf(["A4","Letter","Legal"]).isRequired,onFormatText:x.func.isRequired,onPageSizeChange:x.func.isRequired,onAddPageBreak:x.func},he.defaultProps={onAddPageBreak:void 0};const me=({content:e,dimensions:o,pageSize:i,pageBoundaries:r=[],editorRef:s,onInput:l,onKeyDown:n,onClick:u,onScroll:y})=>{const f={top:60,bottom:100,left:72,right:72},E=g=>{if(g.key==="Tab")return g.preventDefault(),document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;"),!1;const S=window.getSelection();if(!S||S.rangeCount===0)return;const T=S.getRangeAt(0),{startContainer:z,endContainer:N}=T,M=j=>j?j.nodeType===Node.ELEMENT_NODE?j.tagName==="PAGE-BREAK"||j.getAttribute("data-page-break")==="true":j.parentElement&&M(j.parentElement):!1;if((g.key==="Backspace"||g.key==="Delete")&&(M(z)||M(N)))return g.preventDefault(),!1;n&&n(g)};return a.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${o.width}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh"},children:a.jsx("div",{ref:s,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${o.height}px`,backgroundColor:"white",padding:`${f.top}px ${f.right}px ${f.bottom}px ${f.left}px`,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:"Arial, sans-serif",fontSize:"12px",lineHeight:"1.15",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:l,onKeyDown:E,onClick:u,onScroll:y,"data-testid":"continuous-editor"})})};me.propTypes={content:x.string.isRequired,dimensions:x.shape({width:x.number.isRequired,height:x.number.isRequired}).isRequired,pageSize:x.oneOf(["A4","Letter","Legal"]).isRequired,pageBoundaries:x.arrayOf(x.shape({id:x.string.isRequired,pageNumber:x.number.isRequired,top:x.number,height:x.number})),editorRef:x.shape({current:x.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onInput:x.func.isRequired,onKeyDown:x.func,onClick:x.func,onScroll:x.func},me.defaultProps={pageBoundaries:[],onKeyDown:void 0,onClick:void 0,onScroll:void 0};const Oe=({pageBoundaries:e=[{id:"page-0",pageNumber:1}],activePage:o=0,pageSize:i="A4",onNavigate:r,onAddPage:s,onDeletePage:l,onPageSizeChange:n}={})=>{const u=Math.max(e?.length||0,1),y=S=>{r&&r(S)},f=()=>{s&&s()},E=S=>{if(u<=1){console.warn("[PageManager] Cannot delete the only page");return}l&&l(S)},g=S=>{n&&n(S)};return a.jsxs("div",{className:"page-manager",children:[a.jsxs("div",{className:"page-size-controls",children:[a.jsxs("label",{htmlFor:"page-size-selector",children:[a.jsx(Zt,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Size:"]}),a.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:i,onChange:S=>g(S.target.value),children:[a.jsx("option",{value:"A4",children:"A4"}),a.jsx("option",{value:"Letter",children:"Letter"}),a.jsx("option",{value:"Legal",children:"Legal"})]})]}),a.jsx("div",{className:"page-list",children:(e&&e.length>0?e:[{id:"page-0",pageNumber:1}]).map((S,T)=>a.jsxs("div",{className:"page-item",children:[a.jsxs("button",{type:"button",className:`page-button ${T===o?"active":""}`,onClick:()=>y(T),"aria-label":`Go to page ${T+1}`,"aria-current":T===o?"page":void 0,children:[a.jsx(ge,{size:14}),a.jsxs("span",{children:["Page ",T+1]})]}),u>1&&a.jsx("button",{type:"button",className:"delete-page-button",onClick:z=>{z.stopPropagation(),E(T)},"aria-label":`Delete page ${T+1}`,title:"Delete this page and its content",children:a.jsx(sr,{size:14})})]},S.id||`page-${T}`))}),a.jsxs("button",{type:"button",className:"add-page-button",onClick:f,"aria-label":"Add new page",title:"Add new page at end",children:[a.jsx(Kt,{size:16}),a.jsx("span",{children:"Add Page"})]})]})};Oe.propTypes={pageBoundaries:x.arrayOf(x.shape({id:x.string.isRequired,pageNumber:x.number.isRequired,top:x.number,height:x.number})),activePage:x.number,pageSize:x.oneOf(["A4","Letter","Legal"]),onNavigate:x.func,onAddPage:x.func,onDeletePage:x.func,onPageSizeChange:x.func},Oe.defaultProps={pageBoundaries:[{id:"page-0",pageNumber:1}],activePage:0,pageSize:"A4",onNavigate:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0};const ct=b.memo(Oe),lt={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}},pr=50,gr=50,hr=50,mr=100,yr=500,ye=b.forwardRef(({pageManagerComponent:e=null,onNavigatePage:o,onAddPage:i,onDeletePage:r,onPageSizeChange:s,onChange:l,showSidebar:n=!0,showToolbar:u=!0,showPageManager:y=!0},f)=>{const E=Te(),g=Ae(),{pageSize:S,continuousContent:T,pageBoundaries:z,activePage:N}=E,M=b.useRef(null),j=b.useRef(null),{currentFormat:k,formatText:P}=Xe(),{checkAndUpdateBoundaries:C,getCurrentPage:c,scrollToPage:w,positionCursorAtPage:L,updateBoundaries:I,triggerAutoReflow:U,removePageAndContent:J}=et(S,j),H=b.useMemo(()=>lt[S]||lt.A4,[S]),[K,F]=b.useState(!1),V=b.useRef(null),ee=b.useRef(!1),Z=b.useRef(!1),Q=b.useRef(!1),te=b.useRef(T);b.useEffect(()=>{if(j.current){if(!Q.current){j.current.innerHTML=T,Q.current=!0,te.current=T;const h=setTimeout(()=>{I()},pr);return()=>clearTimeout(h)}if(te.current!==T){if(j.current.innerHTML!==T){j.current.innerHTML=T;const R=setTimeout(()=>{if(I(),ee.current){ee.current=!1;const D=Math.max(0,z.length-1);g.setActivePage(D),setTimeout(()=>{w(D,M)},hr)}},gr);return te.current=T,()=>clearTimeout(R)}te.current=T}}},[T,I,z.length,g,w]),b.useEffect(()=>{l&&Q.current&&l(T)},[T,l]),b.useImperativeHandle(f,()=>({getHTMLContent:()=>T,getPlainText:()=>T.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),setContent:h=>{g.updateContinuousContent(h),j.current&&(j.current.innerHTML=h,setTimeout(()=>{I()},50))}}),[T,g,I]),b.useEffect(()=>{const h=setTimeout(()=>{j.current&&j.current.focus()},200);return()=>clearTimeout(h)},[]);const ne=b.useCallback(h=>{const R=h.currentTarget.innerHTML;g.updateContinuousContent(R),C(),U();const D=c(M);D!==N&&g.setActivePage(D)},[C,g,c,N,U,M]),d=b.useCallback(h=>{g.updatePageSize(h),I({pageSize:h}),s&&s(h)},[g,I,s]),t=b.useCallback(h=>{h<0||h>=z.length||(Z.current=!0,g.setActivePage(h),w(h,M),setTimeout(()=>{Z.current=!1},yr),o&&o(h))},[g,w,o,z.length]),p=b.useCallback(()=>{ee.current=!0,g.addPageBreak({position:"end"}),i&&i()},[g,i]),_=b.useCallback(()=>{const h=window.getSelection();if(h&&h.rangeCount>0){if(!j?.current)return;const X=`<page-break data-page-break="true" contenteditable="false" data-page-number="${j.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,X),setTimeout(()=>{I();const m=c(M);g.setActivePage(m)},150)}},[I,c,g,M]),v=b.useCallback(h=>{if(z.length<=1){console.warn("Cannot delete the only page");return}J(h)&&(g.setActivePage(0),r&&r(h))},[z.length,J,g,r]),$=b.useCallback(()=>{!M.current||!j.current||Z.current||(V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{if(Z.current){V.current=null;return}const h=c(M);h!==N&&h>=0&&g.setActivePage(h),V.current=null},mr))},[c,N,g]),O=b.useMemo(()=>{if(!T)return 0;const R=T.replace(/<[^>]*>/g," ").match(/\b\w+\b/g);return R?R.length:0},[T]),A=z.length||1;return b.useEffect(()=>()=>{V.current&&clearTimeout(V.current)},[]),a.jsxs("div",{className:"multi-page-editor",children:[u&&a.jsx(he,{currentFormat:k,pageSize:S,onFormatText:P,onPageSizeChange:d,onAddPageBreak:_}),a.jsxs("div",{className:"editor-container",children:[n&&a.jsx(ot,{editorView:null,isCollapsed:K,onToggle:()=>F(h=>!h),wordCount:O,pageCount:A}),a.jsx("div",{className:"editor-viewport continuous-scroll",ref:M,onScroll:$,children:a.jsx(me,{content:T,dimensions:H,pageSize:S,pageBoundaries:z,editorRef:j,onInput:ne,onClick:()=>j.current?.focus()})}),y&&a.jsx("div",{className:"page-manager-sidebar",children:e?b.cloneElement(e,{onNavigate:t,onAddPage:p,onDeletePage:v,onPageSizeChange:d}):a.jsx(ct,{pageBoundaries:z,activePage:N,pageSize:S,onNavigate:t,onAddPage:p,onDeletePage:v,onPageSizeChange:d})})]})]})});ye.displayName="ContentEditableEditor",ye.propTypes={pageManagerComponent:x.element,onNavigatePage:x.func,onAddPage:x.func,onDeletePage:x.func,onPageSizeChange:x.func,onChange:x.func,showSidebar:x.bool,showToolbar:x.bool,showPageManager:x.bool},ye.defaultProps={pageManagerComponent:null,onNavigatePage:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onChange:void 0,showSidebar:!0,showToolbar:!0,showPageManager:!0};class Re extends b.Component{constructor(o){super(o),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(o){return{hasError:!0}}componentDidCatch(o,i){console.error("[ErrorBoundary] Caught error:",o),console.error("[ErrorBoundary] Error info:",i),this.setState({error:o,errorInfo:i}),this.props.onError&&this.props.onError(o,i)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #f44336",borderRadius:"4px",backgroundColor:"#ffebee",color:"#c62828"},children:[a.jsx("h2",{style:{marginTop:0},children:"⚠️ Something went wrong"}),a.jsx("p",{children:"The editor encountered an unexpected error and couldn't continue."}),this.props.showDetails&&this.state.error&&a.jsxs("details",{style:{marginTop:"10px",padding:"10px",backgroundColor:"white",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[a.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),a.jsxs("pre",{style:{marginTop:"10px",overflow:"auto",maxHeight:"200px"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),a.jsx("button",{onClick:this.handleReset,style:{marginTop:"15px",padding:"8px 16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Try Again"})]}):this.props.children}}Re.propTypes={children:x.node.isRequired,fallback:x.node,onError:x.func,onReset:x.func,showDetails:x.bool},Re.defaultProps={fallback:null,onError:void 0,onReset:void 0,showDetails:process.env.NODE_ENV==="development"};const br={A4:{width:794,height:1123},Letter:{width:816,height:1056},Legal:{width:816,height:1344}};W.ContentEditableEditor=ye,W.ContinuousPageView=me,W.DocumentProvider=bt,W.EditorToolbar=he,W.ErrorBoundary=Re,W.PAGE_DIMENSIONS=br,W.PageManager=ct,W.Sidebar=ot,W.clearImages=dr,W.deleteImage=ur,W.getAllImageKeys=fr,W.getImage=lr,W.logger=it,W.saveImage=at,W.useContinuousReflow=et,W.useDocument=xe,W.useDocumentActions=Ae,W.useDocumentState=Te,W.useFormatting=Xe,Object.defineProperty(W,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
