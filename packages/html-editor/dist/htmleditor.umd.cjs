(function(D,p){typeof exports=="object"&&typeof module<"u"?p(exports,require("react"),require("uuid"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","uuid","react-dom"],p):(D=typeof globalThis<"u"?globalThis:D||self,p(D.HTMLEditor={},D.React,D.uuid,D.ReactDOM))})(this,(function(D,p,De,Xt){"use strict";function Jt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _e={exports:{}},be={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ct;function Qt(){if(ct)return be;ct=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(n,i,r){var o=null;if(r!==void 0&&(o=""+r),i.key!==void 0&&(o=""+i.key),"key"in i){r={};for(var s in i)s!=="key"&&(r[s]=i[s])}else r=i;return i=r.ref,{$$typeof:e,type:n,key:o,ref:i!==void 0?i:null,props:r}}return be.Fragment=t,be.jsx=a,be.jsxs=a,be}var Ee={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lt;function en(){return lt||(lt=1,process.env.NODE_ENV!=="production"&&(function(){function e(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===H?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case P:return"Fragment";case O:return"Profiler";case L:return"StrictMode";case R:return"Suspense";case z:return"SuspenseList";case j:return"Activity"}if(typeof c=="object")switch(typeof c.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),c.$$typeof){case E:return"Portal";case _:return c.displayName||"Context";case C:return(c._context.displayName||"Context")+".Consumer";case u:var k=c.render;return c=c.displayName,c||(c=k.displayName||k.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case g:return k=c.displayName||null,k!==null?k:e(c.type)||"Memo";case w:k=c._payload,c=c._init;try{return e(c(k))}catch{}}return null}function t(c){return""+c}function a(c){try{t(c);var k=!1}catch{k=!0}if(k){k=console;var M=k.error,N=typeof Symbol=="function"&&Symbol.toStringTag&&c[Symbol.toStringTag]||c.constructor.name||"Object";return M.call(k,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",N),t(c)}}function n(c){if(c===P)return"<>";if(typeof c=="object"&&c!==null&&c.$$typeof===w)return"<...>";try{var k=e(c);return k?"<"+k+">":"<...>"}catch{return"<...>"}}function i(){var c=J.A;return c===null?null:c.getOwner()}function r(){return Error("react-stack-top-frame")}function o(c){if(Q.call(c,"key")){var k=Object.getOwnPropertyDescriptor(c,"key").get;if(k&&k.isReactWarning)return!1}return c.key!==void 0}function s(c,k){function M(){ee||(ee=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",k))}M.isReactWarning=!0,Object.defineProperty(c,"key",{get:M,configurable:!0})}function h(){var c=e(this.type);return re[c]||(re[c]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),c=this.props.ref,c!==void 0?c:null}function y(c,k,M,N,U,G){var I=M.ref;return c={$$typeof:b,type:c,key:k,props:M,_owner:N},(I!==void 0?I:null)!==null?Object.defineProperty(c,"ref",{enumerable:!1,get:h}):Object.defineProperty(c,"ref",{enumerable:!1,value:null}),c._store={},Object.defineProperty(c._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(c,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(c,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:U}),Object.defineProperty(c,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:G}),Object.freeze&&(Object.freeze(c.props),Object.freeze(c)),c}function m(c,k,M,N,U,G){var I=k.children;if(I!==void 0)if(N)if(W(I)){for(N=0;N<I.length;N++)d(I[N]);Object.freeze&&Object.freeze(I)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else d(I);if(Q.call(k,"key")){I=e(c);var F=Object.keys(k).filter(function(Z){return Z!=="key"});N=0<F.length?"{key: someKey, "+F.join(": ..., ")+": ...}":"{key: someKey}",v[I+N]||(F=0<F.length?"{"+F.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,N,I,F,I),v[I+N]=!0)}if(I=null,M!==void 0&&(a(M),I=""+M),o(k)&&(a(k.key),I=""+k.key),"key"in k){M={};for(var Y in k)Y!=="key"&&(M[Y]=k[Y])}else M=k;return I&&s(M,typeof c=="function"?c.displayName||c.name||"Unknown":c),y(c,I,M,i(),U,G)}function d(c){f(c)?c._store&&(c._store.validated=1):typeof c=="object"&&c!==null&&c.$$typeof===w&&(c._payload.status==="fulfilled"?f(c._payload.value)&&c._payload.value._store&&(c._payload.value._store.validated=1):c._store&&(c._store.validated=1))}function f(c){return typeof c=="object"&&c!==null&&c.$$typeof===b}var T=p,b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),_=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),H=Symbol.for("react.client.reference"),J=T.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=Object.prototype.hasOwnProperty,W=Array.isArray,B=console.createTask?console.createTask:function(){return null};T={react_stack_bottom_frame:function(c){return c()}};var ee,re={},V=T.react_stack_bottom_frame.bind(T,r)(),ne=B(n(r)),v={};Ee.Fragment=P,Ee.jsx=function(c,k,M){var N=1e4>J.recentlyCreatedOwnerStacks++;return m(c,k,M,!1,N?Error("react-stack-top-frame"):V,N?B(n(c)):ne)},Ee.jsxs=function(c,k,M){var N=1e4>J.recentlyCreatedOwnerStacks++;return m(c,k,M,!0,N?Error("react-stack-top-frame"):V,N?B(n(c)):ne)}})()),Ee}var ut;function tn(){return ut||(ut=1,process.env.NODE_ENV==="production"?_e.exports=Qt():_e.exports=en()),_e.exports}var l=tn();const ze=100,$e=50,Be=200,dt=5,He=e=>e<Be,Ge=e=>e>$e,nn=96,Ae=e=>Math.round(e*nn),Pe={NORMAL:{name:"Normal",label:'Normal (1")',top:1,bottom:1,left:1,right:1},NARROW:{name:"Narrow",label:'Narrow (0.5")',top:.5,bottom:.5,left:.5,right:.5},MODERATE:{name:"Moderate",label:'Moderate (1" / 0.75")',top:1,bottom:1,left:.75,right:.75},WIDE:{name:"Wide",label:'Wide (1" / 2")',top:1,bottom:1,left:2,right:2},OFFICE_2003:{name:"Office 2003",label:'Office 2003 (1" / 1.25")',top:1,bottom:1,left:1.25,right:1.25}},de="NORMAL",ft=(e=de)=>{const t=Pe[e]||Pe[de];return{top:Ae(t.top),bottom:Ae(t.bottom),left:Ae(t.left),right:Ae(t.right)}},rn=(e=de)=>{const t=ft(e);return t.top+t.bottom},on=()=>Object.keys(Pe),an=e=>{const t=Pe[e];return t?t.label:"Unknown"},se={A4:{name:"A4",width:794,height:1123,widthMm:210,heightMm:297,widthIn:8.27,heightIn:11.69},Letter:{name:"Letter",width:816,height:1056,widthMm:216,heightMm:279,widthIn:8.5,heightIn:11},Legal:{name:"Legal",width:816,height:1344,widthMm:216,heightMm:356,widthIn:8.5,heightIn:14}},Ue="A4",ke=e=>{const t=se[e]||se[Ue];return{width:t.width,height:t.height}},sn=e=>Object.keys(se).includes(e),cn=()=>Object.keys(se),ve=Ue,ge="<p><br></p>",ln="continuous",Te=(e,t=ve)=>({id:De.v4(),index:e,size:t,content:ge,images:[],isBreakPoint:!1}),we=e=>typeof e!="string"||e.trim()===""?ge:e,pt=(e,t=ve)=>(e.length>0?e:[Te(0,t)]).map((n,i)=>({id:n.id||De.v4(),index:i,size:n.size||t,content:we(n.content),images:n.images||[],isBreakPoint:!!n.isBreakPoint})),un=(e=ve)=>[{id:"page-0",pageNumber:1,top:0,height:ke(e).height}],Fe=(e={})=>{const t=new Date().toISOString(),a=e.pageSize||ve,n=pt(e.pages||[Te(0,a)],a);return{id:De.v4(),title:e.title||"Untitled Document",createdAt:t,updatedAt:t,pageSize:a,pages:n,activePage:e.activePage&&e.activePage<n.length?e.activePage:0,pageBreaks:e.pageBreaks||[],totalPages:n.length,editorMode:e.editorMode||ln,continuousContent:e.continuousContent||ge,pageBoundaries:e.pageBoundaries||un(a),zoomLevel:e.zoomLevel||ze,pageMargins:e.pageMargins||de}},q={INITIALIZE_DOCUMENT:"INITIALIZE_DOCUMENT",UPDATE_TITLE:"UPDATE_TITLE",UPDATE_PAGE_CONTENT:"UPDATE_PAGE_CONTENT",UPDATE_PAGES:"UPDATE_PAGES",ADD_PAGE:"ADD_PAGE",DELETE_PAGE:"DELETE_PAGE",SET_ACTIVE_PAGE:"SET_ACTIVE_PAGE",UPDATE_PAGE_SIZE:"UPDATE_PAGE_SIZE",RESET_DOCUMENT:"RESET_DOCUMENT",UPDATE_CONTINUOUS_CONTENT:"UPDATE_CONTINUOUS_CONTENT",UPDATE_PAGE_BOUNDARIES:"UPDATE_PAGE_BOUNDARIES",ADD_PAGE_BREAK:"ADD_PAGE_BREAK",REMOVE_PAGE_BREAK:"REMOVE_PAGE_BREAK",SET_EDITOR_MODE:"SET_EDITOR_MODE",INSERT_PAGE_AT:"INSERT_PAGE_AT",MOVE_PAGE_TO:"MOVE_PAGE_TO",DUPLICATE_PAGE:"DUPLICATE_PAGE",SET_ZOOM_LEVEL:"SET_ZOOM_LEVEL",ZOOM_IN:"ZOOM_IN",ZOOM_OUT:"ZOOM_OUT",RESET_ZOOM:"RESET_ZOOM",UPDATE_PAGE_MARGINS:"UPDATE_PAGE_MARGINS"},dn=(e,t)=>{const a=new Date().toISOString();switch(t.type){case q.INITIALIZE_DOCUMENT:{const{initialContent:n=ge,pageSize:i=ve}=t.payload||{},r={...Te(0,i),content:we(n)};return Fe({title:e.title,pageSize:i,pages:[r]})}case q.UPDATE_TITLE:return{...e,title:t.payload,updatedAt:a};case q.UPDATE_PAGE_CONTENT:{const{pageIndex:n,content:i}=t.payload;if(n<0||n>=e.pages.length)return e;const r=[...e.pages];return r[n]={...r[n],content:we(i)},{...e,pages:r,updatedAt:a}}case q.UPDATE_PAGES:{const n=Array.isArray(t.payload)?{pages:t.payload}:t.payload||{},i=pt(n.pages||[],e.pageSize),r=Array.isArray(n.pageBreaks)?n.pageBreaks:i.slice(0,-1).map((o,s)=>({id:`auto-break-${s}`,pageNumber:s+1}));return{...e,pages:i,activePage:Math.min(e.activePage,i.length-1),pageBreaks:r,totalPages:i.length,updatedAt:a}}case q.ADD_PAGE:{const n=typeof t.payload?.index=="number"?Math.min(Math.max(t.payload.index,0),e.pages.length):e.pages.length,i=[...e.pages];i.splice(n,0,Te(n,e.pageSize));const r=i.map((s,h)=>({...s,index:h,size:e.pageSize})),o=r.slice(0,-1).map((s,h)=>({id:`auto-break-${h}`,pageNumber:h+1}));return{...e,pages:r,activePage:n,pageBreaks:o,totalPages:r.length,updatedAt:a}}case q.DELETE_PAGE:{const n=t.payload;if(e.pages.length<=1)return e;const i=[...e.pages];i.splice(n,1);const r=i.map((h,y)=>({...h,index:y,size:e.pageSize}));let o=e.activePage;o>=r.length?o=r.length-1:n<=o&&o>0&&(o-=1);const s=r.slice(0,-1).map((h,y)=>({id:`auto-break-${y}`,pageNumber:y+1}));return{...e,pages:r,activePage:o,pageBreaks:s,totalPages:r.length,updatedAt:a}}case q.SET_ACTIVE_PAGE:{const n=t.payload;if(n===e.activePage)return e;const i=e.editorMode==="continuous"?e.pageBoundaries.length:e.pages.length;return n<0||n>=i?e:{...e,activePage:n,updatedAt:a}}case q.UPDATE_PAGE_SIZE:{const n=t.payload;if(n===e.pageSize)return e;try{ke(n)}catch{return console.warn(`Invalid page size: ${n}`),e}const i=e.pages.map((o,s)=>({...o,index:s,size:n})),r=i.slice(0,-1).map((o,s)=>({id:`auto-break-${s}`,pageNumber:s+1}));return{...e,pageSize:n,pages:i,pageBreaks:r,updatedAt:a}}case q.RESET_DOCUMENT:return Fe();case q.UPDATE_CONTINUOUS_CONTENT:{const n=we(t.payload);return n===e.continuousContent?e:{...e,continuousContent:n,updatedAt:a}}case q.UPDATE_PAGE_BOUNDARIES:{const n=Array.isArray(t.payload)?t.payload:[];if(n.length===e.pageBoundaries.length&&n.length>0&&n[0].id===e.pageBoundaries[0]?.id&&n[n.length-1].id===e.pageBoundaries[n.length-1]?.id)return e;const i=e.activePage>=n.length?Math.max(0,n.length-1):e.activePage;return{...e,pageBoundaries:n,totalPages:n.length,activePage:i,updatedAt:a}}case q.ADD_PAGE_BREAK:{const{position:n="end",pageIndex:i}=t.payload||{},r='<page-break data-page-break="true" style="display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;"></page-break>';let o=e.continuousContent;if(n==="end")o=o+r+"<p><br></p>";else if(typeof n=="number"){const s=o.substring(0,n),h=o.substring(n);o=s+r+h}else if(typeof i=="number"&&typeof document<"u"){const s=document.createElement("div");s.innerHTML=o;const h=s.querySelectorAll('page-break, [data-page-break="true"]');if(i===0&&h.length===0)o=o+r+"<p><br></p>";else if(i<h.length){const y=h[i],m=document.createElement("page-break");m.setAttribute("data-page-break","true"),m.setAttribute("style","display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;");const d=document.createElement("p");d.innerHTML="<br>",y.parentNode.insertBefore(m,y.nextSibling),m.parentNode.insertBefore(d,m.nextSibling),o=s.innerHTML}else o=o+r+"<p><br></p>"}return{...e,continuousContent:o,updatedAt:a}}case q.REMOVE_PAGE_BREAK:{const{pageIndex:n}=t.payload||{};if(typeof n!="number"||typeof document>"u")return e;const i=document.createElement("div");i.innerHTML=e.continuousContent;const r=i.querySelectorAll('page-break, [data-page-break="true"]');return r[n]&&r[n].remove(),i.querySelectorAll('page-break, [data-page-break="true"]').forEach((s,h)=>{s.setAttribute("data-page-number",String(h+2))}),{...e,continuousContent:i.innerHTML,updatedAt:a}}case q.SET_EDITOR_MODE:{const n=t.payload;if(n===e.editorMode)return e;let i=e.continuousContent,r=e.pages;return n==="continuous"?i=e.pages.map(s=>s.content).filter(s=>s&&s!==ge).join(`
`)||ge:e.continuousContent&&e.continuousContent!==ge&&(r=[{...Te(0,e.pageSize),content:e.continuousContent}]),{...e,editorMode:n,continuousContent:i,pages:r,updatedAt:a}}case q.SET_ZOOM_LEVEL:{const n=t.payload;return n<$e||n>Be?(console.warn(`Invalid zoom level: ${n}. Must be between ${$e} and ${Be}.`),e):n===e.zoomLevel?e:{...e,zoomLevel:n,updatedAt:a}}case q.ZOOM_IN:{if(!He(e.zoomLevel))return e;const n=e.zoomLevel+dt;return{...e,zoomLevel:n,updatedAt:a}}case q.ZOOM_OUT:{if(!Ge(e.zoomLevel))return e;const n=e.zoomLevel-dt;return{...e,zoomLevel:n,updatedAt:a}}case q.RESET_ZOOM:return e.zoomLevel===ze?e:{...e,zoomLevel:ze,updatedAt:a};case q.UPDATE_PAGE_MARGINS:{const n=t.payload;return n===e.pageMargins?e:{...e,pageMargins:n,updatedAt:a}}default:return e}},gt=p.createContext(null),fn=({children:e,initialState:t={}})=>{const[a,n]=p.useReducer(dn,Fe(t)),i=p.useMemo(()=>({initializeDocument:o=>n({type:q.INITIALIZE_DOCUMENT,payload:o}),updateTitle:o=>n({type:q.UPDATE_TITLE,payload:o}),updatePageContent:o=>n({type:q.UPDATE_PAGE_CONTENT,payload:o}),updatePages:o=>n({type:q.UPDATE_PAGES,payload:o}),addPage:o=>n({type:q.ADD_PAGE,payload:o}),deletePage:o=>n({type:q.DELETE_PAGE,payload:o}),setActivePage:o=>n({type:q.SET_ACTIVE_PAGE,payload:o}),updatePageSize:o=>n({type:q.UPDATE_PAGE_SIZE,payload:o}),resetDocument:()=>n({type:q.RESET_DOCUMENT}),updateContinuousContent:o=>n({type:q.UPDATE_CONTINUOUS_CONTENT,payload:o}),updatePageBoundaries:o=>n({type:q.UPDATE_PAGE_BOUNDARIES,payload:o}),addPageBreak:o=>n({type:q.ADD_PAGE_BREAK,payload:o}),removePageBreak:o=>n({type:q.REMOVE_PAGE_BREAK,payload:o}),setEditorMode:o=>n({type:q.SET_EDITOR_MODE,payload:o}),insertPageAt:o=>n({type:q.INSERT_PAGE_AT,payload:o}),movePageTo:o=>n({type:q.MOVE_PAGE_TO,payload:o}),duplicatePage:o=>n({type:q.DUPLICATE_PAGE,payload:o}),setZoomLevel:o=>n({type:q.SET_ZOOM_LEVEL,payload:o}),zoomIn:()=>n({type:q.ZOOM_IN}),zoomOut:()=>n({type:q.ZOOM_OUT}),resetZoom:()=>n({type:q.RESET_ZOOM}),updatePageMargins:o=>n({type:q.UPDATE_PAGE_MARGINS,payload:o})}),[]),r=p.useMemo(()=>({state:a,actions:i,dispatch:n}),[a,i]);return l.jsx(gt.Provider,{value:r,children:e})},qe=()=>{const e=p.useContext(gt);if(!e)throw new Error("useDocument must be used within a DocumentProvider");return e},Ze=()=>{const{state:e}=qe();return e},We=()=>{const{actions:e}=qe();return e};var Oe={exports:{}},Ce={exports:{}},K={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ht;function pn(){if(ht)return K;ht=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,r=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,h=e?Symbol.for("react.async_mode"):60111,y=e?Symbol.for("react.concurrent_mode"):60111,m=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,T=e?Symbol.for("react.memo"):60115,b=e?Symbol.for("react.lazy"):60116,E=e?Symbol.for("react.block"):60121,P=e?Symbol.for("react.fundamental"):60117,L=e?Symbol.for("react.responder"):60118,O=e?Symbol.for("react.scope"):60119;function C(u){if(typeof u=="object"&&u!==null){var R=u.$$typeof;switch(R){case t:switch(u=u.type,u){case h:case y:case n:case r:case i:case d:return u;default:switch(u=u&&u.$$typeof,u){case s:case m:case b:case T:case o:return u;default:return R}}case a:return R}}}function _(u){return C(u)===y}return K.AsyncMode=h,K.ConcurrentMode=y,K.ContextConsumer=s,K.ContextProvider=o,K.Element=t,K.ForwardRef=m,K.Fragment=n,K.Lazy=b,K.Memo=T,K.Portal=a,K.Profiler=r,K.StrictMode=i,K.Suspense=d,K.isAsyncMode=function(u){return _(u)||C(u)===h},K.isConcurrentMode=_,K.isContextConsumer=function(u){return C(u)===s},K.isContextProvider=function(u){return C(u)===o},K.isElement=function(u){return typeof u=="object"&&u!==null&&u.$$typeof===t},K.isForwardRef=function(u){return C(u)===m},K.isFragment=function(u){return C(u)===n},K.isLazy=function(u){return C(u)===b},K.isMemo=function(u){return C(u)===T},K.isPortal=function(u){return C(u)===a},K.isProfiler=function(u){return C(u)===r},K.isStrictMode=function(u){return C(u)===i},K.isSuspense=function(u){return C(u)===d},K.isValidElementType=function(u){return typeof u=="string"||typeof u=="function"||u===n||u===y||u===r||u===i||u===d||u===f||typeof u=="object"&&u!==null&&(u.$$typeof===b||u.$$typeof===T||u.$$typeof===o||u.$$typeof===s||u.$$typeof===m||u.$$typeof===P||u.$$typeof===L||u.$$typeof===O||u.$$typeof===E)},K.typeOf=C,K}var X={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mt;function gn(){return mt||(mt=1,process.env.NODE_ENV!=="production"&&(function(){var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,r=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,h=e?Symbol.for("react.async_mode"):60111,y=e?Symbol.for("react.concurrent_mode"):60111,m=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,T=e?Symbol.for("react.memo"):60115,b=e?Symbol.for("react.lazy"):60116,E=e?Symbol.for("react.block"):60121,P=e?Symbol.for("react.fundamental"):60117,L=e?Symbol.for("react.responder"):60118,O=e?Symbol.for("react.scope"):60119;function C(S){return typeof S=="string"||typeof S=="function"||S===n||S===y||S===r||S===i||S===d||S===f||typeof S=="object"&&S!==null&&(S.$$typeof===b||S.$$typeof===T||S.$$typeof===o||S.$$typeof===s||S.$$typeof===m||S.$$typeof===P||S.$$typeof===L||S.$$typeof===O||S.$$typeof===E)}function _(S){if(typeof S=="object"&&S!==null){var ie=S.$$typeof;switch(ie){case t:var pe=S.type;switch(pe){case h:case y:case n:case r:case i:case d:return pe;default:var me=pe&&pe.$$typeof;switch(me){case s:case m:case b:case T:case o:return me;default:return ie}}case a:return ie}}}var u=h,R=y,z=s,g=o,w=t,j=m,H=n,J=b,Q=T,W=a,B=r,ee=i,re=d,V=!1;function ne(S){return V||(V=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),v(S)||_(S)===h}function v(S){return _(S)===y}function c(S){return _(S)===s}function k(S){return _(S)===o}function M(S){return typeof S=="object"&&S!==null&&S.$$typeof===t}function N(S){return _(S)===m}function U(S){return _(S)===n}function G(S){return _(S)===b}function I(S){return _(S)===T}function F(S){return _(S)===a}function Y(S){return _(S)===r}function Z(S){return _(S)===i}function oe(S){return _(S)===d}X.AsyncMode=u,X.ConcurrentMode=R,X.ContextConsumer=z,X.ContextProvider=g,X.Element=w,X.ForwardRef=j,X.Fragment=H,X.Lazy=J,X.Memo=Q,X.Portal=W,X.Profiler=B,X.StrictMode=ee,X.Suspense=re,X.isAsyncMode=ne,X.isConcurrentMode=v,X.isContextConsumer=c,X.isContextProvider=k,X.isElement=M,X.isForwardRef=N,X.isFragment=U,X.isLazy=G,X.isMemo=I,X.isPortal=F,X.isProfiler=Y,X.isStrictMode=Z,X.isSuspense=oe,X.isValidElementType=C,X.typeOf=_})()),X}var yt;function bt(){return yt||(yt=1,process.env.NODE_ENV==="production"?Ce.exports=pn():Ce.exports=gn()),Ce.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ye,Et;function hn(){if(Et)return Ye;Et=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function n(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function i(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var o={},s=0;s<10;s++)o["_"+String.fromCharCode(s)]=s;var h=Object.getOwnPropertyNames(o).map(function(m){return o[m]});if(h.join("")!=="0123456789")return!1;var y={};return"abcdefghijklmnopqrst".split("").forEach(function(m){y[m]=m}),Object.keys(Object.assign({},y)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Ye=i()?Object.assign:function(r,o){for(var s,h=n(r),y,m=1;m<arguments.length;m++){s=Object(arguments[m]);for(var d in s)t.call(s,d)&&(h[d]=s[d]);if(e){y=e(s);for(var f=0;f<y.length;f++)a.call(s,y[f])&&(h[y[f]]=s[y[f]])}}return h},Ye}var Ve,vt;function Ke(){if(vt)return Ve;vt=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ve=e,Ve}var Xe,Tt;function xt(){return Tt||(Tt=1,Xe=Function.call.bind(Object.prototype.hasOwnProperty)),Xe}var Je,_t;function mn(){if(_t)return Je;_t=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var t=Ke(),a={},n=xt();e=function(r){var o="Warning: "+r;typeof console<"u"&&console.error(o);try{throw new Error(o)}catch{}}}function i(r,o,s,h,y){if(process.env.NODE_ENV!=="production"){for(var m in r)if(n(r,m)){var d;try{if(typeof r[m]!="function"){var f=Error((h||"React class")+": "+s+" type `"+m+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof r[m]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw f.name="Invariant Violation",f}d=r[m](o,m,h,s,null,t)}catch(b){d=b}if(d&&!(d instanceof Error)&&e((h||"React class")+": type specification of "+s+" `"+m+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof d+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),d instanceof Error&&!(d.message in a)){a[d.message]=!0;var T=y?y():"";e("Failed "+s+" type: "+d.message+(T??""))}}}}return i.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(a={})},Je=i,Je}var Qe,At;function yn(){if(At)return Qe;At=1;var e=bt(),t=hn(),a=Ke(),n=xt(),i=mn(),r=function(){};process.env.NODE_ENV!=="production"&&(r=function(s){var h="Warning: "+s;typeof console<"u"&&console.error(h);try{throw new Error(h)}catch{}});function o(){return null}return Qe=function(s,h){var y=typeof Symbol=="function"&&Symbol.iterator,m="@@iterator";function d(v){var c=v&&(y&&v[y]||v[m]);if(typeof c=="function")return c}var f="<<anonymous>>",T={array:L("array"),bigint:L("bigint"),bool:L("boolean"),func:L("function"),number:L("number"),object:L("object"),string:L("string"),symbol:L("symbol"),any:O(),arrayOf:C,element:_(),elementType:u(),instanceOf:R,node:j(),objectOf:g,oneOf:z,oneOfType:w,shape:J,exact:Q};function b(v,c){return v===c?v!==0||1/v===1/c:v!==v&&c!==c}function E(v,c){this.message=v,this.data=c&&typeof c=="object"?c:{},this.stack=""}E.prototype=Error.prototype;function P(v){if(process.env.NODE_ENV!=="production")var c={},k=0;function M(U,G,I,F,Y,Z,oe){if(F=F||f,Z=Z||I,oe!==a){if(h){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var ie=F+":"+I;!c[ie]&&k<3&&(r("You are manually calling a React.PropTypes validation function for the `"+Z+"` prop on `"+F+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),c[ie]=!0,k++)}}return G[I]==null?U?G[I]===null?new E("The "+Y+" `"+Z+"` is marked as required "+("in `"+F+"`, but its value is `null`.")):new E("The "+Y+" `"+Z+"` is marked as required in "+("`"+F+"`, but its value is `undefined`.")):null:v(G,I,F,Y,Z)}var N=M.bind(null,!1);return N.isRequired=M.bind(null,!0),N}function L(v){function c(k,M,N,U,G,I){var F=k[M],Y=ee(F);if(Y!==v){var Z=re(F);return new E("Invalid "+U+" `"+G+"` of type "+("`"+Z+"` supplied to `"+N+"`, expected ")+("`"+v+"`."),{expectedType:v})}return null}return P(c)}function O(){return P(o)}function C(v){function c(k,M,N,U,G){if(typeof v!="function")return new E("Property `"+G+"` of component `"+N+"` has invalid PropType notation inside arrayOf.");var I=k[M];if(!Array.isArray(I)){var F=ee(I);return new E("Invalid "+U+" `"+G+"` of type "+("`"+F+"` supplied to `"+N+"`, expected an array."))}for(var Y=0;Y<I.length;Y++){var Z=v(I,Y,N,U,G+"["+Y+"]",a);if(Z instanceof Error)return Z}return null}return P(c)}function _(){function v(c,k,M,N,U){var G=c[k];if(!s(G)){var I=ee(G);return new E("Invalid "+N+" `"+U+"` of type "+("`"+I+"` supplied to `"+M+"`, expected a single ReactElement."))}return null}return P(v)}function u(){function v(c,k,M,N,U){var G=c[k];if(!e.isValidElementType(G)){var I=ee(G);return new E("Invalid "+N+" `"+U+"` of type "+("`"+I+"` supplied to `"+M+"`, expected a single ReactElement type."))}return null}return P(v)}function R(v){function c(k,M,N,U,G){if(!(k[M]instanceof v)){var I=v.name||f,F=ne(k[M]);return new E("Invalid "+U+" `"+G+"` of type "+("`"+F+"` supplied to `"+N+"`, expected ")+("instance of `"+I+"`."))}return null}return P(c)}function z(v){if(!Array.isArray(v))return process.env.NODE_ENV!=="production"&&(arguments.length>1?r("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):r("Invalid argument supplied to oneOf, expected an array.")),o;function c(k,M,N,U,G){for(var I=k[M],F=0;F<v.length;F++)if(b(I,v[F]))return null;var Y=JSON.stringify(v,function(oe,S){var ie=re(S);return ie==="symbol"?String(S):S});return new E("Invalid "+U+" `"+G+"` of value `"+String(I)+"` "+("supplied to `"+N+"`, expected one of "+Y+"."))}return P(c)}function g(v){function c(k,M,N,U,G){if(typeof v!="function")return new E("Property `"+G+"` of component `"+N+"` has invalid PropType notation inside objectOf.");var I=k[M],F=ee(I);if(F!=="object")return new E("Invalid "+U+" `"+G+"` of type "+("`"+F+"` supplied to `"+N+"`, expected an object."));for(var Y in I)if(n(I,Y)){var Z=v(I,Y,N,U,G+"."+Y,a);if(Z instanceof Error)return Z}return null}return P(c)}function w(v){if(!Array.isArray(v))return process.env.NODE_ENV!=="production"&&r("Invalid argument supplied to oneOfType, expected an instance of array."),o;for(var c=0;c<v.length;c++){var k=v[c];if(typeof k!="function")return r("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+V(k)+" at index "+c+"."),o}function M(N,U,G,I,F){for(var Y=[],Z=0;Z<v.length;Z++){var oe=v[Z],S=oe(N,U,G,I,F,a);if(S==null)return null;S.data&&n(S.data,"expectedType")&&Y.push(S.data.expectedType)}var ie=Y.length>0?", expected one of type ["+Y.join(", ")+"]":"";return new E("Invalid "+I+" `"+F+"` supplied to "+("`"+G+"`"+ie+"."))}return P(M)}function j(){function v(c,k,M,N,U){return W(c[k])?null:new E("Invalid "+N+" `"+U+"` supplied to "+("`"+M+"`, expected a ReactNode."))}return P(v)}function H(v,c,k,M,N){return new E((v||"React class")+": "+c+" type `"+k+"."+M+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+N+"`.")}function J(v){function c(k,M,N,U,G){var I=k[M],F=ee(I);if(F!=="object")return new E("Invalid "+U+" `"+G+"` of type `"+F+"` "+("supplied to `"+N+"`, expected `object`."));for(var Y in v){var Z=v[Y];if(typeof Z!="function")return H(N,U,G,Y,re(Z));var oe=Z(I,Y,N,U,G+"."+Y,a);if(oe)return oe}return null}return P(c)}function Q(v){function c(k,M,N,U,G){var I=k[M],F=ee(I);if(F!=="object")return new E("Invalid "+U+" `"+G+"` of type `"+F+"` "+("supplied to `"+N+"`, expected `object`."));var Y=t({},k[M],v);for(var Z in Y){var oe=v[Z];if(n(v,Z)&&typeof oe!="function")return H(N,U,G,Z,re(oe));if(!oe)return new E("Invalid "+U+" `"+G+"` key `"+Z+"` supplied to `"+N+"`.\nBad object: "+JSON.stringify(k[M],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(v),null,"  "));var S=oe(I,Z,N,U,G+"."+Z,a);if(S)return S}return null}return P(c)}function W(v){switch(typeof v){case"number":case"string":case"undefined":return!0;case"boolean":return!v;case"object":if(Array.isArray(v))return v.every(W);if(v===null||s(v))return!0;var c=d(v);if(c){var k=c.call(v),M;if(c!==v.entries){for(;!(M=k.next()).done;)if(!W(M.value))return!1}else for(;!(M=k.next()).done;){var N=M.value;if(N&&!W(N[1]))return!1}}else return!1;return!0;default:return!1}}function B(v,c){return v==="symbol"?!0:c?c["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&c instanceof Symbol:!1}function ee(v){var c=typeof v;return Array.isArray(v)?"array":v instanceof RegExp?"object":B(c,v)?"symbol":c}function re(v){if(typeof v>"u"||v===null)return""+v;var c=ee(v);if(c==="object"){if(v instanceof Date)return"date";if(v instanceof RegExp)return"regexp"}return c}function V(v){var c=re(v);switch(c){case"array":case"object":return"an "+c;case"boolean":case"date":case"regexp":return"a "+c;default:return c}}function ne(v){return!v.constructor||!v.constructor.name?f:v.constructor.name}return T.checkPropTypes=i,T.resetWarningCache=i.resetWarningCache,T.PropTypes=T,T},Qe}var et,Pt;function bn(){if(Pt)return et;Pt=1;var e=Ke();function t(){}function a(){}return a.resetWarningCache=t,et=function(){function n(o,s,h,y,m,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function i(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:a,resetWarningCache:t};return r.PropTypes=r,r},et}var kt;function En(){if(kt)return Oe.exports;if(kt=1,process.env.NODE_ENV!=="production"){var e=bt(),t=!0;Oe.exports=yn()(e.isElement,t)}else Oe.exports=bn()();return Oe.exports}var vn=En();const x=Jt(vn),tt={"7.5pt":{pt:7.5,px:10,label:"7.5"},"9pt":{pt:9,px:12,label:"9"},"10pt":{pt:10,px:13,label:"10"},"11pt":{pt:11,px:15,label:"11"},"12pt":{pt:12,px:16,label:"12"},"14pt":{pt:14,px:19,label:"14"},"16pt":{pt:16,px:21,label:"16"},"18pt":{pt:18,px:24,label:"18"},"20pt":{pt:20,px:27,label:"20"},"22pt":{pt:22,px:29,label:"22"},"24pt":{pt:24,px:32,label:"24"},"26pt":{pt:26,px:35,label:"26"},"28pt":{pt:28,px:37,label:"28"},"36pt":{pt:36,px:48,label:"36"},"48pt":{pt:48,px:64,label:"48"},"72pt":{pt:72,px:96,label:"72"}},wt=[{value:"10px",label:"7.5",pt:7.5},{value:"12px",label:"9",pt:9},{value:"13px",label:"10",pt:10},{value:"15px",label:"11",pt:11},{value:"16px",label:"12",pt:12},{value:"19px",label:"14",pt:14},{value:"21px",label:"16",pt:16},{value:"24px",label:"18",pt:18},{value:"27px",label:"20",pt:20},{value:"32px",label:"24",pt:24},{value:"37px",label:"28",pt:28},{value:"48px",label:"36",pt:36},{value:"64px",label:"48",pt:48},{value:"96px",label:"72",pt:72}],Se="16px",Ot=e=>Math.round(e*96/72),Ct=e=>Math.round(e*72/96*2)/2,Tn=e=>{const t=Object.values(tt).find(a=>a.pt===e);return t?`${t.px}px`:`${Ot(e)}px`},xn=e=>{const t=parseInt(e),a=Object.values(tt).find(n=>n.px===t);return a?a.pt:Ct(t)},_n=e=>{if(!e)return!1;if(e.endsWith("px")){const t=parseInt(e);return t>=8&&t<=144}if(e.endsWith("pt")){const t=parseFloat(e);return t>=6&&t<=108}return!1},fe={minWidth:50,minHeight:50,maxWidth:800,maxHeight:600,aspectRatio:!0,preserveAspectRatio:!0,defaultWidth:300,defaultHeight:200},A={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};function An({handler:e,startX:t,startY:a,currentX:n,currentY:i,startWidth:r,startHeight:o,options:s=fe}){const h=n-t,y=i-a;let m=r,d=o;switch(e){case A.TOP_LEFT:m=Math.max(s.minWidth,r-h),d=Math.max(s.minHeight,o-y);break;case A.TOP_RIGHT:m=Math.max(s.minWidth,r+h),d=Math.max(s.minHeight,o-y);break;case A.BOTTOM_LEFT:m=Math.max(s.minWidth,r-h),d=Math.max(s.minHeight,o+y);break;case A.BOTTOM_RIGHT:m=Math.max(s.minWidth,r+h),d=Math.max(s.minHeight,o+y);break;case A.TOP:d=Math.max(s.minHeight,o-y);break;case A.BOTTOM:d=Math.max(s.minHeight,o+y);break;case A.LEFT:m=Math.max(s.minWidth,r-h);break;case A.RIGHT:m=Math.max(s.minWidth,r+h);break;default:return{width:m,height:d}}if(s.preserveAspectRatio&&s.aspectRatio){const f=r/o;[A.TOP_LEFT,A.TOP_RIGHT,A.BOTTOM_LEFT,A.BOTTOM_RIGHT].includes(e)?m/f>d?d=Math.max(s.minHeight,m/f):m=Math.max(s.minWidth,d*f):[A.TOP,A.BOTTOM].includes(e)?m=d*f:[A.LEFT,A.RIGHT].includes(e)&&(d=m/f)}return s.maxWidth&&m>s.maxWidth&&(m=s.maxWidth,s.preserveAspectRatio&&s.aspectRatio&&(d=m/(r/o))),s.maxHeight&&d>s.maxHeight&&(d=s.maxHeight,s.preserveAspectRatio&&s.aspectRatio&&(m=d*(r/o))),m=Math.max(s.minWidth,m),d=Math.max(s.minHeight,d),{width:Math.round(m),height:Math.round(d)}}function le(e){return e?(console.log("Checking if element is resizable image:",e,"tagName:",e.tagName),e.tagName==="IMG"?(console.log("Element is an IMG tag, returning true"),!0):e.tagName==="DIV"&&e.style.backgroundImage&&e.style.backgroundImage!=="none"?(console.log("Element is a DIV with background image, returning true"),!0):(console.log("Element is not a resizable image, returning false"),!1)):!1}function Pn(e){return le(e)?{width:e.offsetWidth,height:e.offsetHeight}:{width:0,height:0}}function kn(e,{width:t,height:a}){le(e)&&(e.tagName==="IMG"?(e.style.width=`${t}px`,e.style.height=`${a}px`,e.width=t,e.height=a):e.tagName==="DIV"&&(e.style.width=`${t}px`,e.style.height=`${a}px`))}function nt(e,t=fe){if(!le(e))return null;const a=document.createElement("div");a.className="image-resize-overlay",a.style.position="fixed",a.style.zIndex="1000",a.style.pointerEvents="none";const n=e.getBoundingClientRect();a.style.top=`${n.top}px`,a.style.left=`${n.left}px`,a.style.width=`${n.width}px`,a.style.height=`${n.height}px`,Object.values(A).forEach(s=>{const h=document.createElement("div");h.className=`resize-handler resize-handler-${s}`,h.dataset.handler=s,h.style.position="absolute",h.style.width="10px",h.style.height="10px",h.style.backgroundColor="#007bff",h.style.border="2px solid white",h.style.borderRadius="50%",h.style.boxShadow="0 0 3px rgba(0,0,0,0.3)",h.style.cursor=wn(s),h.style.pointerEvents="all",St(h,s,n.width,n.height),a.appendChild(h)});const r=document.createElement("div");return r.className="aspect-ratio-toggle",t.preserveAspectRatio&&t.aspectRatio?(r.innerHTML="ðŸ”“",r.title="Toggle aspect ratio preservation (currently ON)"):(r.innerHTML="ðŸ”—",r.title="Toggle aspect ratio preservation (currently OFF)"),r.style.position="absolute",r.style.top="-15px",r.style.right="-15px",r.style.width="20px",r.style.height="20px",r.style.backgroundColor="#007bff",r.style.color="white",r.style.borderRadius="50%",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.fontSize="12px",r.style.cursor="pointer",r.style.boxShadow="0 0 3px rgba(0,0,0,0.3)",r.style.pointerEvents="all",a.appendChild(r),a}function wn(e){switch(e){case A.TOP_LEFT:case A.BOTTOM_RIGHT:return"nwse-resize";case A.TOP_RIGHT:case A.BOTTOM_LEFT:return"nesw-resize";case A.TOP:case A.BOTTOM:return"ns-resize";case A.LEFT:case A.RIGHT:return"ew-resize";default:return"default"}}function St(e,t,a,n){switch(t){case A.TOP_LEFT:e.style.top="-5px",e.style.left="-5px";break;case A.TOP_RIGHT:e.style.top="-5px",e.style.right="-5px";break;case A.BOTTOM_LEFT:e.style.bottom="-5px",e.style.left="-5px";break;case A.BOTTOM_RIGHT:e.style.bottom="-5px",e.style.right="-5px";break;case A.TOP:e.style.top="-5px",e.style.left=`${a/2+-5}px`;break;case A.BOTTOM:e.style.bottom="-5px",e.style.left=`${a/2+-5}px`;break;case A.LEFT:e.style.top=`${n/2+-5}px`,e.style.left="-5px";break;case A.RIGHT:e.style.top=`${n/2+-5}px`,e.style.right="-5px";break}}function Me(e,t){if(!e||!t)return;const a=t.getBoundingClientRect();e.style.top=`${a.top}px`,e.style.left=`${a.left}px`,e.style.width=`${a.width}px`,e.style.height=`${a.height}px`,e.querySelectorAll(".resize-handler").forEach(i=>{const r=i.dataset.handler;St(i,r,a.width,a.height)})}function he(e){e&&e.parentNode&&e.parentNode.removeChild(e)}const On={"10px":"1","12px":"2","13px":"2","15px":"3","16px":"3","19px":"4","21px":"4","24px":"5","27px":"5","32px":"6","37px":"6","48px":"6","64px":"7","96px":"7"},Mt={bold:!1,italic:!1,underline:!1,strikethrough:!1,alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontFamily:"Arial",fontSize:Se,headingLevel:"p",imageSelected:!1,imageResizeOptions:fe,preserveAspectRatio:!0},Nt=()=>{const[e,t]=p.useState(Mt),a=p.useCallback(T=>{t(b=>({...b,alignLeft:T==="left",alignCenter:T==="center",alignRight:T==="right",alignJustify:T==="justify"}))},[]),n=p.useCallback(T=>{try{const b=window.getSelection();if(!b||b.rangeCount===0)return!1;const E=b.getRangeAt(0);if(!E.toString())return t(L=>({...L,fontSize:T})),!1;try{const L=document.createElement("span");L.style.fontSize=T;const O=E.extractContents();return L.appendChild(O),E.insertNode(L),E.selectNodeContents(L),b.removeAllRanges(),b.addRange(E),t(C=>({...C,fontSize:T})),!0}catch{const O=On[T]||"2";return document.execCommand("fontSize",!1,O),t(C=>({...C,fontSize:T})),!0}}catch(b){return console.warn("[useFormatting] Font size change failed:",b),!1}},[]),i=p.useCallback((T,b=null)=>{try{if(typeof document.execCommand!="function"){console.warn("[useFormatting] execCommand not supported");return}if(T==="fontSize"){n(b);return}switch(document.execCommand(T,!1,b)||console.warn(`[useFormatting] Command "${T}" failed`),T){case"bold":t(P=>({...P,bold:!P.bold}));break;case"italic":t(P=>({...P,italic:!P.italic}));break;case"underline":t(P=>({...P,underline:!P.underline}));break;case"strikethrough":t(P=>({...P,strikethrough:!P.strikethrough}));case"justifyLeft":a("left");break;case"justifyCenter":a("center");case"justifyRight":a("right");case"justifyFull":a("justify");case"fontName":t(P=>({...P,fontFamily:b}));case"formatBlock":t(P=>({...P,headingLevel:b}));default:break}}catch(E){console.warn(`[useFormatting] Error executing command "${T}":`,E)}},[n,a]),r=p.useRef(null),o=p.useRef(null),s=p.useRef(null),h=p.useRef(null),y=p.useRef(fe);p.useCallback(T=>{if(!le(T))return;r.current&&(he(r.current),r.current=null),T.classList.add("selected");const b=nt(T);b&&(r.current=b,o.current=T,document.body.appendChild(b),t(E=>({...E,imageSelected:!0,preserveAspectRatio:y.current.preserveAspectRatio})))},[]);const m=p.useCallback(()=>{o.current&&(o.current.classList.remove("selected"),o.current=null),r.current&&(he(r.current),r.current=null),s.current=null,h.current=null,t(T=>({...T,imageSelected:!1}))},[]),d=p.useCallback(()=>{const T=!y.current.preserveAspectRatio;y.current={...y.current,preserveAspectRatio:T,aspectRatio:T},t(b=>({...b,preserveAspectRatio:T}))},[]);p.useCallback((T,b,E)=>{o.current&&(s.current={x:b,y:E,width:o.current.offsetWidth,height:o.current.offsetHeight},h.current=T,document.body.classList.add("resize-in-progress"),document.body.style.cursor=Cn(T))},[]),p.useCallback((T,b)=>{if(!o.current||!s.current||!h.current)return;const{x:E,y:P,width:L,height:O}=s.current,C=h.current,_=Sn({handler:C,startX:E,startY:P,currentX:T,currentY:b,startWidth:L,startHeight:O,options:y.current});Mn(o.current,_),r.current&&Me(r.current,o.current)},[]),p.useCallback(()=>{if(s.current=null,h.current=null,document.body.classList.remove("resize-in-progress"),document.body.style.cursor="",o.current){const T=new Event("input",{bubbles:!0,cancelable:!0});o.current.dispatchEvent(T)}},[]);const f=p.useCallback(()=>{m(),t(Mt)},[m]);return p.useEffect(()=>()=>{r.current&&he(r.current)},[]),{currentFormat:e,formatText:i,resetFormat:f,toggleAspectRatio:d}};function Cn(e){switch(e){case A.TOP_LEFT:case A.BOTTOM_RIGHT:return"nwse-resize";case A.TOP_RIGHT:case A.BOTTOM_LEFT:return"nesw-resize";case RESIZE_HANDLRES.TOP:case A.BOTTOM:return"ns-resize";case A.LEFT:case A.RIGHT:return"ew-resize";default:return"default"}}function Sn({handler:e,startX:t,startY:a,currentX:n,currentY:i,startWidth:r,startHeight:o,options:s=fe}){const h=n-t,y=i-a;let m=r,d=o;switch(e){case A.TOP_LEFT:m=Math.max(s.minWidth,r-h),d=Math.max(s.minHeight,o-y);break;case A.TOP_RIGHT:m=Math.max(s.minWidth,r+h),d=Math.max(s.minHeight,o-y);break;case A.BOTTOM_LEFT:m=Math.max(s.minWidth,r-h),d=Math.max(s.minHeight,o+y);break;case A.BOTTOM_RIGHT:m=Math.max(s.minWidth,r+h),d=Math.max(s.minHeight,o+y);break;case A.TOP:d=Math.max(s.minHeight,o-y);break;case A.BOTTOM:d=Math.max(s.minHeight,o+y);break;case A.LEFT:m=Math.max(s.minWidth,r-h);break;case A.RIGHT:m=Math.max(s.minWidth,r+h);break;default:return{width:m,height:d}}if(s.preserveAspectRatio&&s.aspectRatio){const f=r/o;[A.TOP_LEFT,A.TOP_RIGHT,A.BOTTOM_LEFT,A.BOTTOM_RIGHT].includes(e)?m/f>d?d=Math.max(s.minHeight,m/f):m=Math.max(s.minWidth,d*f):[A.TOP,A.BOTTOM].includes(e)?m=d*f:[A.LEFT,A.RIGHT].includes(e)&&(d=m/f)}return s.maxWidth&&m>s.maxWidth&&(m=s.maxWidth,s.preserveAspectRatio&&s.aspectRatio&&(d=m/(r/o))),s.maxHeight&&d>s.maxHeight&&(d=s.maxHeight,s.preserveAspectRatio&&s.aspectRatio&&(m=d*(r/o))),m=Math.max(s.minWidth,m),d=Math.max(s.minHeight,d),{width:Math.round(m),height:Math.round(d)}}function Mn(e,{width:t,height:a}){le(e)&&(e.tagName==="IMG"?(e.style.width=`${t}px`,e.style.height=`${a}px`,e.width=t,e.height=a):e.tagName==="DIV"&&(e.style.width=`${t}px`,e.style.height=`${a}px`))}const ye='page-break, [data-page-break="true"]',Rt=e=>se[e]||se.A4,Nn=(e,t={})=>{if(!e||typeof document>"u")return[];const a=t.pageSize||"A4",n=Rt(a),i=e.querySelectorAll(ye),r=[];r.push({id:"page-0",pageNumber:1,top:0,height:n.height});const o=e.getBoundingClientRect(),s=e.scrollTop;return i.forEach((h,y)=>{const d=h.getBoundingClientRect().top-o.top+s;r.push({id:`page-${y+1}`,pageNumber:y+2,top:d,height:n.height})}),r},It=(e,t=100,a=de)=>{const n=Rt(e),i=rn(a),r=n.height-i,o=t/100;return r/o},Rn=(e,t)=>{if(!e||!t)return 0;try{const a=t.querySelectorAll(ye);if(a.length===0)return 0;const n=e.getBoundingClientRect(),i=n.top+n.height/2;for(let r=a.length-1;r>=0;r--)if(a[r].getBoundingClientRect().top<i)return r+1;return 0}catch(a){return console.warn("[getCurrentPage] Failed to calculate page:",a),0}},jt=e=>{if(!e)return[];const t=Array.from(e.children);if(t.length===0)return[];let a=[],n=[];for(const i of t)i.tagName==="PAGE-BREAK"||i.getAttribute("data-page-break")==="true"?n.length>0&&(a.push(n),n=[]):n.push(i);return n.length>0&&a.push(n),a.length===0&&t.length>0&&a.push(t.filter(i=>!(i.tagName==="PAGE-BREAK"||i.getAttribute("data-page-break")==="true"))),a},In=e=>{if(!e||!e.getBoundingClientRect)return 0;const t=e.getBoundingClientRect();return e.tagName==="P"?t.height+16:e.tagName==="H1"||e.tagName==="H2"||e.tagName==="H3"||e.tagName==="H4"||e.tagName==="H5"||e.tagName==="H6"?t.height+20:e.tagName==="UL"||e.tagName==="OL"?t.height+16:t.height},jn=(e,t)=>{if(!e)return!1;try{const a=document.createElement("page-break");return a.setAttribute("data-page-break","true"),a.setAttribute("contenteditable","false"),a.setAttribute("data-page-number",t||"2"),e.parentNode.insertBefore(a,e),!0}catch(a){return console.warn("[insertPageBreakBefore] Failed to insert page break:",a),!1}},Ln=(e,t,a,n,i,r,o)=>{if(!e)return!1;try{const h=It(a,n,i)*(t-1),y=Array.from(e.children);let m=0,d=null;for(let f=0;f<y.length;f++){const T=y[f];if(T.tagName==="PAGE-BREAK"||T.getAttribute("data-page-break")==="true")continue;const b=In(T);if(m+b>h){d=T;break}m+=b}if(d){const f=document.createElement("page-break");if(f.setAttribute("data-page-break","true"),f.setAttribute("contenteditable","false"),f.setAttribute("data-page-number",String(t)),d.parentNode.insertBefore(f,d),r){const T=e.innerHTML;r(T)}return o&&setTimeout(()=>{o()},50),!0}else{const f=document.createElement("page-break");f.setAttribute("data-page-break","true"),f.setAttribute("contenteditable","false"),f.setAttribute("data-page-number",String(t)),e.appendChild(f);const T=document.createElement("p");if(T.innerHTML="<br>",e.appendChild(T),r){const b=e.innerHTML;r(b)}return o&&setTimeout(()=>{o()},50),!0}}catch(s){return console.error("[insertPageBreakAtBoundary] Failed to insert page break:",s),!1}},Dn=(e,t,a,n,i,r,o)=>{if(!e)return!1;if(a().length<=1)return console.warn("[removePageAndContent] Cannot delete the only page"),!1;try{const h=Array.from(e.querySelectorAll(ye));if(t>h.length)return console.warn("[removePageAndContent] Invalid page index"),!1;const y=window.getSelection();let m=!1,d=[],f=null;if(t===0){const b=h[0];if(!b)return console.warn("[removePageAndContent] No page break found for first page"),!1;let E=e.firstChild;for(;E&&E!==b;)d.push(E),E=E.nextSibling;f=b}else{const b=h[t-1];if(!b)return console.warn("[removePageAndContent] Page break not found"),!1;const E=h[t];let P=b.nextSibling;for(;P&&P!==E;)d.push(P),P=P.nextSibling;f=b}if(y&&y.rangeCount>0){const E=y.getRangeAt(0).startContainer;for(const P of d)if(P.contains(E)||P===E){m=!0;break}}if(f&&f.parentNode&&f.remove(),d.forEach(b=>{b.parentNode&&b.remove()}),e.querySelectorAll(ye).forEach((b,E)=>{b.setAttribute("data-page-number",String(E+2))}),m&&r&&setTimeout(()=>{r(0)},50),n){const b=e.innerHTML;n(b)}return i&&setTimeout(()=>{i(),o&&setTimeout(()=>{o()},150)},100),!0}catch(h){return console.error("[removePageAndContent] Failed to remove page:",h),!1}},zn=200,$n=50,Lt=3,Bn=20,Dt=e=>{if(!e||!e.getBoundingClientRect)return 0;const t=e.getBoundingClientRect();return e.tagName==="P"?t.height+16:e.tagName==="H1"||e.tagName==="H2"||e.tagName==="H3"||e.tagName==="H4"||e.tagName==="H5"||e.tagName==="H6"?t.height+20:e.tagName==="UL"||e.tagName==="OL"?t.height+16:t.height},Hn=(e,t)=>{if(!e||e.length===0)return null;let a=0,n=null;for(let i=0;i<e.length;i++){const r=e[i];if(!r||!r.getBoundingClientRect)continue;const o=Dt(r);if(o<1)continue;if(a+o>t)return n===null?i>0?{overflowIndex:i,overflowElement:r,accumulatedHeight:a}:null:{overflowIndex:i,overflowElement:r,accumulatedHeight:a};a+=o,n=r}return null},Gn=(e,t,a,n,i,r,o,s)=>{if(!e||o.current)return!1;try{o.current=!0;const h=It(t,a,n);let y=jt(e),m=!1,d=0;for(let f=0;f<y.length&&d<Lt;f++){const T=y[f],b=Hn(T,h);if(b&&b.overflowIndex>0){let E=0;for(let C=0;C<T.length;C++){const _=T[C];_&&_.getBoundingClientRect&&(E+=Dt(_))}if(E-h<Bn)continue;const L=f+2;jn(b.overflowElement,L)&&(m=!0,d++,y=jt(e))}}if(m){if(i){const f=e.innerHTML;i(f)}setTimeout(()=>{r&&r(),d>=Lt&&s&&setTimeout(()=>{o.current||s()},100)},$n)}return m}catch(h){return console.warn("[checkAndReflow] Reflow failed:",h),!1}finally{o.current=!1}},Un=(e,t,a=zn)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{t.current=null,e()},a)},Fn=400,zt=(e,t)=>{if(e){e.focus();try{let a=null,n=0;if(t===0)a=e.firstChild,n=0;else{const r=e.querySelectorAll(ye)[t-1];r&&r.nextSibling&&(a=r.nextSibling,n=0)}if(a){const i=document.createRange(),r=window.getSelection();a.nodeType===Node.TEXT_NODE?i.setStart(a,n):i.setStart(a,0),i.collapse(!0),r.removeAllRanges(),r.addRange(i)}}catch(a){console.warn("[positionCursorAtPage] Failed to position cursor:",a)}}},qn=(e,t,a,n)=>{if(!e||!t){console.warn("[scrollToPage] Missing refs");return}try{let i=null;if(a===0)i=t;else{const o=t.querySelectorAll(ye)[a-1];if(o)i=o;else{console.warn("[scrollToPage] Page break not found for page",a);return}}if(i){const r=i.getBoundingClientRect(),o=e.getBoundingClientRect(),s=e.scrollTop+(r.top-o.top);console.log("[scrollToPage] Scrolling to page",a,"scrollTop:",s),e.scrollTo({top:s,behavior:"smooth"}),setTimeout(()=>{n?n(a):zt(t,a)},Fn)}}catch(i){console.error("[scrollToPage] Error:",i)}},Zn=(e,t,a={},n=300)=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{t.current=null,e(a)},Math.max(0,n))},Wn=300,$t=(e,t,a=100,n="NARROW")=>{const i=We(),r=p.useRef(null),o=p.useRef(null),s=p.useRef(e),h=p.useRef(a),y=p.useRef(n),m=p.useRef(!1);p.useEffect(()=>{s.current=e},[e]),p.useEffect(()=>{h.current=a},[a]),p.useEffect(()=>{y.current=n},[n]),p.useEffect(()=>()=>{r.current&&clearTimeout(r.current),o.current&&clearTimeout(o.current)},[]);const d=p.useCallback((u={})=>t?.current?Nn(t.current,u):[],[t]),f=p.useCallback((u={})=>{const R=d(u);return i.updatePageBoundaries(R),R},[d,i]),T=p.useCallback(async u=>{if(!t?.current)return!1;const R=s.current||"A4",z=h.current||100,g=y.current||"NARROW";return Ln(t.current,u,R,z,g,i.updateContinuousContent,f)},[t,i,f]),b=p.useCallback(()=>{if(!t?.current)return;const u=s.current||"A4",R=h.current||100,z=y.current||"NARROW";Gn(t.current,u,R,z,i.updateContinuousContent,f,m,b)},[t,i,f]),E=p.useCallback(u=>{Un(b,o,u)},[b]),P=p.useCallback((u={})=>{const R=typeof u.delay=="number"?u.delay:Wn;Zn(f,r,u,R)},[f]),L=p.useCallback(u=>!u?.current||!t?.current?0:Rn(u.current,t.current),[t]),O=p.useCallback(u=>{t?.current&&zt(t.current,u)},[t]),C=p.useCallback((u,R)=>{if(!R?.current||!t?.current){console.warn("[scrollToPage] Missing refs");return}qn(R.current,t.current,u,O)},[t,O]),_=p.useCallback(u=>t?.current?Dn(t.current,u,d,i.updateContinuousContent,f,O,b):!1,[t,d,i,f,O,b]);return{calculatePageBoundaries:d,checkAndUpdateBoundaries:P,updateBoundaries:f,getCurrentPage:L,scrollToPage:C,positionCursorAtPage:O,checkAndReflow:b,triggerAutoReflow:E,removePageAndContent:_,insertPageBreakAtBoundary:T,boundaryTimeoutRef:r,reflowTimeoutRef:o}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vn=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,n)=>n?n.toUpperCase():a.toLowerCase()),Bt=e=>{const t=Vn(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ht=(...e)=>e.filter((t,a,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===a).join(" ").trim(),Kn=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:i="",children:r,iconNode:o,...s},h)=>p.createElement("svg",{ref:h,...Xn,width:t,height:t,stroke:e,strokeWidth:n?Number(a)*24/Number(t):a,className:Ht("lucide",i),...!r&&!Kn(s)&&{"aria-hidden":"true"},...s},[...o.map(([y,m])=>p.createElement(y,m)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=(e,t)=>{const a=p.forwardRef(({className:n,...i},r)=>p.createElement(Jn,{ref:r,iconNode:t,className:Ht(`lucide-${Yn(Bt(e))}`,`lucide-${e}`,n),...i}));return a.displayName=Bt(e),a};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=te("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=te("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=te("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=te("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=te("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=te("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=te("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=te("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=te("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=te("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=te("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=te("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=te("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=te("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=te("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=te("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=te("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=te("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=te("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=te("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=te("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=te("text-align-justify",[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=te("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=te("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=te("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=te("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=te("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=te("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Ut=({editorView:e,isCollapsed:t,onToggle:a,wordCount:n,pageCount:i})=>{const r=Ze(),{pages:o,activePage:s,continuousContent:h,editorMode:y}=r,[m,d]=p.useState(0),[f,T]=p.useState([]);p.useEffect(()=>{if(n!==void 0&&i!==void 0){if(d(n),h){const L=document.createElement("div");L.innerHTML=h;const O=L.querySelectorAll("h1, h2, h3, h4, h5, h6"),C=Array.from(O).map((_,u)=>{const R=parseInt(_.tagName.charAt(1)),z=_.textContent.trim();return z?{id:`heading-${u}`,level:R,text:z,page:1}:null}).filter(Boolean);T(C)}return}let E=0;const P=[];o.forEach((L,O)=>{if(L.content){const C=document.createElement("div");C.innerHTML=L.content;const u=(C.textContent||C.innerText||"").trim().split(/\s+/).filter(z=>z.length>0);E+=u.length,C.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((z,g)=>{const w=parseInt(z.tagName.charAt(1)),j=z.textContent.trim();j&&P.push({id:`heading-${O}-${g}`,level:w,text:j,page:O+1})})}}),d(E),T(P)},[o,n,i,h]);const b=i!==void 0?i:o.length;return l.jsxs("aside",{className:`sidebar ${t?"collapsed":""}`,role:"complementary","aria-label":"Document information","data-testid":"sidebar",children:[l.jsxs("div",{className:"sidebar-header",children:[l.jsxs("div",{className:"sidebar-title",children:[l.jsx(Ne,{size:18}),l.jsx("h2",{children:"Document Info"})]}),l.jsx("button",{className:"sidebar-toggle",onClick:a,"aria-label":t?"Expand sidebar":"Collapse sidebar",title:t?"Expand sidebar":"Collapse sidebar",children:t?l.jsx(tr,{size:16}):l.jsx(er,{size:16})})]}),!t&&l.jsxs("div",{className:"sidebar-content",children:[l.jsxs("div",{className:"sidebar-section",children:[l.jsx("h3",{children:"Statistics"}),l.jsxs("div",{className:"stat-item",children:[l.jsxs("div",{className:"stat-label",children:[l.jsx(nr,{size:14}),l.jsx("span",{children:"Pages:"})]}),l.jsx("span",{className:"stat-value",children:b})]}),l.jsxs("div",{className:"stat-item","data-testid":"word-count",children:[l.jsxs("div",{className:"stat-label",children:[l.jsx(rr,{size:14}),l.jsx("span",{children:"Words:"})]}),l.jsx("span",{className:"stat-value",children:m.toLocaleString()})]}),l.jsxs("div",{className:"stat-item",children:[l.jsxs("div",{className:"stat-label",children:[l.jsx(Ne,{size:14}),l.jsx("span",{children:"Active Page:"})]}),l.jsx("span",{className:"stat-value",children:s+1})]})]}),f.length>0&&l.jsxs("div",{className:"sidebar-section",children:[l.jsxs("h3",{children:[l.jsx(Gt,{size:14,style:{display:"inline-block",marginRight:"6px",verticalAlign:"middle"}}),"Document Outline"]}),l.jsx("div",{className:"document-outline","data-testid":"outline",children:f.map(E=>{const P=E.level===1?or:E.level===2?ar:ir;return l.jsxs("div",{className:`outline-item outline-level-${E.level}`,style:{marginLeft:`${(E.level-1)*12}px`},children:[l.jsx(P,{size:12,className:"outline-icon"}),l.jsx("span",{className:"outline-text",children:E.text}),l.jsxs("span",{className:"outline-page",children:["p.",E.page]})]},E.id)})})]}),l.jsxs("div",{className:"sidebar-section",children:[l.jsx("h3",{children:"Document"}),l.jsx("p",{children:"HTML Editor"}),l.jsx("p",{children:"Multi-page support"})]})]})]})},Pr="html-editor-storage",kr=1,ce="images";function wr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function xe(){return new Promise((e,t)=>{const a=indexedDB.open(Pr,kr);a.onerror=()=>{t(new Error("Failed to open IndexedDB database"))},a.onsuccess=()=>{e(a.result)},a.onupgradeneeded=n=>{const i=n.target.result;i.objectStoreNames.contains(ce)||i.createObjectStore(ce,{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1})}})}function Ft(e){return new Promise((t,a)=>{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)){a(new Error("Invalid image format. Supported formats: png, jpeg, gif, webp"));return}if(e.size>5*1024*1024){a(new Error("Image exceeds maximum size of 5MB"));return}const i=new FileReader;i.onload=async r=>{const o=r.target.result,h=o.split(",")[1].length*3/4;if(h>5*1024*1024){a(new Error("Image exceeds maximum size of 5MB"));return}try{const y=await xe(),m=`editor-image-${wr()}`,f=y.transaction([ce],"readwrite").objectStore(ce),T={key:m,dataUrl:o,size:h,type:e.type,timestamp:Date.now()},b=f.add(T);b.onsuccess=()=>{y.close(),t(m)},b.onerror=()=>{y.close(),a(new Error("Failed to save image to IndexedDB"))}}catch(y){a(y)}},i.onerror=()=>{a(new Error("Error reading image file"))},i.readAsDataURL(e)})}async function qt(e){try{const t=await xe();return new Promise((a,n)=>{const o=t.transaction([ce],"readonly").objectStore(ce).get(e);o.onsuccess=()=>{t.close();const s=o.result;a(s?s.dataUrl:null)},o.onerror=()=>{t.close(),n(new Error("Failed to retrieve image from IndexedDB"))}})}catch(t){return console.error("Error getting image:",t),null}}async function Or(e){try{const t=await xe();return new Promise((a,n)=>{const o=t.transaction([ce],"readwrite").objectStore(ce).delete(e);o.onsuccess=()=>{t.close(),a()},o.onerror=()=>{t.close(),n(new Error("Failed to delete image from IndexedDB"))}})}catch(t){console.error("Error deleting image:",t)}}async function Cr(){try{const e=await xe();return new Promise((t,a)=>{const r=e.transaction([ce],"readwrite").objectStore(ce).clear();r.onsuccess=()=>{e.close(),t()},r.onerror=()=>{e.close(),a(new Error("Failed to clear images from IndexedDB"))}})}catch(e){console.error("Error clearing images:",e)}}async function Sr(){try{const e=await xe();return new Promise((t,a)=>{const r=e.transaction([ce],"readonly").objectStore(ce).getAllKeys();r.onsuccess=()=>{e.close(),t(r.result||[])},r.onerror=()=>{e.close(),a(new Error("Failed to get image keys from IndexedDB"))}})}catch(e){return console.error("Error getting image keys:",e),[]}}class Zt{constructor(t="Editor"){this.namespace=t}_format(t,a,n){return`[${new Date().toISOString()}] [${this.namespace}] [${t}] ${a}`}info(t,a){}warn(t,a){}error(t,a){}debug(t,a){}}const Wt=new Zt("Editor"),Re=({currentFormat:e,onFormatText:t,onAddPageBreak:a})=>{const n=async i=>{try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(i.type)){alert("Invalid image format. Supported: PNG, JPEG, GIF, WEBP");return}if(i.size>5242880){alert("Image exceeds maximum size of 5MB");return}const o=await Ft(i),s=await qt(o);s&&(document.execCommand("insertImage",!1,s),Wt.info("Image inserted",{key:o}))}catch(r){Wt.error("Error uploading image",r)}};return l.jsxs("div",{className:"editor-toolbar",children:[l.jsx("button",{onClick:()=>t("undo"),title:"Undo",children:l.jsx(Tr,{size:16})}),l.jsx("button",{onClick:()=>t("redo"),title:"Redo",children:l.jsx(fr,{size:16})}),l.jsx("div",{className:"toolbar-separator"}),l.jsx("button",{onClick:()=>t("bold"),className:e.bold?"active":"",title:"Bold",children:l.jsx(Qn,{size:16})}),l.jsx("button",{onClick:()=>t("italic"),className:e.italic?"active":"",title:"Italic",children:l.jsx(cr,{size:16})}),l.jsx("button",{onClick:()=>t("underline"),className:e.underline?"active":"",title:"Underline",children:l.jsx(vr,{size:16})}),l.jsx("button",{onClick:()=>t("strikethrough"),className:e.strikethrough?"active":"",title:"Strikethrough",children:l.jsx(gr,{size:16})}),l.jsx("div",{className:"toolbar-separator"}),l.jsx("button",{onClick:()=>t("justifyLeft"),className:e.alignLeft?"active":"",title:"Align Left",children:l.jsx(Er,{size:16})}),l.jsx("button",{onClick:()=>t("justifyCenter"),className:e.alignCenter?"active":"",title:"Align Center",children:l.jsx(mr,{size:16})}),l.jsx("button",{onClick:()=>t("justifyRight"),className:e.alignRight?"active":"",title:"Align Right",children:l.jsx(yr,{size:16})}),l.jsx("button",{onClick:()=>t("justifyFull"),className:e.alignJustify?"active":"",title:"Justify",children:l.jsx(br,{size:16})}),l.jsx("div",{className:"toolbar-separator"}),l.jsxs("select",{onChange:i=>t("fontName",i.target.value),defaultValue:"Arial",title:"Font Family",children:[l.jsx("option",{value:"Arial",children:"Arial"}),l.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),l.jsx("option",{value:"Courier New",children:"Courier New"}),l.jsx("option",{value:"Georgia",children:"Georgia"}),l.jsx("option",{value:"Verdana",children:"Verdana"})]}),l.jsx("select",{onChange:i=>t("fontSize",i.target.value),defaultValue:Se,title:"Font Size",children:wt.map(({value:i,label:r,pt:o})=>l.jsx("option",{value:i,children:r},i))}),l.jsxs("select",{onChange:i=>t("formatBlock",i.target.value),value:e.headingLevel||"p",title:"Heading Level",children:[l.jsx("option",{value:"p",children:"Normal"}),l.jsx("option",{value:"h1",children:"Heading 1"}),l.jsx("option",{value:"h2",children:"Heading 2"}),l.jsx("option",{value:"h3",children:"Heading 3"}),l.jsx("option",{value:"h4",children:"Heading 4"}),l.jsx("option",{value:"h5",children:"Heading 5"}),l.jsx("option",{value:"h6",children:"Heading 6"})]}),l.jsx("div",{className:"toolbar-separator"}),l.jsx("button",{onClick:()=>t("insertUnorderedList"),title:"Bullet List",children:l.jsx(Gt,{size:16})}),l.jsx("button",{onClick:()=>t("insertOrderedList"),title:"Numbered List",children:l.jsx(ur,{size:16})}),l.jsx("div",{className:"toolbar-separator"}),l.jsx("button",{onClick:()=>{const i=prompt("Enter URL:");i&&t("createLink",i)},title:"Insert Link",children:l.jsx(lr,{size:16})}),l.jsx("button",{onClick:()=>t("insertHTML",'<table border="1"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>'),title:"Insert Table",children:l.jsx(hr,{size:16})}),a&&l.jsx("button",{onClick:a,title:"Insert Page Break",children:l.jsx(Ne,{size:16})}),l.jsx("div",{className:"toolbar-separator"}),l.jsx("input",{type:"file",accept:"image/*",onChange:i=>i.target.files[0]&&n(i.target.files[0]),style:{display:"none"},id:"image-upload"}),l.jsx("button",{onClick:()=>document.getElementById("image-upload").click(),title:"Insert Image",children:l.jsx(sr,{size:16})})]})};Re.propTypes={currentFormat:x.shape({bold:x.bool,italic:x.bool,underline:x.bool,strikethrough:x.bool,alignLeft:x.bool,alignCenter:x.bool,alignRight:x.bool,alignJustify:x.bool,fontFamily:x.string,fontSize:x.string,headingLevel:x.string}).isRequired,onFormatText:x.func.isRequired,onAddPageBreak:x.func},Re.defaultProps={onAddPageBreak:void 0};const Ie=({content:e,dimensions:t,pageSize:a,pageBoundaries:n=[],editorRef:i,onInput:r,onKeyDown:o,onClick:s,onScroll:h,zoomLevel:y=100,pageMargins:m=de})=>{const d=ft(m),f=y/100,T=(O,C)=>{if(!O)return!1;const _=O.getBoundingClientRect(),u=C-_.top;return u<d.top||u>_.height-d.bottom},b=O=>O?O.nodeType===Node.ELEMENT_NODE?O.tagName==="PAGE-BREAK"||O.getAttribute("data-page-break")==="true":O.parentElement&&b(O.parentElement):!1,E=O=>{const C=window.getSelection();if(!C||C.rangeCount===0)return;const _=C.getRangeAt(0),{startContainer:u,endContainer:R}=_;if((b(u)||b(R))&&(O.key.length===1||O.key==="Enter"||O.key===" "))return O.preventDefault(),!1;if(O.key==="Tab")return O.preventDefault(),document.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;"),!1;if((O.key==="Backspace"||O.key==="Delete")&&(b(u)||b(R)))return O.preventDefault(),!1;o&&o(O)},P=O=>{if(!i.current)return;const C=O.target;if(b(C)){O.preventDefault();return}if(T(i.current,O.clientY)){O.preventDefault();const _=i.current.getBoundingClientRect();if(O.clientY-_.top<d.top){const R=i.current.firstElementChild;if(R&&R.tagName!=="PAGE-BREAK"){const z=document.createRange(),g=window.getSelection();z.setStart(R,0),z.collapse(!0),g.removeAllRanges(),g.addRange(z)}}else{const R=i.current.lastElementChild;if(R&&R.tagName!=="PAGE-BREAK"){const z=document.createRange(),g=window.getSelection();z.selectNodeContents(R),z.collapse(!1),g.removeAllRanges(),g.addRange(z)}}return}s&&s(O)},L=O=>{const C=window.getSelection();if(!C||C.rangeCount===0)return;const _=C.getRangeAt(0),{startContainer:u}=_;if(b(u))return O.preventDefault(),!1};return l.jsx("div",{className:"continuous-page-container",style:{position:"relative",width:"100%",maxWidth:`${t.width}px`,margin:"40px auto",backgroundColor:"transparent",minHeight:"100vh",transform:`scale(${f})`,transformOrigin:"top center",transition:"transform 0.2s ease-out"},children:l.jsx("div",{ref:i,contentEditable:!0,suppressContentEditableWarning:!0,className:"continuous-content",style:{position:"relative",zIndex:1,minHeight:`${t.height}px`,width:`${t.width}px`,backgroundColor:"white",padding:`${d.top}px ${d.right}px ${d.bottom}px ${d.left}px`,boxSizing:"border-box",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",outline:"none",cursor:"text",fontFamily:"Arial, sans-serif",fontSize:Se,lineHeight:"1.3",color:"#333",wordWrap:"break-word",whiteSpace:"pre-wrap",overflowWrap:"break-word",border:"1px solid #e0e0e0"},onInput:r,onKeyDown:E,onBeforeInput:L,onClick:P,onScroll:h,"data-testid":"continuous-editor"})})};Ie.propTypes={content:x.string.isRequired,dimensions:x.shape({width:x.number.isRequired,height:x.number.isRequired}).isRequired,pageSize:x.oneOf(["A4","Letter","Legal"]).isRequired,pageBoundaries:x.arrayOf(x.shape({id:x.string.isRequired,pageNumber:x.number.isRequired,top:x.number,height:x.number})),editorRef:x.shape({current:x.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onInput:x.func.isRequired,onKeyDown:x.func,onClick:x.func,onScroll:x.func,zoomLevel:x.number,pageMargins:x.string},Ie.defaultProps={pageBoundaries:[],onKeyDown:void 0,onClick:void 0,onScroll:void 0,zoomLevel:100,pageMargins:de};const rt=({pageBoundaries:e=[{id:"page-0",pageNumber:1}],activePage:t=0,pageSize:a="A4",pageMargins:n=de,zoomLevel:i=100,canZoomIn:r=!0,canZoomOut:o=!0,onNavigate:s,onAddPage:h,onDeletePage:y,onPageSizeChange:m,onPageMarginsChange:d,onZoomIn:f,onZoomOut:T,onZoomReset:b}={})=>{const E=Math.max(e?.length||0,1),P=u=>{s&&s(u)},L=()=>{h&&h()},O=u=>{if(E<=1){console.warn("[PageManager] Cannot delete the only page");return}y&&y(u)},C=u=>{m&&m(u)},_=u=>{d&&d(u)};return l.jsxs("div",{className:"page-manager",children:[l.jsxs("div",{className:"page-settings-group",children:[l.jsxs("div",{className:"page-settings-header",children:[l.jsx(pr,{size:14,style:{marginRight:"4px",verticalAlign:"middle"}}),"Page Settings"]}),l.jsxs("div",{className:"page-settings-controls",children:[l.jsxs("div",{className:"page-setting-item",children:[l.jsx("label",{htmlFor:"page-size-selector",children:"Size:"}),l.jsxs("select",{id:"page-size-selector",role:"combobox","aria-label":"Page size selector",value:a,onChange:u=>C(u.target.value),children:[l.jsx("option",{value:"A4",children:"A4"}),l.jsx("option",{value:"Letter",children:"Letter"}),l.jsx("option",{value:"Legal",children:"Legal"})]})]}),l.jsxs("div",{className:"page-setting-item",children:[l.jsx("label",{htmlFor:"page-margins-selector",children:"Margins:"}),l.jsx("select",{id:"page-margins-selector",role:"combobox","aria-label":"Page margins selector",value:n,onChange:u=>_(u.target.value),children:on().map(u=>l.jsx("option",{value:u,children:an(u)},u))})]})]})]}),l.jsxs("div",{className:"zoom-controls-compact",children:[l.jsx("button",{type:"button",className:"zoom-button-compact",onClick:T,disabled:!o,"aria-label":"Zoom out",title:"Zoom out (Ctrl + -)",children:l.jsx(Ar,{size:12})}),l.jsxs("span",{className:"zoom-level-display",children:[i,"%"]}),l.jsx("button",{type:"button",className:"zoom-button-compact",onClick:f,disabled:!r,"aria-label":"Zoom in",title:"Zoom in (Ctrl + +)",children:l.jsx(_r,{size:12})}),l.jsx("button",{type:"button",className:"zoom-reset-compact",onClick:b,"aria-label":"Reset zoom",title:"Reset zoom to 100% (Ctrl + 0)",children:"Reset"})]}),l.jsx("div",{className:"page-list",children:(e&&e.length>0?e:[{id:"page-0",pageNumber:1}]).map((u,R)=>l.jsxs("div",{className:"page-item",children:[l.jsxs("button",{type:"button",className:`page-button ${R===t?"active":""}`,onClick:()=>P(R),"aria-label":`Go to page ${R+1}`,"aria-current":R===t?"page":void 0,children:[l.jsx(Ne,{size:14}),l.jsxs("span",{children:["Page ",R+1]})]}),E>1&&l.jsx("button",{type:"button",className:"delete-page-button",onClick:z=>{z.stopPropagation(),O(R)},"aria-label":`Delete page ${R+1}`,title:"Delete this page and its content",children:l.jsx(xr,{size:14})})]},u.id||`page-${R}`))}),l.jsxs("button",{type:"button",className:"add-page-button",onClick:L,"aria-label":"Add new page",title:"Add new page at end",children:[l.jsx(dr,{size:16}),l.jsx("span",{children:"Add Page"})]})]})};rt.propTypes={pageBoundaries:x.arrayOf(x.shape({id:x.string.isRequired,pageNumber:x.number.isRequired,top:x.number,height:x.number})),activePage:x.number,pageSize:x.oneOf(["A4","Letter","Legal"]),pageMargins:x.string,zoomLevel:x.number,canZoomIn:x.bool,canZoomOut:x.bool,onNavigate:x.func,onAddPage:x.func,onDeletePage:x.func,onPageSizeChange:x.func,onPageMarginsChange:x.func,onZoomIn:x.func,onZoomOut:x.func,onZoomReset:x.func},rt.defaultProps={pageBoundaries:[{id:"page-0",pageNumber:1}],activePage:0,pageSize:"A4",pageMargins:de,zoomLevel:100,canZoomIn:!0,canZoomOut:!0,onNavigate:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onPageMarginsChange:void 0,onZoomIn:void 0,onZoomOut:void 0,onZoomReset:void 0};const Yt=p.memo(rt),je=({editorRef:e,onImageResize:t,onImageSelect:a,onImageDeselect:n,resizeOptions:i=fe})=>{const r=p.useRef(null),o=p.useRef(null),s=p.useRef(null),h=p.useRef(null),y=p.useRef(i),m=p.useRef(!1);p.useEffect(()=>{y.current=i},[i]);const d=p.useCallback(g=>{if(!le(g))return;r.current&&(he(r.current),r.current=null),g.classList.add("selected");const w=nt(g,y.current);if(w){r.current=w,o.current=g,document.body.appendChild(w),w.querySelectorAll(".resize-handler").forEach(J=>{J.addEventListener("mousedown",E)});const H=w.querySelector(".aspect-ratio-toggle");H&&H.addEventListener("click",T),a&&(console.log("Image selected, calling onImageSelect callback"),a(g))}},[a]),f=p.useCallback(()=>{o.current&&(o.current.classList.remove("selected"),o.current=null),r.current&&(he(r.current),r.current=null),s.current=null,h.current=null,m.current=!1,n&&n()},[n]),T=p.useCallback(g=>{g.preventDefault(),g.stopPropagation();const w=!y.current.preserveAspectRatio;y.current={...y.current,preserveAspectRatio:w,aspectRatio:w};const j=g.currentTarget;w?(j.innerHTML="ðŸ”“",j.title="Toggle aspect ratio preservation (currently ON)",j.classList.remove("locked")):(j.innerHTML="ðŸ”—",j.title="Toggle aspect ratio preservation (currently OFF)",j.classList.add("locked"))},[]),b=p.useCallback((g,w)=>{g&&(w?(g.innerHTML="ðŸ”“",g.title="Toggle aspect ratio preservation (currently ON)",g.classList.remove("locked")):(g.innerHTML="ðŸ”—",g.title="Toggle aspect ratio preservation (currently OFF)",g.classList.add("locked")))},[]),E=p.useCallback(g=>{if(g.preventDefault(),g.stopPropagation(),!o.current)return;const w=g.currentTarget.dataset.handler,j=o.current.getBoundingClientRect(),H=window.pageYOffset||document.documentElement.scrollTop,J=window.pageXOffset||document.documentElement.scrollLeft;s.current={x:g.clientX,y:g.clientY,width:o.current.offsetWidth,height:o.current.offsetHeight,offsetX:g.clientX-j.left-J,offsetY:g.clientY-j.top-H},h.current=w,m.current=!0,document.body.classList.add("resize-in-progress"),document.body.style.cursor=u(w),document.addEventListener("mousemove",P),document.addEventListener("mouseup",L)},[]),P=p.useCallback(g=>{if(!m.current||!o.current||!s.current||!h.current)return;g.preventDefault(),g.stopPropagation();const{x:w,y:j,width:H,height:J}=s.current,Q=h.current,W=g.clientX,B=g.clientY,ee=R({handler:Q,startX:w,startY:j,currentX:W,currentY:B,startWidth:H,startHeight:J,options:y.current});z(o.current,ee),r.current&&Me(r.current,o.current)},[]),L=p.useCallback(g=>{if(m.current&&(g.preventDefault(),g.stopPropagation(),s.current=null,h.current=null,m.current=!1,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",L),document.body.classList.remove("resize-in-progress"),document.body.style.cursor="",o.current)){const w=new Event("input",{bubbles:!0,cancelable:!0});o.current.dispatchEvent(w),t&&t(o.current,{width:o.current.offsetWidth,height:o.current.offsetHeight})}},[t]),O=p.useCallback(g=>{console.log("handleEditorClick called with target:",g.target),r.current&&!r.current.contains(g.target)&&(console.log("Clicking outside image, clearing selection"),f());const w=g.target;if(le(w)){if(console.log("Clicked on a resizable image"),w===o.current){console.log("Image already selected, not reselecting");return}console.log("Selecting new image"),d(w)}else console.log("Clicked on non-image element")},[d,f]),C=p.useCallback(g=>{if((g.key==="Delete"||g.key==="Backspace")&&o.current&&!m.current){g.preventDefault();const w=o.current;if(w.parentNode){w.parentNode.removeChild(w),f();const j=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(j)}}if(g.key==="Escape"&&o.current&&f(),o.current&&!m.current){if((g.ctrlKey||g.metaKey)&&g.shiftKey&&g.key===">"){g.preventDefault();const w=o.current.offsetWidth,j=Math.min(y.current.maxWidth||800,w+10);z(o.current,{width:j,height:o.current.offsetHeight});const H=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(H)}if((g.ctrlKey||g.metaKey)&&g.shiftKey&&g.key==="<"){g.preventDefault();const w=o.current.offsetWidth,j=Math.max(y.current.minWidth||50,w-10);z(o.current,{width:j,height:o.current.offsetHeight});const H=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(H)}if((g.ctrlKey||g.metaKey)&&g.shiftKey&&g.key==="+"){g.preventDefault();const w=o.current.offsetHeight,j=Math.min(y.current.maxHeight||600,w+10);z(o.current,{width:o.current.offsetWidth,height:j});const H=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(H)}if((g.ctrlKey||g.metaKey)&&g.shiftKey&&g.key==="-"){g.preventDefault();const w=o.current.offsetHeight,j=Math.max(y.current.minHeight||50,w-10);z(o.current,{width:o.current.offsetWidth,height:j});const H=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(H)}if((g.ctrlKey||g.metaKey)&&g.key==="r"){g.preventDefault(),z(o.current,{width:300,height:200});const w=new Event("input",{bubbles:!0,cancelable:!0});e.current.dispatchEvent(w)}if((g.ctrlKey||g.metaKey)&&g.altKey&&g.key==="l"){g.preventDefault();const w=!y.current.preserveAspectRatio;if(y.current={...y.current,preserveAspectRatio:w,aspectRatio:w},r.current){const j=r.current.querySelector(".aspect-ratio-toggle");j&&b(j,w)}}}},[e,f]),_=p.useCallback(()=>{r.current&&o.current&&Me(r.current,o.current)},[]);p.useEffect(()=>{if(!e.current)return;const w=e.current.closest(".editor-viewport");return w&&(w.addEventListener("scroll",_),window.addEventListener("scroll",_)),()=>{w&&w.removeEventListener("scroll",_),window.removeEventListener("scroll",_)}},[e,_]),p.useEffect(()=>{if(!e.current)return;const g=e.current;g.addEventListener("click",O),g.addEventListener("keydown",C);const w=g.closest(".editor-viewport");return w&&w.addEventListener("scroll",_),window.addEventListener("resize",_),()=>{g.removeEventListener("click",O),g.removeEventListener("keydown",C),w&&w.removeEventListener("scroll",_),window.removeEventListener("resize",_),m.current&&(document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",L),document.body.classList.remove("resize-in-progress"),document.body.style.cursor=""),r.current&&he(r.current)}},[e,O,C,_,P,L]),p.useEffect(()=>{if(!e.current)return;const g=new MutationObserver(w=>{w.forEach(j=>{j.type==="childList"&&(j.removedNodes.length>0&&j.removedNodes.forEach(H=>{H.nodeType===Node.ELEMENT_NODE&&le(H)&&H===o.current&&f()}),j.addedNodes.length>0&&j.addedNodes.forEach(H=>{if(H.nodeType===Node.ELEMENT_NODE)if(le(H))setTimeout(()=>{d(H)},50);else{const J=H.querySelectorAll?H.querySelectorAll("img"):[];J.length>0&&setTimeout(()=>{d(J[0])},50)}}))})});return g.observe(e.current,{childList:!0,subtree:!0}),()=>{g.disconnect()}},[e,f,d]);function u(g){switch(g){case A.TOP_LEFT:case A.BOTTOM_RIGHT:return"nwse-resize";case A.TOP_RIGHT:case A.BOTTOM_LEFT:return"nesw-resize";case A.TOP:case A.BOTTOM:return"ns-resize";case A.LEFT:case A.RIGHT:return"ew-resize";default:return"default"}}function R({handler:g,startX:w,startY:j,currentX:H,currentY:J,startWidth:Q,startHeight:W,options:B=fe}){const ee=H-w,re=J-j;let V=Q,ne=W;switch(g){case A.TOP_LEFT:V=Math.max(B.minWidth,Q-ee),ne=Math.max(B.minHeight,W-re);break;case A.TOP_RIGHT:V=Math.max(B.minWidth,Q+ee),ne=Math.max(B.minHeight,W-re);break;case A.BOTTOM_LEFT:V=Math.max(B.minWidth,Q-ee),ne=Math.max(B.minHeight,W+re);break;case A.BOTTOM_RIGHT:V=Math.max(B.minWidth,Q+ee),ne=Math.max(B.minHeight,W+re);break;case A.TOP:ne=Math.max(B.minHeight,W-re);break;case A.BOTTOM:ne=Math.max(B.minHeight,W+re);break;case A.LEFT:V=Math.max(B.minWidth,Q-ee);break;case A.RIGHT:V=Math.max(B.minWidth,Q+ee);break;default:return{width:V,height:ne}}if(B.preserveAspectRatio&&B.aspectRatio){const v=Q/W;[A.TOP_LEFT,A.TOP_RIGHT,A.BOTTOM_LEFT,A.BOTTOM_RIGHT].includes(g)?V/v>ne?ne=Math.max(B.minHeight,V/v):V=Math.max(B.minWidth,ne*v):[A.TOP,A.BOTTOM].includes(g)?V=ne*v:[A.LEFT,A.RIGHT].includes(g)&&(ne=V/v)}return B.maxWidth&&V>B.maxWidth&&(V=B.maxWidth,B.preserveAspectRatio&&B.aspectRatio&&(ne=V/(Q/W))),B.maxHeight&&ne>B.maxHeight&&(ne=B.maxHeight,B.preserveAspectRatio&&B.aspectRatio&&(V=ne*(Q/W))),V=Math.max(B.minWidth,V),ne=Math.max(B.minHeight,ne),{width:Math.round(V),height:Math.round(ne)}}function z(g,{width:w,height:j}){le(g)&&(g.tagName==="IMG"?(g.style.width=`${w}px`,g.style.height=`${j}px`,g.width=w,g.height=j):g.tagName==="DIV"&&(g.style.width=`${w}px`,g.style.height=`${j}px`))}return null};je.propTypes={editorRef:x.shape({current:x.instanceOf(typeof Element<"u"?Element:Object)}).isRequired,onImageResize:x.func,onImageSelect:x.func,onImageDeselect:x.func,resizeOptions:x.shape({minWidth:x.number,minHeight:x.number,maxWidth:x.number,maxHeight:x.number,aspectRatio:x.bool,preserveAspectRatio:x.bool,defaultWidth:x.number,defaultHeight:x.number})},je.defaultProps={onImageResize:void 0,onImageSelect:void 0,onImageDeselect:void 0,resizeOptions:fe};const ot=({imageElement:e,onAlignChange:t,onAspectRatioToggle:a,onDelete:n,onClose:i})=>{const[r,o]=p.useState({top:0,left:0}),[s,h]=p.useState(!1),[y,m]=p.useState("top"),d=p.useRef(null),f=p.useRef(null),T=()=>{if(!e)return"left";const _=window.getComputedStyle(e);return _.float||_.display==="block"?"left":_.display==="flex"&&_.justifyContent==="center"?"center":_.float==="right"?"right":"left"},[b,E]=p.useState(T());p.useEffect(()=>(console.log("ImageTooltipMenu mounted with imageElement:",e),()=>{console.log("ImageTooltipMenu unmounted")}),[e]),p.useEffect(()=>{if(e){let _=e.closest(".editor-viewport")||e.closest(".continuous-scroll");_&&(f.current=_)}},[e]),p.useLayoutEffect(()=>{if(!e||!d.current)return;const _=()=>{const R=e.getBoundingClientRect(),z=d.current.getBoundingClientRect();f.current;const g=window.visualViewport?window.visualViewport:{width:window.innerWidth,height:window.innerHeight},w=R.bottom>=0&&R.top<=g.height&&R.right>=0&&R.left<=g.width;let j="top",H=0,J=0;if(w){const re=R.top-z.height-10,V=g.height-R.bottom-z.height-10;V>re&&V>0?(j="bottom",H=R.bottom+10):(j="top",H=R.top-z.height-10)}else j="top",H=10;J=R.left+R.width/2-z.width/2;const Q=window.innerWidth,W=window.innerHeight;let B=J,ee=H;J<10?B=10:J+z.width>Q-10&&(B=Q-z.width-10),H<10?ee=10:H+z.height>W-10&&(ee=W-z.height-10),o({top:ee,left:B}),m(j),h(!0)};_();const u=()=>{_()};return f.current&&f.current.addEventListener("scroll",u),window.addEventListener("scroll",u),window.addEventListener("resize",u),()=>{f.current&&f.current.removeEventListener("scroll",u),window.removeEventListener("scroll",u),window.removeEventListener("resize",u),h(!1)}},[e]),p.useEffect(()=>{const _=u=>{d.current&&!d.current.contains(u.target)&&u.target!==e&&i()};return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[e,i]);const P=()=>{e&&(e.style.float="left",e.style.margin="0 10px 10px 0",e.style.display="block",E("left"),t&&t("left"))},L=()=>{e&&(e.style.float="none",e.style.margin="10px auto",e.style.display="block",E("center"),t&&t("center"))},O=()=>{e&&(e.style.float="right",e.style.margin="0 0 10px 10px",e.style.display="block",E("right"),t&&t("right"))},C=()=>{e&&e.parentNode&&(e.parentNode.removeChild(e),n&&n(),i())};return!e||(console.log("Rendering ImageTooltipMenu with position:",r,"isVisible:",s),typeof document>"u")?null:Xt.createPortal(l.jsxs("div",{ref:d,className:"image-tooltip-menu","data-menu-position":y,"aria-hidden":!s,style:{position:"fixed",top:`${r.top}px`,left:`${r.left}px`,zIndex:10001,background:"#fff",border:"1px solid #ddd",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",padding:"8px",display:"flex",gap:"4px",alignItems:"center",pointerEvents:s?"auto":"none",minWidth:"100px",minHeight:"30px",opacity:s?1:0,visibility:s?"visible":"hidden",transition:"opacity 0.15s ease, visibility 0.15s ease"},children:[l.jsx("button",{className:`tooltip-button ${b==="left"?"active":""}`,onClick:P,title:"Align Left",style:{background:b==="left"?"#007bff":"transparent",color:b==="left"?"#fff":"#333",border:"1px solid #ccc",borderRadius:"4px",padding:"6px 8px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:"â¬…ï¸"}),l.jsx("button",{className:`tooltip-button ${b==="center"?"active":""}`,onClick:L,title:"Align Center",style:{background:b==="center"?"#007bff":"transparent",color:b==="center"?"#fff":"#333",border:"1px solid #ccc",borderRadius:"4px",padding:"6px 8px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:"â†”ï¸"}),l.jsx("button",{className:`tooltip-button ${b==="right"?"active":""}`,onClick:O,title:"Align Right",style:{background:b==="right"?"#007bff":"transparent",color:b==="right"?"#fff":"#333",border:"1px solid #ccc",borderRadius:"4px",padding:"6px 8px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:"âž¡ï¸"}),l.jsx("button",{className:"tooltip-button aspect-ratio-toggle",onClick:a,title:"Toggle Aspect Ratio",style:{background:"transparent",color:"#333",border:"1px solid #ccc",borderRadius:"4px",padding:"6px 8px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:"ðŸ”—"}),l.jsx("button",{className:"tooltip-button delete-button",onClick:C,title:"Delete Image",style:{background:"transparent",color:"#dc3545",border:"1px solid #dc3545",borderRadius:"4px",padding:"6px 8px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:"ðŸ—‘ï¸"})]}),document.body)};ot.propTypes={imageElement:x.instanceOf(typeof Element<"u"?Element:Object),onAlignChange:x.func,onAspectRatioToggle:x.func,onDelete:x.func,onClose:x.func.isRequired},ot.defaultProps={imageElement:null,onAlignChange:void 0,onAspectRatioToggle:void 0,onDelete:void 0};const Mr=50,Nr=50,Vt=50,Rr=100,Ir=500,Le=p.forwardRef(({pageManagerComponent:e=null,onNavigatePage:t,onAddPage:a,onDeletePage:n,onPageSizeChange:i,onPageMarginsChange:r,onChange:o,showSidebar:s=!0,showToolbar:h=!0,showPageManager:y=!0},m)=>{const d=Ze(),f=We(),{pageSize:T,pageMargins:b,continuousContent:E,pageBoundaries:P,activePage:L,zoomLevel:O}=d,C=p.useRef(null),_=p.useRef(null),{currentFormat:u,formatText:R}=Nt(),[z,g]=p.useState(!1),[w,j]=p.useState(null),{checkAndUpdateBoundaries:H,getCurrentPage:J,scrollToPage:Q,updateBoundaries:W,triggerAutoReflow:B,removePageAndContent:ee,insertPageBreakAtBoundary:re}=$t(T,_,O,b),V=p.useMemo(()=>ke(T),[T]),[ne,v]=p.useState(!1),c=p.useRef(null),k=p.useRef(!1),M=p.useRef(!1),N=p.useRef(!1),U=p.useRef(E);p.useEffect(()=>{if(_.current){if(!N.current){_.current.innerHTML=E,N.current=!0,U.current=E;const $=setTimeout(()=>{W()},Mr);return()=>clearTimeout($)}if(U.current!==E){if(_.current.innerHTML!==E){_.current.innerHTML=E;const ae=setTimeout(()=>{if(W(),k.current){k.current=!1;const ue=Math.max(0,P.length-1);f.setActivePage(ue),setTimeout(()=>{Q(ue,C)},Vt)}},Nr);return U.current=E,()=>clearTimeout(ae)}U.current=E}}},[E,W,P.length,f,Q]),p.useEffect(()=>{o&&N.current&&o(E)},[E,o]),p.useImperativeHandle(m,()=>({getHTMLContent:()=>E,getPlainText:()=>E.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),setContent:$=>{f.updateContinuousContent($),_.current&&(_.current.innerHTML=$,setTimeout(()=>{W()},50))}}),[E,f,W]),p.useEffect(()=>{const $=setTimeout(()=>{_.current&&_.current.focus()},200);return()=>clearTimeout($)},[]);const G=p.useCallback($=>{const ae=$.currentTarget.innerHTML;f.updateContinuousContent(ae),H(),B(200);const ue=J(C);ue!==L&&f.setActivePage(ue)},[H,f,J,L,B,C]),I=p.useCallback($=>{f.updatePageSize($),W({pageSize:$}),i&&i($)},[f,W,i]),F=p.useCallback($=>{f.updatePageMargins($),W({pageMargins:$}),r&&r($)},[f,W,r]),Y=p.useCallback($=>{$<0||$>=P.length||(M.current=!0,f.setActivePage($),Q($,C),setTimeout(()=>{M.current=!1},Ir),t&&t($))},[f,Q,t,P.length]),Z=p.useCallback(()=>{const $=P.length+1;re($)&&(k.current=!0,setTimeout(()=>{if(k.current){k.current=!1;const ue=Math.max(0,P.length-1);f.setActivePage(ue),setTimeout(()=>{Q(ue,C)},Vt)}},100)),a&&a()},[P.length,re,f,Q,a]),oe=p.useCallback(()=>{const $=window.getSelection();if($&&$.rangeCount>0){if(!_?.current)return;const it=`<page-break data-page-break="true" contenteditable="false" data-page-number="${_.current.querySelectorAll('page-break, [data-page-break="true"]').length+2}"></page-break><p><br></p>`;document.execCommand("insertHTML",!1,it),setTimeout(()=>{W();const st=J(C);f.setActivePage(st)},150)}},[W,J,f,C]),S=p.useCallback($=>{if(P.length<=1){console.warn("Cannot delete the only page");return}ee($)&&(f.setActivePage(0),n&&n($))},[P.length,ee,f,n]),ie=p.useCallback(()=>{f.zoomIn()},[f]),pe=p.useCallback(()=>{f.zoomOut()},[f]),me=p.useCallback(()=>{f.resetZoom()},[f]);p.useEffect(()=>{const $=ae=>{if(ae.ctrlKey||ae.metaKey){["+","=","-","_","0"].includes(ae.key)&&ae.preventDefault();const ue=document.activeElement===_.current,it=document.activeElement===C.current,st=document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA"||document.activeElement?.isContentEditable===!1;if(ue||it||!st)switch(ae.key){case"+":case"=":ie();break;case"-":case"_":pe();break;case"0":me();break}}};return window.addEventListener("keydown",$),()=>{window.removeEventListener("keydown",$)}},[ie,pe,me]);const Lr=p.useCallback(()=>{!C.current||!_.current||M.current||(c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{if(M.current){c.current=null;return}const $=J(C);$!==L&&$>=0&&f.setActivePage($),c.current=null},Rr))},[J,L,f]),Dr=p.useMemo(()=>{if(!E)return 0;const ae=E.replace(/<[^>]*>/g," ").match(/\b\w+\b/g);return ae?ae.length:0},[E]),zr=P.length||1,$r=p.useCallback($=>{console.log("handleImageSelect called with:",$),g(!0),j($)},[]),Kt=p.useCallback(()=>{console.log("handleImageDeselect called"),g(!1),j(null)},[]),Br=p.useCallback(($,ae)=>{},[]);return p.useEffect(()=>()=>{c.current&&clearTimeout(c.current)},[]),l.jsxs("div",{className:"multi-page-editor",children:[h&&l.jsx(Re,{currentFormat:{...u,imageSelected:z},onFormatText:R,onAddPageBreak:oe}),l.jsxs("div",{className:"editor-container",children:[s&&l.jsx(Ut,{editorView:null,isCollapsed:ne,onToggle:()=>v($=>!$),wordCount:Dr,pageCount:zr}),l.jsx("div",{className:"editor-viewport continuous-scroll",ref:C,onScroll:Lr,children:l.jsx(Ie,{content:E,dimensions:V,pageSize:T,pageMargins:b,pageBoundaries:P,editorRef:_,onInput:G,onClick:()=>_.current?.focus(),zoomLevel:O})}),l.jsx(je,{editorRef:_,onImageSelect:$r,onImageDeselect:Kt,onImageResize:Br}),console.log("Rendering check - imageSelected:",z,"selectedImage:",w)||z&&w&&l.jsx(ot,{imageElement:w,onAlignChange:$=>{console.log("Image alignment changed to:",$)},onAspectRatioToggle:()=>{console.log("Aspect ratio toggled")},onDelete:()=>{console.log("Image deleted")},onClose:Kt}),y&&l.jsx("div",{className:"page-manager-sidebar",children:e?p.cloneElement(e,{onNavigate:Y,onAddPage:Z,onDeletePage:S,onPageSizeChange:I,onPageMarginsChange:F,zoomLevel:O,canZoomIn:He(O),canZoomOut:Ge(O),onZoomIn:ie,onZoomOut:pe,onZoomReset:me}):l.jsx(Yt,{pageBoundaries:P,activePage:L,pageSize:T,pageMargins:b,zoomLevel:O,canZoomIn:He(O),canZoomOut:Ge(O),onNavigate:Y,onAddPage:Z,onDeletePage:S,onPageSizeChange:I,onPageMarginsChange:F,onZoomIn:ie,onZoomOut:pe,onZoomReset:me})})]})]})});Le.displayName="HtmlEditor",Le.propTypes={pageManagerComponent:x.element,onNavigatePage:x.func,onAddPage:x.func,onDeletePage:x.func,onPageSizeChange:x.func,onPageMarginsChange:x.func,onChange:x.func,showSidebar:x.bool,showToolbar:x.bool,showPageManager:x.bool},Le.defaultProps={pageManagerComponent:null,onNavigatePage:void 0,onAddPage:void 0,onDeletePage:void 0,onPageSizeChange:void 0,onPageMarginsChange:void 0,onChange:void 0,showSidebar:!0,showToolbar:!0,showPageManager:!0};class at extends p.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,a){console.error("[ErrorBoundary] Caught error:",t),console.error("[ErrorBoundary] Error info:",a),this.setState({error:t,errorInfo:a}),this.props.onError&&this.props.onError(t,a)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:l.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid #f44336",borderRadius:"4px",backgroundColor:"#ffebee",color:"#c62828"},children:[l.jsx("h2",{style:{marginTop:0},children:"âš ï¸ Something went wrong"}),l.jsx("p",{children:"The editor encountered an unexpected error and couldn't continue."}),this.props.showDetails&&this.state.error&&l.jsxs("details",{style:{marginTop:"10px",padding:"10px",backgroundColor:"white",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace"},children:[l.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Error Details"}),l.jsxs("pre",{style:{marginTop:"10px",overflow:"auto",maxHeight:"200px"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}),l.jsx("button",{onClick:this.handleReset,style:{marginTop:"15px",padding:"8px 16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Try Again"})]}):this.props.children}}at.propTypes={children:x.node.isRequired,fallback:x.node,onError:x.func,onReset:x.func,showDetails:x.bool},at.defaultProps={fallback:null,onError:void 0,onReset:void 0,showDetails:process.env.NODE_ENV==="development"};const jr={A4:{width:se.A4.width,height:se.A4.height},Letter:{width:se.Letter.width,height:se.Letter.height},Legal:{width:se.Legal.width,height:se.Legal.height}};D.COMMON_FONT_SIZES=wt,D.DEFAULT_FONT_SIZE=Se,D.DEFAULT_IMAGE_RESIZE_OPTIONS=fe,D.DEFAULT_PAGE_SIZE=Ue,D.DocumentProvider=fn,D.EditorToolbar=Re,D.ErrorBoundary=at,D.FONT_SIZE_MAP=tt,D.HtmlEditor=Le,D.ImageResizeHandlers=je,D.PAGE_DIMENSIONS=jr,D.PAGE_SIZES=se,D.PageManager=Yt,D.PageView=Ie,D.RESIZE_HANDLERS=A,D.Sidebar=Ut,D.applyImageDimensions=kn,D.calculateResizeDimensions=An,D.clearImages=Cr,D.createResizeOverlay=nt,D.deleteImage=Or,D.getAllImageKeys=Sr,D.getAvailablePageSizes=cn,D.getImage=qt,D.getImageDimensions=Pn,D.getPageDimensions=ke,D.getPixelValue=Tn,D.getPointValue=xn,D.isResizableImage=le,D.isValidFontSize=_n,D.isValidPageSize=sn,D.logger=Zt,D.pixelsToPoints=Ct,D.pointsToPixels=Ot,D.removeResizeOverlay=he,D.saveImage=Ft,D.updateResizeOverlay=Me,D.useContinuousReflow=$t,D.useDocument=qe,D.useDocumentActions=We,D.useDocumentState=Ze,D.useFormatting=Nt,Object.defineProperty(D,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=htmleditor.umd.cjs.map
