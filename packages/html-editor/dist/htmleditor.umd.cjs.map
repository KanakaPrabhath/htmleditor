{"version":3,"file":"htmleditor.umd.cjs","sources":["../../../node_modules/react/cjs/react-jsx-runtime.production.js","../../../node_modules/react/cjs/react-jsx-runtime.development.js","../../../node_modules/react/jsx-runtime.js","../src/store/slices/documentSlice.js","../src/hooks/useFormatting.js","../src/hooks/useContinuousReflow.js","../../../node_modules/lucide-react/dist/esm/shared/src/utils.js","../../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../../node_modules/lucide-react/dist/esm/Icon.js","../../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../../node_modules/lucide-react/dist/esm/icons/bold.js","../../../node_modules/lucide-react/dist/esm/icons/chevron-left.js","../../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../../node_modules/lucide-react/dist/esm/icons/file-check.js","../../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../../node_modules/lucide-react/dist/esm/icons/hash.js","../../../node_modules/lucide-react/dist/esm/icons/heading-1.js","../../../node_modules/lucide-react/dist/esm/icons/heading-2.js","../../../node_modules/lucide-react/dist/esm/icons/heading-3.js","../../../node_modules/lucide-react/dist/esm/icons/image.js","../../../node_modules/lucide-react/dist/esm/icons/italic.js","../../../node_modules/lucide-react/dist/esm/icons/link.js","../../../node_modules/lucide-react/dist/esm/icons/list-ordered.js","../../../node_modules/lucide-react/dist/esm/icons/list.js","../../../node_modules/lucide-react/dist/esm/icons/plus.js","../../../node_modules/lucide-react/dist/esm/icons/redo.js","../../../node_modules/lucide-react/dist/esm/icons/settings.js","../../../node_modules/lucide-react/dist/esm/icons/square-check-big.js","../../../node_modules/lucide-react/dist/esm/icons/strikethrough.js","../../../node_modules/lucide-react/dist/esm/icons/table.js","../../../node_modules/lucide-react/dist/esm/icons/text-align-center.js","../../../node_modules/lucide-react/dist/esm/icons/text-align-end.js","../../../node_modules/lucide-react/dist/esm/icons/text-align-justify.js","../../../node_modules/lucide-react/dist/esm/icons/text-align-start.js","../../../node_modules/lucide-react/dist/esm/icons/underline.js","../../../node_modules/lucide-react/dist/esm/icons/undo.js","../../../node_modules/lucide-react/dist/esm/icons/x.js","../src/components/editor/Sidebar.jsx","../src/lib/storage/local-storage.js","../src/lib/editor/utils/logger.js","../src/components/editor/EditorToolbar.jsx","../src/components/editor/ContinuousPageView.jsx","../src/components/editor/PageManager.jsx","../src/components/editor/ContentEditableEditor.jsx","../src/index.js"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\nfunction jsxProd(type, config, maybeKey) {\n  var key = null;\n  void 0 !== maybeKey && (key = \"\" + maybeKey);\n  void 0 !== config.key && (key = \"\" + config.key);\n  if (\"key\" in config) {\n    maybeKey = {};\n    for (var propName in config)\n      \"key\" !== propName && (maybeKey[propName] = config[propName]);\n  } else maybeKey = config;\n  config = maybeKey.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== config ? config : null,\n    props: maybeKey\n  };\n}\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsxProd;\nexports.jsxs = jsxProd;\n","/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n        case REACT_ACTIVITY_TYPE:\n          return \"Activity\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_CONTEXT_TYPE:\n            return type.displayName || \"Context\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function UnknownOwner() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(type, key, props, owner, debugStack, debugTask) {\n      var refProp = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== refProp ? refProp : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        maybeKey,\n        getOwner(),\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      isValidElement(node)\n        ? node._store && (node._store.validated = 1)\n        : \"object\" === typeof node &&\n          null !== node &&\n          node.$$typeof === REACT_LAZY_TYPE &&\n          (\"fulfilled\" === node._payload.status\n            ? isValidElement(node._payload.value) &&\n              node._payload.value._store &&\n              (node._payload.value._store.validated = 1)\n            : node._store && (node._store.validated = 1));\n    }\n    function isValidElement(object) {\n      return (\n        \"object\" === typeof object &&\n        null !== object &&\n        object.$$typeof === REACT_ELEMENT_TYPE\n      );\n    }\n    var React = require(\"react\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n      REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          };\n    React = {\n      react_stack_bottom_frame: function (callStackForError) {\n        return callStackForError();\n      }\n    };\n    var specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var unknownOwnerDebugStack = React.react_stack_bottom_frame.bind(\n      React,\n      UnknownOwner\n    )();\n    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsx = function (type, config, maybeKey) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        !1,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n    exports.jsxs = function (type, config, maybeKey) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        !0,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n  })();\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nconst DEFAULT_PAGE_SIZE = 'A4';\r\nconst EMPTY_PARAGRAPH = '<p><br></p>';\r\n\r\nconst createEmptyPage = (index, size = DEFAULT_PAGE_SIZE) => ({\r\n  id: uuidv4(),\r\n  index,\r\n  size,\r\n  content: EMPTY_PARAGRAPH,\r\n  images: [],\r\n  isBreakPoint: false\r\n});\r\n\r\nconst withMinimumPage = (pages, pageSize = DEFAULT_PAGE_SIZE) => {\r\n  const nextPages = pages.length > 0 ? pages : [createEmptyPage(0, pageSize)];\r\n  return nextPages.map((page, index) => ({\r\n    id: page.id || uuidv4(),\r\n    index,\r\n    size: page.size || pageSize,\r\n    content: sanitizeContent(page.content),\r\n    images: page.images || [],\r\n    isBreakPoint: Boolean(page.isBreakPoint)\r\n  }));\r\n};\r\n\r\nconst sanitizeContent = (html) => {\r\n  if (typeof html !== 'string' || html.trim() === '') {\r\n    return EMPTY_PARAGRAPH;\r\n  }\r\n  return html;\r\n};\r\n\r\nconst buildInitialState = (overrides = {}) => {\r\n  const now = new Date().toISOString();\r\n  const pageSize = overrides.pageSize || DEFAULT_PAGE_SIZE;\r\n  const pages = withMinimumPage(overrides.pages || [createEmptyPage(0, pageSize)], pageSize);\r\n\r\n  return {\r\n    id: uuidv4(),\r\n    title: overrides.title || 'Untitled Document',\r\n    createdAt: now,\r\n    updatedAt: now,\r\n    pageSize,\r\n    pages,\r\n    activePage: overrides.activePage && overrides.activePage < pages.length ? overrides.activePage : 0,\r\n    pageBreaks: overrides.pageBreaks || [],\r\n    totalPages: pages.length,\r\n    // Continuous mode state\r\n    editorMode: overrides.editorMode || 'continuous', // 'continuous' or 'paged'\r\n    continuousContent: overrides.continuousContent || EMPTY_PARAGRAPH,\r\n    pageBoundaries: overrides.pageBoundaries || []\r\n  };\r\n};\r\n\r\nconst initialState = buildInitialState();\r\n\r\nexport const documentSlice = createSlice({\r\n  name: 'document',\r\n  initialState,\r\n  reducers: {\r\n    initializeDocument: (state, action) => {\r\n      const { initialContent = EMPTY_PARAGRAPH, pageSize = DEFAULT_PAGE_SIZE } = action.payload || {};\r\n      const page = { ...createEmptyPage(0, pageSize), content: sanitizeContent(initialContent) };\r\n      return buildInitialState({\r\n        title: state.title,\r\n        pageSize,\r\n        pages: [page]\r\n      });\r\n    },\r\n\r\n    updateTitle: (state, action) => {\r\n      state.title = action.payload;\r\n      state.updatedAt = new Date().toISOString();\r\n    },\r\n\r\n    updatePageContent: (state, action) => {\r\n      const { pageIndex, content } = action.payload;\r\n      if (pageIndex < 0 || pageIndex >= state.pages.length) {\r\n        return;\r\n      }\r\n\r\n      state.pages[pageIndex].content = sanitizeContent(content);\r\n      state.updatedAt = new Date().toISOString();\r\n    },\r\n\r\n    updatePages: (state, action) => {\r\n      const payload = Array.isArray(action.payload)\r\n        ? { pages: action.payload }\r\n        : action.payload || {};\r\n\r\n      const nextPages = withMinimumPage(payload.pages || [], state.pageSize);\r\n      state.pages = nextPages;\r\n      state.activePage = Math.min(state.activePage, nextPages.length - 1);\r\n      state.pageBreaks = Array.isArray(payload.pageBreaks)\r\n        ? payload.pageBreaks\r\n        : nextPages.slice(0, -1).map((_, index) => ({\r\n            id: `auto-break-${index}`,\r\n            pageNumber: index + 1\r\n          }));\r\n      state.totalPages = nextPages.length;\r\n      state.updatedAt = new Date().toISOString();\r\n    },\r\n\r\n    addPage: (state, action) => {\r\n      const insertIndex = typeof action.payload?.index === 'number'\r\n        ? Math.min(Math.max(action.payload.index, 0), state.pages.length)\r\n        : state.pages.length;\r\n\r\n      state.pages.splice(insertIndex, 0, createEmptyPage(insertIndex, state.pageSize));\r\n      state.pages = state.pages.map((page, index) => ({\r\n        ...page,\r\n        index,\r\n        size: state.pageSize\r\n      }));\r\n\r\n      state.activePage = insertIndex;\r\n      state.pageBreaks = state.pages.slice(0, -1).map((_, index) => ({\r\n        id: `auto-break-${index}`,\r\n        pageNumber: index + 1\r\n      }));\r\n      state.totalPages = state.pages.length;\r\n      state.updatedAt = new Date().toISOString();\r\n    },\r\n\r\n    deletePage: (state, action) => {\r\n      const pageIndex = action.payload;\r\n      if (state.pages.length <= 1) {\r\n        return;\r\n      }\r\n\r\n      state.pages.splice(pageIndex, 1);\r\n      state.pages = state.pages.map((page, index) => ({\r\n        ...page,\r\n        index,\r\n        size: state.pageSize\r\n      }));\r\n\r\n      if (state.activePage >= state.pages.length) {\r\n        state.activePage = state.pages.length - 1;\r\n      } else if (pageIndex <= state.activePage && state.activePage > 0) {\r\n        state.activePage -= 1;\r\n      }\r\n\r\n      state.pageBreaks = state.pages.slice(0, -1).map((_, index) => ({\r\n        id: `auto-break-${index}`,\r\n        pageNumber: index + 1\r\n      }));\r\n      state.totalPages = state.pages.length;\r\n      state.updatedAt = new Date().toISOString();\r\n    },\r\n\r\n    setActivePage: (state, action) => {\r\n      const pageIndex = action.payload;\r\n      if (pageIndex >= 0 && pageIndex < state.pages.length && pageIndex !== state.activePage) {\r\n        state.activePage = pageIndex;\r\n        state.updatedAt = new Date().toISOString();\r\n      }\r\n    },\r\n\r\n    updatePageSize: (state, action) => {\r\n      const newSize = action.payload;\r\n      state.pageSize = newSize;\r\n      state.pages = state.pages.map((page, index) => ({\r\n        ...page,\r\n        index,\r\n        size: newSize\r\n      }));\r\n      state.pageBreaks = state.pages.slice(0, -1).map((_, index) => ({\r\n        id: `auto-break-${index}`,\r\n        pageNumber: index + 1\r\n      }));\r\n      state.updatedAt = new Date().toISOString();\r\n    },\r\n\r\n    resetDocument: () => buildInitialState(),\r\n\r\n    // Continuous mode actions\r\n    updateContinuousContent: (state, action) => {\r\n      state.continuousContent = sanitizeContent(action.payload);\r\n      state.updatedAt = new Date().toISOString();\r\n    },\r\n\r\n    updatePageBoundaries: (state, action) => {\r\n      state.pageBoundaries = action.payload || [];\r\n      state.totalPages = state.pageBoundaries.length;\r\n      state.updatedAt = new Date().toISOString();\r\n    },\r\n\r\n    // Manual page operations for continuous mode\r\n    addPageBreak: (state, action) => {\r\n      const { position = 'end', pageIndex } = action.payload || {};\r\n      \r\n      // Create page break tag\r\n      const pageBreakTag = '<page-break data-page-break=\"true\" style=\"display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;\"></page-break>';\r\n      \r\n      if (position === 'end') {\r\n        // Add page break at the end\r\n        state.continuousContent = state.continuousContent + pageBreakTag + '<p><br></p>';\r\n      } else if (typeof position === 'number') {\r\n        // Insert at specific position (character index)\r\n        const before = state.continuousContent.substring(0, position);\r\n        const after = state.continuousContent.substring(position);\r\n        state.continuousContent = before + pageBreakTag + after;\r\n      } else if (typeof pageIndex === 'number') {\r\n        // Insert page break after a specific page\r\n        if (typeof document !== 'undefined') {\r\n          const tempDiv = document.createElement('div');\r\n          tempDiv.innerHTML = state.continuousContent;\r\n          \r\n          const pageBreaks = tempDiv.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n          \r\n          if (pageIndex === 0 && pageBreaks.length === 0) {\r\n            // First page, add at end\r\n            state.continuousContent = state.continuousContent + pageBreakTag + '<p><br></p>';\r\n          } else if (pageIndex < pageBreaks.length) {\r\n            // Insert after the specified page break\r\n            const targetBreak = pageBreaks[pageIndex];\r\n            const newBreak = document.createElement('page-break');\r\n            newBreak.setAttribute('data-page-break', 'true');\r\n            newBreak.setAttribute('style', 'display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;');\r\n            \r\n            const newParagraph = document.createElement('p');\r\n            newParagraph.innerHTML = '<br>';\r\n            \r\n            targetBreak.parentNode.insertBefore(newBreak, targetBreak.nextSibling);\r\n            newBreak.parentNode.insertBefore(newParagraph, newBreak.nextSibling);\r\n            \r\n            state.continuousContent = tempDiv.innerHTML;\r\n          } else {\r\n            // Add at end\r\n            state.continuousContent = state.continuousContent + pageBreakTag + '<p><br></p>';\r\n          }\r\n        }\r\n      }\r\n      \r\n      state.updatedAt = new Date().toISOString();\r\n    },\r\n\r\n    removePageBreak: (state, action) => {\r\n      const { pageIndex } = action.payload || {};\r\n      \r\n      if (typeof pageIndex !== 'number') {\r\n        return;\r\n      }\r\n      \r\n      // Create a temporary div to parse HTML\r\n      if (typeof document !== 'undefined') {\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = state.continuousContent;\r\n        \r\n        // Find all page breaks\r\n        const pageBreaks = tempDiv.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n        \r\n        // Remove the page break at the specified index\r\n        // For first page (pageIndex 0), we remove the first page break\r\n        if (pageBreaks[pageIndex]) {\r\n          pageBreaks[pageIndex].remove();\r\n        }\r\n        \r\n        // Renumber all remaining page breaks\r\n        const remainingBreaks = tempDiv.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n        remainingBreaks.forEach((breakEl, index) => {\r\n          // Page number is index + 2 (page 1 has no break, first break creates page 2)\r\n          breakEl.setAttribute('data-page-number', String(index + 2));\r\n        });\r\n        \r\n        state.continuousContent = tempDiv.innerHTML;\r\n        state.updatedAt = new Date().toISOString();\r\n      }\r\n    },\r\n\r\n    setEditorMode: (state, action) => {\r\n      const newMode = action.payload;\r\n      if (newMode !== state.editorMode) {\r\n        state.editorMode = newMode;\r\n        \r\n        // Convert content between modes\r\n        if (newMode === 'continuous') {\r\n          // Merge all pages into continuous content\r\n          const allContent = state.pages\r\n            .map(page => page.content)\r\n            .filter(content => content && content !== EMPTY_PARAGRAPH)\r\n            .join('\\n');\r\n          state.continuousContent = allContent || EMPTY_PARAGRAPH;\r\n        } else {\r\n          // Split continuous content into pages (will be handled by reflow)\r\n          if (state.continuousContent && state.continuousContent !== EMPTY_PARAGRAPH) {\r\n            state.pages = [{ ...createEmptyPage(0, state.pageSize), content: state.continuousContent }];\r\n          }\r\n        }\r\n        \r\n        state.updatedAt = new Date().toISOString();\r\n      }\r\n    },\r\n\r\n    // Bulk page operations\r\n    insertPageAt: (state, action) => {\r\n      const { pageIndex, content = EMPTY_PARAGRAPH } = action.payload || {};\r\n      \r\n      if (typeof pageIndex !== 'number' || pageIndex < 0) {\r\n        return;\r\n      }\r\n\r\n      // In continuous mode, insert a page break at the appropriate position\r\n      if (state.editorMode === 'continuous') {\r\n        if (typeof document !== 'undefined') {\r\n          const tempDiv = document.createElement('div');\r\n          tempDiv.innerHTML = state.continuousContent;\r\n          \r\n          const pageBreaks = tempDiv.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n          const pageBreakTag = '<page-break data-page-break=\"true\" style=\"display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;\"></page-break>';\r\n          \r\n          if (pageIndex === 0) {\r\n            // Insert at beginning\r\n            state.continuousContent = content + pageBreakTag + state.continuousContent;\r\n          } else if (pageIndex >= pageBreaks.length) {\r\n            // Insert at end\r\n            state.continuousContent = state.continuousContent + pageBreakTag + content;\r\n          } else {\r\n            // Insert at specific position\r\n            const targetBreak = pageBreaks[pageIndex - 1];\r\n            const newContent = document.createElement('div');\r\n            newContent.innerHTML = content;\r\n            \r\n            const newBreak = document.createElement('page-break');\r\n            newBreak.setAttribute('data-page-break', 'true');\r\n            newBreak.setAttribute('style', 'display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;');\r\n            \r\n            targetBreak.parentNode.insertBefore(newContent, targetBreak.nextSibling);\r\n            targetBreak.parentNode.insertBefore(newBreak, newContent.nextSibling);\r\n            \r\n            state.continuousContent = tempDiv.innerHTML;\r\n          }\r\n        }\r\n      }\r\n      \r\n      state.updatedAt = new Date().toISOString();\r\n    },\r\n\r\n    movePageTo: (state, action) => {\r\n      const { fromIndex, toIndex } = action.payload || {};\r\n      \r\n      if (typeof fromIndex !== 'number' || typeof toIndex !== 'number') {\r\n        return;\r\n      }\r\n\r\n      if (fromIndex < 0 || toIndex < 0 || fromIndex === toIndex) {\r\n        return;\r\n      }\r\n\r\n      // In continuous mode, we need to rearrange content between page breaks\r\n      if (state.editorMode === 'continuous' && typeof document !== 'undefined') {\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = state.continuousContent;\r\n        \r\n        const pageBreaks = Array.from(tempDiv.querySelectorAll('page-break, [data-page-break=\"true\"]'));\r\n        \r\n        // Extract page content segments\r\n        const segments = [];\r\n        let currentNode = tempDiv.firstChild;\r\n        let currentSegment = [];\r\n        \r\n        while (currentNode) {\r\n          const isPageBreak = currentNode.nodeType === 1 && \r\n            (currentNode.tagName.toLowerCase() === 'page-break' || \r\n             currentNode.getAttribute('data-page-break') === 'true');\r\n          \r\n          if (isPageBreak) {\r\n            segments.push(currentSegment);\r\n            currentSegment = [];\r\n          } else {\r\n            currentSegment.push(currentNode.cloneNode(true));\r\n          }\r\n          \r\n          currentNode = currentNode.nextSibling;\r\n        }\r\n        \r\n        // Add last segment\r\n        if (currentSegment.length > 0) {\r\n          segments.push(currentSegment);\r\n        }\r\n        \r\n        // Validate indices\r\n        if (fromIndex >= segments.length || toIndex >= segments.length) {\r\n          return;\r\n        }\r\n        \r\n        // Move the segment\r\n        const [movedSegment] = segments.splice(fromIndex, 1);\r\n        segments.splice(toIndex, 0, movedSegment);\r\n        \r\n        // Rebuild content\r\n        const newContent = [];\r\n        segments.forEach((segment, index) => {\r\n          segment.forEach(node => newContent.push(node.outerHTML || node.textContent));\r\n          if (index < segments.length - 1) {\r\n            newContent.push('<page-break data-page-break=\"true\" style=\"display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;\"></page-break>');\r\n          }\r\n        });\r\n        \r\n        state.continuousContent = newContent.join('');\r\n      }\r\n      \r\n      state.updatedAt = new Date().toISOString();\r\n    },\r\n\r\n    duplicatePage: (state, action) => {\r\n      const { pageIndex } = action.payload || {};\r\n      \r\n      if (typeof pageIndex !== 'number' || pageIndex < 0) {\r\n        return;\r\n      }\r\n\r\n      // In continuous mode, duplicate content of a specific page\r\n      if (state.editorMode === 'continuous' && typeof document !== 'undefined') {\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = state.continuousContent;\r\n        \r\n        const pageBreaks = Array.from(tempDiv.querySelectorAll('page-break, [data-page-break=\"true\"]'));\r\n        \r\n        // Extract page content\r\n        let pageContent = [];\r\n        let currentNode = tempDiv.firstChild;\r\n        let currentPageIndex = 0;\r\n        \r\n        while (currentNode) {\r\n          const isPageBreak = currentNode.nodeType === 1 && \r\n            (currentNode.tagName.toLowerCase() === 'page-break' || \r\n             currentNode.getAttribute('data-page-break') === 'true');\r\n          \r\n          if (isPageBreak) {\r\n            if (currentPageIndex === pageIndex) {\r\n              break;\r\n            }\r\n            currentPageIndex++;\r\n            pageContent = [];\r\n          } else if (currentPageIndex === pageIndex) {\r\n            pageContent.push(currentNode.cloneNode(true));\r\n          }\r\n          \r\n          currentNode = currentNode.nextSibling;\r\n        }\r\n        \r\n        // Insert duplicated content\r\n        if (pageContent.length > 0 && pageIndex < pageBreaks.length) {\r\n          const targetBreak = pageBreaks[pageIndex];\r\n          const pageBreakTag = '<page-break data-page-break=\"true\" style=\"display: block; height: 20px; border-top: 2px dashed #ccc; margin: 20px 0; page-break-after: always;\"></page-break>';\r\n          \r\n          const contentHTML = pageContent.map(node => node.outerHTML || node.textContent).join('');\r\n          const duplicateContent = contentHTML + pageBreakTag;\r\n          \r\n          const wrapper = document.createElement('div');\r\n          wrapper.innerHTML = duplicateContent;\r\n          \r\n          let insertAfter = targetBreak;\r\n          Array.from(wrapper.children).forEach(child => {\r\n            insertAfter.parentNode.insertBefore(child.cloneNode(true), insertAfter.nextSibling);\r\n            insertAfter = insertAfter.nextSibling;\r\n          });\r\n          \r\n          state.continuousContent = tempDiv.innerHTML;\r\n        }\r\n      }\r\n      \r\n      state.updatedAt = new Date().toISOString();\r\n    }\r\n  }\r\n});\r\n\r\nexport const {\r\n  initializeDocument,\r\n  updateTitle,\r\n  updatePageContent,\r\n  updatePages,\r\n  addPage,\r\n  deletePage,\r\n  setActivePage,\r\n  updatePageSize,\r\n  resetDocument,\r\n  updateContinuousContent,\r\n  updatePageBoundaries,\r\n  addPageBreak,\r\n  removePageBreak,\r\n  setEditorMode,\r\n  insertPageAt,\r\n  movePageTo,\r\n  duplicatePage\r\n} = documentSlice.actions;\r\n\r\nexport default documentSlice.reducer;","import { useState, useCallback } from 'react';\r\n\r\n/**\r\n * useFormatting - Hook for managing text formatting state and commands\r\n * Handles document.execCommand for rich text formatting\r\n */\r\nexport const useFormatting = () => {\r\n  const [currentFormat, setCurrentFormat] = useState({\r\n    bold: false,\r\n    italic: false,\r\n    underline: false,\r\n    strikethrough: false,\r\n    alignLeft: false,\r\n    alignCenter: false,\r\n    alignRight: false,\r\n    alignJustify: false,\r\n    fontFamily: 'Arial',\r\n    fontSize: '12px'\r\n  });\r\n\r\n  /**\r\n   * Format text using document.execCommand\r\n   */\r\n  const formatText = useCallback((command, value = null) => {\r\n    // Handle fontSize with proper font size number (1-7 scale)\r\n    if (command === 'fontSize') {\r\n      // Convert px value to font size number for execCommand\r\n      const sizeMap = {\r\n        '10px': '1',\r\n        '12px': '2',\r\n        '14px': '3',\r\n        '16px': '4',\r\n        '18px': '5',\r\n        '24px': '6',\r\n        '32px': '7'\r\n      };\r\n      const sizeNumber = sizeMap[value] || '2';\r\n      document.execCommand('fontSize', false, sizeNumber);\r\n      \r\n      // Then set the actual pixel size using style\r\n      const selection = window.getSelection();\r\n      if (selection && selection.rangeCount > 0) {\r\n        const range = selection.getRangeAt(0);\r\n        const selectedText = range.toString();\r\n        if (selectedText) {\r\n          const span = document.createElement('span');\r\n          span.style.fontSize = value;\r\n          range.surroundContents(span);\r\n        }\r\n      }\r\n    } else {\r\n      document.execCommand(command, false, value);\r\n    }\r\n    \r\n    // Update format state\r\n    if (command === 'bold') {\r\n      setCurrentFormat(prev => ({ ...prev, bold: !prev.bold }));\r\n    } else if (command === 'italic') {\r\n      setCurrentFormat(prev => ({ ...prev, italic: !prev.italic }));\r\n    } else if (command === 'underline') {\r\n      setCurrentFormat(prev => ({ ...prev, underline: !prev.underline }));\r\n    } else if (command === 'strikethrough') {\r\n      setCurrentFormat(prev => ({ ...prev, strikethrough: !prev.strikethrough }));\r\n    } else if (command === 'justifyLeft') {\r\n      setCurrentFormat(prev => ({ ...prev, alignLeft: true, alignCenter: false, alignRight: false, alignJustify: false }));\r\n    } else if (command === 'justifyCenter') {\r\n      setCurrentFormat(prev => ({ ...prev, alignLeft: false, alignCenter: true, alignRight: false, alignJustify: false }));\r\n    } else if (command === 'justifyRight') {\r\n      setCurrentFormat(prev => ({ ...prev, alignLeft: false, alignCenter: false, alignRight: true, alignJustify: false }));\r\n    } else if (command === 'justifyFull') {\r\n      setCurrentFormat(prev => ({ ...prev, alignLeft: false, alignCenter: false, alignRight: false, alignJustify: true }));\r\n    } else if (command === 'fontSize') {\r\n      setCurrentFormat(prev => ({ ...prev, fontSize: value }));\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    currentFormat,\r\n    formatText\r\n  };\r\n};\r\n","import { useCallback, useRef, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { updatePageBoundaries, updateContinuousContent } from '../store/slices/documentSlice';\r\n\r\nconst PAGE_DIMENSIONS = {\r\n  A4: { width: 794, height: 1123 },\r\n  Letter: { width: 816, height: 1056 },\r\n  Legal: { width: 816, height: 1344 }\r\n};\r\n\r\nconst CONTENT_PADDING = {\r\n  top: 60,\r\n  bottom: 100,\r\n  left: 72,\r\n  right: 72\r\n};\r\n\r\n/**\r\n * useContinuousReflow - Automatically insert page breaks based on content height\r\n * Monitors content height and inserts <page-break> tags when content exceeds page dimensions\r\n * Content remains in a single continuous contenteditable surface\r\n */\r\nexport const useContinuousReflow = (pageSize, editorRef) => {\r\n  const dispatch = useDispatch();\r\n  const boundaryTimeoutRef = useRef(null);\r\n  const reflowTimeoutRef = useRef(null);\r\n  const latestPageSizeRef = useRef(pageSize);\r\n  const isReflowingRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    latestPageSizeRef.current = pageSize;\r\n  }, [pageSize]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (boundaryTimeoutRef.current) {\r\n        clearTimeout(boundaryTimeoutRef.current);\r\n      }\r\n      if (reflowTimeoutRef.current) {\r\n        clearTimeout(reflowTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  /**\r\n   * Check if content in a page section exceeds the maximum height\r\n   * Returns the element where overflow occurs\r\n   */\r\n  const findOverflowPoint = useCallback((pageElements, maxHeight) => {\r\n    let currentHeight = 0;\r\n    \r\n    for (let i = 0; i < pageElements.length; i++) {\r\n      const element = pageElements[i];\r\n      const elementHeight = element.getBoundingClientRect().height;\r\n      \r\n      if (currentHeight + elementHeight > maxHeight) {\r\n        return { overflowIndex: i, overflowElement: element, accumulatedHeight: currentHeight };\r\n      }\r\n      \r\n      currentHeight += elementHeight;\r\n    }\r\n    \r\n    return null; // No overflow\r\n  }, []);\r\n\r\n  /**\r\n   * Insert a page break element before the specified element\r\n   */\r\n  const insertPageBreakBefore = useCallback((targetElement, pageNumber) => {\r\n    if (!targetElement || !editorRef?.current) {\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const editor = editorRef.current;\r\n      const pageBreak = document.createElement('page-break');\r\n      pageBreak.setAttribute('data-page-break', 'true');\r\n      pageBreak.setAttribute('contenteditable', 'false');\r\n      pageBreak.setAttribute('data-page-number', pageNumber || '2');\r\n      \r\n      // Insert before the target element\r\n      targetElement.parentNode.insertBefore(pageBreak, targetElement);\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.warn('[insertPageBreakBefore] Failed to insert page break:', error);\r\n      return false;\r\n    }\r\n  }, [editorRef]);\r\n\r\n  /**\r\n   * Automatic reflow: Insert page breaks when content exceeds page height\r\n   */\r\n  const checkAndReflow = useCallback(() => {\r\n    if (!editorRef?.current || isReflowingRef.current) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      isReflowingRef.current = true;\r\n      const editor = editorRef.current;\r\n      const targetPageSize = latestPageSizeRef.current || 'A4';\r\n      const dimensions = PAGE_DIMENSIONS[targetPageSize] || PAGE_DIMENSIONS.A4;\r\n      \r\n      // Calculate max content height (page height - padding)\r\n      const maxHeight = dimensions.height - CONTENT_PADDING.top - CONTENT_PADDING.bottom;\r\n      \r\n      // Get all child elements in the editor\r\n      const allChildren = Array.from(editor.children);\r\n      \r\n      // Find existing page breaks\r\n      const existingBreaks = allChildren.filter(el => \r\n        el.tagName === 'PAGE-BREAK' || el.getAttribute('data-page-break') === 'true'\r\n      );\r\n      \r\n      // Split content into pages based on existing breaks\r\n      const pages = [];\r\n      let currentPage = [];\r\n      \r\n      for (const child of allChildren) {\r\n        if (child.tagName === 'PAGE-BREAK' || child.getAttribute('data-page-break') === 'true') {\r\n          if (currentPage.length > 0) {\r\n            pages.push(currentPage);\r\n            currentPage = [];\r\n          }\r\n        } else {\r\n          currentPage.push(child);\r\n        }\r\n      }\r\n      \r\n      // Add the last page\r\n      if (currentPage.length > 0) {\r\n        pages.push(currentPage);\r\n      }\r\n      \r\n      // If no pages, all elements are on one page\r\n      if (pages.length === 0 && allChildren.length > 0) {\r\n        pages.push(allChildren.filter(el => \r\n          !(el.tagName === 'PAGE-BREAK' || el.getAttribute('data-page-break') === 'true')\r\n        ));\r\n      }\r\n      \r\n      // Check each page for overflow\r\n      let insertedBreaks = false;\r\n      \r\n      for (let pageIndex = 0; pageIndex < pages.length; pageIndex++) {\r\n        const pageElements = pages[pageIndex];\r\n        const overflow = findOverflowPoint(pageElements, maxHeight);\r\n        \r\n        if (overflow && overflow.overflowIndex > 0) {\r\n          // Insert page break before the overflow element\r\n          // Page number is pageIndex + 2 (since we're creating the break for the next page)\r\n          const pageNumber = pageIndex + 2;\r\n          const inserted = insertPageBreakBefore(overflow.overflowElement, pageNumber);\r\n          if (inserted) {\r\n            insertedBreaks = true;\r\n            // Only process one page at a time to avoid complexity\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Update boundaries if we inserted breaks\r\n      if (insertedBreaks) {\r\n        // Trigger content update to Redux\r\n        const html = editor.innerHTML;\r\n        dispatch(updateContinuousContent(html));\r\n        \r\n        // Recalculate boundaries\r\n        setTimeout(() => {\r\n          updateBoundaries();\r\n        }, 50);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.warn('[checkAndReflow] Reflow failed:', error);\r\n    } finally {\r\n      isReflowingRef.current = false;\r\n    }\r\n  }, [editorRef, findOverflowPoint, insertPageBreakBefore, dispatch]);\r\n\r\n  /**\r\n   * Debounced automatic reflow check\r\n   */\r\n  const triggerAutoReflow = useCallback((delay = 500) => {\r\n    if (reflowTimeoutRef.current) {\r\n      clearTimeout(reflowTimeoutRef.current);\r\n    }\r\n\r\n    reflowTimeoutRef.current = setTimeout(() => {\r\n      reflowTimeoutRef.current = null;\r\n      checkAndReflow();\r\n    }, delay);\r\n  }, [checkAndReflow]);\r\n\r\n  /**\r\n   * Calculate visual page boundaries based on <page-break> tags in content\r\n   * Returns array of boundary objects with top positions\r\n   */\r\n  const calculatePageBoundaries = useCallback((options = {}) => {\r\n    if (!editorRef?.current || typeof document === 'undefined') {\r\n      return [];\r\n    }\r\n\r\n    const targetPageSize = options.pageSize || latestPageSizeRef.current || 'A4';\r\n    const dimensions = PAGE_DIMENSIONS[targetPageSize] || PAGE_DIMENSIONS.A4;\r\n    \r\n    const editor = editorRef.current;\r\n    \r\n    // Find all <page-break> elements in the content\r\n    const pageBreakElements = editor.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n    \r\n    const boundaries = [];\r\n    let currentTop = 0;\r\n    \r\n    // Always have at least one page (page 1)\r\n    boundaries.push({\r\n      id: 'page-0',\r\n      pageNumber: 1,\r\n      top: 0,\r\n      height: dimensions.height\r\n      // No breakElement for first page\r\n    });\r\n\r\n    // Add boundaries for each page break\r\n    pageBreakElements.forEach((breakEl, index) => {\r\n      const rect = breakEl.getBoundingClientRect();\r\n      const editorRect = editor.getBoundingClientRect();\r\n      const relativeTop = rect.top - editorRect.top + editor.scrollTop;\r\n      \r\n      boundaries.push({\r\n        id: `page-${index + 1}`,\r\n        pageNumber: index + 2,\r\n        top: relativeTop,\r\n        height: dimensions.height\r\n        // Don't store breakElement - not serializable\r\n      });\r\n    });\r\n\r\n    return boundaries;\r\n  }, [editorRef]);\r\n\r\n  /**\r\n   * Update page boundaries in Redux state\r\n   */\r\n  const updateBoundaries = useCallback((options = {}) => {\r\n    const boundaries = calculatePageBoundaries(options);\r\n    dispatch(updatePageBoundaries(boundaries));\r\n    return boundaries;\r\n  }, [calculatePageBoundaries, dispatch]);\r\n\r\n  /**\r\n   * Debounced boundary calculation\r\n   * Triggers after content changes to recalculate page boundaries\r\n   */\r\n  const checkAndUpdateBoundaries = useCallback((options = {}) => {\r\n    if (boundaryTimeoutRef.current) {\r\n      clearTimeout(boundaryTimeoutRef.current);\r\n    }\r\n\r\n    const delay = typeof options.delay === 'number' ? options.delay : 300;\r\n\r\n    boundaryTimeoutRef.current = setTimeout(() => {\r\n      boundaryTimeoutRef.current = null;\r\n      updateBoundaries(options);\r\n    }, Math.max(0, delay));\r\n  }, [updateBoundaries]);\r\n\r\n  /**\r\n   * Get current page number based on cursor position\r\n   */\r\n  const getCurrentPage = useCallback(() => {\r\n    if (!editorRef?.current) {\r\n      return 0;\r\n    }\r\n\r\n    const selection = window.getSelection();\r\n    if (!selection || selection.rangeCount === 0) {\r\n      return 0;\r\n    }\r\n\r\n    try {\r\n      const range = selection.getRangeAt(0);\r\n      const editor = editorRef.current;\r\n      let currentNode = range.startContainer;\r\n      \r\n      // Find all page breaks before cursor\r\n      const pageBreaks = Array.from(editor.querySelectorAll('page-break, [data-page-break=\"true\"]'));\r\n      \r\n      if (pageBreaks.length === 0) {\r\n        return 0; // Only one page\r\n      }\r\n\r\n      // Walk up the tree to find the editor\r\n      while (currentNode && currentNode !== editor) {\r\n        // Check if current node is after any page breaks\r\n        for (let i = pageBreaks.length - 1; i >= 0; i--) {\r\n          const breakEl = pageBreaks[i];\r\n          const position = breakEl.compareDocumentPosition(currentNode);\r\n          \r\n          // If currentNode is after this page break\r\n          if (position & Node.DOCUMENT_POSITION_FOLLOWING) {\r\n            return i + 1; // Page number (0-indexed internally)\r\n          }\r\n        }\r\n        \r\n        currentNode = currentNode.parentNode;\r\n      }\r\n      \r\n      return 0; // Default to first page\r\n    } catch (error) {\r\n      console.warn('[getCurrentPage] Failed to calculate page:', error);\r\n      return 0;\r\n    }\r\n  }, [editorRef]);\r\n\r\n  /**\r\n   * Scroll to a specific page and position cursor at the start of that page\r\n   */\r\n  const scrollToPage = useCallback((pageNumber, containerRef) => {\r\n    if (!containerRef?.current || !editorRef?.current) {\r\n      return;\r\n    }\r\n\r\n    const editor = editorRef.current;\r\n    const boundaries = calculatePageBoundaries();\r\n    \r\n    // Find the boundary for the requested page\r\n    const targetBoundary = boundaries.find(b => b.pageNumber === pageNumber + 1);\r\n    \r\n    if (targetBoundary) {\r\n      // Scroll to the page\r\n      containerRef.current.scrollTo({\r\n        top: targetBoundary.top - 40,\r\n        behavior: 'smooth'\r\n      });\r\n      \r\n      // Position cursor at the start of this page\r\n      setTimeout(() => {\r\n        positionCursorAtPage(pageNumber);\r\n      }, 300); // Wait for smooth scroll\r\n    }\r\n  }, [editorRef]);\r\n\r\n  /**\r\n   * Position cursor at the start of a specific page\r\n   */\r\n  const positionCursorAtPage = useCallback((pageNumber) => {\r\n    if (!editorRef?.current) {\r\n      return;\r\n    }\r\n\r\n    const editor = editorRef.current;\r\n    editor.focus();\r\n\r\n    try {\r\n      let targetNode = null;\r\n      let targetOffset = 0;\r\n\r\n      if (pageNumber === 0) {\r\n        // First page - position at start\r\n        targetNode = editor.firstChild;\r\n        targetOffset = 0;\r\n      } else {\r\n        // Find the page break element for this page\r\n        const pageBreaks = editor.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n        const breakElement = pageBreaks[pageNumber - 1];\r\n        \r\n        if (breakElement && breakElement.nextSibling) {\r\n          targetNode = breakElement.nextSibling;\r\n          targetOffset = 0;\r\n        }\r\n      }\r\n\r\n      if (targetNode) {\r\n        const range = document.createRange();\r\n        const selection = window.getSelection();\r\n        \r\n        // If target is a text node, use it directly\r\n        if (targetNode.nodeType === Node.TEXT_NODE) {\r\n          range.setStart(targetNode, targetOffset);\r\n        } else {\r\n          // If it's an element, position at its start\r\n          range.setStart(targetNode, 0);\r\n        }\r\n        \r\n        range.collapse(true);\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n      }\r\n    } catch (error) {\r\n      console.warn('[positionCursorAtPage] Failed to position cursor:', error);\r\n    }\r\n  }, [editorRef]);\r\n\r\n  /**\r\n   * Remove a page and its content from the continuous editor\r\n   * Removes the page break and all content between the page boundaries\r\n   * @param {number} pageIndex - The index of the page to remove (0-based)\r\n   */\r\n  const removePageAndContent = useCallback((pageIndex) => {\r\n    if (!editorRef?.current) {\r\n      return false;\r\n    }\r\n\r\n    const editor = editorRef.current;\r\n    const boundaries = calculatePageBoundaries();\r\n\r\n    // Cannot delete if only one page\r\n    if (boundaries.length <= 1) {\r\n      console.warn('[removePageAndContent] Cannot delete the only page');\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      // Find all page breaks in the editor\r\n      const pageBreaks = Array.from(editor.querySelectorAll('page-break, [data-page-break=\"true\"]'));\r\n      \r\n      if (pageIndex > pageBreaks.length) {\r\n        console.warn('[removePageAndContent] Invalid page index');\r\n        return false;\r\n      }\r\n\r\n      // Save cursor position before deletion\r\n      const selection = window.getSelection();\r\n      let cursorWasInDeletedContent = false;\r\n      \r\n      let nodesToRemove = [];\r\n      let pageBreakToRemove = null;\r\n\r\n      // Special handling for first page (pageIndex === 0)\r\n      if (pageIndex === 0) {\r\n        // For the first page, remove all content before the first page break\r\n        const firstPageBreak = pageBreaks[0];\r\n        \r\n        if (!firstPageBreak) {\r\n          console.warn('[removePageAndContent] No page break found for first page');\r\n          return false;\r\n        }\r\n\r\n        // Collect all nodes before the first page break\r\n        let currentNode = editor.firstChild;\r\n        while (currentNode && currentNode !== firstPageBreak) {\r\n          nodesToRemove.push(currentNode);\r\n          currentNode = currentNode.nextSibling;\r\n        }\r\n\r\n        // The first page break itself should also be removed\r\n        pageBreakToRemove = firstPageBreak;\r\n\r\n      } else {\r\n        // For pages 1 and onwards, remove content between page breaks\r\n        // The page break that starts this page is at index (pageIndex - 1)\r\n        // because page 0 has no break, page 1 has break[0], page 2 has break[1], etc.\r\n        const pageBreakElement = pageBreaks[pageIndex - 1];\r\n        \r\n        if (!pageBreakElement) {\r\n          console.warn('[removePageAndContent] Page break not found');\r\n          return false;\r\n        }\r\n\r\n        // Find the next page break (if any) to determine the end of this page\r\n        const nextPageBreakElement = pageBreaks[pageIndex];\r\n\r\n        // Collect all nodes between the current page break and the next one (or end)\r\n        let currentNode = pageBreakElement.nextSibling;\r\n\r\n        while (currentNode) {\r\n          // Stop if we reach the next page break\r\n          if (currentNode === nextPageBreakElement) {\r\n            break;\r\n          }\r\n          \r\n          nodesToRemove.push(currentNode);\r\n          currentNode = currentNode.nextSibling;\r\n        }\r\n\r\n        pageBreakToRemove = pageBreakElement;\r\n      }\r\n\r\n      // Check if cursor is in the content being deleted\r\n      if (selection && selection.rangeCount > 0) {\r\n        const range = selection.getRangeAt(0);\r\n        const cursorNode = range.startContainer;\r\n        \r\n        for (const node of nodesToRemove) {\r\n          if (node.contains(cursorNode) || node === cursorNode) {\r\n            cursorWasInDeletedContent = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      // Remove the page break element\r\n      if (pageBreakToRemove && pageBreakToRemove.parentNode) {\r\n        pageBreakToRemove.remove();\r\n      }\r\n\r\n      // Remove all content nodes\r\n      nodesToRemove.forEach(node => {\r\n        if (node.parentNode) {\r\n          node.remove();\r\n        }\r\n      });\r\n\r\n      // Renumber remaining page breaks\r\n      const remainingBreaks = editor.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n      remainingBreaks.forEach((breakEl, index) => {\r\n        breakEl.setAttribute('data-page-number', String(index + 2));\r\n      });\r\n\r\n      // Position cursor appropriately after deletion\r\n      if (cursorWasInDeletedContent) {\r\n        // Position cursor at the start of the first remaining page (page 0)\r\n        setTimeout(() => {\r\n          positionCursorAtPage(0);\r\n        }, 50);\r\n      }\r\n\r\n      // Update content in Redux\r\n      const updatedHTML = editor.innerHTML;\r\n      dispatch(updateContinuousContent(updatedHTML));\r\n\r\n      // Update boundaries after deletion\r\n      setTimeout(() => {\r\n        updateBoundaries();\r\n      }, 100);\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('[removePageAndContent] Failed to remove page:', error);\r\n      return false;\r\n    }\r\n  }, [editorRef, calculatePageBoundaries, dispatch, updateBoundaries, positionCursorAtPage]);\r\n\r\n  return {\r\n    calculatePageBoundaries,\r\n    checkAndUpdateBoundaries,\r\n    updateBoundaries,\r\n    getCurrentPage,\r\n    scrollToPage,\r\n    positionCursorAtPage,\r\n    checkAndReflow,\r\n    triggerAutoReflow,\r\n    removePageAndContent,\r\n    boundaryTimeoutRef,\r\n    reflowTimeoutRef\r\n  };\r\n};\r\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n};\n\nexport { hasA11yProp, mergeClasses, toCamelCase, toKebabCase, toPascalCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses, hasA11yProp } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => createElement(\n    \"svg\",\n    {\n      ref,\n      ...defaultAttributes,\n      width: size,\n      height: size,\n      stroke: color,\n      strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n      className: mergeClasses(\"lucide\", className),\n      ...!children && !hasA11yProp(rest) && { \"aria-hidden\": \"true\" },\n      ...rest\n    },\n    [\n      ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n      ...Array.isArray(children) ? children : [children]\n    ]\n  )\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className\n      ),\n      ...props\n    })\n  );\n  Component.displayName = toPascalCase(iconName);\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8\", key: \"mg9rjx\" }\n  ]\n];\nconst Bold = createLucideIcon(\"bold\", __iconNode);\n\nexport { __iconNode, Bold as default };\n//# sourceMappingURL=bold.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]];\nconst ChevronLeft = createLucideIcon(\"chevron-left\", __iconNode);\n\nexport { __iconNode, ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]];\nconst ChevronRight = createLucideIcon(\"chevron-right\", __iconNode);\n\nexport { __iconNode, ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"m9 15 2 2 4-4\", key: \"1grp1n\" }]\n];\nconst FileCheck = createLucideIcon(\"file-check\", __iconNode);\n\nexport { __iconNode, FileCheck as default };\n//# sourceMappingURL=file-check.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n];\nconst FileText = createLucideIcon(\"file-text\", __iconNode);\n\nexport { __iconNode, FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"9\", y2: \"9\", key: \"4lhtct\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"15\", y2: \"15\", key: \"vyu0kd\" }],\n  [\"line\", { x1: \"10\", x2: \"8\", y1: \"3\", y2: \"21\", key: \"1ggp8o\" }],\n  [\"line\", { x1: \"16\", x2: \"14\", y1: \"3\", y2: \"21\", key: \"weycgp\" }]\n];\nconst Hash = createLucideIcon(\"hash\", __iconNode);\n\nexport { __iconNode, Hash as default };\n//# sourceMappingURL=hash.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M4 12h8\", key: \"17cfdx\" }],\n  [\"path\", { d: \"M4 18V6\", key: \"1rz3zl\" }],\n  [\"path\", { d: \"M12 18V6\", key: \"zqpxq5\" }],\n  [\"path\", { d: \"m17 12 3-2v8\", key: \"1hhhft\" }]\n];\nconst Heading1 = createLucideIcon(\"heading-1\", __iconNode);\n\nexport { __iconNode, Heading1 as default };\n//# sourceMappingURL=heading-1.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M4 12h8\", key: \"17cfdx\" }],\n  [\"path\", { d: \"M4 18V6\", key: \"1rz3zl\" }],\n  [\"path\", { d: \"M12 18V6\", key: \"zqpxq5\" }],\n  [\"path\", { d: \"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1\", key: \"9jr5yi\" }]\n];\nconst Heading2 = createLucideIcon(\"heading-2\", __iconNode);\n\nexport { __iconNode, Heading2 as default };\n//# sourceMappingURL=heading-2.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M4 12h8\", key: \"17cfdx\" }],\n  [\"path\", { d: \"M4 18V6\", key: \"1rz3zl\" }],\n  [\"path\", { d: \"M12 18V6\", key: \"zqpxq5\" }],\n  [\"path\", { d: \"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2\", key: \"68ncm8\" }],\n  [\"path\", { d: \"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2\", key: \"1ejuhz\" }]\n];\nconst Heading3 = createLucideIcon(\"heading-3\", __iconNode);\n\nexport { __iconNode, Heading3 as default };\n//# sourceMappingURL=heading-3.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", ry: \"2\", key: \"1m3agn\" }],\n  [\"circle\", { cx: \"9\", cy: \"9\", r: \"2\", key: \"af1f0g\" }],\n  [\"path\", { d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\", key: \"1xmnt7\" }]\n];\nconst Image = createLucideIcon(\"image\", __iconNode);\n\nexport { __iconNode, Image as default };\n//# sourceMappingURL=image.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"19\", x2: \"10\", y1: \"4\", y2: \"4\", key: \"15jd3p\" }],\n  [\"line\", { x1: \"14\", x2: \"5\", y1: \"20\", y2: \"20\", key: \"bu0au3\" }],\n  [\"line\", { x1: \"15\", x2: \"9\", y1: \"4\", y2: \"20\", key: \"uljnxc\" }]\n];\nconst Italic = createLucideIcon(\"italic\", __iconNode);\n\nexport { __iconNode, Italic as default };\n//# sourceMappingURL=italic.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\", key: \"1cjeqo\" }],\n  [\"path\", { d: \"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\", key: \"19qd67\" }]\n];\nconst Link = createLucideIcon(\"link\", __iconNode);\n\nexport { __iconNode, Link as default };\n//# sourceMappingURL=link.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M11 5h10\", key: \"1cz7ny\" }],\n  [\"path\", { d: \"M11 12h10\", key: \"1438ji\" }],\n  [\"path\", { d: \"M11 19h10\", key: \"11t30w\" }],\n  [\"path\", { d: \"M4 4h1v5\", key: \"10yrso\" }],\n  [\"path\", { d: \"M4 9h2\", key: \"r1h2o0\" }],\n  [\"path\", { d: \"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02\", key: \"xtkcd5\" }]\n];\nconst ListOrdered = createLucideIcon(\"list-ordered\", __iconNode);\n\nexport { __iconNode, ListOrdered as default };\n//# sourceMappingURL=list-ordered.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 5h.01\", key: \"18ugdj\" }],\n  [\"path\", { d: \"M3 12h.01\", key: \"nlz23k\" }],\n  [\"path\", { d: \"M3 19h.01\", key: \"noohij\" }],\n  [\"path\", { d: \"M8 5h13\", key: \"1pao27\" }],\n  [\"path\", { d: \"M8 12h13\", key: \"1za7za\" }],\n  [\"path\", { d: \"M8 19h13\", key: \"m83p4d\" }]\n];\nconst List = createLucideIcon(\"list\", __iconNode);\n\nexport { __iconNode, List as default };\n//# sourceMappingURL=list.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n];\nconst Plus = createLucideIcon(\"plus\", __iconNode);\n\nexport { __iconNode, Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21 7v6h-6\", key: \"3ptur4\" }],\n  [\"path\", { d: \"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7\", key: \"1kgawr\" }]\n];\nconst Redo = createLucideIcon(\"redo\", __iconNode);\n\nexport { __iconNode, Redo as default };\n//# sourceMappingURL=redo.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n];\nconst Settings = createLucideIcon(\"settings\", __iconNode);\n\nexport { __iconNode, Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344\", key: \"2acyp4\" }\n  ],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n];\nconst SquareCheckBig = createLucideIcon(\"square-check-big\", __iconNode);\n\nexport { __iconNode, SquareCheckBig as default };\n//# sourceMappingURL=square-check-big.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 4H9a3 3 0 0 0-2.83 4\", key: \"43sutm\" }],\n  [\"path\", { d: \"M14 12a4 4 0 0 1 0 8H6\", key: \"nlfj13\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }]\n];\nconst Strikethrough = createLucideIcon(\"strikethrough\", __iconNode);\n\nexport { __iconNode, Strikethrough as default };\n//# sourceMappingURL=strikethrough.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 3v18\", key: \"108xh3\" }],\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M3 9h18\", key: \"1pudct\" }],\n  [\"path\", { d: \"M3 15h18\", key: \"5xshup\" }]\n];\nconst Table = createLucideIcon(\"table\", __iconNode);\n\nexport { __iconNode, Table as default };\n//# sourceMappingURL=table.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21 5H3\", key: \"1fi0y6\" }],\n  [\"path\", { d: \"M17 12H7\", key: \"16if0g\" }],\n  [\"path\", { d: \"M19 19H5\", key: \"vjpgq2\" }]\n];\nconst TextAlignCenter = createLucideIcon(\"text-align-center\", __iconNode);\n\nexport { __iconNode, TextAlignCenter as default };\n//# sourceMappingURL=text-align-center.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21 5H3\", key: \"1fi0y6\" }],\n  [\"path\", { d: \"M21 12H9\", key: \"dn1m92\" }],\n  [\"path\", { d: \"M21 19H7\", key: \"4cu937\" }]\n];\nconst TextAlignEnd = createLucideIcon(\"text-align-end\", __iconNode);\n\nexport { __iconNode, TextAlignEnd as default };\n//# sourceMappingURL=text-align-end.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 5h18\", key: \"1u36vt\" }],\n  [\"path\", { d: \"M3 12h18\", key: \"1i2n21\" }],\n  [\"path\", { d: \"M3 19h18\", key: \"awlh7x\" }]\n];\nconst TextAlignJustify = createLucideIcon(\"text-align-justify\", __iconNode);\n\nexport { __iconNode, TextAlignJustify as default };\n//# sourceMappingURL=text-align-justify.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21 5H3\", key: \"1fi0y6\" }],\n  [\"path\", { d: \"M15 12H3\", key: \"6jk70r\" }],\n  [\"path\", { d: \"M17 19H3\", key: \"z6ezky\" }]\n];\nconst TextAlignStart = createLucideIcon(\"text-align-start\", __iconNode);\n\nexport { __iconNode, TextAlignStart as default };\n//# sourceMappingURL=text-align-start.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M6 4v6a6 6 0 0 0 12 0V4\", key: \"9kb039\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"20\", y2: \"20\", key: \"nun2al\" }]\n];\nconst Underline = createLucideIcon(\"underline\", __iconNode);\n\nexport { __iconNode, Underline as default };\n//# sourceMappingURL=underline.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 7v6h6\", key: \"1v2h90\" }],\n  [\"path\", { d: \"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13\", key: \"1r6uu6\" }]\n];\nconst Undo = createLucideIcon(\"undo\", __iconNode);\n\nexport { __iconNode, Undo as default };\n//# sourceMappingURL=undo.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n];\nconst X = createLucideIcon(\"x\", __iconNode);\n\nexport { __iconNode, X as default };\n//# sourceMappingURL=x.js.map\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { \r\n  FileText, \r\n  Hash, \r\n  FileCheck, \r\n  ChevronLeft, \r\n  ChevronRight,\r\n  Heading1,\r\n  Heading2,\r\n  Heading3,\r\n  List\r\n} from 'lucide-react';\r\nimport './Sidebar.css';\r\n\r\n/**\r\n * Sidebar Component\r\n * Displays document information, outline, and word count\r\n * @param {Object} props\r\n * @param {Object} props.editorView - Editor view instance (not used in contenteditable)\r\n * @param {boolean} props.isCollapsed - Whether sidebar is collapsed\r\n * @param {Function} props.onToggle - Callback for collapse toggle\r\n * @param {number} props.wordCount - Optional word count (for continuous mode)\r\n * @param {number} props.pageCount - Optional page count (for continuous mode)\r\n */\r\nexport const Sidebar = ({ editorView, isCollapsed, onToggle, wordCount: propWordCount, pageCount: propPageCount }) => {\r\n  const documentState = useSelector(state => state.document);\r\n  const { pages, activePage, continuousContent, editorMode } = documentState;\r\n  const [wordCount, setWordCount] = useState(0);\r\n  const [outline, setOutline] = useState([]);\r\n\r\n  // Calculate word count and extract outline from content\r\n  useEffect(() => {\r\n    // Use prop values if provided (continuous mode)\r\n    if (propWordCount !== undefined && propPageCount !== undefined) {\r\n      setWordCount(propWordCount);\r\n      \r\n      // Extract outline from continuous content\r\n      if (continuousContent) {\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = continuousContent;\r\n        const headingElements = tempDiv.querySelectorAll('h1, h2, h3, h4, h5, h6');\r\n        const headings = Array.from(headingElements).map((heading, index) => {\r\n          const level = parseInt(heading.tagName.charAt(1));\r\n          const text = heading.textContent.trim();\r\n          return text ? {\r\n            id: `heading-${index}`,\r\n            level,\r\n            text,\r\n            page: 1 // Continuous mode doesn't have meaningful page numbers for headings\r\n          } : null;\r\n        }).filter(Boolean);\r\n        setOutline(headings);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Paged mode: Calculate from pages array\r\n    let totalWords = 0;\r\n    const headings = [];\r\n\r\n    pages.forEach((page, pageIndex) => {\r\n      if (page.content) {\r\n        // Extract text content and count words\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = page.content;\r\n        const text = tempDiv.textContent || tempDiv.innerText || '';\r\n        const words = text.trim().split(/\\s+/).filter(word => word.length > 0);\r\n        totalWords += words.length;\r\n\r\n        // Extract headings for outline\r\n        const headingElements = tempDiv.querySelectorAll('h1, h2, h3, h4, h5, h6');\r\n        headingElements.forEach((heading, index) => {\r\n          const level = parseInt(heading.tagName.charAt(1));\r\n          const text = heading.textContent.trim();\r\n          if (text) {\r\n            headings.push({\r\n              id: `heading-${pageIndex}-${index}`,\r\n              level,\r\n              text,\r\n              page: pageIndex + 1\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    setWordCount(totalWords);\r\n    setOutline(headings);\r\n  }, [pages, propWordCount, propPageCount, continuousContent]);\r\n\r\n  const displayPageCount = propPageCount !== undefined ? propPageCount : pages.length;\r\n\r\n  return (\r\n    <aside \r\n      className={`sidebar ${isCollapsed ? 'collapsed' : ''}`} \r\n      role=\"complementary\"\r\n      aria-label=\"Document information\"\r\n      data-testid=\"sidebar\"\r\n    >\r\n      <div className=\"sidebar-header\">\r\n        <div className=\"sidebar-title\">\r\n          <FileText size={18} />\r\n          <h2>Document Info</h2>\r\n        </div>\r\n        <button\r\n          className=\"sidebar-toggle\"\r\n          onClick={onToggle}\r\n          aria-label={isCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\r\n          title={isCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\r\n        >\r\n          {isCollapsed ? <ChevronRight size={16} /> : <ChevronLeft size={16} />}\r\n        </button>\r\n      </div>\r\n\r\n      {!isCollapsed && (\r\n        <div className=\"sidebar-content\">\r\n          <div className=\"sidebar-section\">\r\n            <h3>Statistics</h3>\r\n            <div className=\"stat-item\">\r\n              <div className=\"stat-label\">\r\n                <FileCheck size={14} />\r\n                <span>Pages:</span>\r\n              </div>\r\n              <span className=\"stat-value\">{displayPageCount}</span>\r\n            </div>\r\n            <div className=\"stat-item\" data-testid=\"word-count\">\r\n              <div className=\"stat-label\">\r\n                <Hash size={14} />\r\n                <span>Words:</span>\r\n              </div>\r\n              <span className=\"stat-value\">{wordCount.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"stat-item\">\r\n              <div className=\"stat-label\">\r\n                <FileText size={14} />\r\n                <span>Active Page:</span>\r\n              </div>\r\n              <span className=\"stat-value\">{activePage + 1}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {outline.length > 0 && (\r\n            <div className=\"sidebar-section\">\r\n              <h3>\r\n                <List size={14} style={{ display: 'inline-block', marginRight: '6px', verticalAlign: 'middle' }} />\r\n                Document Outline\r\n              </h3>\r\n              <div className=\"document-outline\" data-testid=\"outline\">\r\n                {outline.map((heading) => {\r\n                  const HeadingIcon = heading.level === 1 ? Heading1 : heading.level === 2 ? Heading2 : Heading3;\r\n                  return (\r\n                    <div \r\n                      key={heading.id}\r\n                      className={`outline-item outline-level-${heading.level}`}\r\n                      style={{ marginLeft: `${(heading.level - 1) * 12}px` }}\r\n                    >\r\n                      <HeadingIcon size={12} className=\"outline-icon\" />\r\n                      <span className=\"outline-text\">{heading.text}</span>\r\n                      <span className=\"outline-page\">p.{heading.page}</span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"sidebar-section\">\r\n            <h3>Document</h3>\r\n            <p>HTML Editor</p>\r\n            <p>Multi-page support</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </aside>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n","/**\r\n * Local storage service for handling image persistence in the editor\r\n * Stores images as base64 data URLs with size validation\r\n */\r\n\r\n/**\r\n * Generates a UUID v4 string for unique image keys\r\n * @returns {string} UUID string\r\n */\r\nfunction generateUUID() {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n    const r = Math.random() * 16 | 0;\r\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n    return v.toString(16);\r\n  });\r\n}\r\n\r\n/**\r\n * Saves an image file to browser local storage\r\n * @param {File} file - Image file to store\r\n * @returns {Promise<string>} Promise resolving to storage key\r\n * @throws {Error} When image validation fails or storage quota exceeded\r\n */\r\nexport function saveImage(file) {\r\n  return new Promise((resolve, reject) => {\r\n    // Validate file type\r\n    const validTypes = ['image/png', 'image/jpeg', 'image/gif', 'image/webp'];\r\n    if (!validTypes.includes(file.type)) {\r\n      reject(new Error('Invalid image format. Supported formats: png, jpeg, gif, webp'));\r\n      return;\r\n    }\r\n\r\n    // Check file size (5MB limit)\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      reject(new Error('Image exceeds maximum size of 5MB'));\r\n      return;\r\n    }\r\n\r\n    const reader = new FileReader();\r\n    \r\n    reader.onload = (event) => {\r\n      const dataUrl = event.target.result;\r\n      \r\n      // Calculate base64 size (3 bytes for every 4 characters)\r\n      const base64String = dataUrl.split(',')[1];\r\n      const sizeInBytes = (base64String.length * 3) / 4;\r\n      \r\n      if (sizeInBytes > 5 * 1024 * 1024) {\r\n        reject(new Error('Image exceeds maximum size of 5MB'));\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const key = `editor-image-${generateUUID()}`;\r\n        localStorage.setItem(key, dataUrl);\r\n        resolve(key);\r\n      } catch (error) {\r\n        if (error.name === 'QuotaExceededError') {\r\n          reject(new Error('Storage quota exceeded'));\r\n        } else {\r\n          reject(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    reader.onerror = () => {\r\n      reject(new Error('Error reading image file'));\r\n    };\r\n\r\n    reader.readAsDataURL(file);\r\n  });\r\n}\r\n\r\n/**\r\n * Retrieves an image from local storage by key\r\n * @param {string} key - Storage key for the image\r\n * @returns {string|null} Data URL of the image or null if not found\r\n */\r\nexport function getImage(key) {\r\n  return localStorage.getItem(key);\r\n}\r\n\r\n/**\r\n * Deletes an image from local storage\r\n * @param {string} key - Storage key for the image\r\n */\r\nexport function deleteImage(key) {\r\n  localStorage.removeItem(key);\r\n}\r\n\r\n/**\r\n * Clears all editor images from local storage\r\n */\r\nexport function clearImages() {\r\n  Object.keys(localStorage).forEach(key => {\r\n    if (key.startsWith('editor-image-')) {\r\n      localStorage.removeItem(key);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Gets all stored image keys\r\n * @returns {string[]} Array of image storage keys\r\n */\r\nexport function getAllImageKeys() {\r\n  return Object.keys(localStorage).filter(key => \r\n    key.startsWith('editor-image-')\r\n  );\r\n}","/**\r\n * Logger utility for the editor\r\n * Provides consistent logging across the application\r\n * Disabled in production for performance\r\n */\r\n\r\nconst isDevelopment = import.meta.env.MODE === 'development';\r\n\r\n/**\r\n * Logger class for structured logging\r\n */\r\nclass Logger {\r\n  constructor(namespace = 'Editor') {\r\n    this.namespace = namespace;\r\n  }\r\n\r\n  /**\r\n   * Formats log message with namespace\r\n   * @param {string} level - Log level\r\n   * @param {string} message - Log message\r\n   * @param {any} data - Optional data to log\r\n   * @returns {string} Formatted message\r\n   */\r\n  _format(level, message, data) {\r\n    const timestamp = new Date().toISOString();\r\n    return `[${timestamp}] [${this.namespace}] [${level}] ${message}`;\r\n  }\r\n\r\n  /**\r\n   * Info level logging\r\n   * @param {string} message - Info message\r\n   * @param {any} data - Optional data\r\n   */\r\n  info(message, data) {\r\n    if (!isDevelopment) return;\r\n    \r\n    console.log(this._format('INFO', message));\r\n    if (data) console.log(data);\r\n  }\r\n\r\n  /**\r\n   * Warning level logging\r\n   * @param {string} message - Warning message\r\n   * @param {any} data - Optional data\r\n   */\r\n  warn(message, data) {\r\n    if (!isDevelopment) return;\r\n    \r\n    console.warn(this._format('WARN', message));\r\n    if (data) console.warn(data);\r\n  }\r\n\r\n  /**\r\n   * Error level logging\r\n   * @param {string} message - Error message\r\n   * @param {Error|any} error - Error object or data\r\n   */\r\n  error(message, error) {\r\n    if (!isDevelopment) return;\r\n    \r\n    console.error(this._format('ERROR', message));\r\n    if (error) {\r\n      if (error instanceof Error) {\r\n        console.error(error.message);\r\n        console.error(error.stack);\r\n      } else {\r\n        console.error(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Debug level logging\r\n   * @param {string} message - Debug message\r\n   * @param {any} data - Optional data\r\n   */\r\n  debug(message, data) {\r\n    if (!isDevelopment) return;\r\n    \r\n    console.debug(this._format('DEBUG', message));\r\n    if (data) console.debug(data);\r\n  }\r\n}\r\n\r\n// Create default logger instance\r\nexport const logger = new Logger('Editor');\r\n\r\n// Export Logger class for custom instances\r\nexport default Logger;\r\n","import React from 'react';\r\nimport { \r\n  Bold, \r\n  Italic, \r\n  Underline, \r\n  Strikethrough,\r\n  AlignLeft,\r\n  AlignCenter,\r\n  AlignRight,\r\n  AlignJustify,\r\n  List,\r\n  ListOrdered,\r\n  CheckSquare,\r\n  Link,\r\n  Table,\r\n  FileText,\r\n  Undo,\r\n  Redo,\r\n  Image as ImageIcon\r\n} from 'lucide-react';\r\nimport { saveImage } from '../../lib/storage/local-storage';\r\nimport { logger } from '../../lib/editor/utils/logger';\r\n\r\n/**\r\n * EditorToolbar - Formatting toolbar for the multi-page editor\r\n * Provides text formatting, alignment, lists, links, tables, and image insertion\r\n */\r\nconst EditorToolbar = ({ \r\n  currentFormat, \r\n  pageSize, \r\n  onFormatText, \r\n  onPageSizeChange,\r\n  onAddPageBreak\r\n}) => {\r\n  /**\r\n   * Handle image upload\r\n   */\r\n  const handleImageUpload = async (file) => {\r\n    try {\r\n      const validTypes = ['image/png', 'image/jpeg', 'image/gif', 'image/webp'];\r\n      if (!validTypes.includes(file.type)) {\r\n        alert('Invalid image format. Supported: PNG, JPEG, GIF, WEBP');\r\n        return;\r\n      }\r\n\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        alert('Image exceeds maximum size of 5MB');\r\n        return;\r\n      }\r\n\r\n      const key = await saveImage(file);\r\n      const imageUrl = localStorage.getItem(key);\r\n      \r\n      if (imageUrl) {\r\n        document.execCommand('insertImage', false, imageUrl);\r\n        logger.info('Image inserted', { key });\r\n      }\r\n    } catch (error) {\r\n      logger.error('Error uploading image', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"editor-toolbar\">\r\n      <button \r\n        onClick={() => onFormatText('bold')} \r\n        className={currentFormat.bold ? 'active' : ''} \r\n        title=\"Bold\"\r\n      >\r\n        <Bold size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('italic')} \r\n        className={currentFormat.italic ? 'active' : ''} \r\n        title=\"Italic\"\r\n      >\r\n        <Italic size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('underline')} \r\n        className={currentFormat.underline ? 'active' : ''} \r\n        title=\"Underline\"\r\n      >\r\n        <Underline size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('strikethrough')} \r\n        className={currentFormat.strikethrough ? 'active' : ''} \r\n        title=\"Strikethrough\"\r\n      >\r\n        <Strikethrough size={16} />\r\n      </button>\r\n      \r\n      <div className=\"toolbar-separator\" />\r\n      \r\n      <button \r\n        onClick={() => onFormatText('justifyLeft')} \r\n        className={currentFormat.alignLeft ? 'active' : ''} \r\n        title=\"Align Left\"\r\n      >\r\n        <AlignLeft size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('justifyCenter')} \r\n        className={currentFormat.alignCenter ? 'active' : ''} \r\n        title=\"Align Center\"\r\n      >\r\n        <AlignCenter size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('justifyRight')} \r\n        className={currentFormat.alignRight ? 'active' : ''} \r\n        title=\"Align Right\"\r\n      >\r\n        <AlignRight size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('justifyFull')} \r\n        className={currentFormat.alignJustify ? 'active' : ''} \r\n        title=\"Justify\"\r\n      >\r\n        <AlignJustify size={16} />\r\n      </button>\r\n      \r\n      <div className=\"toolbar-separator\" />\r\n      \r\n      <select \r\n        onChange={(e) => onFormatText('fontName', e.target.value)}\r\n        defaultValue=\"Arial\"\r\n        title=\"Font Family\"\r\n      >\r\n        <option value=\"Arial\">Arial</option>\r\n        <option value=\"Times New Roman\">Times New Roman</option>\r\n        <option value=\"Courier New\">Courier New</option>\r\n        <option value=\"Georgia\">Georgia</option>\r\n        <option value=\"Verdana\">Verdana</option>\r\n      </select>\r\n      \r\n      <select \r\n        onChange={(e) => onFormatText('fontSize', e.target.value)}\r\n        defaultValue=\"12px\"\r\n        title=\"Font Size\"\r\n      >\r\n        <option value=\"10px\">10</option>\r\n        <option value=\"12px\">12</option>\r\n        <option value=\"14px\">14</option>\r\n        <option value=\"16px\">16</option>\r\n        <option value=\"18px\">18</option>\r\n        <option value=\"24px\">24</option>\r\n        <option value=\"32px\">32</option>\r\n      </select>\r\n      \r\n      <div className=\"toolbar-separator\" />\r\n      \r\n      <button \r\n        onClick={() => onFormatText('insertUnorderedList')} \r\n        title=\"Bullet List\"\r\n      >\r\n        <List size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('insertOrderedList')} \r\n        title=\"Numbered List\"\r\n      >\r\n        <ListOrdered size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('insertCheckList')} \r\n        title=\"Checklist\"\r\n      >\r\n        <CheckSquare size={16} />\r\n      </button>\r\n      \r\n      <div className=\"toolbar-separator\" />\r\n      \r\n      <button \r\n        onClick={() => {\r\n          const url = prompt('Enter URL:');\r\n          if (url) onFormatText('createLink', url);\r\n        }} \r\n        title=\"Insert Link\"\r\n      >\r\n        <Link size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('insertHTML', '<table border=\"1\"><tr><td>Cell 1</td><td>Cell 2</td></tr><tr><td>Cell 3</td><td>Cell 4</td></tr></table>')} \r\n        title=\"Insert Table\"\r\n      >\r\n        <Table size={16} />\r\n      </button>\r\n      \r\n      {onAddPageBreak && (\r\n        <button \r\n          onClick={onAddPageBreak} \r\n          title=\"Insert Page Break\"\r\n        >\r\n          <FileText size={16} />\r\n        </button>\r\n      )}\r\n      \r\n      <div className=\"toolbar-separator\" />\r\n      \r\n      <button \r\n        onClick={() => onFormatText('undo')} \r\n        title=\"Undo\"\r\n      >\r\n        <Undo size={16} />\r\n      </button>\r\n      <button \r\n        onClick={() => onFormatText('redo')} \r\n        title=\"Redo\"\r\n      >\r\n        <Redo size={16} />\r\n      </button>\r\n      \r\n      <div className=\"toolbar-separator\" />\r\n      \r\n      <input \r\n        type=\"file\" \r\n        accept=\"image/*\" \r\n        onChange={(e) => e.target.files[0] && handleImageUpload(e.target.files[0])}\r\n        style={{ display: 'none' }}\r\n        id=\"image-upload\"\r\n      />\r\n      <button \r\n        onClick={() => document.getElementById('image-upload').click()} \r\n        title=\"Insert Image\"\r\n      >\r\n        <ImageIcon size={16} />\r\n      </button>\r\n      \r\n      <div className=\"toolbar-separator\" />\r\n      \r\n      <select \r\n        value={pageSize}\r\n        onChange={(e) => onPageSizeChange(e.target.value)}\r\n        title=\"Page Size\"\r\n      >\r\n        <option value=\"A4\">A4</option>\r\n        <option value=\"Letter\">Letter</option>\r\n        <option value=\"Legal\">Legal</option>\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditorToolbar;\r\n","import React from 'react';\r\n\r\n/**\r\n * ContinuousPageView - MS Word-like continuous contenteditable surface\r\n * Single contenteditable div with manual page breaks using <page-break> tags\r\n * Content flows continuously with explicit page boundaries\r\n */\r\nconst ContinuousPageView = ({ \r\n  content, \r\n  dimensions, \r\n  pageSize,\r\n  pageBoundaries = [],\r\n  editorRef,\r\n  onInput,\r\n  onKeyDown,\r\n  onClick,\r\n  onScroll\r\n}) => {\r\n  const padding = {\r\n    top: 60,\r\n    bottom: 100,\r\n    left: 72,\r\n    right: 72\r\n  };\r\n\r\n  // Prevent deletion of page-break elements and handle Tab key\r\n  const handleKeyDown = (event) => {\r\n    // Handle Tab key to insert tab character\r\n    if (event.key === 'Tab') {\r\n      event.preventDefault();\r\n      document.execCommand('insertHTML', false, '&nbsp;&nbsp;&nbsp;&nbsp;');\r\n      return false;\r\n    }\r\n\r\n    const selection = window.getSelection();\r\n    if (!selection || selection.rangeCount === 0) return;\r\n\r\n    const range = selection.getRangeAt(0);\r\n    const { startContainer, endContainer } = range;\r\n\r\n    // Check if we're trying to delete a page-break\r\n    const checkNode = (node) => {\r\n      if (!node) return false;\r\n      if (node.nodeType === Node.ELEMENT_NODE) {\r\n        return node.tagName === 'PAGE-BREAK' || node.getAttribute('data-page-break') === 'true';\r\n      }\r\n      return node.parentElement && checkNode(node.parentElement);\r\n    };\r\n\r\n    if (event.key === 'Backspace' || event.key === 'Delete') {\r\n      if (checkNode(startContainer) || checkNode(endContainer)) {\r\n        event.preventDefault();\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (onKeyDown) {\r\n      onKeyDown(event);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className=\"continuous-page-container\"\r\n      style={{\r\n        position: 'relative',\r\n        width: '100%',\r\n        maxWidth: `${dimensions.width}px`,\r\n        margin: '40px auto',\r\n        backgroundColor: 'transparent',\r\n        minHeight: '100vh'\r\n      }}\r\n    >\r\n      {/* Continuous contenteditable surface with page styling */}\r\n      <div\r\n        ref={editorRef}\r\n        contentEditable={true}\r\n        suppressContentEditableWarning={true}\r\n        className=\"continuous-content\"\r\n        style={{\r\n          position: 'relative',\r\n          zIndex: 1,\r\n          minHeight: `${dimensions.height}px`,\r\n          backgroundColor: 'white',\r\n          padding: `${padding.top}px ${padding.right}px ${padding.bottom}px ${padding.left}px`,\r\n          boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',\r\n          outline: 'none',\r\n          cursor: 'text',\r\n          fontFamily: 'Arial, sans-serif',\r\n          fontSize: '12px',\r\n          lineHeight: '1.15',\r\n          color: '#333',\r\n          wordWrap: 'break-word',\r\n          whiteSpace: 'pre-wrap',\r\n          overflowWrap: 'break-word',\r\n          border: '1px solid #e0e0e0'\r\n        }}\r\n        onInput={onInput}\r\n        onKeyDown={handleKeyDown}\r\n        onClick={onClick}\r\n        onScroll={onScroll}\r\n        data-testid=\"continuous-editor\"\r\n      >\r\n        {/* Content is set via innerHTML in parent component */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContinuousPageView;\r\n","import React, { useRef, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { FileText, Plus, X, Settings, ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport { \r\n  setActivePage, \r\n  addPageBreak, \r\n  removePageBreak, \r\n  updatePageSize \r\n} from '../../store/slices/documentSlice';\r\n\r\n/**\r\n * PageManager Component\r\n * Redux-connected component for managing document pages\r\n * Displays page thumbnails, navigation controls, and page settings\r\n * \r\n * @param {Object} props - Optional callbacks for external integrations\r\n * @param {Function} props.onNavigate - Optional callback when page changes (pageIndex)\r\n * @param {Function} props.onAddPage - Optional callback when page is added\r\n * @param {Function} props.onDeletePage - Optional callback when page is deleted (pageIndex)\r\n * @param {Function} props.onPageSizeChange - Optional callback when page size changes (newSize)\r\n * @param {Object} props.scrollContainerRef - Ref to the scroll container for navigation\r\n */\r\nexport const PageManager = ({ \r\n  onNavigate, \r\n  onAddPage,\r\n  onDeletePage,\r\n  onPageSizeChange,\r\n  scrollContainerRef\r\n} = {}) => {\r\n  const dispatch = useDispatch();\r\n  const { pageBoundaries, activePage, pageSize } = useSelector((state) => state.document);\r\n  const navigationTimeoutRef = useRef(null);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (navigationTimeoutRef.current) {\r\n        clearTimeout(navigationTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Construct pages array from pageBoundaries for display\r\n  const pages = pageBoundaries.map((boundary, index) => ({\r\n    id: boundary.id || `page-${index}`,\r\n    index,\r\n    size: pageSize\r\n  }));\r\n\r\n  const totalPages = pages.length || 1;\r\n\r\n  /**\r\n   * Scroll to a specific page in the editor and position cursor\r\n   */\r\n  const scrollToPageInEditor = (pageIndex, boundary) => {\r\n    if (!scrollContainerRef?.current) {\r\n      return;\r\n    }\r\n\r\n    const container = scrollContainerRef.current;\r\n    \r\n    // Scroll to the page with smooth behavior\r\n    container.scrollTo({\r\n      top: boundary.top - 40, // Offset for better visibility\r\n      behavior: 'smooth'\r\n    });\r\n\r\n    // Position cursor at the start of the page after scrolling\r\n    setTimeout(() => {\r\n      positionCursorAtPage(pageIndex);\r\n    }, 400); // Wait for smooth scroll to complete\r\n  };\r\n\r\n  /**\r\n   * Position cursor at the start of a specific page\r\n   */\r\n  const positionCursorAtPage = (pageIndex) => {\r\n    // Find the contenteditable element\r\n    const editorElement = scrollContainerRef?.current?.querySelector('[contenteditable=\"true\"]');\r\n    if (!editorElement) {\r\n      return;\r\n    }\r\n\r\n    editorElement.focus();\r\n\r\n    try {\r\n      let targetNode = null;\r\n      let targetOffset = 0;\r\n\r\n      if (pageIndex === 0) {\r\n        // First page - position at start\r\n        targetNode = editorElement.firstChild;\r\n        targetOffset = 0;\r\n      } else {\r\n        // Find the page break element for this page\r\n        const pageBreaks = editorElement.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n        const breakElement = pageBreaks[pageIndex - 1];\r\n        \r\n        if (breakElement && breakElement.nextSibling) {\r\n          targetNode = breakElement.nextSibling;\r\n          targetOffset = 0;\r\n        }\r\n      }\r\n\r\n      if (targetNode) {\r\n        const range = document.createRange();\r\n        const selection = window.getSelection();\r\n        \r\n        // If target is a text node, use it directly\r\n        if (targetNode.nodeType === Node.TEXT_NODE) {\r\n          range.setStart(targetNode, targetOffset);\r\n        } else if (targetNode.firstChild) {\r\n          // If it's an element, try to position at its first child\r\n          range.setStart(targetNode.firstChild, 0);\r\n        } else {\r\n          // Otherwise position at the element itself\r\n          range.setStart(targetNode, 0);\r\n        }\r\n        \r\n        range.collapse(true);\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n      }\r\n    } catch (error) {\r\n      console.warn('[positionCursorAtPage] Failed to position cursor:', error);\r\n      // Fallback: just focus the editor\r\n      editorElement.focus();\r\n    }\r\n  };\r\n\r\n  const handleNavigate = (pageIndex) => {\r\n    // Update Redux state immediately\r\n    dispatch(setActivePage(pageIndex));\r\n    \r\n    // Scroll to the page if we have the container ref\r\n    if (scrollContainerRef?.current && pageBoundaries[pageIndex]) {\r\n      // Clear any pending navigation\r\n      if (navigationTimeoutRef.current) {\r\n        clearTimeout(navigationTimeoutRef.current);\r\n      }\r\n      \r\n      // Immediate scroll and cursor positioning\r\n      navigationTimeoutRef.current = setTimeout(() => {\r\n        scrollToPageInEditor(pageIndex, pageBoundaries[pageIndex]);\r\n      }, 50);\r\n    }\r\n    \r\n    // Call parent callback if provided\r\n    if (onNavigate) {\r\n      onNavigate(pageIndex);\r\n    }\r\n  };\r\n\r\n  const handleAddPage = () => {\r\n    dispatch(addPageBreak({ position: 'end' }));\r\n    if (onAddPage) {\r\n      onAddPage();\r\n    }\r\n  };\r\n\r\n  const handleDeletePage = (pageIndex) => {\r\n    if (totalPages <= 1) {\r\n      console.warn('Cannot delete the only page');\r\n      return;\r\n    }\r\n    \r\n    dispatch(removePageBreak({ pageIndex }));\r\n    if (onDeletePage) {\r\n      onDeletePage(pageIndex);\r\n    }\r\n  };\r\n\r\n  const handlePageSizeChange = (newSize) => {\r\n    dispatch(updatePageSize(newSize));\r\n    if (onPageSizeChange) {\r\n      onPageSizeChange(newSize);\r\n    }\r\n  };\r\n\r\n  const handlePreviousPage = () => {\r\n    if (activePage > 0) {\r\n      handleNavigate(activePage - 1);\r\n    }\r\n  };\r\n\r\n  const handleNextPage = () => {\r\n    if (activePage < totalPages - 1) {\r\n      handleNavigate(activePage + 1);\r\n    }\r\n  };\r\n\r\n  // Keyboard navigation\r\n  React.useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      // Only handle keyboard navigation if PageManager is visible and focused\r\n      if (!e.target.closest('.page-manager')) return;\r\n      \r\n      if (e.ctrlKey || e.metaKey) {\r\n        if (e.key === 'ArrowUp' || e.key === 'PageUp') {\r\n          e.preventDefault();\r\n          handlePreviousPage();\r\n        } else if (e.key === 'ArrowDown' || e.key === 'PageDown') {\r\n          e.preventDefault();\r\n          handleNextPage();\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [activePage, totalPages]);\r\n\r\n  return (\r\n    <div className=\"page-manager\">\r\n      {/* Page Size Selector */}\r\n      <div className=\"page-size-controls\">\r\n        <label htmlFor=\"page-size-selector\">\r\n          <Settings size={14} style={{ marginRight: '4px', verticalAlign: 'middle' }} />\r\n          Page Size:\r\n        </label>\r\n        <select\r\n          id=\"page-size-selector\"\r\n          role=\"combobox\"\r\n          aria-label=\"Page size selector\"\r\n          value={pageSize}\r\n          onChange={(e) => handlePageSizeChange(e.target.value)}\r\n        >\r\n          <option value=\"A4\">A4</option>\r\n          <option value=\"Letter\">Letter</option>\r\n          <option value=\"Legal\">Legal</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Page Counter and Navigation */}\r\n      <div className=\"page-navigation-controls\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"nav-button\"\r\n          onClick={handlePreviousPage}\r\n          disabled={activePage === 0}\r\n          aria-label=\"Previous page\"\r\n          title=\"Previous page (Ctrl+)\"\r\n        >\r\n          <ChevronLeft size={16} />\r\n        </button>\r\n        <span className=\"page-counter\" aria-live=\"polite\">\r\n          Page {activePage + 1} of {totalPages}\r\n        </span>\r\n        <button\r\n          type=\"button\"\r\n          className=\"nav-button\"\r\n          onClick={handleNextPage}\r\n          disabled={activePage >= totalPages - 1}\r\n          aria-label=\"Next page\"\r\n          title=\"Next page (Ctrl+)\"\r\n        >\r\n          <ChevronRight size={16} />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Page List */}\r\n      <div className=\"page-list\">\r\n        {pages.map((page, index) => (\r\n          <div key={page.id} className=\"page-item\">\r\n            <button\r\n              type=\"button\"\r\n              className={`page-button ${index === activePage ? 'active' : ''}`}\r\n              onClick={() => handleNavigate(index)}\r\n              aria-label={`Go to page ${index + 1}`}\r\n              aria-current={index === activePage ? 'page' : undefined}\r\n            >\r\n              <FileText size={14} />\r\n              <span>Page {index + 1}</span>\r\n            </button>\r\n            {/* Show delete button for all pages when more than 1 page exists */}\r\n            {totalPages > 1 && (\r\n              <button\r\n                type=\"button\"\r\n                className=\"delete-page-button\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  handleDeletePage(index);\r\n                }}\r\n                aria-label={`Delete page ${index + 1}`}\r\n                title=\"Delete this page and its content\"\r\n              >\r\n                <X size={14} />\r\n              </button>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      \r\n      {/* Add Page Button */}\r\n      <button\r\n        type=\"button\"\r\n        className=\"add-page-button\"\r\n        onClick={handleAddPage}\r\n        aria-label=\"Add new page\"\r\n        title=\"Add new page at end\"\r\n      >\r\n        <Plus size={16} />\r\n        <span>Add Page</span>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageManager;","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  setActivePage,\r\n  updatePageSize,\r\n  updateContinuousContent,\r\n  addPageBreak,\r\n  removePageBreak\r\n} from '../../store/slices/documentSlice';\r\nimport { useFormatting, useContinuousReflow } from '../../hooks';\r\nimport Sidebar from './Sidebar';\r\nimport EditorToolbar from './EditorToolbar';\r\nimport ContinuousPageView from './ContinuousPageView';\r\nimport PageManager from './PageManager';\r\nimport './MultiPageEditor.css';\r\nconst PAGE_DIMENSIONS = {\r\n  A4: { width: 794, height: 1123 },\r\n  Letter: { width: 816, height: 1056 },\r\n  Legal: { width: 816, height: 1344 }\r\n};\r\n\r\n/**\r\n * ContentEditableEditor - Main WYSIWYG HTML Editor Component\r\n * \r\n * @param {Object} props\r\n * @param {React.ReactNode} props.pageManagerComponent - Optional custom PageManager component from parent app\r\n * @param {Function} props.onNavigatePage - Optional callback when navigating to a page (pageIndex)\r\n * @param {Function} props.onAddPage - Optional callback when adding a page\r\n * @param {Function} props.onDeletePage - Optional callback when deleting a page (pageIndex)\r\n * @param {Function} props.onPageSizeChange - Optional callback when page size changes (newSize)\r\n * @param {boolean} props.showSidebar - Whether to show the sidebar (default: true)\r\n * @param {boolean} props.showToolbar - Whether to show the toolbar (default: true)\r\n * @param {boolean} props.showPageManager - Whether to show the PageManager component (default: true)\r\n */\r\nconst ContentEditableEditor = ({\r\n  pageManagerComponent = null,\r\n  onNavigatePage,\r\n  onAddPage,\r\n  onDeletePage,\r\n  onPageSizeChange: onPageSizeChangeCallback,\r\n  showSidebar = true,\r\n  showToolbar = true,\r\n  showPageManager = true\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const documentState = useSelector((state) => state.document);\r\n  const { pageSize, continuousContent, pageBoundaries, activePage } = documentState;\r\n\r\n  const containerRef = useRef(null);\r\n  const editorRef = useRef(null);\r\n\r\n  const { currentFormat, formatText } = useFormatting();\r\n  const { \r\n    checkAndUpdateBoundaries, \r\n    getCurrentPage, \r\n    scrollToPage,\r\n    positionCursorAtPage,\r\n    updateBoundaries,\r\n    triggerAutoReflow,\r\n    removePageAndContent\r\n  } = useContinuousReflow(pageSize, editorRef);\r\n\r\n  const dimensions = PAGE_DIMENSIONS[pageSize] || PAGE_DIMENSIONS.A4;\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n\r\n  // Initialize editor content\r\n  useEffect(() => {\r\n    if (editorRef.current && editorRef.current.innerHTML !== continuousContent) {\r\n      editorRef.current.innerHTML = continuousContent;\r\n      // Calculate initial boundaries after content is set\r\n      setTimeout(() => {\r\n        updateBoundaries();\r\n      }, 100);\r\n    }\r\n  }, [continuousContent, updateBoundaries]);\r\n\r\n  // Focus editor on mount\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      if (editorRef.current) {\r\n        editorRef.current.focus();\r\n      }\r\n    }, 200);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  const handleInput = useCallback((event) => {\r\n    const html = event.currentTarget.innerHTML;\r\n    dispatch(updateContinuousContent(html));\r\n    \r\n    // Update page boundaries after content change\r\n    checkAndUpdateBoundaries();\r\n    \r\n    // Trigger automatic reflow to insert page breaks when content overflows\r\n    triggerAutoReflow();\r\n    \r\n    // Update active page based on cursor position\r\n    const currentPage = getCurrentPage();\r\n    if (currentPage !== activePage) {\r\n      dispatch(setActivePage(currentPage));\r\n    }\r\n  }, [checkAndUpdateBoundaries, dispatch, getCurrentPage, activePage, triggerAutoReflow]);\r\n\r\n  const handlePageSizeChange = useCallback((newSize) => {\r\n    dispatch(updatePageSize(newSize));\r\n    // Recalculate boundaries with new page size\r\n    updateBoundaries({ pageSize: newSize });\r\n    \r\n    // Call parent callback if provided\r\n    if (onPageSizeChangeCallback) {\r\n      onPageSizeChangeCallback(newSize);\r\n    }\r\n  }, [dispatch, updateBoundaries, onPageSizeChangeCallback]);\r\n\r\n  const handleNavigatePage = useCallback((pageIndex) => {\r\n    dispatch(setActivePage(pageIndex));\r\n    scrollToPage(pageIndex, containerRef);\r\n    \r\n    // Call parent callback if provided\r\n    if (onNavigatePage) {\r\n      onNavigatePage(pageIndex);\r\n    }\r\n  }, [dispatch, scrollToPage, onNavigatePage]);\r\n\r\n  const handleAddPage = useCallback(() => {\r\n    // Add a page break at the end\r\n    dispatch(addPageBreak({ position: 'end' }));\r\n    \r\n    // Update boundaries after adding page break\r\n    setTimeout(() => {\r\n      updateBoundaries();\r\n    }, 100);\r\n    \r\n    // Call parent callback if provided\r\n    if (onAddPage) {\r\n      onAddPage();\r\n    }\r\n  }, [dispatch, updateBoundaries, onAddPage]);\r\n\r\n  const handleAddPageBreak = useCallback(() => {\r\n    // Insert page break at current cursor position\r\n    const selection = window.getSelection();\r\n    if (selection && selection.rangeCount > 0) {\r\n      if (!editorRef?.current) return;\r\n      \r\n      // Count existing page breaks to determine the page number\r\n      const existingBreaks = editorRef.current.querySelectorAll('page-break, [data-page-break=\"true\"]');\r\n      const pageNumber = existingBreaks.length + 2; // +2 because we're creating a break for the next page\r\n      \r\n      const pageBreakHTML = `<page-break data-page-break=\"true\" contenteditable=\"false\" data-page-number=\"${pageNumber}\"></page-break><p><br></p>`;\r\n      \r\n      // Insert the page break\r\n      document.execCommand('insertHTML', false, pageBreakHTML);\r\n      \r\n      // Update boundaries after a short delay\r\n      setTimeout(() => {\r\n        updateBoundaries();\r\n      }, 100);\r\n    }\r\n  }, [updateBoundaries, editorRef]);\r\n\r\n  const handleDeletePage = useCallback((pageIndex) => {\r\n    if (pageBoundaries.length <= 1) {\r\n      console.warn('Cannot delete the only page');\r\n      return;\r\n    }\r\n    \r\n    // Use the new removePageAndContent function from the hook\r\n    // This will remove both the page break and all content within that page\r\n    const success = removePageAndContent(pageIndex);\r\n    \r\n    if (success) {\r\n      // Set active page to the first page after deletion\r\n      dispatch(setActivePage(0));\r\n      \r\n      // Call parent callback if provided\r\n      if (onDeletePage) {\r\n        onDeletePage(pageIndex);\r\n      }\r\n    }\r\n  }, [pageBoundaries.length, removePageAndContent, dispatch, onDeletePage]);\r\n\r\n  const handleScroll = useCallback(() => {\r\n    if (!containerRef.current || !editorRef.current) return;\r\n\r\n    // Update active page based on scroll position\r\n    const currentPage = getCurrentPage();\r\n    if (currentPage !== activePage) {\r\n      dispatch(setActivePage(currentPage));\r\n    }\r\n  }, [getCurrentPage, activePage, dispatch]);\r\n\r\n  // Word count for sidebar\r\n  const wordCount = continuousContent\r\n    ? (continuousContent.replace(/<[^>]*>/g, ' ').match(/\\b\\w+\\b/g) || []).length\r\n    : 0;\r\n\r\n  const totalPages = pageBoundaries.length || 1;\r\n\r\n  return (\r\n    <div className=\"multi-page-editor\">\r\n      {showToolbar && (\r\n        <EditorToolbar\r\n          currentFormat={currentFormat}\r\n          pageSize={pageSize}\r\n          onFormatText={formatText}\r\n          onPageSizeChange={handlePageSizeChange}\r\n          onAddPageBreak={handleAddPageBreak}\r\n        />\r\n      )}\r\n\r\n      <div className=\"editor-container\">\r\n        {showSidebar && (\r\n          <Sidebar\r\n            editorView={null}\r\n            isCollapsed={sidebarCollapsed}\r\n            onToggle={() => setSidebarCollapsed((prev) => !prev)}\r\n            wordCount={wordCount}\r\n            pageCount={totalPages}\r\n          />\r\n        )}\r\n\r\n        <div\r\n          className=\"editor-viewport continuous-scroll\"\r\n          ref={containerRef}\r\n          onScroll={handleScroll}\r\n        >\r\n          <ContinuousPageView\r\n            content={continuousContent}\r\n            dimensions={dimensions}\r\n            pageSize={pageSize}\r\n            pageBoundaries={pageBoundaries}\r\n            editorRef={editorRef}\r\n            onInput={handleInput}\r\n            onClick={() => editorRef.current?.focus()}\r\n          />\r\n        </div>\r\n\r\n        {/* Render PageManager only if showPageManager is true */}\r\n        {showPageManager && (\r\n          <div className=\"page-manager-sidebar\">\r\n            {pageManagerComponent ? (\r\n              React.cloneElement(pageManagerComponent, {\r\n                onNavigate: handleNavigatePage,\r\n                onAddPage: handleAddPage,\r\n                onDeletePage: handleDeletePage,\r\n                onPageSizeChange: handlePageSizeChange,\r\n                scrollContainerRef: containerRef\r\n              })\r\n            ) : (\r\n              <PageManager\r\n                onNavigate={onNavigatePage}\r\n                onAddPage={onAddPage}\r\n                onDeletePage={onDeletePage}\r\n                onPageSizeChange={onPageSizeChangeCallback}\r\n                scrollContainerRef={containerRef}\r\n              />\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContentEditableEditor;\r\n","// Main library entry point\r\n// Export all public components, hooks, and utilities\r\n\r\n// Core Editor Component (without PageManager)\r\nexport { default as ContentEditableEditor } from './components/editor/ContentEditableEditor';\r\n\r\n// Individual Components (can be used separately)\r\nexport { default as EditorToolbar } from './components/editor/EditorToolbar';\r\nexport { default as Sidebar } from './components/editor/Sidebar';\r\nexport { default as ContinuousPageView } from './components/editor/ContinuousPageView';\r\n\r\n// PageManager is exported separately so parent apps can customize or replace it\r\nexport { default as PageManager } from './components/editor/PageManager';\r\n\r\n// Custom Hooks\r\nexport { useFormatting, useContinuousReflow } from './hooks';\r\n\r\n// Redux Store and Slice\r\nexport { default as documentReducer } from './store/slices/documentSlice';\r\nexport {\r\n  initializeDocument,\r\n  updateTitle,\r\n  updatePageContent,\r\n  updatePages,\r\n  addPage,\r\n  deletePage,\r\n  setActivePage,\r\n  updatePageSize,\r\n  resetDocument,\r\n  updateContinuousContent,\r\n  updatePageBoundaries,\r\n  addPageBreak,\r\n  removePageBreak,\r\n  setEditorMode,\r\n  insertPageAt,\r\n  movePageTo,\r\n  duplicatePage\r\n} from './store/slices/documentSlice';\r\n\r\n// Storage utilities\r\nexport { saveImage, getImage, deleteImage, clearImages, getAllImageKeys } from './lib/storage/local-storage';\r\n\r\n// Constants\r\nexport const PAGE_DIMENSIONS = {\r\n  A4: { width: 794, height: 1123 },\r\n  Letter: { width: 816, height: 1056 },\r\n  Legal: { width: 816, height: 1344 }\r\n};\r\n\r\n// Logger utility\r\nexport { default as logger } from './lib/editor/utils/logger';\r\n"],"names":["REACT_ELEMENT_TYPE","REACT_FRAGMENT_TYPE","jsxProd","type","config","maybeKey","key","propName","reactJsxRuntime_production","getComponentNameFromType","REACT_CLIENT_REFERENCE","REACT_PROFILER_TYPE","REACT_STRICT_MODE_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_ACTIVITY_TYPE","REACT_PORTAL_TYPE","REACT_CONTEXT_TYPE","REACT_CONSUMER_TYPE","REACT_FORWARD_REF_TYPE","innerType","REACT_MEMO_TYPE","REACT_LAZY_TYPE","testStringCoercion","value","checkKeyStringCoercion","JSCompiler_inline_result","JSCompiler_temp_const","JSCompiler_inline_result$jscomp$0","getTaskName","name","getOwner","dispatcher","ReactSharedInternals","UnknownOwner","hasValidKey","hasOwnProperty","getter","defineKeyPropWarningGetter","props","displayName","warnAboutAccessingKey","specialPropKeyWarningShown","elementRefGetterWithDeprecationWarning","componentName","didWarnAboutElementRef","ReactElement","owner","debugStack","debugTask","refProp","jsxDEVImpl","isStaticChildren","children","isArrayImpl","validateChildKeys","keys","k","didWarnAboutKeySpread","node","isValidElement","object","React","require$$0","createTask","callStackForError","unknownOwnerDebugStack","unknownOwnerDebugTask","reactJsxRuntime_development","trackActualOwner","jsxRuntimeModule","require$$1","DEFAULT_PAGE_SIZE","EMPTY_PARAGRAPH","createEmptyPage","index","size","uuidv4","withMinimumPage","pages","pageSize","page","sanitizeContent","html","buildInitialState","overrides","now","initialState","documentSlice","createSlice","state","action","initialContent","pageIndex","content","payload","nextPages","_","insertIndex","newSize","position","pageBreakTag","before","after","tempDiv","pageBreaks","targetBreak","newBreak","newParagraph","breakEl","newMode","allContent","newContent","fromIndex","toIndex","segments","currentNode","currentSegment","movedSegment","segment","pageContent","currentPageIndex","duplicateContent","wrapper","insertAfter","child","initializeDocument","updateTitle","updatePageContent","updatePages","addPage","deletePage","setActivePage","updatePageSize","resetDocument","updateContinuousContent","updatePageBoundaries","addPageBreak","removePageBreak","setEditorMode","insertPageAt","movePageTo","duplicatePage","documentSlice$1","useFormatting","currentFormat","setCurrentFormat","useState","formatText","useCallback","command","sizeNumber","selection","range","span","prev","PAGE_DIMENSIONS","CONTENT_PADDING","useContinuousReflow","editorRef","dispatch","useDispatch","boundaryTimeoutRef","useRef","reflowTimeoutRef","latestPageSizeRef","isReflowingRef","useEffect","findOverflowPoint","pageElements","maxHeight","currentHeight","i","element","elementHeight","insertPageBreakBefore","targetElement","pageNumber","editor","pageBreak","error","checkAndReflow","targetPageSize","allChildren","existingBreaks","el","currentPage","insertedBreaks","overflow","updateBoundaries","triggerAutoReflow","delay","calculatePageBoundaries","options","dimensions","pageBreakElements","boundaries","rect","editorRect","relativeTop","checkAndUpdateBoundaries","getCurrentPage","scrollToPage","containerRef","targetBoundary","b","positionCursorAtPage","targetNode","targetOffset","breakElement","removePageAndContent","cursorWasInDeletedContent","nodesToRemove","pageBreakToRemove","firstPageBreak","pageBreakElement","nextPageBreakElement","cursorNode","updatedHTML","toKebabCase","string","toCamelCase","match","p1","p2","toPascalCase","camelCase","mergeClasses","classes","className","array","hasA11yProp","prop","defaultAttributes","Icon","forwardRef","color","strokeWidth","absoluteStrokeWidth","iconNode","rest","ref","createElement","tag","attrs","createLucideIcon","iconName","Component","Bold","ChevronLeft","ChevronRight","FileCheck","FileText","Hash","Heading1","Heading2","Heading3","Image","Italic","Link","ListOrdered","List","Plus","Redo","Settings","SquareCheckBig","Strikethrough","Table","TextAlignCenter","TextAlignEnd","TextAlignJustify","TextAlignStart","Underline","Undo","X","Sidebar","editorView","isCollapsed","onToggle","propWordCount","propPageCount","documentState","useSelector","activePage","continuousContent","editorMode","wordCount","setWordCount","outline","setOutline","headingElements","headings","heading","level","text","totalWords","words","word","displayPageCount","jsxs","jsx","HeadingIcon","generateUUID","c","r","saveImage","file","resolve","reject","reader","event","dataUrl","getImage","deleteImage","clearImages","getAllImageKeys","Logger","namespace","message","data","logger","EditorToolbar","onFormatText","onPageSizeChange","onAddPageBreak","handleImageUpload","imageUrl","AlignLeft","AlignCenter","AlignRight","AlignJustify","e","CheckSquare","url","ImageIcon","ContinuousPageView","pageBoundaries","onInput","onKeyDown","onClick","onScroll","padding","handleKeyDown","startContainer","endContainer","checkNode","PageManager","onNavigate","onAddPage","onDeletePage","scrollContainerRef","navigationTimeoutRef","boundary","totalPages","scrollToPageInEditor","editorElement","handleNavigate","handleAddPage","handleDeletePage","handlePageSizeChange","handlePreviousPage","handleNextPage","ContentEditableEditor","pageManagerComponent","onNavigatePage","onPageSizeChangeCallback","showSidebar","showToolbar","showPageManager","sidebarCollapsed","setSidebarCollapsed","timer","handleInput","handleNavigatePage","handleAddPageBreak","pageBreakHTML","handleScroll"],"mappings":"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","x_google_ignoreList":[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]}